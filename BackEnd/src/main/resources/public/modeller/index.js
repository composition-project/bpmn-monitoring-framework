!function o(a,s,c){function l(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[n]={exports:{}};a[n][0].call(r.exports,function(e){var t=a[n][1][e];return l(t||e)},r,r.exports,o,a,s,c)}return s[n].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,n){"use strict";var r=e("jquery"),o=e("bpmn-js/lib/Modeler"),a=e("bpmn-js-properties-panel"),s=e("./provider/composition"),i=e("angular"),c=(r("#container"),r("#js-canvas"));i.module("bpmnModellerApp",[]).controller("BpmnModellerController",["$scope","$http","$compile",function(i,e,t){i.screen={isVisible:!0,type:"main"},i.dialog={isVisible:!1,type:"msg",msgContent:"",listContent:[],dfmUploadId:""},i.bpmnModeler=new o({container:c,propertiesPanel:{parent:"#js-properties-panel"},additionalModules:[a,s]}),i.loadUploadedDiagram=function(){i.showLoadingScreen(),e.get("/rest/bpmn/local").then(function(e){""==e.data?i.showMsgDialog("No BPMN model has been uploaded to the monitoring framework yet. "):i.openDiagram(e.data)},function(e){i.showMsgDialog("Error while loading local BPMN")})},i.loadDFMDiagramList=function(){i.showLoadingScreen(),e.get("/rest/bpmn/remote").then(function(e){i.showDFMListDialog(e.data)},function(e){i.showMsgDialog("Error getting model list from DFM ")})},i.loadRemoteDiagram=function(t){i.showLoadingScreen(),e.get("/rest/bpmn/remote/"+t).then(function(e){console.log(e.data),i.openDiagram(e.data)},function(e){i.showMsgDialog("Error getting model with ID "+t+" from DFM")})},i.loadHardDriveDiagram=function(e){if(0!=e.files.length){var t=e.files[0],n=new FileReader;n.onload=function(e){var t=e.target.result;i.openDiagram(t)},n.readAsText(t)}},i.createNewDiagram=function(){i.openDiagram('<?xml version="1.0" encoding="UTF-8"?>\n<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn">\n  <bpmn2:process id="Process_1" isExecutable="false">\n    <bpmn2:startEvent id="StartEvent_1"/>\n  </bpmn2:process>\n  <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">\n      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">\n        <dc:Bounds height="36.0" width="36.0" x="412.0" y="240.0"/>\n      </bpmndi:BPMNShape>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn2:definitions>')},i.openDiagram=function(e){i.bpmnModeler.importXML(e,function(e){e?(i.showMsgDialog("Error while trying to display BPMN: "+e.message),console.error(e)):(i.closeScreen(),i.closeDialog()),i.$digest()})},i.uploadDiagram=function(){i.bpmnModeler.saveXML({format:!0},function(e,t){r.post("/rest/bpmn/local",t).done(function(){alert("BPMN post successful!")}).fail(function(){alert("BPMN post failed!")})})},i.uploadDiagramToDFM=function(){i.bpmnModeler.saveXML({format:!0},function(e,t){r.post("/rest/bpmn/remote",t).done(function(){alert("BPMN post to DFM successful!")}).fail(function(){alert("BPMN post to DFM failed!")})})},i.downloadBpmn=function(){i.bpmnModeler.saveXML({format:!0},function(e,t){var n=document.createElement("a");n.setAttribute("href","data:application/bpmn20-xml;charset=UTF-8,"+encodeURIComponent(t)),n.setAttribute("download","diagram.xml"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)})},i.downloadSvg=function(){i.bpmnModeler.saveSVG(function(e,t){var n=document.createElement("a");n.setAttribute("href","data:application/bpmn20-xml;charset=UTF-8,"+encodeURIComponent(t)),n.setAttribute("download","diagram.svg"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)})},i.showMainScreen=function(){i.screen.isVisible=!0,i.screen.type="main"},i.showLoadingScreen=function(){i.screen.isVisible=!0,i.screen.type="loading"},i.closeScreen=function(){i.screen.isVisible=!1},i.showMsgDialog=function(e){i.dialog.isVisible=!0,i.dialog.type="msg",i.dialog.msgContent=e},i.showDFMListDialog=function(e){i.dialog.isVisible=!0,i.dialog.type="dfm_list",i.dialog.listContent=e},i.showUploadToDFMDialog=function(){i.dialog.isVisible=!0,i.dialog.type="dfm_upload",i.dialog.dfmUploadId=""},i.closeDialog=function(){i.dialog.isVisible=!1}}])},{"./provider/composition":3,angular:5,"bpmn-js-properties-panel":6,"bpmn-js/lib/Modeler":46,jquery:344}],2:[function(e,t,n){"use strict";var i=e("inherits"),r=e("bpmn-js-properties-panel/lib/PropertiesActivator"),s=(e("bpmn-js/lib/util/ModelUtil").is,e("bpmn-js-properties-panel/lib/provider/bpmn/parts/EventProps")),c=e("bpmn-js-properties-panel/lib/provider/bpmn/parts/LinkProps"),l=e("bpmn-js-properties-panel/lib/provider/bpmn/parts/DocumentationProps"),u=e("bpmn-js-properties-panel/lib/provider/bpmn/parts/IdProps"),p=e("bpmn-js-properties-panel/lib/provider/bpmn/parts/NameProps");e("bpmn-js/lib/util/ModelUtil").getBusinessObject;function o(e,t,n,i){r.call(this,e),this.getTabs=function(e){return[{id:"general",label:i("General"),groups:function(e,t,n,i){var r={id:"general",label:i("General"),entries:[]};u(r,e,i),p(r,e,i);var o={id:"details",label:i("Details"),entries:[]};c(o,e,i),s(o,e,t,n,i);var a={id:"documentation",label:i("Documentation"),entries:[]};return l(a,e,t,i),[r,o,a]}(e,t,n,i)}]}}o.$inject=["eventBus","bpmnFactory","elementRegistry","translate"],i(o,r),t.exports=o},{"bpmn-js-properties-panel/lib/PropertiesActivator":7,"bpmn-js-properties-panel/lib/provider/bpmn/parts/DocumentationProps":31,"bpmn-js-properties-panel/lib/provider/bpmn/parts/EventProps":32,"bpmn-js-properties-panel/lib/provider/bpmn/parts/IdProps":33,"bpmn-js-properties-panel/lib/provider/bpmn/parts/LinkProps":34,"bpmn-js-properties-panel/lib/provider/bpmn/parts/NameProps":35,"bpmn-js/lib/util/ModelUtil":140,inherits:343}],3:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/i18n/translate")],__init__:["propertiesProvider"],propertiesProvider:["type",e("./CompositionPropertiesProvider")]}},{"./CompositionPropertiesProvider":2,"diagram-js/lib/i18n/translate":328}],4:[function(e,t,n){!function(H){"use strict";var c={objectMaxDepth:5};function e(e){if(!Ee(e))return c;xe(e.objectMaxDepth)&&(c.objectMaxDepth=l(e.objectMaxDepth)?e.objectMaxDepth:NaN)}function l(e){return $(e)&&0<e}function A(a,s){return s=s||Error,function(){var e,t,n=arguments[0],i=arguments[1],r="["+(a?a+":":"")+n+"] ",o=Re(arguments,2).map(function(e){return Ye(e,c.objectMaxDepth)});for(r+=i.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t<o.length?o[t]:e}),r+="\nhttp://errors.angularjs.org/1.6.9/"+(a?a+"/":"")+n,t=0,e="?";t<o.length;t++,e="&")r+=e+"p"+t+"="+encodeURIComponent(o[t]);return new s(r)}}var o=/^\/(.+)\/([a-z]*)$/,p="validity",V=Object.prototype.hasOwnProperty,ue=function(e){return we(e)?e.toLowerCase():e},u=function(e){return we(e)?e.toUpperCase():e};"i"!=="I".toLowerCase()&&(ue=function(e){return we(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},u=function(e){return we(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e});var pe,de,a,g,s=[].slice,i=[].splice,t=[].push,he=Object.prototype.toString,d=Object.getPrototypeOf,h=A("ng"),b=H.angular||(H.angular={}),n=0;function D(e){if(null==e||k(e))return!1;if($e(e)||we(e)||de&&e instanceof de)return!0;var t="length"in Object(e)&&e.length;return $(t)&&(0<=t&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function fe(e,t,n){var i,r;if(e)if(Se(e))for(i in e)"prototype"!==i&&"length"!==i&&"name"!==i&&e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else if($e(e)||D(e)){var o="object"!=typeof e;for(i=0,r=e.length;i<r;i++)(o||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==fe)e.forEach(t,n,e);else if(w(e))for(i in e)t.call(n,e[i],i,e);else if("function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else for(i in e)V.call(e,i)&&t.call(n,e[i],i,e);return e}function f(e,t,n){for(var i=Object.keys(e).sort(),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function y(n){return function(e,t){n(t,e)}}function T(){return++n}function m(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function v(e,t,n){for(var i=e.$$hashKey,r=0,o=t.length;r<o;++r){var a=t[r];if(Ee(a)||Se(a))for(var s=Object.keys(a),c=0,l=s.length;c<l;c++){var u=s[c],p=a[u];n&&Ee(p)?_(p)?e[u]=new Date(p.valueOf()):S(p)?e[u]=new RegExp(p):p.nodeName?e[u]=p.cloneNode(!0):O(p)?e[u]=p.clone():(Ee(e[u])||(e[u]=$e(p)?[]:{}),v(e[u],[p],!0)):e[u]=p}}return m(e,i),e}function me(e){return v(e,s.call(arguments,1),!1)}function r(e){return v(e,s.call(arguments,1),!0)}function x(e){return parseInt(e,10)}pe=H.document.documentMode;var j=Number.isNaN||function(e){return e!=e};function ve(e,t){return me(Object.create(e),t)}function ge(){}function ye(e){return e}function C(e){return function(){return e}}function E(e){return Se(e.toString)&&e.toString!==he}function be(e){return void 0===e}function xe(e){return void 0!==e}function Ee(e){return null!==e&&"object"==typeof e}function w(e){return null!==e&&"object"==typeof e&&!d(e)}function we(e){return"string"==typeof e}function $(e){return"number"==typeof e}function _(e){return"[object Date]"===he.call(e)}ge.$inject=[],ye.$inject=[];var $e=Array.isArray;function _e(e){switch(he.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function Se(e){return"function"==typeof e}function S(e){return"[object RegExp]"===he.call(e)}function k(e){return e&&e.window===e}function Ce(e){return e&&e.$evalAsync&&e.$watch}function Ae(e){return"boolean"==typeof e}function M(e){return e&&Se(e.then)}var P=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var Te=function(e){return we(e)?e.trim():e},R=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function O(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function je(e){return ue(e.nodeName||e[0]&&e[0].nodeName)}function N(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function ke(e,t){var n=e.indexOf(t);return 0<=n&&e.splice(n,1),n}function B(e,n,t){var i,r,o=[],a=[];if(t=l(t)?t:NaN,n){if((r=n)&&$(r.length)&&P.test(he.call(r))||(i=n,"[object ArrayBuffer]"===he.call(i)))throw h("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===n)throw h("cpi","Can't copy! Source and destination are identical.");return $e(n)?n.length=0:fe(n,function(e,t){"$$hashKey"!==t&&delete n[t]}),o.push(e),a.push(n),s(e,n,t)}return c(e,t);function s(e,t,n){if(--n<0)return"...";var i,r=t.$$hashKey;if($e(e))for(var o=0,a=e.length;o<a;o++)t.push(c(e[o],n));else if(w(e))for(i in e)t[i]=c(e[i],n);else if(e&&"function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&(t[i]=c(e[i],n));else for(i in e)V.call(e,i)&&(t[i]=c(e[i],n));return m(t,r),t}function c(e,t){if(!Ee(e))return e;var n=o.indexOf(e);if(-1!==n)return a[n];if(k(e)||Ce(e))throw h("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,r=function(e){switch(he.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(c(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(Se(e.cloneNode))return e.cloneNode(!0)}(e);return void 0===r&&(r=$e(e)?[]:Object.create(d(e)),i=!0),o.push(e),a.push(r),i?s(e,r,t):r}}function Me(e,t){return e===t||e!=e&&t!=t}function Pe(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,i,r,o=typeof e;if(o===typeof t&&"object"===o){if(!$e(e)){if(_(e))return!!_(t)&&Me(e.getTime(),t.getTime());if(S(e))return!!S(t)&&e.toString()===t.toString();if(Ce(e)||Ce(t)||k(e)||k(t)||$e(t)||_(t)||S(t))return!1;for(i in r=Fe(),e)if("$"!==i.charAt(0)&&!Se(e[i])){if(!Pe(e[i],t[i]))return!1;r[i]=!0}for(i in t)if(!(i in r)&&"$"!==i.charAt(0)&&xe(t[i])&&!Se(t[i]))return!1;return!0}if(!$e(t))return!1;if((n=e.length)===t.length){for(i=0;i<n;i++)if(!Pe(e[i],t[i]))return!1;return!0}}return!1}var L=function(){if(!xe(L.rules)){var e=H.document.querySelector("[ng-csp]")||H.document.querySelector("[data-ng-csp]");if(e){var t=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");L.rules={noUnsafeEval:!t||-1!==t.indexOf("no-unsafe-eval"),noInlineStyle:!t||-1!==t.indexOf("no-inline-style")}}else L.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return L.rules},I=function(){if(xe(I.name_))return I.name_;var e,t,n,i,r=ee.length;for(t=0;t<r;++t)if(n=ee[t],e=H.document.querySelector("["+n.replace(":","\\:")+"jq]")){i=e.getAttribute(n+"jq");break}return I.name_=i};function F(e,t,n){return e.concat(s.call(t,n))}function Re(e,t){return s.call(e,t||0)}function De(e,t){var n=2<arguments.length?Re(arguments,2):[];return!Se(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,F(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function U(e,t){var n=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?n=void 0:k(t)?n="$WINDOW":t&&H.document===t?n="$DOCUMENT":Ce(t)&&(n="$SCOPE"),n}function z(e,t){if(!be(e))return $(t)||(t=t?2:null),JSON.stringify(e,U,t)}function q(e){return we(e)?JSON.parse(e):e}var W=/:/g;function G(e,t){e=e.replace(W,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return j(n)?t:n}function Y(e,t,n){n=n?-1:1;var i,r,o=e.getTimezoneOffset(),a=G(t,o);return i=e,r=n*(a-o),(i=new Date(i.getTime())).setMinutes(i.getMinutes()+r),i}function Oe(e){e=de(e).clone().empty();var t=de("<div>").append(e).html();try{return e[0].nodeType===Ve?ue(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+ue(t)})}catch(e){return ue(t)}}function K(e){try{return decodeURIComponent(e)}catch(e){}}function X(e){var r={};return fe((e||"").split("&"),function(e){var t,n,i;e&&(n=e=e.replace(/\+/g,"%20"),-1!==(t=e.indexOf("="))&&(n=e.substring(0,t),i=e.substring(t+1)),xe(n=K(n))&&(i=!xe(i)||K(i),V.call(r,n)?$e(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i))}),r}function Z(e){var n=[];return fe(e,function(e,t){$e(e)?fe(e,function(e){n.push(Q(t,!0)+(!0===e?"":"="+Q(e,!0)))}):n.push(Q(t,!0)+(!0===e?"":"="+Q(e,!0)))}),n.length?n.join("&"):""}function J(e){return Q(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Q(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var ee=["ng-","data-ng-","ng:","x-ng-"];var te=function(n){var e=n.currentScript;if(!e)return!0;if(!(e instanceof H.HTMLScriptElement||e instanceof H.SVGScriptElement))return!1;var t=e.attributes;return[t.getNamedItem("src"),t.getNamedItem("href"),t.getNamedItem("xlink:href")].every(function(e){if(!e)return!0;if(!e.value)return!1;var t=n.createElement("a");if(t.href=e.value,n.location.origin===t.origin)return!0;switch(t.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(H.document);function ne(i,e){var r,o,t={};if(fe(ee,function(e){var t=e+"app";!r&&i.hasAttribute&&i.hasAttribute(t)&&(o=(r=i).getAttribute(t))}),fe(ee,function(e){var t,n=e+"app";!r&&(t=i.querySelector("["+n.replace(":","\\:")+"]"))&&(o=(r=t).getAttribute(n))}),r){if(!te)return void H.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");t.strictDi=null!==function(e,t){var n,i,r=ee.length;for(i=0;i<r;++i)if(n=ee[i]+t,we(n=e.getAttribute(n)))return n;return null}(r,"strict-di"),e(r,o?[o]:[],t)}}function ie(n,i,r){Ee(r)||(r={});r=me({strictDi:!1},r);var t=function(){if((n=de(n)).injector()){var e=n[0]===H.document?"document":Oe(n);throw h("btstrpd","App already bootstrapped with this element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}(i=i||[]).unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.debugInfoEnabled&&i.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),i.unshift("ng");var t=Xt(i,r.strictDi);return t.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),t},e=/^NG_ENABLE_DEBUG_INFO!/,o=/^NG_DEFER_BOOTSTRAP!/;if(H&&e.test(H.name)&&(r.debugInfoEnabled=!0,H.name=H.name.replace(e,"")),H&&!o.test(H.name))return t();H.name=H.name.replace(o,""),b.resumeBootstrap=function(e){return fe(e,function(e){i.push(e)}),t()},Se(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function re(){H.name="NG_ENABLE_DEBUG_INFO!"+H.name,H.location.reload()}function oe(e){var t=b.element(e).injector();if(!t)throw h("test","no injector found for element argument to getTestability");return t.get("$$testability")}var ae=/[A-Z]/g;function Ne(e,n){return n=n||"_",e.replace(ae,function(e,t){return(t?n:"")+e.toLowerCase()})}var se=!1;function Be(e,t,n){if(!e)throw h("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function ce(e,t,n){return n&&$e(e)&&(e=e[e.length-1]),Be(Se(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function Le(e,t){if("hasOwnProperty"===e)throw h("badname","hasOwnProperty is not a valid {0} name",t)}function le(e,t,n){if(!t)return e;for(var i,r=t.split("."),o=e,a=r.length,s=0;s<a;s++)i=r[s],e&&(e=(o=e)[i]);return!n&&Se(e)?De(o,e):e}function Ie(e){for(var t,n=e[0],i=e[e.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(t||e[r]!==n)&&(t||(t=de(s.call(e,0,r))),t.push(n));return t||e}function Fe(){return Object.create(null)}function Ue(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!E(e)||$e(e)||_(e)?z(e):e.toString()}return e}var He=1,Ve=3,ze=8,qe=9,We=11;function Ge(e,t){if($e(e)){t=t||[];for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}else if(Ee(e))for(var r in t=t||{},e)"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r]);return t||e}function Ye(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):be(e)?"undefined":"string"!=typeof e?(n=e,r=[],l(i=t)&&(n=b.copy(n,null,i)),JSON.stringify(n,function(e,t){if(Ee(t=U(e,t))){if(0<=r.indexOf(t))return"...";r.push(t)}return t})):e;var n,i,r}var Ke={full:"1.6.9",major:1,minor:6,dot:9,codeName:"fiery-basilisk"};ht.expando="ng339";var Xe=ht.cache={},Ze=1;ht._data=function(e){return this.cache[e[this.expando]]||{}};var Je=/-([a-z])/g,Qe=/^-ms-/,et={mouseleave:"mouseout",mouseenter:"mouseover"},tt=A("jqLite");function nt(e,t){return t.toUpperCase()}function it(e){return e.replace(Je,nt)}var rt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ot=/<|&#?\w+;/,at=/<([\w:-]+)/,st=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ct={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function lt(e){return!ot.test(e)}function ut(e){var t=e.nodeType;return t===He||!t||t===qe}function pt(e,t){var n,i,r,o,a=t.createDocumentFragment(),s=[];if(lt(e))s.push(t.createTextNode(e));else{for(n=a.appendChild(t.createElement("div")),i=(at.exec(e)||["",""])[1].toLowerCase(),r=ct[i]||ct._default,n.innerHTML=r[1]+e.replace(st,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;s=F(s,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",fe(s,function(e){a.appendChild(e)}),a}ct.optgroup=ct.option,ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td;var dt=H.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};function ht(e){if(e instanceof ht)return e;var t,n,i,r;if(we(e)&&(e=Te(e),t=!0),!(this instanceof ht)){if(t&&"<"!==e.charAt(0))throw tt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ht(e)}t?$t(this,(n=e,i=i||H.document,(r=rt.exec(n))?[i.createElement(r[1])]:(r=pt(n,i))?r.childNodes:[])):Se(e)?Tt(e):$t(this,e)}function ft(e){return e.cloneNode(!0)}function mt(e,t){!t&&ut(e)&&de.cleanData([e]),e.querySelectorAll&&de.cleanData(e.querySelectorAll("*"))}function vt(n,e,i,t){if(xe(t))throw tt("offargs","jqLite#off() does not support the `selector` argument");var r=yt(n),o=r&&r.events,a=r&&r.handle;if(a)if(e){var s=function(e){var t=o[e];xe(i)&&ke(t||[],i),xe(i)&&t&&0<t.length||(n.removeEventListener(e,a),delete o[e])};fe(e.split(" "),function(e){s(e),et[e]&&s(et[e])})}else for(e in o)"$destroy"!==e&&n.removeEventListener(e,a),delete o[e]}function gt(e,t){var n=e.ng339,i=n&&Xe[n];if(i){if(t)return void delete i.data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),vt(e)),delete Xe[n],e.ng339=void 0}}function yt(e,t){var n=e.ng339,i=n&&Xe[n];return t&&!i&&(e.ng339=n=++Ze,i=Xe[n]={events:{},data:{},handle:void 0}),i}function bt(e,t,n){if(ut(e)){var i,r=xe(n),o=!r&&t&&!Ee(t),a=!t,s=yt(e,!o),c=s&&s.data;if(r)c[it(t)]=n;else{if(a)return c;if(o)return c&&c[it(t)];for(i in t)c[it(i)]=t[i]}}}function xt(e,t){return!!e.getAttribute&&-1<(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")}function Et(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n;fe(t.split(" "),function(e){e=Te(e),i=i.replace(" "+e+" "," ")}),i!==n&&e.setAttribute("class",Te(i))}}function wt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n;fe(t.split(" "),function(e){e=Te(e),-1===i.indexOf(" "+e+" ")&&(i+=e+" ")}),i!==n&&e.setAttribute("class",Te(i))}}function $t(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;i<n;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function _t(e,t){return St(e,"$"+(t||"ngController")+"Controller")}function St(e,t,n){e.nodeType===qe&&(e=e.documentElement);for(var i=$e(t)?t:[t];e;){for(var r=0,o=i.length;r<o;r++)if(xe(n=de.data(e,i[r])))return n;e=e.parentNode||e.nodeType===We&&e.host}}function Ct(e){for(mt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function At(e,t){t||mt(e);var n=e.parentNode;n&&n.removeChild(e)}function Tt(e){function t(){H.document.removeEventListener("DOMContentLoaded",t),H.removeEventListener("load",t),e()}"complete"===H.document.readyState?H.setTimeout(e):(H.document.addEventListener("DOMContentLoaded",t),H.addEventListener("load",t))}var jt=ht.prototype={ready:Tt,toString:function(){var t=[];return fe(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(e){return de(0<=e?this[e]:this[this.length+e])},length:0,push:t,sort:[].sort,splice:[].splice},kt={};fe("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){kt[ue(e)]=e});var Mt={};fe("input,select,option,textarea,button,form,details".split(","),function(e){Mt[e]=!0});var Pt={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Rt(e,t){var n=kt[t.toLowerCase()];return n&&Mt[je(e)]&&n}function Dt(e,t,n){n.call(e,t)}function Ot(e,t,n){var i=t.relatedTarget;i&&(i===e||dt.call(e,i))||n.call(e,t)}function Nt(){this.$get=function(){return me(ht,{hasClass:function(e,t){return e.attr&&(e=e[0]),xt(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),wt(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Et(e,t)}})}}function Bt(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var i=typeof e;return n="function"===i||"object"===i&&null!==e?e.$$hashKey=i+":"+(t||T)():i+":"+e}fe({data:bt,removeData:gt,hasData:function(e){for(var t in Xe[e.ng339])return!0;return!1},cleanData:function(e){for(var t=0,n=e.length;t<n;t++)gt(e[t])}},function(e,t){ht[t]=e}),fe({data:bt,inheritedData:St,scope:function(e){return de.data(e,"$scope")||St(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return de.data(e,"$isolateScope")||de.data(e,"$isolateScopeNoTemplate")},controller:_t,injector:function(e){return St(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:xt,css:function(e,t,n){if(t=it(t.replace(Qe,"ms-")),!xe(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var i,r=e.nodeType;if(r!==Ve&&2!==r&&r!==ze&&e.getAttribute){var o=ue(t),a=kt[o];if(!xe(n))return i=e.getAttribute(t),a&&null!==i&&(i=o),null===i?void 0:i;null===n||!1===n&&a?e.removeAttribute(t):e.setAttribute(t,a?o:n)}},prop:function(e,t,n){if(!xe(n))return e[t];e[t]=n},text:function(){return e.$dv="",e;function e(e,t){if(be(t)){var n=e.nodeType;return n===He||n===Ve?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(be(t)){if(e.multiple&&"select"===je(e)){var n=[];return fe(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){if(be(t))return e.innerHTML;mt(e,!0),e.innerHTML=t},empty:Ct},function(l,e){ht.prototype[e]=function(e,t){var n,i,r=this.length;if(l!==Ct&&be(2===l.length&&l!==xt&&l!==_t?e:t)){if(Ee(e)){for(n=0;n<r;n++)if(l===bt)l(this[n],e);else for(i in e)l(this[n],i,e[i]);return this}for(var o=l.$dv,a=be(o)?Math.min(r,1):r,s=0;s<a;s++){var c=l(this[s],e,t);o=o?o+c:c}return o}for(n=0;n<r;n++)l(this[n],e,t);return this}}),fe({removeData:gt,on:function(r,e,o,t){if(xe(t))throw tt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ut(r)){var s,c,n,i=yt(r,!0),a=i.events,l=i.handle;l||(l=i.handle=(c=a,(n=function(e,t){e.isDefaultPrevented=function(){return e.defaultPrevented};var n=c[t||e.type],i=n?n.length:0;if(i){if(be(e.immediatePropagationStopped)){var r=e.stopImmediatePropagation;e.stopImmediatePropagation=function(){e.immediatePropagationStopped=!0,e.stopPropagation&&e.stopPropagation(),r&&r.call(e)}}e.isImmediatePropagationStopped=function(){return!0===e.immediatePropagationStopped};var o=n.specialHandlerWrapper||Dt;1<i&&(n=Ge(n));for(var a=0;a<i;a++)e.isImmediatePropagationStopped()||o(s,e,n[a])}}).elem=s=r,n));for(var u=0<=e.indexOf(" ")?e.split(" "):[e],p=u.length,d=function(e,t,n){var i=a[e];i||((i=a[e]=[]).specialHandlerWrapper=t,"$destroy"===e||n||r.addEventListener(e,l)),i.push(o)};p--;)e=u[p],et[e]?(d(et[e],Ot),d(e,void 0,!0)):d(e)}},off:vt,one:function(t,n,i){(t=de(t)).on(n,function e(){t.off(n,i),t.off(n,e)}),t.on(n,i)},replaceWith:function(t,e){var n,i=t.parentNode;mt(t),fe(new ht(e),function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e})},children:function(e){var t=[];return fe(e.childNodes,function(e){e.nodeType===He&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===He||n===We)for(var i=0,r=(t=new ht(t)).length;i<r;i++){var o=t[i];e.appendChild(o)}},prepend:function(t,e){if(t.nodeType===He){var n=t.firstChild;fe(new ht(e),function(e){t.insertBefore(e,n)})}},wrap:function(e,t){var n,i,r;n=e,i=de(t).eq(0).clone()[0],(r=n.parentNode)&&r.replaceChild(i,n),i.appendChild(n)},remove:At,detach:function(e){At(e,!0)},after:function(e,t){var n=e,i=e.parentNode;if(i)for(var r=0,o=(t=new ht(t)).length;r<o;r++){var a=t[r];i.insertBefore(a,n.nextSibling),n=a}},addClass:wt,removeClass:Et,toggleClass:function(n,e,i){e&&fe(e.split(" "),function(e){var t=i;be(t)&&(t=!xt(n,e)),(t?wt:Et)(n,e)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==We?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:ft,triggerHandler:function(t,e,n){var i,r,o,a=e.type||e,s=yt(t),c=s&&s.events,l=c&&c[a];l&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:ge,type:a,target:t},e.type&&(i=me(i,e)),r=Ge(l),o=n?[i].concat(n):[i],fe(r,function(e){i.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(a,e){ht.prototype[e]=function(e,t,n){for(var i,r=0,o=this.length;r<o;r++)be(i)?xe(i=a(this[r],e,t,n))&&(i=de(i)):$t(i,a(this[r],e,t,n));return xe(i)?i:this}}),ht.prototype.bind=ht.prototype.on,ht.prototype.unbind=ht.prototype.off;var Lt=Object.create(null);function It(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}It.prototype={_idx:function(e){return e===this._lastKey||(this._lastKey=e,this._lastIndex=this._keys.indexOf(e)),this._lastIndex},_transformKey:function(e){return j(e)?Lt:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(-1!==t)return this._values[t]},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Ft=It,Ut=[function(){this.$get=[function(){return Ft}]}],Ht=/^([^(]+?)=>/,Vt=/^[^(]*\(\s*([^)]*)\)/m,zt=/,/,qt=/^\s*(_?)(\S+?)\1\s*$/,Wt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Gt=A("$injector");function Yt(e){return Function.prototype.toString.call(e)}function Kt(e){var t=Yt(e).replace(Wt,"");return t.match(Ht)||t.match(Vt)}function Xt(e,l){l=!0===l;var r={},a="Provider",s=[],o=new Ft,u={$provide:{provider:d(h),factory:d(f),service:d(function(e,t){return f(e,["$injector",function(e){return e.instantiate(t)}])}),value:d(function(e,t){return f(e,C(t),!1)}),constant:d(function(e,t){Le(e,"constant"),u[e]=t,n[e]=t}),decorator:function(e,t){var n=c.get(e+a),i=n.$get;n.$get=function(){var e=p.invoke(i,n);return p.invoke(t,null,{$delegate:e})}}}},c=u.$injector=v(u,function(e,t){throw b.isString(t)&&s.push(t),Gt("unpr","Unknown provider: {0}",s.join(" <- "))}),n={},t=v(n,function(e,t){var n=c.get(e+a,t);return p.invoke(n.$get,n,void 0,e)}),p=t;u["$injector"+a]={$get:C(t)},p.modules=c.modules=Fe();var i=m(e);return(p=t.get("$injector")).strictDi=l,fe(i,function(e){e&&p.invoke(e)}),p.loadNewModules=function(e){fe(m(e),function(e){e&&p.invoke(e)})},p;function d(n){return function(e,t){if(!Ee(e))return n(e,t);fe(e,y(n))}}function h(e,t){if(Le(e,"service"),(Se(t)||$e(t))&&(t=c.instantiate(t)),!t.$get)throw Gt("pget","Provider '{0}' must define $get factory method.",e);return u[e+a]=t}function f(e,t,n){return h(e,{$get:!1!==n?(i=e,r=t,function(){var e=p.invoke(r,this);if(be(e))throw Gt("undef","Provider '{0}' must return a value from $get factory method.",i);return e}):t});var i,r}function m(e){Be(be(e)||$e(e),"modulesToLoad","not an array");var n,i=[];return fe(e,function(t){if(!o.get(t)){o.set(t,!0);try{we(t)?(n=g(t),p.modules[t]=n,i=i.concat(m(n.requires)).concat(n._runBlocks),e(n._invokeQueue),e(n._configBlocks)):Se(t)?i.push(c.invoke(t)):$e(t)?i.push(c.invoke(t)):ce(t,"module")}catch(e){throw $e(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Gt("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function e(e){var t,n;for(t=0,n=e.length;t<n;t++){var i=e[t],r=c.get(i[0]);r[i[1]].apply(r,i[2])}}}),i}function v(n,i){function c(t,e){if(n.hasOwnProperty(t)){if(n[t]===r)throw Gt("cdep","Circular dependency found: {0}",t+" <- "+s.join(" <- "));return n[t]}try{return s.unshift(t),n[t]=r,n[t]=i(t,e),n[t]}catch(e){throw n[t]===r&&delete n[t],e}finally{s.shift()}}function o(e,t,n){for(var i=[],r=Xt.$$annotate(e,l,n),o=0,a=r.length;o<a;o++){var s=r[o];if("string"!=typeof s)throw Gt("itkn","Incorrect injection token! Expected service name as string, got {0}",s);i.push(t&&t.hasOwnProperty(s)?t[s]:c(s,n))}return i}return{invoke:function(e,t,n,i){"string"==typeof n&&(i=n,n=null);var r=o(e,n,i);return $e(e)&&(e=e[e.length-1]),function(e){if(pe||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return Ae(t)||(t=e.$$ngIsClass=/^(?:class\b|constructor\()/.test(Yt(e))),t}(e)?(r.unshift(null),new(Function.prototype.bind.apply(e,r))):e.apply(t,r)},instantiate:function(e,t,n){var i=$e(e)?e[e.length-1]:e,r=o(e,t,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:c,annotate:Xt.$$annotate,has:function(e){return u.hasOwnProperty(e+a)||n.hasOwnProperty(e)}}}}function Zt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(i,r,o){var a=i.document;function s(e){if(e){e.scrollIntoView();var t=function(){var e=c.yOffset;if(Se(e))e=e();else if(O(e)){var t=e[0];e="fixed"!==i.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom}else $(e)||(e=0);return e}();if(t){var n=e.getBoundingClientRect().top;i.scrollBy(0,n-t)}}else i.scrollTo(0,0)}function c(e){var t,n,i;(e=we(e)?e:$(e)?e.toString():r.hash())?(t=a.getElementById(e))?s(t):(n=a.getElementsByName(e),i=null,Array.prototype.some.call(n,function(e){if("a"===je(e))return i=e,!0}),(t=i)?s(t):"top"===e&&s(null)):s(null)}return e&&o.$watch(function(){return r.hash()},function(e,t){var n,i;e===t&&""===e||(n=function(){o.$evalAsync(c)},"complete"===(i=i||H).document.readyState?i.setTimeout(n):de(i).on("load",n))}),c}]}Xt.$$annotate=function(e,t,n){var i,r,o;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw we(n)&&n||(n=e.name||((o=Kt(e))?"function("+(o[1]||"").replace(/[\s\r\n]+/," ")+")":"fn")),Gt("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);fe(Kt(e)[1].split(zt),function(e){e.replace(qt,function(e,t,n){i.push(n)})})}e.$inject=i}}else $e(e)?(ce(e[r=e.length-1],"fn"),i=e.slice(0,r)):ce(e,"fn",!0);return i};var Jt=A("$animate"),Qt=1,en="ng-animate";function tn(e,t){return e||t?e?t?($e(e)&&(e=e.join(" ")),$e(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function nn(e){return Ee(e)?e:{}}var rn=function(){this.$get=ge},on=function(){var m=new Ft,v=[];this.$get=["$$AnimateRunner","$rootScope",function(p,d){return{enabled:ge,on:ge,off:ge,pin:ge,push:function(e,t,n,i){var r,o,a,s,c,l;i&&i(),(n=n||{}).from&&e.css(n.from),n.to&&e.css(n.to),(n.addClass||n.removeClass)&&(r=e,o=n.addClass,a=n.removeClass,s=m.get(r)||{},c=h(s,o,!0),l=h(s,a,!1),(c||l)&&(m.set(r,s),v.push(r),1===v.length&&d.$$postDigest(f)));var u=new p;return u.complete(),u}};function h(t,e,n){var i=!1;return e&&fe(e=we(e)?e.split(" "):$e(e)?e:[],function(e){e&&(i=!0,t[e]=n)}),i}function f(){fe(v,function(e){var t=m.get(e);if(t){var n=function(e){we(e)&&(e=e.split(" "));var t=Fe();return fe(e,function(e){e.length&&(t[e]=!0)}),t}(e.attr("class")),i="",r="";fe(t,function(e,t){e!==!!n[t]&&(e?i+=(i.length?" ":"")+t:r+=(r.length?" ":"")+t)}),fe(e,function(e){i&&wt(e,i),r&&Et(e,r)}),m.delete(e)}}),v.length=0}}]},an=["$provide",function(i){var r=this,t=null,n=null;this.$$registeredAnimations=Object.create(null),this.register=function(e,t){if(e&&"."!==e.charAt(0))throw Jt("notcsel","Expecting class selector starting with '.' got '{0}'.",e);var n=e+"-animation";r.$$registeredAnimations[e.substr(1)]=n,i.factory(n,t)},this.customFilter=function(e){return 1===arguments.length&&(n=Se(e)?e:null),n},this.classNameFilter=function(e){if(1===arguments.length&&((t=e instanceof RegExp?e:null)&&new RegExp("[(\\s|\\/)]"+en+"[(\\s|\\/)]").test(t.toString())))throw t=null,Jt("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',en);return t},this.$get=["$$animateQueue",function(o){function r(e,t,n){if(n){var i=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Qt)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:o.on,off:o.off,pin:o.pin,enabled:o.enabled,cancel:function(e){e.end&&e.end()},enter:function(e,t,n,i){return t=t&&de(t),n=n&&de(n),r(e,t=t||n.parent(),n),o.push(e,"enter",nn(i))},move:function(e,t,n,i){return t=t&&de(t),n=n&&de(n),r(e,t=t||n.parent(),n),o.push(e,"move",nn(i))},leave:function(e,t){return o.push(e,"leave",nn(t),function(){e.remove()})},addClass:function(e,t,n){return(n=nn(n)).addClass=tn(n.addclass,t),o.push(e,"addClass",n)},removeClass:function(e,t,n){return(n=nn(n)).removeClass=tn(n.removeClass,t),o.push(e,"removeClass",n)},setClass:function(e,t,n,i){return(i=nn(i)).addClass=tn(i.addClass,t),i.removeClass=tn(i.removeClass,n),o.push(e,"setClass",i)},animate:function(e,t,n,i,r){return(r=nn(r)).from=r.from?me(r.from,t):t,r.to=r.to?me(r.to,n):n,i=i||"ng-inline-animate",r.tempClasses=tn(r.tempClasses,i),o.push(e,"animate",r)}}}]}],sn=function(){this.$get=["$$rAF",function(t){var n=[];function i(e){n.push(e),1<n.length||t(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}return function(){var t=!1;return i(function(){t=!0}),function(e){t?e():i(e)}}}]},cn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,i,r){function o(e){this.setHost(e);var t=n();this._doneCallbacks=[],this._tick=function(e){i()?r(e,0,!1):t(e)},this._state=0}return o.chain=function(e,n){var i=0;!function t(){if(i===e.length)return void n(!0);e[i](function(e){!1!==e?(i++,t()):n(!1)})}()},o.all=function(t,n){var i=0,r=!0;function o(e){r=r&&e,++i===t.length&&n(r)}fe(t,function(e){e.done(o)})},o.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:ge,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(t){2!==this._state&&(fe(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},ln=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,e,s){return function(e,t){var n=t||{};n.$$prepared||(n=B(n)),n.cleanupStyles&&(n.from=n.to=null),n.from&&(e.css(n.from),n.from=null);var i,r=new s;return{start:o,end:o};function o(){return a(function(){!function(){n.addClass&&(e.addClass(n.addClass),n.addClass=null);n.removeClass&&(e.removeClass(n.removeClass),n.removeClass=null);n.to&&(e.css(n.to),n.to=null)}(),i||r.complete(),i=!0}),r}}}]};function un(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new function(s,e,t,c){var l=this,u=s.location,p=s.history,i=s.setTimeout,n=s.clearTimeout,r={};l.isMock=!1;var o=0,a=[];function d(e){try{e.apply(null,Re(arguments,1))}finally{if(0==--o)for(;a.length;)try{a.pop()()}catch(e){t.error(e)}}}l.$$completeOutstandingRequest=d,l.$$incOutstandingRequestCount=function(){o++},l.notifyWhenNoOutstandingRequests=function(e){0===o?e():a.push(e)};var h,f,m=u.href,v=e.find("base"),g=null,y=c.history?function(){try{return p.state}catch(e){}}:ge;$(),l.url=function(e,t,n){if(be(n)&&(n=null),u!==s.location&&(u=s.location),p!==s.history&&(p=s.history),e){var i=f===n;if(m===e&&(!c.history||i))return l;var r=m&&oi(m)===oi(e);return m=e,f=n,!c.history||r&&i?(r||(g=e),t?u.replace(e):r?u.hash=-1===(a=(o=e).indexOf("#"))?"":o.substr(a):u.href=e,u.href!==e&&(g=e)):(p[t?"replaceState":"pushState"](n,"",e),$()),g&&(g=e),l}return g||u.href.replace(/%27/g,"'");var o,a},l.state=function(){return h};var b=[],x=!1;function E(){g=null,_()}var w=null;function $(){Pe(h=be(h=y())?null:h,w)&&(h=w),f=w=h}function _(){var e=f;$(),m===l.url()&&e===h||(m=l.url(),f=h,fe(b,function(e){e(l.url(),h)}))}l.onUrlChange=function(e){return x||(c.history&&de(s).on("popstate",E),de(s).on("hashchange",E),x=!0),b.push(e),e},l.$$applicationDestroyed=function(){de(s).off("hashchange popstate",E)},l.$$checkUrlChange=_,l.baseHref=function(){var e=v.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},l.defer=function(e,t){var n;return o++,n=i(function(){delete r[n],d(e)},t||0),r[n]=!0,n},l.defer.cancel=function(e){return!!r[e]&&(delete r[e],n(e),d(ge),!0)}}(e,i,t,n)}]}function pn(){this.$get=function(){var p={};function e(e,t){if(e in p)throw A("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var n=0,i=me({},t,{id:e}),r=Fe(),o=t&&t.capacity||Number.MAX_VALUE,a=Fe(),s=null,c=null;return p[e]={put:function(e,t){if(!be(t)){if(o<Number.MAX_VALUE)l(a[e]||(a[e]={key:e}));return e in r||n++,r[e]=t,o<n&&this.remove(c.key),t}},get:function(e){if(o<Number.MAX_VALUE){var t=a[e];if(!t)return;l(t)}return r[e]},remove:function(e){if(o<Number.MAX_VALUE){var t=a[e];if(!t)return;t===s&&(s=t.p),t===c&&(c=t.n),u(t.n,t.p),delete a[e]}e in r&&(delete r[e],n--)},removeAll:function(){r=Fe(),n=0,a=Fe(),s=c=null},destroy:function(){a=i=r=null,delete p[e]},info:function(){return me({},i,{size:n})}};function l(e){e!==s&&(c?c===e&&(c=e.n):c=e,u(e.n,e.p),u(e,s),(s=e).n=null)}function u(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}}return e.info=function(){var n={};return fe(p,function(e,t){n[t]=e.info()}),n},e.get=function(e){return p[e]},e}}function dn(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var hn=A("$compile");var fn=new function(){};function mn(n,t){var f={},m="Directive",L=/^\s*directive:\s*([\w-]+)\s+(.*)$/,I=/(([\w-]+)(?::([^;]+))?;?)/,u=function(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),d=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,p=/^(on[a-z]+|formaction)$/,s=Fe();function i(e,i,r){var o=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,a=Fe();return fe(e,function(e,t){if(e in s)a[t]=s[e];else{var n=e.match(o);if(!n)throw hn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",i,t,e,r?"controller bindings definition":"isolate scope definition");a[t]={mode:n[1][0],collection:"*"===n[2],optional:"?"===n[3],attrName:n[4]||t},n[4]&&(s[e]=a[t])}}),a}function v(e,t){var n={isolateScope:null,bindToController:null};if(Ee(e.scope)&&(!0===e.bindToController?(n.bindToController=i(e.scope,t,!0),n.isolateScope={}):n.isolateScope=i(e.scope,t,!1)),Ee(e.bindToController)&&(n.bindToController=i(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw hn("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}this.directive=function e(c,t){return Be(c,"name"),Le(c,"directive"),we(c)?(!function(e){var t=e.charAt(0);if(!t||t!==ue(t))throw hn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw hn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}(c),Be(t,"directiveFactory"),f.hasOwnProperty(c)||(f[c]=[],n.factory(c+m,["$injector","$exceptionHandler",function(o,a){var s=[];return fe(f[c],function(e,t){try{var n=o.invoke(e);Se(n)?n={compile:C(n)}:!n.compile&&n.link&&(n.compile=C(n.link)),n.priority=n.priority||0,n.index=t,n.name=n.name||c,n.require=(r=(i=n).require||i.controller&&i.name,!$e(r)&&Ee(r)&&fe(r,function(e,t){var n=e.match(d);e.substring(n[0].length)||(r[t]=n[0]+t)}),r),n.restrict=function(e,t){if(e&&(!we(e)||!/[EACM]/.test(e)))throw hn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}(n.restrict,c),n.$$moduleName=e.$$moduleName,s.push(n)}catch(e){a(e)}var i,r}),s}])),f[c].push(t)):fe(c,y(e)),this},this.component=function e(t,r){if(!we(t))return fe(t,y(De(this,e))),this;var o=r.controller||function(){};function n(i){function e(n){return Se(n)||$e(n)?function(e,t){return i.invoke(n,this,{$element:e,$attrs:t})}:n}var t=r.template||r.templateUrl?r.template:"",n={controller:o,controllerAs:function(e,t){if(t&&we(t))return t;if(we(e)){var n=$n.exec(e);if(n)return n[3]}}(r.controller)||r.controllerAs||"$ctrl",template:e(t),templateUrl:e(r.templateUrl),transclude:r.transclude,scope:{},bindToController:r.bindings||{},restrict:"E",require:r.require};return fe(r,function(e,t){"$"===t.charAt(0)&&(n[t]=e)}),n}return fe(r,function(e,t){"$"===t.charAt(0)&&(n[t]=e,Se(o)&&(o[t]=e))}),n.$inject=["$injector"],this.directive(t,n)},this.aHrefSanitizationWhitelist=function(e){return xe(e)?(t.aHrefSanitizationWhitelist(e),this):t.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return xe(e)?(t.imgSrcSanitizationWhitelist(e),this):t.imgSrcSanitizationWhitelist()};var l=!0;this.debugInfoEnabled=function(e){return xe(e)?(l=e,this):l};var le=!1;this.preAssignBindingsEnabled=function(e){return xe(e)?(le=e,this):le};var $=!1;this.strictComponentBindingsEnabled=function(e){return xe(e)?($=e,this):$};var _=10;this.onChangesTtl=function(e){return arguments.length?(_=e,this):_};var F=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(F=e,this):F};var U=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(U=e,this):U},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(h,S,z,e,b,q,o,r,a,g){var s,y=/^\w/,x=H.document.createElement("div"),C=F,A=U,t=_;function c(){try{if(!--t)throw s=void 0,hn("infchng","{0} $onChanges() iterations reached. Aborting!\n",_);o.$apply(function(){for(var t=[],e=0,n=s.length;e<n;++e)try{s[e]()}catch(e){t.push(e)}if(s=void 0,t.length)throw t})}finally{t++}}function W(e,t){if(t){var n,i,r,o=Object.keys(t);for(n=0,i=o.length;n<i;n++)this[r=o[n]]=t[r]}else this.$attr={};this.$$element=e}function T(e,t){try{e.addClass(t)}catch(e){}}W.prototype={$normalize:bn,$addClass:function(e){e&&0<e.length&&a.addClass(this.$$element,e)},$removeClass:function(e){e&&0<e.length&&a.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=xn(e,t);n&&n.length&&a.addClass(this.$$element,n);var i=xn(t,e);i&&i.length&&a.removeClass(this.$$element,i)},$set:function(e,t,n,i){var r,o=Rt(this.$$element[0],e),a=Pt[e],s=e;if(o?(this.$$element.prop(e,t),i=o):a&&(this[a]=t,s=a),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e])||(this.$attr[e]=i=Ne(e,"-")),"a"===(r=je(this.$$element))&&("href"===e||"xlinkHref"===e)||"img"===r&&"src"===e)this[e]=t=g(t,"src"===e);else if("img"===r&&"srcset"===e&&xe(t)){for(var c="",l=Te(t),u=/\s/.test(l)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,p=l.split(u),d=Math.floor(p.length/2),h=0;h<d;h++){var f=2*h;c+=g(Te(p[f]),!0),c+=" "+Te(p[f+1])}var m=Te(p[2*h]).split(/\s/);c+=g(Te(m[0]),!0),2===m.length&&(c+=" "+Te(m[1])),this[e]=t=c}!1!==n&&(null===t||be(t)?this.$$element.removeAttr(i):y.test(i)?this.$$element.attr(i,t):function(e,t,n){x.innerHTML="<span "+t+">";var i=x.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,e.attributes.setNamedItem(r)}(this.$$element[0],i,t));var v=this.$$observers;v&&fe(v[s],function(e){try{e(t)}catch(e){z(e)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers=Fe()),r=i[e]||(i[e]=[]);return r.push(t),o.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(e)||be(n[e])||t(n[e])}),function(){ke(r,t)}}};var n=S.startSymbol(),i=S.endSymbol(),G="{{"===n&&"}}"===i?ye:function(e){return e.replace(/\{\{/g,n).replace(/}}/g,i)},j=/^ngAttr[A-Z]/,k=/^(.+)Start$/;return Y.$$addBindingInfo=l?function(e,t){var n=e.data("$binding")||[];$e(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:ge,Y.$$addBindingClass=l?function(e){T(e,"ng-binding")}:ge,Y.$$addScopeInfo=l?function(e,t,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(r,t)}:ge,Y.$$addScopeClass=l?function(e,t){T(e,t?"ng-isolate-scope":"ng-scope")}:ge,Y.$$createComment=function(e,t){var n="";return l&&(n=" "+(e||"")+": ",t&&(n+=t+" ")),H.document.createComment(n)},Y;function Y(u,e,t,n,p){u instanceof de||(u=de(u));var d=M(u,e,u,t,n,p);Y.$$addScopeClass(u);var h=null;return function(e,t,n){if(!u)throw hn("multilink","This element has already been linked.");Be(e,"scope"),p&&p.needsNewScope&&(e=e.$parent.$new());var i,r,o,a=(n=n||{}).parentBoundTranscludeFn,s=n.transcludeControllers,c=n.futureParentElement;if(a&&a.$$boundTransclude&&(a=a.$$boundTransclude),h||(r=(i=c)&&i[0],h=r&&"foreignobject"!==je(r)&&he.call(r).match(/SVG/)?"svg":"html"),o="html"!==h?de(re(h,de("<div>").append(u).html())):t?jt.clone.call(u):u,s)for(var l in s)o.data("$"+l+"Controller",s[l].instance);return Y.$$addScopeInfo(o,e),t&&t(o,e),d&&d(e,o,o,a),t||(u=d=null),o}}function M(e,f,t,n,i,r){for(var o,a,s,c,l,u,m,v=[],p=$e(e)||e instanceof de,d=0;d<e.length;d++)o=new W,11===pe&&E(e,d,p),(s=(a=K(e[d],[],o,0===d?n:void 0,i)).length?R(a,e[d],o,f,t,null,[],[],r):null)&&s.scope&&Y.$$addScopeClass(o.$$element),l=s&&s.terminal||!(c=e[d].childNodes)||!c.length?null:M(c,s?(s.transcludeOnThisElement||!s.templateOnThisElement)&&s.transclude:f),(s||l)&&(v.push(d,s,l),u=!0,m=m||s),r=null;return u?function(e,t,n,i){var r,o,a,s,c,l,u,p,d;if(m){var h=t.length;for(d=new Array(h),c=0;c<v.length;c+=3)u=v[c],d[u]=t[u]}else d=t;for(c=0,l=v.length;c<l;)a=d[v[c++]],r=v[c++],o=v[c++],r?(r.scope?(s=e.$new(),Y.$$addScopeInfo(de(a),s)):s=e,p=r.transcludeOnThisElement?P(e,r.transclude,i):!r.templateOnThisElement&&i?i:!i&&f?P(e,f):null,r(o,s,a,n,p)):o&&o(e,a.childNodes,void 0,i)}:null}function E(e,t,n){var i,r=e[t],o=r.parentNode;if(r.nodeType===Ve)for(;(i=o?r.nextSibling:e[t+1])&&i.nodeType===Ve;)r.nodeValue=r.nodeValue+i.nodeValue,i.parentNode&&i.parentNode.removeChild(i),n&&i===e[t+1]&&e.splice(t+1,1)}function P(o,a,s){function e(e,t,n,i,r){return e||((e=o.$new(!1,r)).$$transcluded=!0),a(e,t,{parentBoundTranscludeFn:s,transcludeControllers:n,futureParentElement:i})}var t=e.$$slots=Fe();for(var n in a.$$slots)a.$$slots[n]?t[n]=P(o,a.$$slots[n],s):t[n]=null;return e}function K(e,t,n,i,r){var o,a,s,c,l,u,p=e.nodeType,d=n.$attr;switch(p){case He:D(t,bn(a=je(e)),"E",i,r);for(var h,f,m,v,g,y,b=e.attributes,x=0,E=b&&b.length;x<E;x++){var w=!1,$=!1;f=(h=b[x]).name,g=h.value,v=bn(f),(y=j.test(v))&&(f=f.replace(gn,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var _=v.match(k);_&&O(_[1])&&($=(w=f).substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),d[m=bn(f.toLowerCase())]=f,!y&&n.hasOwnProperty(m)||(n[m]=g,Rt(e,m)&&(n[m]=!0)),B(e,t,g,m,y),D(t,m,"A",i,r,w,$)}if("input"===a&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!A)break;if(Ee(s=e.className)&&(s=s.animVal),we(s)&&""!==s)for(;o=I.exec(s);)D(t,m=bn(o[2]),"C",i,r)&&(n[m]=Te(o[3])),s=s.substr(o.index+o[0].length);break;case Ve:c=t,l=e.nodeValue,(u=S(l,!0))&&c.push({priority:0,compile:function(e){var t=e.parent(),i=!!t.length;return i&&Y.$$addBindingClass(t),function(e,t){var n=t.parent();i||Y.$$addBindingClass(n),Y.$$addBindingInfo(n,u.expressions),e.$watch(u,function(e){t[0].nodeValue=e})}}});break;case ze:if(!C)break;!function(e,t,n,i,r){try{var o=L.exec(e.nodeValue);if(o){var a=bn(o[1]);D(t,a,"M",i,r)&&(n[a]=Te(o[2]))}}catch(e){}}(e,t,n,i,r)}return t.sort(N),t}function X(e,t,n){var i=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw hn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===He&&(e.hasAttribute(t)&&r++,e.hasAttribute(n)&&r--),i.push(e),e=e.nextSibling}while(0<r);else i.push(e);return de(i)}function Z(o,a,s){return function(e,t,n,i,r){return t=X(t[0],a,s),o(e,t,n,i,r)}}function J(e,t,n,i,r,o){var a;return e?Y(t,n,i,r,o):function(){return a||(a=Y(t,n,i,r,o),t=n=o=null),a.apply(this,arguments)}}function R(e,E,w,t,n,i,$,_,r){r=r||{};for(var o,a,s,c,l,u=-Number.MAX_VALUE,S=r.newScopeDirective,C=r.controllerDirectives,A=r.newIsolateScopeDirective,T=r.templateDirective,p=r.nonTlbTranscludeDirective,d=!1,h=!1,j=r.hasElementTranscludeDirective,f=w.$$element=de(E),m=i,v=t,g=!1,y=!1,b=0,x=e.length;b<x;b++){var k=(o=e[b]).$$start,M=o.$$end;if(k&&(f=X(E,k,M)),s=void 0,u>o.priority)break;if((l=o.scope)&&(o.templateUrl||(Ee(l)?(ie("new/isolated scope",A||S,o,f),A=o):ie("new/isolated scope",A,o,f)),S=S||o),a=o.name,!g&&(o.replace&&(o.templateUrl||o.template)||o.transclude&&!o.$$tlb)){for(var P,R=b+1;P=e[R++];)if(P.transclude&&!P.$$tlb||P.replace&&(P.templateUrl||P.template)){y=!0;break}g=!0}if(!o.templateUrl&&o.controller&&(C=C||Fe(),ie("'"+a+"' controller",C[a],o,f),C[a]=o),l=o.transclude)if(d=!0,o.$$tlb||(ie("transclusion",p,o,f),p=o),"element"===l)j=!0,u=o.priority,s=f,f=w.$$element=de(Y.$$createComment(a,w[a])),E=f[0],oe(n,Re(s),E),s[0].$$parentNode=s[0].parentNode,v=J(y,s,t,u,m&&m.name,{nonTlbTranscludeDirective:p});else{var D=Fe();if(Ee(l)){s=[];var O=Fe(),N=Fe();for(var B in fe(l,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,O[e]=t,D[t]=null,N[t]=n}),fe(f.contents(),function(e){var t=O[bn(je(e))];t?(N[t]=!0,D[t]=D[t]||[],D[t].push(e)):s.push(e)}),fe(N,function(e,t){if(!e)throw hn("reqslot","Required transclusion slot `{0}` was not filled.",t)}),D)D[B]&&(D[B]=J(y,D[B],t))}else s=de(ft(E)).contents();f.empty(),(v=J(y,s,t,void 0,void 0,{needsNewScope:o.$$isolateScope||o.$$newScope})).$$slots=D}if(o.template)if(h=!0,ie("template",T,o,f),l=Se((T=o).template)?o.template(f,w):o.template,l=G(l),o.replace){if(m=o,s=lt(l)?[]:En(re(o.templateNamespace,Te(l))),E=s[0],1!==s.length||E.nodeType!==He)throw hn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",a,"");oe(n,f,E);var L={$attr:{}},I=K(E,[],L),F=e.splice(b+1,e.length-(b+1));(A||S)&&ee(I,A,S),e=e.concat(I).concat(F),te(w,L),x=e.length}else f.html(l);if(o.templateUrl)h=!0,ie("template",T,o,f),(T=o).replace&&(m=o),V=ne(e.splice(b,e.length-b),f,w,n,d&&v,$,_,{controllerDirectives:C,newScopeDirective:S!==o&&S,newIsolateScopeDirective:A,templateDirective:T,nonTlbTranscludeDirective:p}),x=e.length;else if(o.compile)try{c=o.compile(f,w,v);var U=o.$$originalDirective||o;Se(c)?H(null,De(U,c),k,M):c&&H(De(U,c.pre),De(U,c.post),k,M)}catch(e){z(e,Oe(f))}o.terminal&&(V.terminal=!0,u=Math.max(u,o.priority))}return V.scope=S&&!0===S.scope,V.transcludeOnThisElement=d,V.templateOnThisElement=h,V.transclude=v,r.hasElementTranscludeDirective=j,V;function H(e,t,n,i){e&&(n&&(e=Z(e,n,i)),e.require=o.require,e.directiveName=a,(A===o||o.$$isolateScope)&&(e=ae(e,{isolateScope:!0})),$.push(e)),t&&(n&&(t=Z(t,n,i)),t.require=o.require,t.directiveName=a,(A===o||o.$$isolateScope)&&(t=ae(t,{isolateScope:!0})),_.push(t))}function V(e,t,n,i,a){var r,o,s,c,l,u,p,d,h,f;for(var m in E===n?d=(h=w).$$element:h=new W(d=de(n),w),l=t,A?c=t.$new(!0):S&&(l=t.$parent),a&&((p=function(e,t,n,i){var r;Ce(e)||(i=n,n=t,t=e,e=void 0);j&&(r=u);n||(n=j?d.parent():d);{if(!i)return a(e,t,r,n,x);var o=a.$$slots[i];if(o)return o(e,t,r,n,x);if(be(o))throw hn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,Oe(d))}}).$$boundTransclude=a,p.isSlotFilled=function(e){return!!a.$$slots[e]}),C&&(u=function(e,t,n,i,r,o,a){var s=Fe();for(var c in i){var l=i[c],u={$scope:l===a||l.$$isolateScope?r:o,$element:e,$attrs:t,$transclude:n},p=l.controller;"@"===p&&(p=t[l.name]);var d=q(p,u,!0,l.controllerAs);s[l.name]=d,e.data("$"+l.name+"Controller",d.instance)}return s}(d,h,p,C,c,t,A)),A&&(Y.$$addScopeInfo(d,c,!0,!(T&&(T===A||T===A.$$originalDirective))),Y.$$addScopeClass(d,!0),c.$$isolateBindings=A.$$isolateBindings,(f=ce(t,h,c,c.$$isolateBindings,A)).removeWatches&&c.$on("$destroy",f.removeWatches)),u){var v=C[m],g=u[m],y=v.$$bindings.bindToController;if(le){g.bindingInfo=y?ce(l,h,g.instance,y,v):{};var b=g();b!==g.instance&&(g.instance=b,d.data("$"+v.name+"Controller",b),g.bindingInfo.removeWatches&&g.bindingInfo.removeWatches(),g.bindingInfo=ce(l,h,g.instance,y,v))}else g.instance=g(),d.data("$"+v.name+"Controller",g.instance),g.bindingInfo=ce(l,h,g.instance,y,v)}for(fe(C,function(e,t){var n=e.require;e.bindToController&&!$e(n)&&Ee(n)&&me(u[t].instance,Q(t,n,d,u))}),fe(u,function(e){var t=e.instance;if(Se(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){z(e)}if(Se(t.$onInit))try{t.$onInit()}catch(e){z(e)}Se(t.$doCheck)&&(l.$watch(function(){t.$doCheck()}),t.$doCheck()),Se(t.$onDestroy)&&l.$on("$destroy",function(){t.$onDestroy()})}),r=0,o=$.length;r<o;r++)se(s=$[r],s.isolateScope?c:t,d,h,s.require&&Q(s.directiveName,s.require,d,u),p);var x=t;for(A&&(A.template||null===A.templateUrl)&&(x=c),e&&e(x,n.childNodes,void 0,a),r=_.length-1;0<=r;r--)se(s=_[r],s.isolateScope?c:t,d,h,s.require&&Q(s.directiveName,s.require,d,u),p);fe(u,function(e){var t=e.instance;Se(t.$postLink)&&t.$postLink()})}}function Q(n,e,i,r){var o;if(we(e)){var t=e.match(d),a=e.substring(t[0].length),s=t[1]||t[3],c="?"===t[2];if("^^"===s?i=i.parent():o=(o=r&&r[a])&&o.instance,!o){var l="$"+a+"Controller";o=s?i.inheritedData(l):i.data(l)}if(!o&&!c)throw hn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,n)}else if($e(e)){o=[];for(var u=0,p=e.length;u<p;u++)o[u]=Q(n,e[u],i,r)}else Ee(e)&&(o={},fe(e,function(e,t){o[t]=Q(n,e,i,r)}));return o||null}function ee(e,t,n){for(var i=0,r=e.length;i<r;i++)e[i]=ve(e[i],{$$isolateScope:t,$$newScope:n})}function D(e,t,n,i,r,o,a){if(t===r)return null;var s=null;if(f.hasOwnProperty(t))for(var c,l=h.get(t+m),u=0,p=l.length;u<p;u++)if(c=l[u],(be(i)||i>c.priority)&&-1!==c.restrict.indexOf(n)){if(o&&(c=ve(c,{$$start:o,$$end:a})),!c.$$bindings){var d=c.$$bindings=v(c,c.name);Ee(d.isolateScope)&&(c.$$isolateBindings=d.isolateScope)}e.push(c),s=c}return s}function O(e){if(f.hasOwnProperty(e))for(var t=h.get(e+m),n=0,i=t.length;n<i;n++)if(t[n].multiElement)return!0;return!1}function te(n,i){var r=i.$attr,o=n.$attr;fe(n,function(e,t){"$"!==t.charAt(0)&&(i[t]&&i[t]!==e&&(e.length?e+=("style"===t?";":" ")+i[t]:e=i[t]),n.$set(t,e,!0,r[t]))}),fe(i,function(e,t){n.hasOwnProperty(t)||"$"===t.charAt(0)||(n[t]=e,"class"!==t&&"style"!==t&&(o[t]=r[t]))})}function ne(d,h,f,m,v,g,y,b){var x,E,w=[],$=h[0],_=d.shift(),S=ve(_,{templateUrl:null,transclude:null,replace:null,$$originalDirective:_}),C=Se(_.templateUrl)?_.templateUrl(h,f):_.templateUrl,A=_.templateNamespace;return h.empty(),e(C).then(function(e){var n,t,i,r;if(e=G(e),_.replace){if(i=lt(e)?[]:En(re(A,Te(e))),n=i[0],1!==i.length||n.nodeType!==He)throw hn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",_.name,C);t={$attr:{}},oe(m,h,n);var o=K(n,[],t);Ee(_.scope)&&ee(o,!0),d=o.concat(d),te(f,t)}else n=$,h.html(e);for(d.unshift(S),x=R(d,n,f,v,h,_,g,y,b),fe(m,function(e,t){e===n&&(m[t]=h[0])}),E=M(h[0].childNodes,v);w.length;){var a=w.shift(),s=w.shift(),c=w.shift(),l=w.shift(),u=h[0];if(!a.$$destroyed){if(s!==$){var p=s.className;b.hasElementTranscludeDirective&&_.replace||(u=ft(n)),oe(c,de(s),u),T(de(u),p)}r=x.transcludeOnThisElement?P(a,x.transclude,l):l,x(E,a,u,m,r)}}w=null}).catch(function(e){_e(e)&&z(e)}),function(e,t,n,i,r){var o=r;t.$$destroyed||(w?w.push(t,n,i,o):(x.transcludeOnThisElement&&(o=P(t,x.transclude,r)),x(E,t,n,i,o)))}}function N(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function ie(e,t,n,i){function r(e){return e?" (module: "+e+")":""}if(t)throw hn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,r(t.$$moduleName),n.name,r(n.$$moduleName),e,Oe(i))}function re(e,t){switch(e=ue(e||"html")){case"svg":case"math":var n=H.document.createElement("div");return n.innerHTML="<"+e+">"+t+"</"+e+">",n.childNodes[0].childNodes;default:return t}}function B(e,t,o,a,n){var s=function(e,t){if("srcdoc"===t)return r.HTML;var n=je(e);if("src"===t||"ngSrc"===t){if(-1===["img","video","audio","source","track"].indexOf(n))return r.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t||"link"===n&&"href"===t)return r.RESOURCE_URL}(e,a),i=!n,c=u[a]||n,l=S(o,i,s,c);if(l){if("multiple"===a&&"select"===je(e))throw hn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Oe(e));if(p.test(a))throw hn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");t.push({priority:100,compile:function(){return{pre:function(e,t,n){var i=n.$$observers||(n.$$observers=Fe()),r=n[a];r!==o&&(l=r&&S(r,!0,s,c),o=r),l&&(n[a]=l(e),(i[a]||(i[a]=[])).$$inter=!0,(n.$$observers&&n.$$observers[a].$$scope||e).$watch(l,function(e,t){"class"===a&&e!==t?n.$updateClass(e,t):n.$set(a,e)}))}}}})}}function oe(e,t,n){var i,r,o=t[0],a=t.length,s=o.parentNode;if(e)for(i=0,r=e.length;i<r;i++)if(e[i]===o){e[i++]=n;for(var c=i,l=c+a-1,u=e.length;c<u;c++,l++)l<u?e[c]=e[l]:delete e[c];e.length-=a-1,e.context===o&&(e.context=n);break}s&&s.replaceChild(n,o);var p=H.document.createDocumentFragment();for(i=0;i<a;i++)p.appendChild(t[i]);for(de.hasData(o)&&(de.data(n,de.data(o)),de(o).off("$destroy")),de.cleanData(p.querySelectorAll("*")),i=1;i<a;i++)delete t[i];t[0]=n,t.length=1}function ae(e,t){return me(function(){return e.apply(null,arguments)},e,t)}function se(e,t,n,i,r,o){try{e(t,n,i,r,o)}catch(e){z(e,Oe(n))}}function w(e,t){if($)throw hn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",e,t)}function ce(d,h,f,e,m){var i,v=[],g={};function y(e,t,n){Se(f.$onChanges)&&!Me(t,n)&&(s||(d.$$postDigest(c),s=[]),i||(i={},s.push(r)),i[e]&&(n=i[e].previousValue),i[e]=new vn(n,t))}function r(){f.$onChanges(i),i=void 0}return fe(e,function(e,n){var t,i,r,o,a,s=e.attrName,c=e.optional;switch(e.mode){case"@":c||V.call(h,s)||(w(s,m.name),f[n]=h[s]=void 0),a=h.$observe(s,function(e){if(we(e)||Ae(e)){var t=f[n];y(n,e,t),f[n]=e}}),h.$$observers[s].$$scope=d,we(t=h[s])?f[n]=S(t)(d):Ae(t)&&(f[n]=t),g[n]=new vn(fn,f[n]),v.push(a);break;case"=":if(!V.call(h,s)){if(c)break;w(s,m.name),h[s]=void 0}if(c&&!h[s])break;i=b(h[s]),o=i.literal?Pe:Me,r=i.assign||function(){throw t=f[n]=i(d),hn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",h[s],s,m.name)},t=f[n]=i(d);var l=function(e){return o(e,f[n])||(o(e,t)?r(d,e=f[n]):f[n]=e),t=e};l.$stateful=!0,a=e.collection?d.$watchCollection(h[s],l):d.$watch(b(h[s],l),null,i.literal),v.push(a);break;case"<":if(!V.call(h,s)){if(c)break;w(s,m.name),h[s]=void 0}if(c&&!h[s])break;var u=(i=b(h[s])).literal,p=f[n]=i(d);g[n]=new vn(fn,f[n]),a=d.$watch(i,function(e,t){if(t===e){if(t===p||u&&Pe(t,p))return;t=p}y(n,e,t),f[n]=e},u),v.push(a);break;case"&":if(c||V.call(h,s)||w(s,m.name),(i=h.hasOwnProperty(s)?b(h[s]):ge)===ge&&c)break;f[n]=function(e){return i(d,e)}}}),{initialChanges:g,removeWatches:v.length&&function(){for(var e=0,t=v.length;e<t;++e)v[e]()}}}}]}function vn(e,t){this.previousValue=e,this.currentValue=t}mn.$inject=["$provide","$$sanitizeUriProvider"],vn.prototype.isFirstChange=function(){return this.previousValue===fn};var gn=/^((?:x|data)[:\-_])/i,yn=/[:\-_]+(.)/g;function bn(e){return e.replace(gn,"").replace(yn,function(e,t,n){return n?t.toUpperCase():t})}function xn(e,t){var n="",i=e.split(/\s+/),r=t.split(/\s+/);e:for(var o=0;o<i.length;o++){for(var a=i[o],s=0;s<r.length;s++)if(a===r[s])continue e;n+=(0<n.length?" ":"")+a}return n}function En(e){var t=(e=de(e)).length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===ze||n.nodeType===Ve&&""===n.nodeValue.trim())&&i.call(e,t,1)}return e}var wn=A("$controller"),$n=/^(\S+)(\s+as\s+([\w$]+))?$/;function _n(){var d={},h=!1;this.has=function(e){return d.hasOwnProperty(e)},this.register=function(e,t){Le(e,"controller"),Ee(e)?me(d,e):d[e]=t},this.allowGlobals=function(){h=!0},this.$get=["$injector","$window",function(l,u){return function(t,n,e,i){var r,o,a,s;if(e=!0===e,i&&we(i)&&(s=i),we(t)){if(!(o=t.match($n)))throw wn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);if(a=o[1],s=s||o[3],!(t=d.hasOwnProperty(a)?d[a]:le(n.$scope,a,!0)||(h?le(u,a,!0):void 0)))throw wn("ctrlreg","The controller with the name '{0}' is not registered.",a);ce(t,a,!0)}if(e){var c=($e(t)?t[t.length-1]:t).prototype;return r=Object.create(c||null),s&&p(n,s,r,a||t.name),me(function(){var e=l.invoke(t,r,n,a);return e!==r&&(Ee(e)||Se(e))&&(r=e,s&&p(n,s,r,a||t.name)),r},{instance:r,identifier:s})}return r=l.instantiate(t,n,a),s&&p(n,s,r,a||t.name),r};function p(e,t,n,i){if(!e||!Ee(e.$scope))throw A("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}}]}function Sn(){this.$get=["$window",function(e){return de(e.document)}]}function Cn(){this.$get=["$document","$rootScope",function(e,t){var n=e[0],i=n&&n.hidden;function r(){i=n.hidden}return e.on("visibilitychange",r),t.$on("$destroy",function(){e.off("visibilitychange",r)}),function(){return i}}]}function An(){this.$get=["$log",function(n){return function(e,t){n.error.apply(n,arguments)}}]}var Tn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof de&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},jn="application/json",kn={"Content-Type":jn+";charset=utf-8"},Mn=/^\[|^\{(?!\{)/,Pn={"[":/]$/,"{":/}$/},Rn=/^\)]\}',?\n/,Dn=A("$http");function On(e){return Ee(e)?_(e)?e.toISOString():z(e):e}function Nn(){this.$get=function(){return function(e){if(!e)return"";var n=[];return f(e,function(e,t){null===e||be(e)||Se(e)||($e(e)?fe(e,function(e){n.push(Q(t)+"="+Q(On(e)))}):n.push(Q(t)+"="+Q(On(e))))}),n.join("&")}}}function Bn(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function n(e,i,r){if(null===e||be(e))return;$e(e)?fe(e,function(e,t){n(e,i+"["+(Ee(e)?t:"")+"]")}):Ee(e)&&!_(e)?f(e,function(e,t){n(e,i+(r?"":"[")+t+(r?"":"]"))}):t.push(Q(i)+"="+Q(On(e)))}(e,"",!0),t.join("&")}}}function Ln(t,e){if(we(t)){var n=t.replace(Rn,"").trim();if(n){var i=e("Content-Type"),r=i&&0===i.indexOf(jn);if(r||(a=(o=n).match(Mn))&&Pn[a[0]].test(o))try{t=q(n)}catch(e){if(!r)return t;throw Dn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var o,a;return t}function In(e){var t,n=Fe();function i(e,t){e&&(n[e]=n[e]?n[e]+", "+t:t)}return we(e)?fe(e.split("\n"),function(e){t=e.indexOf(":"),i(ue(Te(e.substr(0,t))),Te(e.substr(t+1)))}):Ee(e)&&fe(e,function(e,t){i(ue(t),Te(e))}),n}function Fn(n){var i;return function(e){if(i||(i=In(n)),e){var t=i[ue(e)];return void 0===t&&(t=null),t}return i}}function Un(t,n,i,e){return Se(e)?e(t,n,i):(fe(e,function(e){t=e(t,n,i)}),t)}function Hn(e){return 200<=e&&e<300}function Vn(){var $=this.defaults={transformResponse:[Ln],transformRequest:[function(e){return Ee(e)&&(i=e,"[object File]"!==he.call(i))&&(n=e,"[object Blob]"!==he.call(n))&&(t=e,"[object FormData]"!==he.call(t))?z(e):e;var t,n,i}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ge(kn),put:Ge(kn),patch:Ge(kn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},_=!1;this.useApplyAsync=function(e){return xe(e)?(_=!!e,this):_};var t=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(s,v,g,e,y,b,c,x){var E=e("$http");$.paramSerializer=we($.paramSerializer)?c.get($.paramSerializer):$.paramSerializer;var l=[];function w(e){if(!Ee(e))throw A("$http")("badreq","Http request configuration must be an object.  Received: {0}",e);if(!we(x.valueOf(e.url)))throw A("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",e.url);var n=me({method:"get",transformRequest:$.transformRequest,transformResponse:$.transformResponse,paramSerializer:$.paramSerializer,jsonpCallbackParam:$.jsonpCallbackParam},e);n.headers=function(e){var t,n,i,r=$.headers,o=me({},e.headers);r=me({},r.common,r[ue(e.method)]);e:for(t in r){for(i in n=ue(t),o)if(ue(i)===n)continue e;o[t]=r[t]}return a=o,s=Ge(e),l={},fe(a,function(e,t){Se(e)?null!=(c=e(s))&&(l[t]=c):l[t]=e}),l;var a,s,c,l}(e),n.method=u(n.method),n.paramSerializer=we(n.paramSerializer)?c.get(n.paramSerializer):n.paramSerializer,s.$$incOutstandingRequestCount();var t=[],i=[],r=b.resolve(n);return fe(l,function(e){(e.request||e.requestError)&&t.unshift(e.request,e.requestError),(e.response||e.responseError)&&i.push(e.response,e.responseError)}),r=(r=o(r=(r=o(r,t)).then(function(e){var n=e.headers,t=Un(e.data,Fn(n),void 0,e.transformRequest);be(t)&&fe(n,function(e,t){"content-type"===ue(t)&&delete n[t]});be(e.withCredentials)&&!be($.withCredentials)&&(e.withCredentials=$.withCredentials);return function(o,e){var a,t,s=b.defer(),n=s.promise,i=o.headers,r="jsonp"===ue(o.method),c=o.url;r?c=x.getTrustedResourceUrl(c):we(c)||(c=x.valueOf(c));l=c,u=o.paramSerializer(o.params),0<u.length&&(l+=(-1===l.indexOf("?")?"?":"&")+u),c=l,r&&(c=function(n,i){var e=n.split("?");if(2<e.length)throw Dn("badjsonp",'Illegal use more than one "?", in url, "{1}"',n);return fe(X(e[1]),function(e,t){if("JSON_CALLBACK"===e)throw Dn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',n);if(t===i)throw Dn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',i,n)}),n+=(-1===n.indexOf("?")?"?":"&")+i+"=JSON_CALLBACK"}(c,o.jsonpCallbackParam));var l,u;w.pendingRequests.push(o),n.then(m,m),!o.cache&&!$.cache||!1===o.cache||"GET"!==o.method&&"JSONP"!==o.method||(a=Ee(o.cache)?o.cache:Ee($.cache)?$.cache:E);a&&(xe(t=a.get(c))?M(t)?t.then(f,f):$e(t)?h(t[1],t[0],Ge(t[2]),t[3],t[4]):h(t,200,{},"OK","complete"):a.put(c,n));if(be(t)){var p=or(o.url)?g()[o.xsrfCookieName||$.xsrfCookieName]:void 0;p&&(i[o.xsrfHeaderName||$.xsrfHeaderName]=p),v(o.method,c,e,function(e,t,n,i,r){a&&(Hn(e)?a.put(c,[e,t,In(n),i,r]):a.remove(c));function o(){h(t,e,n,i,r)}_?y.$applyAsync(o):(o(),y.$$phase||y.$apply())},i,o.timeout,o.withCredentials,o.responseType,d(o.eventHandlers),d(o.uploadEventHandlers))}return n;function d(e){if(e){var t={};return fe(e,function(n,e){t[e]=function(e){function t(){n(e)}_?y.$applyAsync(t):y.$$phase?t():y.$apply(t)}}),t}}function h(e,t,n,i,r){(Hn(t=-1<=t?t:0)?s.resolve:s.reject)({data:e,status:t,headers:Fn(n),config:o,statusText:i,xhrStatus:r})}function f(e){h(e.data,e.status,Ge(e.headers()),e.statusText,e.xhrStatus)}function m(){var e=w.pendingRequests.indexOf(o);-1!==e&&w.pendingRequests.splice(e,1)}}(e,t).then(a,a)}),i)).finally(function(){s.$$completeOutstandingRequest(ge)});function o(e,t){for(var n=0,i=t.length;n<i;){var r=t[n++],o=t[n++];e=e.then(r,o)}return t.length=0,e}function a(e){var t=me({},e);return t.data=Un(e.data,e.headers,e.status,n.transformResponse),Hn(e.status)?t:b.reject(t)}}return fe(t,function(e){l.unshift(we(e)?c.get(e):c.invoke(e))}),w.pendingRequests=[],function(e){fe(arguments,function(n){w[n]=function(e,t){return w(me({},t||{},{method:n,url:e}))}})}("get","delete","head","jsonp"),function(e){fe(arguments,function(i){w[i]=function(e,t,n){return w(me({},n||{},{method:i,url:e,data:t}))}})}("post","put","patch"),w.defaults=$,w}]}function zn(){this.$get=function(){return function(){return new H.XMLHttpRequest}}}function qn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,i){return g=i,y=(v=e).defer,b=t,x=n[0],function(e,i,t,r,n,o,a,s,c,l){if(i=i||v.url(),"jsonp"===ue(e))var u=b.createCallback(i),p=function(e,i,r){e=e.replace("JSON_CALLBACK",i);var o=x.createElement("script"),a=null;return o.type="text/javascript",o.src=e,o.async=!0,a=function(e){o.removeEventListener("load",a),o.removeEventListener("error",a),x.body.removeChild(o),o=null;var t=-1,n="unknown";e&&("load"!==e.type||b.wasCalled(i)||(e={type:"error"}),n=e.type,t="error"===e.type?404:200),r&&r(t,n)},o.addEventListener("load",a),o.addEventListener("error",a),x.body.appendChild(o),a}(i,u,function(e,t){var n=200===e&&b.getResponse(u);m(r,e,n,"",t,"complete"),b.removeCallback(u)});else{var d=g(e,i);if(d.open(e,i,!0),fe(n,function(e,t){xe(e)&&d.setRequestHeader(t,e)}),d.onload=function(){var e=d.statusText||"",t="response"in d?d.response:d.responseText,n=1223===d.status?204:d.status;0===n&&(n=t?200:"file"===rr(i).protocol?404:0),m(r,n,t,d.getAllResponseHeaders(),e,"complete")},d.onerror=function(){m(r,-1,null,null,"","error")},d.onabort=function(){m(r,-1,null,null,"","abort")},d.ontimeout=function(){m(r,-1,null,null,"","timeout")},fe(c,function(e,t){d.addEventListener(t,e)}),fe(l,function(e,t){d.upload.addEventListener(t,e)}),a&&(d.withCredentials=!0),s)try{d.responseType=s}catch(e){if("json"!==s)throw e}d.send(be(t)?null:t)}if(0<o)var h=y(f,o);else M(o)&&o.then(f);function f(){p&&p(),d&&d.abort()}function m(e,t,n,i,r,o){xe(h)&&y.cancel(h),p=d=null,e(t,n,i,r,o)}};var v,g,y,b,x}]}var Wn=b.$interpolateMinErr=A("$interpolate");function Gn(){var _="{{",S="}}";this.startSymbol=function(e){return e?(_=e,this):_},this.endSymbol=function(e){return e?(S=e,this):S},this.$get=["$parse","$exceptionHandler","$sce",function(g,y,b){var x=_.length,E=S.length,t=new RegExp(_.replace(/./g,e),"g"),n=new RegExp(S.replace(/./g,e),"g");function e(e){return"\\\\\\"+e}function w(e){return e.replace(t,_).replace(n,S)}function $(e,t,n,i){var r=e.$watch(function(e){return r(),i(e)},t,n);return r}function i(r,e,t,i){if(!r.length||-1===r.indexOf(_)){var n;if(!e)(n=C(w(r))).exp=r,n.expressions=[],n.$$watchDelegate=$;return n}i=!!i;for(var o,a,s,c=0,l=[],u=[],p=r.length,d=[],h=[];c<p;){if(-1===(o=r.indexOf(_,c))||-1===(a=r.indexOf(S,o+x))){c!==p&&d.push(w(r.substring(c)));break}c!==o&&d.push(w(r.substring(c,o))),s=r.substring(o+x,a),l.push(s),u.push(g(s,v)),c=a+E,h.push(d.length),d.push("")}if(t&&1<d.length&&Wn.throwNoconcat(r),!e||l.length){var f=function(e){for(var t=0,n=l.length;t<n;t++){if(i&&be(e[t]))return;d[h[t]]=e[t]}return d.join("")},m=function(e){return t?b.getTrusted(t,e):b.valueOf(e)};return me(function(e){var t=0,n=l.length,i=new Array(n);try{for(;t<n;t++)i[t]=u[t](e);return f(i)}catch(e){y(Wn.interr(r,e))}},{exp:r,expressions:l,$$watchDelegate:function(i,r){var o;return i.$watchGroup(u,function(e,t){var n=f(e);r.call(this,n,e!==t?o:n,i),o=n})}})}function v(e){try{return e=m(e),i&&!xe(e)?e:Ue(e)}catch(e){y(Wn.interr(r,e))}}}return i.startSymbol=function(){return _},i.endSymbol=function(){return S},i}]}function Yn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(h,f,m,v,g){var y={};function e(e,t,n,i){var r=4<arguments.length,o=r?Re(arguments,4):[],a=f.setInterval,s=f.clearInterval,c=0,l=xe(i)&&!i,u=(l?v:m).defer(),p=u.promise;return n=xe(n)?n:0,p.$$intervalId=a(function(){l?g.defer(d):h.$evalAsync(d),u.notify(c++),0<n&&n<=c&&(u.resolve(c),s(p.$$intervalId),delete y[p.$$intervalId]),l||h.$apply()},t),y[p.$$intervalId]=u,p;function d(){r?e.apply(null,o):e(c)}}return e.cancel=function(e){return!!(e&&e.$$intervalId in y)&&(Fi(y[e.$$intervalId].promise),y[e.$$intervalId].reject("canceled"),f.clearInterval(e.$$intervalId),delete y[e.$$intervalId],!0)},e}]}Wn.throwNoconcat=function(e){throw Wn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},Wn.interr=function(e,t){return Wn("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Kn=function(){this.$get=function(){var o=b.callbacks,a={};return{createCallback:function(e){var t,n="_"+(o.$$counter++).toString(36),i="angular.callbacks."+n,r=((t=function(e){t.data=e,t.called=!0}).id=n,t);return a[i]=o[n]=r,i},wasCalled:function(e){return a[e].called},getResponse:function(e){return a[e].data},removeCallback:function(e){var t=a[e];delete o[t.id],delete a[e]}}}},Xn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Zn={http:80,https:443,ftp:21},Jn=A("$location");function Qn(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=J(t[n].replace(/%2F/g,"/"));return t.join("/")}function ei(e,t){var n=rr(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=x(n.port)||Zn[n.protocol]||null}var ti=/^\s*[\\/]{2,}/;function ni(e,t,n){if(ti.test(e))throw Jn("badpath",'Invalid url "{0}".',e);var i="/"!==e.charAt(0);i&&(e="/"+e);var r=rr(e),o=i&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname;t.$$path=function(e,t){for(var n=e.split("/"),i=n.length;i--;)n[i]=decodeURIComponent(n[i]),t&&(n[i]=n[i].replace(/\//g,"%2F"));return n.join("/")}(o,n),t.$$search=X(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function ii(e,t){return e.slice(0,t.length)===t}function ri(e,t){if(ii(t,e))return t.substr(e.length)}function oi(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function ai(e){return e.replace(/(#.+)|#$/,"$1")}function si(o,a,s){this.$$html5=!0,s=s||"",ei(o,this),this.$$parse=function(e){var t=ri(a,e);if(!we(t))throw Jn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,a);ni(t,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=Z(this.$$search),t=this.$$hash?"#"+J(this.$$hash):"";this.$$url=Qn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=a+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(xe(n=ri(o,e))?(i=n,r=s&&xe(n=ri(s,n))?a+(ri("/",n)||n):o+i):xe(n=ri(a,e))?r=a+n:a===e+"/"&&(r=a),r&&this.$$parse(r),!!r);var n,i,r}}function ci(i,r,o){ei(i,this),this.$$parse=function(e){var t,n=ri(i,e)||ri(r,e);be(n)||"#"!==n.charAt(0)?this.$$html5?t=n:(t="",be(n)&&(i=e,this.replace())):be(t=ri(o,n))&&(t=n),ni(t,this,!1),this.$$path=function(e,t,n){var i,r=/^\/[A-Z]:(\/.*)/;ii(t,n)&&(t=t.replace(n,""));if(r.exec(t))return e;return(i=r.exec(e))?i[1]:e}(this.$$path,t,i),this.$$compose()},this.$$compose=function(){var e=Z(this.$$search),t=this.$$hash?"#"+J(this.$$hash):"";this.$$url=Qn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+(this.$$url?o+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,t){return oi(i)===oi(e)&&(this.$$parse(e),!0)}}function li(r,o,a){this.$$html5=!0,ci.apply(this,arguments),this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(r===oi(e)?n=e:(i=ri(o,e))?n=r+a+i:o===e+"/"&&(n=o),n&&this.$$parse(n),!!n);var n,i},this.$$compose=function(){var e=Z(this.$$search),t=this.$$hash?"#"+J(this.$$hash):"";this.$$url=Qn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+a+this.$$url,this.$$urlUpdatedByLocation=!0}}var ui={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:pi("$$absUrl"),url:function(e){if(be(e))return this.$$url;var t=Xn.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:pi("$$protocol"),host:pi("$$host"),port:pi("$$port"),path:di("$$path",function(e){return"/"===(e=null!==e?e.toString():"").charAt(0)?e:"/"+e}),search:function(n,e){switch(arguments.length){case 0:return this.$$search;case 1:if(we(n)||$(n))n=n.toString(),this.$$search=X(n);else{if(!Ee(n))throw Jn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");fe(n=B(n,{}),function(e,t){null==e&&delete n[t]}),this.$$search=n}break;default:be(e)||null===e?delete this.$$search[n]:this.$$search[n]=e}return this.$$compose(),this},hash:di("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};function pi(e){return function(){return this[e]}}function di(t,n){return function(e){return be(e)?this[t]:(this[t]=n(e),this.$$compose(),this)}}function hi(){var g="!",y={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return xe(e)?(g=e,this):g},this.html5Mode=function(e){return Ae(e)?(y.enabled=e,this):Ee(e)?(Ae(e.enabled)&&(y.enabled=e.enabled),Ae(e.requireBase)&&(y.requireBase=e.requireBase),(Ae(e.rewriteLinks)||we(e.rewriteLinks))&&(y.rewriteLinks=e.rewriteLinks),this):y},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(a,s,t,o,c){var l,e,n,i,r=s.baseHref(),u=s.url();if(y.enabled){if(!r&&y.requireBase)throw Jn("nobase","$location in HTML5 mode requires a <base> tag to be present!");n=(i=u).substring(0,i.indexOf("/",i.indexOf("//")+2))+(r||"/"),e=t.history?si:li}else n=oi(u),e=ci;var p,d=(p=n).substr(0,oi(p).lastIndexOf("/")+1);(l=new e(n,d,"#"+g)).$$parseLinkUrl(u,u),l.$$state=s.state();var h=/^\s*(javascript|mailto):/i;function f(e,t,n){var i=l.url(),r=l.$$state;try{s.url(e,t,n),l.$$state=s.state()}catch(e){throw l.url(i),l.$$state=r,e}}o.on("click",function(e){var t=y.rewriteLinks;if(t&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var n=de(e.target);"a"!==je(n[0]);)if(n[0]===o[0]||!(n=n.parent())[0])return;if(!we(t)||!be(n.attr(t))){var i=n.prop("href"),r=n.attr("href")||n.attr("xlink:href");Ee(i)&&"[object SVGAnimatedString]"===i.toString()&&(i=rr(i.animVal).href),h.test(i)||!i||n.attr("target")||e.isDefaultPrevented()||l.$$parseLinkUrl(i,r)&&(e.preventDefault(),l.absUrl()!==s.url()&&(a.$apply(),c.angular["ff-684208-preventDefault"]=!0))}}}),ai(l.absUrl())!==ai(u)&&s.url(l.absUrl(),!0);var m=!0;return s.onUrlChange(function(i,r){ii(i,d)?(a.$evalAsync(function(){var e,t=l.absUrl(),n=l.$$state;i=ai(i),l.$$parse(i),l.$$state=r,e=a.$broadcast("$locationChangeStart",i,t,r,n).defaultPrevented,l.absUrl()===i&&(e?(l.$$parse(t),f(t,!1,l.$$state=n)):(m=!1,v(t,n)))}),a.$$phase||a.$digest()):c.location.href=i}),a.$watch(function(){if(m||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var n=ai(s.url()),e=ai(l.absUrl()),i=s.state(),r=l.$$replace,o=n!==e||l.$$html5&&t.history&&i!==l.$$state;(m||o)&&(m=!1,a.$evalAsync(function(){var e=l.absUrl(),t=a.$broadcast("$locationChangeStart",e,n,l.$$state,i).defaultPrevented;l.absUrl()===e&&(t?(l.$$parse(n),l.$$state=i):(o&&f(e,r,i===l.$$state?null:l.$$state),v(n,i)))}))}l.$$replace=!1}),l;function v(e,t){a.$broadcast("$locationChangeSuccess",l.absUrl(),e,l.$$state,t)}}]}function fi(){var i=!0,o=this;this.debugEnabled=function(e){return xe(e)?(i=e,this):i},this.$get=["$window",function(n){var e,r=pe||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:t("log"),info:t("info"),warn:t("warn"),error:t("error"),debug:(e=t("debug"),function(){i&&e.apply(o,arguments)})};function t(e){var t=n.console||{},i=t[e]||t.log||ge;return function(){var n=[];return fe(arguments,function(e){var t;n.push((_e(t=e)&&(t.stack&&r?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t))}),Function.prototype.apply.call(i,t,n)}}}]}fe([li,ci,si],function(t){t.prototype=Object.create(ui),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==si||!this.$$html5)throw Jn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=be(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var mi=A("$parse"),vi={}.constructor.prototype.valueOf;function gi(e){return e+""}var yi=Fe();fe("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){yi[e]=!0});var bi={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},xi=function(e){this.options=e};xi.prototype={constructor:xi,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),i=n+this.peek(2),r=yi[t],o=yi[n],a=yi[i];if(r||o||a){var s=a?i:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),i=t.charCodeAt(0);return 55296<=n&&n<=56319&&56320<=i&&i<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=xe(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw mi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=ue(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=bi[o]||o}r=!1}else if("\\"===o)r=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var Ei=function(e,t){this.lexer=e,this.options=t};function wi(e,t){return void 0!==e?e:t}function $i(e,t){return void 0===e?t:void 0===t?e:e+t}Ei.Program="Program",Ei.ExpressionStatement="ExpressionStatement",Ei.AssignmentExpression="AssignmentExpression",Ei.ConditionalExpression="ConditionalExpression",Ei.LogicalExpression="LogicalExpression",Ei.BinaryExpression="BinaryExpression",Ei.UnaryExpression="UnaryExpression",Ei.CallExpression="CallExpression",Ei.MemberExpression="MemberExpression",Ei.Identifier="Identifier",Ei.Literal="Literal",Ei.ArrayExpression="ArrayExpression",Ei.Property="Property",Ei.ObjectExpression="ObjectExpression",Ei.ThisExpression="ThisExpression",Ei.LocalsExpression="LocalsExpression",Ei.NGValueParameter="NGValueParameter",Ei.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Ei.Program,body:e}},expressionStatement:function(){return{type:Ei.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!Ti(e))throw mi("lval","Trying to assign a value to a non l-value");e={type:Ei.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Ei.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Ei.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Ei.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Ei.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Ei.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Ei.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Ei.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Ei.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=B(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Ei.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:Ei.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Ei.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Ei.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:Ei.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)for(;e.push(this.filterChain()),this.expect(","););return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Ei.Identifier,name:e.text}},constant:function(){return{type:Ei.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ei.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Ei.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Ei.ObjectExpression,properties:t}},throwError:function(e,t){throw mi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw mi("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw mi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){return this.peekAhead(0,e,t,n,i)},peekAhead:function(e,t,n,i,r){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===i||a===r||!t&&!n&&!i&&!r)return o}return!1},expect:function(e,t,n,i){var r=this.peek(e,t,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:Ei.ThisExpression},$locals:{type:Ei.LocalsExpression}}};var _i=1,Si=2;function Ci(e,t,n){var i,r,o,a,s,c=e.isPure=function(e,t){switch(e.type){case Ei.MemberExpression:if(e.computed)return!1;break;case Ei.UnaryExpression:return _i;case Ei.BinaryExpression:return"+"!==e.operator&&_i;case Ei.CallExpression:return!1}return void 0===t?Si:t}(e,n);switch(e.type){case Ei.Program:i=!0,fe(e.body,function(e){Ci(e.expression,t,c),i=i&&e.expression.constant}),e.constant=i;break;case Ei.Literal:e.constant=!0,e.toWatch=[];break;case Ei.UnaryExpression:Ci(e.argument,t,c),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Ei.BinaryExpression:Ci(e.left,t,c),Ci(e.right,t,c),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Ei.LogicalExpression:Ci(e.left,t,c),Ci(e.right,t,c),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Ei.ConditionalExpression:Ci(e.test,t,c),Ci(e.alternate,t,c),Ci(e.consequent,t,c),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Ei.Identifier:e.constant=!1,e.toWatch=[e];break;case Ei.MemberExpression:Ci(e.object,t,c),e.computed&&Ci(e.property,t,c),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=e.constant?[]:[e];break;case Ei.CallExpression:o=!!e.filter&&(a=t,s=e.callee.name,!a(s).$stateful),i=o,r=[],fe(e.arguments,function(e){Ci(e,t,c),i=i&&e.constant,r.push.apply(r,e.toWatch)}),e.constant=i,e.toWatch=o?r:[e];break;case Ei.AssignmentExpression:Ci(e.left,t,c),Ci(e.right,t,c),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Ei.ArrayExpression:i=!0,r=[],fe(e.elements,function(e){Ci(e,t,c),i=i&&e.constant,r.push.apply(r,e.toWatch)}),e.constant=i,e.toWatch=r;break;case Ei.ObjectExpression:i=!0,r=[],fe(e.properties,function(e){Ci(e.value,t,c),i=i&&e.value.constant,r.push.apply(r,e.value.toWatch),e.computed&&(Ci(e.key,t,!1),i=i&&e.key.constant,r.push.apply(r,e.key.toWatch))}),e.constant=i,e.toWatch=r;break;case Ei.ThisExpression:case Ei.LocalsExpression:e.constant=!1,e.toWatch=[]}}function Ai(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function Ti(e){return e.type===Ei.Identifier||e.type===Ei.MemberExpression}function ji(e){if(1===e.body.length&&Ti(e.body[0].expression))return{type:Ei.AssignmentExpression,left:e.body[0].expression,right:{type:Ei.NGValueParameter},operator:"="}}function ki(e){this.$filter=e}function Mi(e){this.$filter=e}function Pi(e,t,n){this.ast=new Ei(e,n),this.astCompiler=n.csp?new Mi(t):new ki(t)}function Ri(e){return Se(e.valueOf)?e.valueOf():vi.call(e)}function Di(){var n,i,p=Fe(),h={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){h[e]=t},this.setIdentifierFns=function(e,t){return n=e,i=t,this},this.$get=["$filter",function(r){var o={csp:L().noUnsafeEval,literals:B(h),isIdentifierStart:Se(n)&&n,isIdentifierContinue:Se(i)&&i};return e.$$getAst=function(e){return new Pi(new xi(o),r,o).getAst(e).ast},e;function e(e,t){var n,i;switch(typeof e){case"string":if(e=e.trim(),!(n=p[i=e]))(n=new Pi(new xi(o),r,o).parse(e)).constant?n.$$watchDelegate=a:n.oneTime?n.$$watchDelegate=n.literal?u:l:n.inputs&&(n.$$watchDelegate=c),p[i]=n;return s(n,t);case"function":return s(e,t);default:return s(ge,t)}}function d(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&"object"==typeof(e=Ri(e))&&!n)&&(e===t||e!=e&&t!=t)}function c(e,t,n,o,i){var a,s=o.inputs;if(1===s.length){var r=d;return s=s[0],e.$watch(function(e){var t=s(e);return d(t,r,s.isPure)||(a=o(e,void 0,void 0,[t]),r=t&&Ri(t)),a},t,n,i)}for(var c=[],l=[],u=0,p=s.length;u<p;u++)c[u]=d,l[u]=null;return e.$watch(function(e){for(var t=!1,n=0,i=s.length;n<i;n++){var r=s[n](e);(t||(t=!d(r,c[n],s[n].isPure)))&&(l[n]=r,c[n]=r&&Ri(r))}return t&&(a=o(e,void 0,void 0,l)),a},t,n,i)}function l(e,i,t,n,r){var o,a;return o=n.inputs?c(e,s,t,n,r):e.$watch(function(e){return n(e)},s,t);function s(e,t,n){a=e,Se(i)&&i(e,t,n),xe(e)&&n.$$postDigest(function(){xe(a)&&o()})}}function u(e,i,t,n){var r,o;return r=e.$watch(function(e){return n(e)},function(e,t,n){o=e,Se(i)&&i(e,t,n),a(e)&&n.$$postDigest(function(){a(o)&&r()})},t);function a(e){var t=!0;return fe(e,function(e){xe(e)||(t=!1)}),t}}function a(e,t,n,i){var r=e.$watch(function(e){return r(),i(e)},t,n);return r}function s(a,s){if(!s)return a;var e=a.$$watchDelegate,o=!1,t=e!==u&&e!==l?function(e,t,n,i){var r=o&&i?i[0]:a(e,t,n,i);return s(r,e,t)}:function(e,t,n,i){var r=a(e,t,n,i),o=s(r,e,t);return xe(r)?o:r};return o=!a.inputs,e&&e!==c?(t.$$watchDelegate=e,t.inputs=a.inputs):s.$stateful||(t.$$watchDelegate=c,t.inputs=a.inputs?a.inputs:[a]),t.inputs&&(t.inputs=t.inputs.map(function(t){return t.isPure===Si?function(e){return t(e)}:t})),t}}]}function Oi(){var n=!0;this.$get=["$rootScope","$exceptionHandler",function(t,e){return Bi(function(e){t.$evalAsync(e)},e,n)}],this.errorOnUnhandledRejections=function(e){return xe(e)?(n=e,this):n}}function Ni(){var n=!0;this.$get=["$browser","$exceptionHandler",function(t,e){return Bi(function(e){t.defer(e)},e,n)}],this.errorOnUnhandledRejections=function(e){return xe(e)?(n=e,this):n}}function Bi(a,s,c){var n=A("$q",TypeError),l=0,i=[];function r(){return new function(){var t=this.promise=new o;this.resolve=function(e){d(t,e)},this.reject=function(e){h(t,e)},this.notify=function(e){m(t,e)}}}function o(){this.$$state={status:0}}function u(){for(;!l&&i.length;){var e=i.shift();if(!Li(e)){Ii(e);var t="Possibly unhandled rejection: "+Ye(e.value);_e(e.value)?s(e.value,t):s(t)}}}function p(e){!c||e.pending||2!==e.status||Li(e)||(0===l&&0===i.length&&a(u),i.push(e)),!e.processScheduled&&e.pending&&(e.processScheduled=!0,++l,a(function(){!function(e){var t,n,i;i=e.pending,e.processScheduled=!1,e.pending=void 0;try{for(var r=0,o=i.length;r<o;++r){Ii(e),n=i[r][0],t=i[r][e.status];try{Se(t)?d(n,t(e.value)):1===e.status?d(n,e.value):h(n,e.value)}catch(e){h(n,e),e&&!0===e.$$passToExceptionHandler&&s(e)}}}finally{--l,c&&0===l&&a(u)}}(e)}))}function d(e,t){e.$$state.status||(t===e?f(e,n("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):function t(n,e){var i;var r=!1;try{(Ee(e)||Se(e))&&(i=e.then),Se(i)?(n.$$state.status=-1,i.call(e,function o(e){if(r)return;r=!0,function t(n,e){var i;var r=!1;try{(Ee(e)||Se(e))&&(i=e.then),Se(i)?(n.$$state.status=-1,i.call(e,o,a,function(e){m(n,e)})):(n.$$state.value=e,n.$$state.status=1,p(n.$$state))}catch(e){a(e)}function o(e){r||(r=!0,t(n,e))}function a(e){r||(r=!0,f(n,e))}}(n,e)},a,function(e){m(n,e)})):(n.$$state.value=e,n.$$state.status=1,p(n.$$state))}catch(e){a(e)}function o(e){r||(r=!0,t(n,e))}function a(e){r||(r=!0,f(n,e))}}(e,t))}function h(e,t){e.$$state.status||f(e,t)}function f(e,t){e.$$state.value=t,e.$$state.status=2,p(e.$$state)}function m(e,r){var o=e.$$state.pending;e.$$state.status<=0&&o&&o.length&&a(function(){for(var e,t,n=0,i=o.length;n<i;n++){t=o[n][0],e=o[n][3];try{m(t,Se(e)?e(r):r)}catch(e){s(e)}}})}function v(e){var t=new o;return h(t,e),t}function g(e,t,n){var i=null;try{Se(n)&&(i=n())}catch(e){return v(e)}return M(i)?i.then(function(){return t(e)},v):t(e)}function y(e,t,n,i){var r=new o;return d(r,e),r.then(t,n,i)}me(o.prototype,{then:function(e,t,n){if(be(e)&&be(t)&&be(n))return this;var i=new o;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),0<this.$$state.status&&p(this.$$state),i},catch:function(e){return this.then(null,e)},finally:function(t,e){return this.then(function(e){return g(e,b,t)},function(e){return g(e,v,t)},e)}});var b=y;function e(e){if(!Se(e))throw n("norslvr","Expected resolverFn, got '{0}'",e);var t=new o;return e(function(e){d(t,e)},function(e){h(t,e)}),t}return e.prototype=o.prototype,e.defer=r,e.reject=v,e.when=y,e.resolve=b,e.all=function(e){var n=new o,i=0,r=$e(e)?[]:{};return fe(e,function(e,t){i++,y(e).then(function(e){r[t]=e,--i||d(n,r)},function(e){h(n,e)})}),0===i&&d(n,r),n},e.race=function(e){var t=r();return fe(e,function(e){y(e).then(t.resolve,t.reject)}),t.promise},e}function Li(e){return!!e.pur}function Ii(e){e.pur=!0}function Fi(e){Ii(e.$$state)}function Ui(){this.$get=["$window","$timeout",function(e,n){var i=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,t=!!i,o=t?function(e){var t=i(e);return function(){r(t)}}:function(e){var t=n(e,16.66,!1);return function(){n.cancel(t)}};return o.supported=t,o}]}function Hi(){var $=10,_=A("$rootScope"),S=null,C=null;this.digestTtl=function(e){return arguments.length&&($=e),$},this.$get=["$exceptionHandler","$parse","$browser",function(d,f,h){function i(e){e.currentScope.$$destroyed=!0}function r(){this.$id=T(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,(this.$root=this).$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}r.prototype={constructor:r,$new:function(e,t){var n;return t=t||this,e?(n=new r).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=T(),this.$$ChildScope=null}return t.prototype=e,t}(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!==this)&&n.$on("$destroy",i),n},$watch:function(e,t,n,i){var r=f(e),o=Se(t)?t:ge;if(r.$$watchDelegate)return r.$$watchDelegate(this,o,n,r,e);var a=this,s=a.$$watchers,c={fn:o,last:E,get:r,exp:i||e,eq:!!n};return S=null,s||((s=a.$$watchers=[]).$$digestWatchIndex=-1),s.unshift(c),s.$$digestWatchIndex++,l(this,1),function(){var e=ke(s,c);0<=e&&(l(a,-1),e<s.$$digestWatchIndex&&s.$$digestWatchIndex--),S=null}},$watchGroup:function(e,i){var r=new Array(e.length),o=new Array(e.length),a=[],s=this,c=!1,t=!0;if(!e.length){var n=!0;return s.$evalAsync(function(){n&&i(o,o,s)}),function(){n=!1}}if(1===e.length)return this.$watch(e[0],function(e,t,n){o[0]=e,r[0]=t,i(o,e===t?o:r,n)});function l(){c=!1,t?(t=!1,i(o,o,s)):i(o,r,s)}return fe(e,function(e,n){var t=s.$watch(e,function(e,t){o[n]=e,r[n]=t,c||(c=!0,s.$evalAsync(l))});a.push(t)}),function(){for(;a.length;)a.shift()()}},$watchCollection:function(e,n){h.$stateful=!0;var a,s,i,r=this,o=1<n.length,c=0,t=f(e,h),l=[],u={},p=!0,d=0;function h(e){var t,n,i,r;if(!be(a=e)){if(Ee(a))if(D(a)){s!==l&&(d=(s=l).length=0,c++),t=a.length,d!==t&&(c++,s.length=d=t);for(var o=0;o<t;o++)r=s[o],i=a[o],r!=r&&i!=i||r===i||(c++,s[o]=i)}else{for(n in s!==u&&(s=u={},d=0,c++),t=0,a)V.call(a,n)&&(t++,i=a[n],r=s[n],n in s?r!=r&&i!=i||r===i||(c++,s[n]=i):(d++,s[n]=i,c++));if(t<d)for(n in c++,s)V.call(a,n)||(d--,delete s[n])}else s!==a&&(s=a,c++);return c}}return this.$watch(t,function(){if(p?(p=!1,n(a,a,r)):n(a,i,r),o)if(Ee(a))if(D(a)){i=new Array(a.length);for(var e=0;e<a.length;e++)i[e]=a[e]}else for(var t in i={},a)V.call(a,t)&&(i[t]=a[t]);else i=a})},$digest:function(){var e,t,n,i,r,o,a,s,c,l=$,u=[];b("$digest"),h.$$checkUrlChange(),this===m&&null!==C&&(h.defer.cancel(C),w()),S=null;do{r=!1,a=this;for(var p=0;p<v.length;p++){try{(0,(c=v[p]).fn)(c.scope,c.locals)}catch(e){d(e)}S=null}v.length=0;e:do{if(i=a.$$watchers)for(i.$$digestWatchIndex=i.length;i.$$digestWatchIndex--;)try{if(e=i[i.$$digestWatchIndex])if((t=(0,e.get)(a))===(n=e.last)||(e.eq?Pe(t,n):j(t)&&j(n))){if(e===S){r=!1;break e}}else r=!0,(S=e).last=e.eq?B(t,null):t,(0,e.fn)(t,n===E?t:n,a),l<5&&(u[s=4-l]||(u[s]=[]),u[s].push({msg:Se(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:t,oldVal:n}))}catch(e){d(e)}if(!(o=a.$$watchersCount&&a.$$childHead||a!==this&&a.$$nextSibling))for(;a!==this&&!(o=a.$$nextSibling);)a=a.$parent}while(a=o);if((r||v.length)&&!l--)throw x(),_("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",$,u)}while(r||v.length);for(x();y<g.length;)try{g[y++]()}catch(e){d(e)}g.length=y=0,h.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;for(var t in this.$broadcast("$destroy"),this.$$destroyed=!0,this===m&&h.$$applicationDestroyed(),l(this,-this.$$watchersCount),this.$$listenerCount)o(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=ge,this.$on=this.$watch=this.$watchGroup=function(){return ge},this.$$listeners={},this.$$nextSibling=null,function e(t){9===pe&&(t.$$childHead&&e(t.$$childHead),t.$$nextSibling&&e(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}(this)}},$eval:function(e,t){return f(e)(this,t)},$evalAsync:function(e,t){m.$$phase||v.length||h.defer(function(){v.length&&m.$digest()}),v.push({scope:this,fn:f(e),locals:t})},$$postDigest:function(e){g.push(e)},$apply:function(e){try{b("$apply");try{return this.$eval(e)}finally{x()}}catch(e){d(e)}finally{try{m.$digest()}catch(e){throw d(e),e}}},$applyAsync:function(e){var t=this;e&&n.push(function(){t.$eval(e)}),e=f(e),null===C&&(C=h.defer(function(){m.$apply(w)}))},$on:function(t,n){var i=this.$$listeners[t];i||(this.$$listeners[t]=i=[]),i.push(n);for(var e=this;e.$$listenerCount[t]||(e.$$listenerCount[t]=0),e.$$listenerCount[t]++,e=e.$parent;);var r=this;return function(){var e=i.indexOf(n);-1!==e&&(delete i[e],o(r,1,t))}},$emit:function(e,t){var n,i,r,o=[],a=this,s=!1,c={name:e,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=F([c],arguments,1);do{for(n=a.$$listeners[e]||o,c.currentScope=a,i=0,r=n.length;i<r;i++)if(n[i])try{n[i].apply(null,l)}catch(e){d(e)}else n.splice(i,1),i--,r--;if(s)break;a=a.$parent}while(a);return c.currentScope=null,c},$broadcast:function(e,t){var n=this,i=n,r=n,o={name:e,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return o;for(var a,s,c,l=F([o],arguments,1);i=r;){for(s=0,c=(a=(o.currentScope=i).$$listeners[e]||[]).length;s<c;s++)if(a[s])try{a[s].apply(null,l)}catch(e){d(e)}else a.splice(s,1),s--,c--;if(!(r=i.$$listenerCount[e]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(r=i.$$nextSibling);)i=i.$parent}return o.currentScope=null,o}};var m=new r,v=m.$$asyncQueue=[],g=m.$$postDigestQueue=[],n=m.$$applyAsyncQueue=[],y=0;return m;function b(e){if(m.$$phase)throw _("inprog","{0} already in progress",m.$$phase);m.$$phase=e}function x(){m.$$phase=null}function l(e,t){for(;e.$$watchersCount+=t,e=e.$parent;);}function o(e,t,n){for(;e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n],e=e.$parent;);}function E(){}function w(){for(;n.length;)try{n.shift()()}catch(e){d(e)}C=null}}]}function Vi(){var r=/^\s*(https?|s?ftp|mailto|tel|file):/,o=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return xe(e)?(r=e,this):r},this.imgSrcSanitizationWhitelist=function(e){return xe(e)?(o=e,this):o},this.$get=function(){return function(e,t){var n,i=t?o:r;return""===(n=rr(e&&e.trim()).href)||n.match(i)?e:"unsafe:"+n}}}ki.prototype={compile:function(e){var r=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ci(e,r.$filter);var t,n="";if(this.stage="assign",t=ji(e)){this.state.computing="assign";var i=this.nextId();this.recurse(t,i),this.return_(i),n="fn.assign="+this.generateFunction("assign","s,v,l")}var o=Ai(e.body);r.stage="inputs",fe(o,function(e,t){var n="fn"+t;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(e,i),r.return_(i),r.state.inputs.push({name:n,isPure:e.isPure}),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(e);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,gi,wi,$i);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return fe(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(e){return e.name}).join(",")+"];"),t.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var n=[],i=this;return fe(this.state.filters,function(e,t){n.push(e+"=$filter("+i.escape(t)+")")}),n.length?"var "+n.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(n,t,e,i,r,o){var a,s,c,l,u,p=this;if(i=i||ge,!o&&xe(n.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",n.watchId)),this.lazyRecurse(n,t,e,i,r,!0));switch(n.type){case Ei.Program:fe(n.body,function(e,t){p.recurse(e.expression,void 0,void 0,function(e){s=e}),t!==n.body.length-1?p.current().body.push(s,";"):p.return_(s)});break;case Ei.Literal:l=this.escape(n.value),this.assign(t,l),i(t||l);break;case Ei.UnaryExpression:this.recurse(n.argument,void 0,void 0,function(e){s=e}),l=n.operator+"("+this.ifDefined(s,0)+")",this.assign(t,l),i(l);break;case Ei.BinaryExpression:this.recurse(n.left,void 0,void 0,function(e){a=e}),this.recurse(n.right,void 0,void 0,function(e){s=e}),l="+"===n.operator?this.plus(a,s):"-"===n.operator?this.ifDefined(a,0)+n.operator+this.ifDefined(s,0):"("+a+")"+n.operator+"("+s+")",this.assign(t,l),i(l);break;case Ei.LogicalExpression:t=t||this.nextId(),p.recurse(n.left,t),p.if_("&&"===n.operator?t:p.not(t),p.lazyRecurse(n.right,t)),i(t);break;case Ei.ConditionalExpression:t=t||this.nextId(),p.recurse(n.test,t),p.if_(t,p.lazyRecurse(n.alternate,t),p.lazyRecurse(n.consequent,t)),i(t);break;case Ei.Identifier:t=t||this.nextId(),e&&(e.context="inputs"===p.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",n.name)+"?l:s"),e.computed=!1,e.name=n.name),p.if_("inputs"===p.stage||p.not(p.getHasOwnProperty("l",n.name)),function(){p.if_("inputs"===p.stage||"s",function(){r&&1!==r&&p.if_(p.isNull(p.nonComputedMember("s",n.name)),p.lazyAssign(p.nonComputedMember("s",n.name),"{}")),p.assign(t,p.nonComputedMember("s",n.name))})},t&&p.lazyAssign(t,p.nonComputedMember("l",n.name))),i(t);break;case Ei.MemberExpression:a=e&&(e.context=this.nextId())||this.nextId(),t=t||this.nextId(),p.recurse(n.object,a,void 0,function(){p.if_(p.notNull(a),function(){n.computed?(s=p.nextId(),p.recurse(n.property,s),p.getStringValue(s),r&&1!==r&&p.if_(p.not(p.computedMember(a,s)),p.lazyAssign(p.computedMember(a,s),"{}")),l=p.computedMember(a,s),p.assign(t,l),e&&(e.computed=!0,e.name=s)):(r&&1!==r&&p.if_(p.isNull(p.nonComputedMember(a,n.property.name)),p.lazyAssign(p.nonComputedMember(a,n.property.name),"{}")),l=p.nonComputedMember(a,n.property.name),p.assign(t,l),e&&(e.computed=!1,e.name=n.property.name))},function(){p.assign(t,"undefined")}),i(t)},!!r);break;case Ei.CallExpression:t=t||this.nextId(),n.filter?(s=p.filter(n.callee.name),c=[],fe(n.arguments,function(e){var t=p.nextId();p.recurse(e,t),c.push(t)}),l=s+"("+c.join(",")+")",p.assign(t,l),i(t)):(s=p.nextId(),a={},c=[],p.recurse(n.callee,s,a,function(){p.if_(p.notNull(s),function(){fe(n.arguments,function(e){p.recurse(e,n.constant?void 0:p.nextId(),void 0,function(e){c.push(e)})}),l=a.name?p.member(a.context,a.name,a.computed)+"("+c.join(",")+")":s+"("+c.join(",")+")",p.assign(t,l)},function(){p.assign(t,"undefined")}),i(t)}));break;case Ei.AssignmentExpression:s=this.nextId(),a={},this.recurse(n.left,void 0,a,function(){p.if_(p.notNull(a.context),function(){p.recurse(n.right,s),l=p.member(a.context,a.name,a.computed)+n.operator+s,p.assign(t,l),i(t||l)})},1);break;case Ei.ArrayExpression:c=[],fe(n.elements,function(e){p.recurse(e,n.constant?void 0:p.nextId(),void 0,function(e){c.push(e)})}),l="["+c.join(",")+"]",this.assign(t,l),i(t||l);break;case Ei.ObjectExpression:c=[],u=!1,fe(n.properties,function(e){e.computed&&(u=!0)}),u?(t=t||this.nextId(),this.assign(t,"{}"),fe(n.properties,function(e){e.computed?(a=p.nextId(),p.recurse(e.key,a)):a=e.key.type===Ei.Identifier?e.key.name:""+e.key.value,s=p.nextId(),p.recurse(e.value,s),p.assign(p.member(t,a,e.computed),s)})):(fe(n.properties,function(t){p.recurse(t.value,n.constant?void 0:p.nextId(),void 0,function(e){c.push(p.escape(t.key.type===Ei.Identifier?t.key.name:""+t.key.value)+":"+e)})}),l="{"+c.join(",")+"}",this.assign(t,l)),i(t||l);break;case Ei.ThisExpression:this.assign(t,"s"),i(t||"s");break;case Ei.LocalsExpression:this.assign(t,"l"),i(t||"l");break;case Ei.NGValueParameter:this.assign(t,"v"),i(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),i[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var i=this.current().body;i.push("if(",e,"){"),t(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(t)?e+"."+t:e+'["'+t.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,i,r,o){var a=this;return function(){a.recurse(e,t,n,i,r,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(we(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if($(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw mi("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Mi.prototype={compile:function(e){var t,i,r=this;Ci(e,r.$filter),(t=ji(e))&&(i=this.recurse(t));var o,n=Ai(e.body);n&&(o=[],fe(n,function(e,t){var n=r.recurse(e);n.isPure=e.isPure,e.input=n,o.push(n),e.watchId=t}));var a=[];fe(e.body,function(e){a.push(r.recurse(e.expression))});var s=0===e.body.length?ge:1===e.body.length?a[0]:function(t,n){var i;return fe(a,function(e){i=e(t,n)}),i};return i&&(s.assign=function(e,t,n){return i(e,n,t)}),o&&(s.inputs=o),s},recurse:function(e,c,t){var a,l,u,n=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Ei.Literal:return this.value(e.value,c);case Ei.UnaryExpression:return l=this.recurse(e.argument),this["unary"+e.operator](l,c);case Ei.BinaryExpression:case Ei.LogicalExpression:return a=this.recurse(e.left),l=this.recurse(e.right),this["binary"+e.operator](a,l,c);case Ei.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),c);case Ei.Identifier:return n.identifier(e.name,c,t);case Ei.MemberExpression:return a=this.recurse(e.object,!1,!!t),e.computed||(l=e.property.name),e.computed&&(l=this.recurse(e.property)),e.computed?this.computedMember(a,l,c,t):this.nonComputedMember(a,l,c,t);case Ei.CallExpression:return u=[],fe(e.arguments,function(e){u.push(n.recurse(e))}),e.filter&&(l=this.$filter(e.callee.name)),e.filter||(l=this.recurse(e.callee,!0)),e.filter?function(e,t,n,i){for(var r=[],o=0;o<u.length;++o)r.push(u[o](e,t,n,i));var a=l.apply(void 0,r,i);return c?{context:void 0,name:void 0,value:a}:a}:function(e,t,n,i){var r,o=l(e,t,n,i);if(null!=o.value){for(var a=[],s=0;s<u.length;++s)a.push(u[s](e,t,n,i));r=o.value.apply(o.context,a)}return c?{value:r}:r};case Ei.AssignmentExpression:return a=this.recurse(e.left,!0,1),l=this.recurse(e.right),function(e,t,n,i){var r=a(e,t,n,i),o=l(e,t,n,i);return r.context[r.name]=o,c?{value:o}:o};case Ei.ArrayExpression:return u=[],fe(e.elements,function(e){u.push(n.recurse(e))}),function(e,t,n,i){for(var r=[],o=0;o<u.length;++o)r.push(u[o](e,t,n,i));return c?{value:r}:r};case Ei.ObjectExpression:return u=[],fe(e.properties,function(e){e.computed?u.push({key:n.recurse(e.key),computed:!0,value:n.recurse(e.value)}):u.push({key:e.key.type===Ei.Identifier?e.key.name:""+e.key.value,computed:!1,value:n.recurse(e.value)})}),function(e,t,n,i){for(var r={},o=0;o<u.length;++o)u[o].computed?r[u[o].key(e,t,n,i)]=u[o].value(e,t,n,i):r[u[o].key]=u[o].value(e,t,n,i);return c?{value:r}:r};case Ei.ThisExpression:return function(e){return c?{value:e}:e};case Ei.LocalsExpression:return function(e,t){return c?{value:t}:t};case Ei.NGValueParameter:return function(e,t,n){return c?{value:n}:n}}},"unary+":function(o,a){return function(e,t,n,i){var r=o(e,t,n,i);return r=xe(r)?+r:0,a?{value:r}:r}},"unary-":function(o,a){return function(e,t,n,i){var r=o(e,t,n,i);return r=xe(r)?-r:-0,a?{value:r}:r}},"unary!":function(o,a){return function(e,t,n,i){var r=!o(e,t,n,i);return a?{value:r}:r}},"binary+":function(o,a,s){return function(e,t,n,i){var r=$i(o(e,t,n,i),a(e,t,n,i));return s?{value:r}:r}},"binary-":function(s,c,l){return function(e,t,n,i){var r=s(e,t,n,i),o=c(e,t,n,i),a=(xe(r)?r:0)-(xe(o)?o:0);return l?{value:a}:a}},"binary*":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)*a(e,t,n,i);return s?{value:r}:r}},"binary/":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)/a(e,t,n,i);return s?{value:r}:r}},"binary%":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)%a(e,t,n,i);return s?{value:r}:r}},"binary===":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)===a(e,t,n,i);return s?{value:r}:r}},"binary!==":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)!==a(e,t,n,i);return s?{value:r}:r}},"binary==":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)==a(e,t,n,i);return s?{value:r}:r}},"binary!=":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)!=a(e,t,n,i);return s?{value:r}:r}},"binary<":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)<a(e,t,n,i);return s?{value:r}:r}},"binary>":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)>a(e,t,n,i);return s?{value:r}:r}},"binary<=":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)<=a(e,t,n,i);return s?{value:r}:r}},"binary>=":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)>=a(e,t,n,i);return s?{value:r}:r}},"binary&&":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)&&a(e,t,n,i);return s?{value:r}:r}},"binary||":function(o,a,s){return function(e,t,n,i){var r=o(e,t,n,i)||a(e,t,n,i);return s?{value:r}:r}},"ternary?:":function(o,a,s,c){return function(e,t,n,i){var r=o(e,t,n,i)?a(e,t,n,i):s(e,t,n,i);return c?{value:r}:r}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(a,s,c){return function(e,t,n,i){var r=t&&a in t?t:e;c&&1!==c&&r&&null==r[a]&&(r[a]={});var o=r?r[a]:void 0;return s?{context:r,name:a,value:o}:o}},computedMember:function(s,c,l,u){return function(e,t,n,i){var r,o,a=s(e,t,n,i);return null!=a&&(r=gi(r=c(e,t,n,i)),u&&1!==u&&a&&!a[r]&&(a[r]={}),o=a[r]),l?{context:a,name:r,value:o}:o}},nonComputedMember:function(a,s,c,l){return function(e,t,n,i){var r=a(e,t,n,i);l&&1!==l&&r&&null==r[s]&&(r[s]={});var o=null!=r?r[s]:void 0;return c?{context:r,name:s,value:o}:o}},inputs:function(r,o){return function(e,t,n,i){return i?i[o]:r(e,t,n)}}},Pi.prototype={constructor:Pi,parse:function(e){var t,n=this.getAst(e),i=this.astCompiler.compile(n.ast);return i.literal=0===(t=n.ast).body.length||1===t.body.length&&(t.body[0].expression.type===Ei.Literal||t.body[0].expression.type===Ei.ArrayExpression||t.body[0].expression.type===Ei.ObjectExpression),i.constant=n.ast.constant,i.oneTime=n.oneTime,i},getAst:function(e){var t=!1;return":"===(e=e.trim()).charAt(0)&&":"===e.charAt(1)&&(t=!0,e=e.substring(2)),{ast:this.ast.ast(e),oneTime:t}}};var zi=A("$sce"),qi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Wi=/_([a-z])/g;function Gi(e){return e.replace(Wi,nt)}function Yi(e){var t=[];return xe(e)&&fe(e,function(e){t.push(function(e){if("self"===e)return e;if(we(e)){if(-1<e.indexOf("***"))throw zi("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=R(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(S(e))return new RegExp("^"+e.source+"$");throw zi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))}),t}function Ki(){this.SCE_CONTEXTS=qi;var a=["self"],s=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(a=Yi(e)),a},this.resourceUrlBlacklist=function(e){return arguments.length&&(s=Yi(e)),s},this.$get=["$injector",function(e){var i=function(e){throw zi("unsafe","Attempting to use an unsafe value in a safe context.")};function o(e,t){return"self"===e?or(t):!!e.exec(t.href)}function t(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}e.has("$sanitize")&&(i=e.get("$sanitize"));var n=t(),r={};return r[qi.HTML]=t(n),r[qi.CSS]=t(n),r[qi.URL]=t(n),r[qi.JS]=t(n),r[qi.RESOURCE_URL]=t(r[qi.URL]),{trustAs:function(e,t){var n=r.hasOwnProperty(e)?r[e]:null;if(!n)throw zi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||be(t)||""===t)return t;if("string"!=typeof t)throw zi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(e,t){if(null===t||be(t)||""===t)return t;var n=r.hasOwnProperty(e)?r[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===qi.RESOURCE_URL){if(function(e){var t,n,i=rr(e.toString()),r=!1;for(t=0,n=a.length;t<n;t++)if(o(a[t],i)){r=!0;break}if(r)for(t=0,n=s.length;t<n;t++)if(o(s[t],i)){r=!1;break}return r}(t))return t;throw zi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===qi.HTML)return i(t);throw zi("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof n?e.$$unwrapTrustedValue():e}}}]}function Xi(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(i,e){if(t&&pe<8)throw zi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Ge(qi);r.isEnabled=function(){return t},r.trustAs=e.trustAs,r.getTrusted=e.getTrusted,r.valueOf=e.valueOf,t||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=ye),r.parseAs=function(t,e){var n=i(e);return n.literal&&n.constant?n:i(e,function(e){return r.getTrusted(t,e)})};var o=r.parseAs,a=r.getTrusted,s=r.trustAs;return fe(qi,function(t,e){var n=ue(e);r[Gi("parse_as_"+n)]=function(e){return o(t,e)},r[Gi("get_trusted_"+n)]=function(e){return a(t,e)},r[Gi("trust_as_"+n)]=function(e){return s(t,e)}}),r}]}function Zi(){this.$get=["$window","$document",function(e,t){var n={},i=!(!(e.nw&&e.nw.process)&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id))&&e.history&&e.history.pushState,r=x((/android (\d+)/.exec(ue((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),a=t[0]||{},s=a.body&&a.body.style,c=!1,l=!1;return s&&(c=!!("transition"in s||"webkitTransition"in s),l=!!("animation"in s||"webkitAnimation"in s)),{history:!(!i||r<4||o),hasEvent:function(e){if("input"===e&&pe)return!1;if(be(n[e])){var t=a.createElement("div");n[e]="on"+e in t}return n[e]},csp:L(),transitions:c,animations:l,android:r}}]}var Ji=A("$compile");function Qi(){var l;this.httpOptions=function(e){return e?(l=e,this):l},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(i,r,o,a,s){function c(t,n){c.totalPendingRequests++,we(t)&&!be(r.get(t))||(t=s.getTrustedResourceUrl(t));var e=o.defaults&&o.defaults.transformResponse;return $e(e)?e=e.filter(function(e){return e!==Ln}):e===Ln&&(e=null),o.get(t,me({cache:r,transformResponse:e},l)).finally(function(){c.totalPendingRequests--}).then(function(e){return r.put(t,e.data),e.data},function(e){n||(e=Ji("tpload","Failed to load template: {0} (HTTP status: {1} {2})",t,e.status,e.statusText),i(e));return a.reject(e)})}return c.totalPendingRequests=0,c}]}function er(){this.$get=["$rootScope","$browser","$location",function(t,n,i){var e={findBindings:function(e,n,i){var t=e.getElementsByClassName("ng-binding"),r=[];return fe(t,function(t){var e=b.element(t).data("$binding");e&&fe(e,function(e){i?new RegExp("(^|\\s)"+R(n)+"(\\s|\\||$)").test(e)&&r.push(t):-1!==e.indexOf(n)&&r.push(t)})}),r},findModels:function(e,t,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o="["+i[r]+"model"+(n?"=":"*=")+'"'+t+'"]',a=e.querySelectorAll(o);if(a.length)return a}},getLocation:function(){return i.url()},setLocation:function(e){e!==i.url()&&(i.url(e),t.$digest())},whenStable:function(e){n.notifyWhenNoOutstandingRequests(e)}};return e}]}function tr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(c,l,u,p,d){var h={};function e(e,t,n){Se(e)||(n=t,t=e,e=ge);var i,r=Re(arguments,3),o=xe(n)&&!n,a=(o?p:u).defer(),s=a.promise;return i=l.defer(function(){try{a.resolve(e.apply(null,r))}catch(e){a.reject(e),d(e)}finally{delete h[s.$$timeoutId]}o||c.$apply()},t),s.$$timeoutId=i,h[i]=a,s}return e.cancel=function(e){return!!(e&&e.$$timeoutId in h)&&(Fi(h[e.$$timeoutId].promise),h[e.$$timeoutId].reject("canceled"),delete h[e.$$timeoutId],l.defer.cancel(e.$$timeoutId))},e}]}var nr=H.document.createElement("a"),ir=rr(H.location.href);function rr(e){var t=e;return pe&&(nr.setAttribute("href",t),t=nr.href),nr.setAttribute("href",t),{href:nr.href,protocol:nr.protocol?nr.protocol.replace(/:$/,""):"",host:nr.host,search:nr.search?nr.search.replace(/^\?/,""):"",hash:nr.hash?nr.hash.replace(/^#/,""):"",hostname:nr.hostname,port:nr.port,pathname:"/"===nr.pathname.charAt(0)?nr.pathname:"/"+nr.pathname}}function or(e){var t=we(e)?rr(e):e;return t.protocol===ir.protocol&&t.host===ir.host}function ar(){this.$get=C(H)}function sr(e){var a=e[0]||{},s={},c="";function l(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var e,t,n,i,r,o=function(e){try{return e.cookie||""}catch(e){return""}}(a);if(o!==c)for(e=(c=o).split("; "),s={},n=0;n<e.length;n++)0<(i=(t=e[n]).indexOf("="))&&(r=l(t.substring(0,i)),be(s[r])&&(s[r]=l(t.substring(i+1))));return s}}function cr(){this.$get=sr}function lr(i){var r="Filter";function o(e,t){if(Ee(e)){var n={};return fe(e,function(e,t){n[t]=o(t,e)}),n}return i.factory(e+r,t)}this.register=o,this.$get=["$injector",function(t){return function(e){return t.get(e+r)}}],o("currency",vr),o("date",Tr),o("filter",ur),o("json",jr),o("limitTo",Pr),o("lowercase",kr),o("number",gr),o("orderBy",Dr),o("uppercase",Mr)}function ur(){return function(e,t,n,i){if(!D(e)){if(null==e)return e;throw A("filter")("notarray","Expected array but received: {0}",e)}var r,o;switch(i=i||"$",dr(t)){case"function":r=t;break;case"boolean":case"null":case"number":case"string":o=!0;case"object":r=function(t,n,i,r){var o=Ee(t)&&i in t;!0===n?n=Pe:Se(n)||(n=function(e,t){return!be(e)&&(null===e||null===t?e===t:!(Ee(t)||Ee(e)&&!E(e))&&(e=ue(""+e),t=ue(""+t),-1!==e.indexOf(t)))});return function(e){return o&&!Ee(e)?pr(e,t[i],n,i,!1):pr(e,t,n,i,r)}}(t,n,i,o);break;default:return e}return Array.prototype.filter.call(e,r)}}function pr(e,t,n,i,r,o){var a=dr(e),s=dr(t);if("string"===s&&"!"===t.charAt(0))return!pr(e,t.substring(1),n,i,r);if($e(e))return e.some(function(e){return pr(e,t,n,i,r)});switch(a){case"object":var c;if(r){for(c in e)if(c.charAt&&"$"!==c.charAt(0)&&pr(e[c],t,n,i,!0))return!0;return!o&&pr(e,t,n,i,!1)}if("object"===s){for(c in t){var l=t[c];if(!Se(l)&&!be(l)){var u=c===i;if(!pr(u?e:e[c],l,n,i,u,u))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function dr(e){return null===e?"null":typeof e}sr.$inject=["$document"],lr.$inject=["$provide"];var hr=22,fr=".",mr="0";function vr(e){var r=e.NUMBER_FORMATS;return function(e,t,n){be(t)&&(t=r.CURRENCY_SYM),be(n)&&(n=r.PATTERNS[1].maxFrac);var i=t?/\u00A4/g:/\s*\u00A4\s*/g;return null==e?e:yr(e,r.PATTERNS[1],r.GROUP_SEP,r.DECIMAL_SEP,n).replace(i,t)}}function gr(e){var n=e.NUMBER_FORMATS;return function(e,t){return null==e?e:yr(e,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,t)}}function yr(e,t,n,i,r){if(!we(e)&&!$(e)||isNaN(e))return"";var o,a=!isFinite(e),s=!1,c=Math.abs(e)+"",l="";if(a)l="∞";else{(function(e,t,n,i){var r=e.d,o=r.length-e.i,a=(t=be(t)?Math.min(Math.max(n,o),i):+t)+e.i,s=r[a];if(0<a){r.splice(Math.max(e.i,a));for(var c=a;c<r.length;c++)r[c]=0}else{o=Math.max(0,o),e.i=1,r.length=Math.max(1,a=t+1),r[0]=0;for(var l=1;l<a;l++)r[l]=0}if(5<=s)if(a-1<0){for(var u=0;a<u;u--)r.unshift(0),e.i++;r.unshift(1),e.i++}else r[a-1]++;for(;o<Math.max(0,t);o++)r.push(0);var p=r.reduceRight(function(e,t,n,i){return t+=e,i[n]=t%10,Math.floor(t/10)},0);p&&(r.unshift(p),e.i++)})(o=function(e){var t,n,i,r,o,a=0;for(-1<(n=e.indexOf(fr))&&(e=e.replace(fr,"")),0<(i=e.search(/e/i))?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charAt(i)===mr;i++);if(i===(o=e.length))t=[0],n=1;else{for(o--;e.charAt(o)===mr;)o--;for(n-=i,t=[],r=0;i<=o;i++,r++)t[r]=+e.charAt(i)}return hr<n&&(t=t.splice(0,hr-1),a=n-1,n=1),{d:t,e:a,i:n}}(c),r,t.minFrac,t.maxFrac);var u=o.d,p=o.i,d=o.e,h=[];for(s=u.reduce(function(e,t){return e&&!t},!0);p<0;)u.unshift(0),p++;0<p?h=u.splice(p,u.length):(h=u,u=[0]);var f=[];for(u.length>=t.lgSize&&f.unshift(u.splice(-t.lgSize,u.length).join(""));u.length>t.gSize;)f.unshift(u.splice(-t.gSize,u.length).join(""));u.length&&f.unshift(u.join("")),l=f.join(n),h.length&&(l+=i+h.join("")),d&&(l+="e+"+d)}return e<0&&!s?t.negPre+l+t.negSuf:t.posPre+l+t.posSuf}function br(e,t,n,i){var r="";for((e<0||i&&e<=0)&&(i?e=1-e:(e=-e,r="-")),e=""+e;e.length<t;)e=mr+e;return n&&(e=e.substr(e.length-t)),r+e}function xr(n,i,r,o,a){return r=r||0,function(e){var t=e["get"+n]();return(0<r||-r<t)&&(t+=r),0===t&&-12===r&&(t=12),br(t,i,o,a)}}function Er(i,r,o){return function(e,t){var n=e["get"+i]();return t[u((o?"STANDALONE":"")+(r?"SHORT":"")+i)][n]}}function wr(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function $r(r){return function(e){var t,n=wr(e.getFullYear()),i=+(t=e,new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay())))-+n;return br(1+Math.round(i/6048e5),r)}}function _r(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}vr.$inject=["$locale"],gr.$inject=["$locale"];var Sr={yyyy:xr("FullYear",4,0,!1,!0),yy:xr("FullYear",2,0,!0,!0),y:xr("FullYear",1,0,!1,!0),MMMM:Er("Month"),MMM:Er("Month",!0),MM:xr("Month",2,1),M:xr("Month",1,1),LLLL:Er("Month",!1,!0),dd:xr("Date",2),d:xr("Date",1),HH:xr("Hours",2),H:xr("Hours",1),hh:xr("Hours",2,-12),h:xr("Hours",1,-12),mm:xr("Minutes",2),m:xr("Minutes",1),ss:xr("Seconds",2),s:xr("Seconds",1),sss:xr("Milliseconds",3),EEEE:Er("Day"),EEE:Er("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){var i=-1*n,r=0<=i?"+":"";return r+=br(Math[0<i?"floor":"ceil"](i/60),2)+br(Math.abs(i%60),2)},ww:$r(2),w:$r(1),G:_r,GG:_r,GGG:_r,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},Cr=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Ar=/^-?\d+$/;function Tr(c){var p=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,e,n){var i,r,o="",a=[];if(e=e||"mediumDate",e=c.DATETIME_FORMATS[e]||e,we(t)&&(t=Ar.test(t)?x(t):function(e){var t;if(t=e.match(p)){var n=new Date(0),i=0,r=0,o=t[8]?n.setUTCFullYear:n.setFullYear,a=t[8]?n.setUTCHours:n.setHours;t[9]&&(i=x(t[9]+t[10]),r=x(t[9]+t[11])),o.call(n,x(t[1]),x(t[2])-1,x(t[3]));var s=x(t[4]||0)-i,c=x(t[5]||0)-r,l=x(t[6]||0),u=Math.round(1e3*parseFloat("0."+(t[7]||0)));return a.call(n,s,c,l,u),n}return e}(t)),$(t)&&(t=new Date(t)),!_(t)||!isFinite(t.getTime()))return t;for(;e;)(r=Cr.exec(e))?e=(a=F(a,r,1)).pop():(a.push(e),e=null);var s=t.getTimezoneOffset();return n&&(s=G(n,s),t=Y(t,n,!0)),fe(a,function(e){i=Sr[e],o+=i?i(t,c.DATETIME_FORMATS,s):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),o}}function jr(){return function(e,t){return be(t)&&(t=2),z(e,t)}}Tr.$inject=["$locale"];var kr=C(ue),Mr=C(u);function Pr(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):x(t),j(t)?e:($(e)&&(e=e.toString()),D(e)?(n=(n=!n||isNaN(n)?0:x(n))<0?Math.max(0,e.length+n):n,0<=t?Rr(e,n,n+t):0===n?Rr(e,t,e.length):Rr(e,Math.max(0,n+t),n)):e)}}function Rr(e,t,n){return we(e)?e.slice(t,n):s.call(e,t,n)}function Dr(c){return function(e,t,n,i){if(null==e)return e;if(!D(e))throw A("orderBy")("notarray","Expected array but received: {0}",e);$e(t)||(t=[t]),0===t.length&&(t=["+"]);var o=t.map(function(e){var t=1,n=ye;if(Se(e))n=e;else if(we(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(t="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(n=c(e)).constant)){var i=n();n=function(e){return e[i]}}return{get:n,descending:t}}),a=n?-1:1,s=Se(i)?i:u,r=Array.prototype.map.call(e,function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:o.map(function(e){return function(e,t){var n=typeof e;null===e?(n="string",e="null"):"object"===n&&(e=function(e){if(Se(e.valueOf)&&l(e=e.valueOf()))return e;if(E(e)&&l(e=e.toString()))return e;return e}(e));return{value:e,type:n,index:t}}(e.get(t),n)})}});return r.sort(function(e,t){for(var n=0,i=o.length;n<i;n++){var r=s(e.predicateValues[n],t.predicateValues[n]);if(r)return r*o[n].descending*a}return(s(e.tieBreaker,t.tieBreaker)||u(e.tieBreaker,t.tieBreaker))*a}),e=r.map(function(e){return e.value})};function l(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function u(e,t){var n=0,i=e.type,r=t.type;if(i===r){var o=e.value,a=t.value;"string"===i?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===i&&(Ee(o)&&(o=e.index),Ee(a)&&(a=t.index)),o!==a&&(n=o<a?-1:1)}else n=i<r?-1:1;return n}}function Or(e){return Se(e)&&(e={link:e}),e.restrict=e.restrict||"AC",C(e)}Dr.$inject=["$parse"];var Nr=C({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===he.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Br={};fe(kt,function(e,i){if("multiple"!==e){var r=bn("ng-"+i),t=o;"checked"===e&&(t=function(e,t,n){n.ngModel!==n[r]&&o(e,0,n)}),Br[r]=function(){return{restrict:"A",priority:100,link:t}}}function o(e,t,n){e.$watch(n[r],function(e){n.$set(i,!!e)})}}),fe(Pt,function(e,r){Br[r]=function(){return{priority:100,link:function(e,t,n){if("ngPattern"===r&&"/"===n.ngPattern.charAt(0)){var i=n.ngPattern.match(o);if(i)return void n.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(n[r],function(e){n.$set(r,e)})}}}}),fe(["src","srcset","href"],function(o){var a=bn("ng-"+o);Br[a]=function(){return{priority:99,link:function(e,t,n){var i=o,r=o;"href"===o&&"[object SVGAnimatedString]"===he.call(t.prop("href"))&&(r="xlinkHref",n.$attr[r]="xlink:href",i=null),n.$observe(a,function(e){e?(n.$set(r,e),pe&&i&&t.prop(i,n[r])):"href"===o&&n.$set(r,null)})}}}});var Lr={$addControl:ge,$$renameControl:function(e,t){e.$name=t},$removeControl:ge,$setValidity:ge,$setDirty:ge,$setPristine:ge,$setSubmitted:ge},Ir="ng-pending",Fr="ng-submitted";function Ur(e,t,n,i,r){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=r(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Lr,this.$$element=e,this.$$animate=i,qr(this)}Ur.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Ur.prototype={$rollbackViewValue:function(){fe(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){fe(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){Le(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],(this[t]=e).$name=t},$removeControl:function(n){n.$name&&this[n.$name]===n&&delete this[n.$name],fe(this.$pending,function(e,t){this.$setValidity(t,null,n)},this),fe(this.$error,function(e,t){this.$setValidity(t,null,n)},this),fe(this.$$success,function(e,t){this.$setValidity(t,null,n)},this),ke(this.$$controls,n),n.$$parentForm=Lr},$setDirty:function(){this.$$animate.removeClass(this.$$element,Fo),this.$$animate.addClass(this.$$element,Uo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Fo,Uo+" "+Fr),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,fe(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){fe(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,Fr),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},Wr({clazz:Ur,set:function(e,t,n){var i=e[t];i?-1===i.indexOf(n)&&i.push(n):e[t]=[n]},unset:function(e,t,n){var i=e[t];i&&(ke(i,n),0===i.length&&delete e[t])}});var Hr=function(n){return["$timeout","$parse",function(c,t){return{name:"form",restrict:n?"EAC":"E",require:["form","^^?form"],controller:Ur,compile:function(e,t){e.addClass(Fo).addClass(Lo);var s=t.name?"name":!(!n||!t.ngForm)&&"ngForm";return{pre:function(t,e,n,i){var r=i[0];if(!("action"in n)){var o=function(e){t.$apply(function(){r.$commitViewValue(),r.$setSubmitted()}),e.preventDefault()};e[0].addEventListener("submit",o),e.on("$destroy",function(){c(function(){e[0].removeEventListener("submit",o)},0,!1)})}(i[1]||r.$$parentForm).$addControl(r);var a=s?l(r.$name):ge;s&&(a(t,r),n.$observe(s,function(e){r.$name!==e&&(a(t,void 0),r.$$parentForm.$$renameControl(r,e),(a=l(r.$name))(t,r))})),e.on("$destroy",function(){r.$$parentForm.$removeControl(r),a(t,void 0),me(r,Lr)})}}}};function l(e){return""===e?t('this[""]').assign:t(e).assign||ge}}]},Vr=Hr(),zr=Hr(!0);function qr(e){e.$$classCache={},e.$$classCache[Io]=!(e.$$classCache[Lo]=e.$$element.hasClass(Lo))}function Wr(e){var t=e.clazz,r=e.set,o=e.unset;function a(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function s(e,t,n){t=t?"-"+Ne(t,"-"):"",a(e,Lo+t,!0===n),a(e,Io+t,!1===n)}t.prototype.$setValidity=function(e,t,n){var i;be(t)?function(e,t,n,i){e[t]||(e[t]={});r(e[t],n,i)}(this,"$pending",e,n):function(e,t,n,i){e[t]&&o(e[t],n,i);Gr(e[t])&&(e[t]=void 0)}(this,"$pending",e,n),Ae(t)?t?(o(this.$error,e,n),r(this.$$success,e,n)):(r(this.$error,e,n),o(this.$$success,e,n)):(o(this.$error,e,n),o(this.$$success,e,n)),this.$pending?(a(this,Ir,!0),this.$valid=this.$invalid=void 0,s(this,"",null)):(a(this,Ir,!1),this.$valid=Gr(this.$error),this.$invalid=!this.$valid,s(this,"",this.$valid)),s(this,e,i=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null)),this.$$parentForm.$setValidity(e,i,this)}}function Gr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Yr=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Kr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Xr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Zr=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Jr=/^(\d{4,})-(\d{2})-(\d{2})$/,Qr=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,eo=/^(\d{4,})-W(\d\d)$/,to=/^(\d{4,})-(\d\d)$/,no=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,io="keydown wheel mousedown",ro=Fe();fe("date,datetime-local,month,time,week".split(","),function(e){ro[e]=!0});var oo={text:function(e,t,n,i,r,o){so(e,t,n,i,r,o),ao(i)},date:lo("date",Jr,co(Jr,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":lo("datetimelocal",Qr,co(Qr,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:lo("time",no,co(no,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:lo("week",eo,function(e,t){if(_(e))return e;if(we(e)){eo.lastIndex=0;var n=eo.exec(e);if(n){var i=+n[1],r=+n[2],o=0,a=0,s=0,c=0,l=wr(i),u=7*(r-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),c=t.getMilliseconds()),new Date(i,0,l.getDate()+u,o,a,s,c)}}return NaN},"yyyy-Www"),month:lo("month",to,co(to,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,i,r,o){var a,s;uo(e,t,n,i),po(i),so(e,t,n,i,r,o),(xe(n.min)||n.ngMin)&&(i.$validators.min=function(e){return i.$isEmpty(e)||be(a)||a<=e},n.$observe("min",function(e){a=ho(e),i.$validate()}));(xe(n.max)||n.ngMax)&&(i.$validators.max=function(e){return i.$isEmpty(e)||be(s)||e<=s},n.$observe("max",function(e){s=ho(e),i.$validate()}));if(xe(n.step)||n.ngStep){var c;i.$validators.step=function(e,t){return i.$isEmpty(t)||be(c)||vo(t,a||0,c)},n.$observe("step",function(e){c=ho(e),i.$validate()})}},url:function(e,t,n,i,r,o){so(e,t,n,i,r,o),ao(i),i.$$parserName="url",i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||Kr.test(n)}},email:function(e,t,n,i,r,o){so(e,t,n,i,r,o),ao(i),i.$$parserName="email",i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||Xr.test(n)}},radio:function(e,n,i,r){var o=!i.ngTrim||"false"!==Te(i.ngTrim);be(i.name)&&n.attr("name",T());n.on("click",function(e){var t;n[0].checked&&(t=i.value,o&&(t=Te(t)),r.$setViewValue(t,e&&e.type))}),r.$render=function(){var e=i.value;o&&(e=Te(e)),n[0].checked=e===r.$viewValue},i.$observe("value",r.$render)},range:function(e,n,i,r,t,o){uo(e,n,i,r),po(r),so(e,n,i,r,t,o);var a=r.$$hasNativeValidators&&"range"===n[0].type,s=a?0:void 0,c=a?100:void 0,l=a?1:void 0,u=n[0].validity,p=xe(i.min),d=xe(i.max),h=xe(i.step),f=r.$render;r.$render=a&&xe(u.rangeUnderflow)&&xe(u.rangeOverflow)?function(){f(),r.$setViewValue(n.val())}:f,p&&(r.$validators.min=a?function(){return!0}:function(e,t){return r.$isEmpty(t)||be(s)||s<=t},m("min",function(e){if(s=ho(e),j(r.$modelValue))return;if(a){var t=n.val();t<s&&(t=s,n.val(t)),r.$setViewValue(t)}else r.$validate()}));d&&(r.$validators.max=a?function(){return!0}:function(e,t){return r.$isEmpty(t)||be(c)||t<=c},m("max",function(e){if(c=ho(e),j(r.$modelValue))return;if(a){var t=n.val();c<t&&(n.val(c),t=c<s?s:c),r.$setViewValue(t)}else r.$validate()}));h&&(r.$validators.step=a?function(){return!u.stepMismatch}:function(e,t){return r.$isEmpty(t)||be(l)||vo(t,s||0,l)},m("step",function(e){if(l=ho(e),j(r.$modelValue))return;a&&r.$viewValue!==n.val()?r.$setViewValue(n.val()):r.$validate()}));function m(e,t){n.attr(e,i[e]),i.$observe(e,t)}},checkbox:function(e,t,n,i,r,o,a,s){var c=go(s,e,"ngTrueValue",n.ngTrueValue,!0),l=go(s,e,"ngFalseValue",n.ngFalseValue,!1);t.on("click",function(e){i.$setViewValue(t[0].checked,e&&e.type)}),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return!1===e},i.$formatters.push(function(e){return Pe(e,c)}),i.$parsers.push(function(e){return e?c:l})},hidden:ge,button:ge,submit:ge,reset:ge,file:ge};function ao(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function so(e,i,r,o,t,a){var s,c=ue(i[0].type);if(!t.android){var l=!1;i.on("compositionstart",function(){l=!0}),i.on("compositionend",function(){l=!1,u()})}var u=function(e){if(s&&(a.defer.cancel(s),s=null),!l){var t=i.val(),n=e&&e.type;"password"===c||r.ngTrim&&"false"===r.ngTrim||(t=Te(t)),(o.$viewValue!==t||""===t&&o.$$hasNativeValidators)&&o.$setViewValue(t,n)}};if(t.hasEvent("input"))i.on("input",u);else{var n=function(e,t,n){s||(s=a.defer(function(){s=null,t&&t.value===n||u(e)}))};i.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||n(e,this,this.value)}),t.hasEvent("paste")&&i.on("paste cut drop",n)}i.on("change",u),ro[c]&&o.$$hasNativeValidators&&c===r.type&&i.on(io,function(e){if(!s){var t=this[p],n=t.badInput,i=t.typeMismatch;s=a.defer(function(){s=null,t.badInput===n&&t.typeMismatch===i||u(e)})}}),o.$render=function(){var e=o.$isEmpty(o.$viewValue)?"":o.$viewValue;i.val()!==e&&i.val(e)}}function co(r,o){return function(e,t){var n,i;if(_(e))return e;if(we(e)){if('"'===e.charAt(0)&&'"'===e.charAt(e.length-1)&&(e=e.substring(1,e.length-1)),Yr.test(e))return new Date(e);if(r.lastIndex=0,n=r.exec(e))return n.shift(),i=t?{yyyy:t.getFullYear(),MM:t.getMonth()+1,dd:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds(),sss:t.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},fe(n,function(e,t){t<o.length&&(i[o[t]]=+e)}),new Date(i.yyyy,i.MM-1,i.dd,i.HH,i.mm,i.ss||0,1e3*i.sss||0)}return NaN}}function lo(h,f,m,v){return function(e,t,n,i,r,o,a){uo(e,t,n,i),so(0,t,n,i,r,o);var s,c,l,u=i&&i.$options.getOption("timezone");(i.$$parserName=h,i.$parsers.push(function(e){if(i.$isEmpty(e))return null;if(f.test(e)){var t=m(e,s);return u&&(t=Y(t,u)),t}}),i.$formatters.push(function(e){if(e&&!_(e))throw Wo("datefmt","Expected `{0}` to be a date",e);return p(e)?((s=e)&&u&&(s=Y(s,u,!0)),a("date")(e,v,u)):(s=null,"")}),xe(n.min)||n.ngMin)&&(i.$validators.min=function(e){return!p(e)||be(c)||m(e)>=c},n.$observe("min",function(e){c=d(e),i.$validate()}));(xe(n.max)||n.ngMax)&&(i.$validators.max=function(e){return!p(e)||be(l)||m(e)<=l},n.$observe("max",function(e){l=d(e),i.$validate()}));function p(e){return e&&!(e.getTime&&e.getTime()!=e.getTime())}function d(e){return xe(e)&&!_(e)?m(e)||void 0:e}}}function uo(e,n,t,i){var r=n[0];(i.$$hasNativeValidators=Ee(r.validity))&&i.$parsers.push(function(e){var t=n.prop(p)||{};return t.badInput||t.typeMismatch?void 0:e})}function po(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:Zr.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!$(e))throw Wo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function ho(e){return xe(e)&&!$(e)&&(e=parseFloat(e)),j(e)?void 0:e}function fo(e){return(0|e)===e}function mo(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(-1<e&&e<1){var i=/e-(\d+)$/.exec(t);if(i)return Number(i[1])}return 0}return t.length-n-1}function vo(e,t,n){var i=Number(e),r=!fo(i),o=!fo(t),a=!fo(n);if(r||o||a){var s=r?mo(i):0,c=o?mo(t):0,l=a?mo(n):0,u=Math.max(s,c,l),p=Math.pow(10,u);i*=p,t*=p,n*=p,r&&(i=Math.round(i)),o&&(t=Math.round(t)),a&&(n=Math.round(n))}return(i-t)%n==0}function go(e,t,n,i,r){var o;if(xe(i)){if(!(o=e(i)).constant)throw Wo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(t)}return r}var yo=["$browser","$sniffer","$filter","$parse",function(r,o,a,s){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,t,n,i){i[0]&&(oo[ue(n.type)]||oo.text)(e,t,n,i[0],o,r,a,s)}}}}],bo=/^(true|false|\d+)$/,xo=function(){function i(e,t,n){var i=xe(n)?n:9===pe?"":null;e.prop("value",i),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,t){return bo.test(t.ngValue)?function(e,t,n){i(t,n,e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){i(t,n,e)})}}}},Eo=["$compile",function(i){return{restrict:"AC",compile:function(e){return i.$$addBindingClass(e),function(e,t,n){i.$$addBindingInfo(t,n.ngBind),t=t[0],e.$watch(n.ngBind,function(e){t.textContent=Ue(e)})}}}}],wo=["$interpolate","$compile",function(r,o){return{compile:function(e){return o.$$addBindingClass(e),function(e,t,n){var i=r(t.attr(n.$attr.ngBindTemplate));o.$$addBindingInfo(t,i.expressions),t=t[0],n.$observe("ngBindTemplate",function(e){t.textContent=be(e)?"":e})}}}}],$o=["$sce","$parse","$compile",function(o,n,a){return{restrict:"A",compile:function(e,t){var i=n(t.ngBindHtml),r=n(t.ngBindHtml,function(e){return o.valueOf(e)});return a.$$addBindingClass(e),function(t,n,e){a.$$addBindingInfo(n,e.ngBindHtml),t.$watch(r,function(){var e=i(t);n.html(o.getTrustedHtml(e)||"")})}}}}],_o=C({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}});function So(h,f){var m;return h="ngClass"+h,["$parse",function(d){return{restrict:"AC",link:function(e,t,c){var l,n=c[h].trim(),i=":"===n.charAt(0)&&":"===n.charAt(1),r=d(n,i?b:y),o=i?function(e){var t=y(e);t!==l&&s(t)}:s,a=t.data("$classCounts"),u=!0;function p(e,t){var n=[];return fe(e,function(e){(0<t||a[e])&&(a[e]=(a[e]||0)+t,a[e]===+(0<t)&&n.push(e))}),n.join(" ")}function s(e){var t,n,i,r,o,a,s;u===f&&(t=e,n=g(l),i=g(t),r=v(n,i),o=v(i,n),a=p(r,-1),s=p(o,1),c.$addClass(s),c.$removeClass(a)),l=e}a||(a=Fe(),t.data("$classCounts",a)),"ngClass"!==h&&(m||(m=d("$index",function(e){return 1&e})),e.$watch(m,function(e){e===f?(n=p(g(n=l),1),c.$addClass(n)):(t=p(g(t=l),-1),c.$removeClass(t));var t;var n;u=e})),e.$watch(r,o,i)}}}];function v(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var i=0;i<e.length;i++){for(var r=e[i],o=0;o<t.length;o++)if(r===t[o])continue e;n.push(r)}return n}function g(e){return e&&e.split(" ")}function y(t){var e=t;return $e(t)?e=t.map(y).join(" "):Ee(t)&&(e=Object.keys(t).filter(function(e){return t[e]}).join(" ")),e}function b(n){var e=n;if($e(n))e=n.map(b);else if(Ee(n)){var i=!1;e=Object.keys(n).filter(function(e){var t=n[e];return!i&&be(t)&&(i=!0),t}),i&&e.push(void 0)}return e}}var Co=So("",!0),Ao=So("Odd",0),To=So("Even",1),jo=Or({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),ko=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Mo={},Po={blur:!0,focus:!0};fe("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(o){var a=bn("ng-"+o);Mo[a]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(e,t){var i=n(t[a]);return function(n,e){e.on(o,function(e){var t=function(){i(n,{$event:e})};Po[o]&&r.$$phase?n.$evalAsync(t):n.$apply(t)})}}}}]});var Ro=["$animate","$compile",function(c,l){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(e,n,i,t,r){var o,a,s;e.$watch(i.ngIf,function(e){e?a||r(function(e,t){a=t,e[e.length++]=l.$$createComment("end ngIf",i.ngIf),o={clone:e},c.enter(e,n.parent(),n)}):(s&&(s.remove(),s=null),a&&(a.$destroy(),a=null),o&&(s=Ie(o.clone),c.leave(s).done(function(e){!1!==e&&(s=null)}),o=null))})}}}],Do=["$templateRequest","$anchorScroll","$animate",function(v,g,y){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(e,t){var n=t.ngInclude||t.src,f=t.onload||"",m=t.autoscroll;return function(a,s,e,c,l){var u,t,p,d=0,h=function(){t&&(t.remove(),t=null),u&&(u.$destroy(),u=null),p&&(y.leave(p).done(function(e){!1!==e&&(t=null)}),t=p,p=null)};a.$watch(n,function(i){var r=function(e){!1===e||!xe(m)||m&&!a.$eval(m)||g()},o=++d;i?(v(i,!0).then(function(e){if(!a.$$destroyed&&o===d){var t=a.$new();c.template=e;var n=l(t,function(e){h(),y.enter(e,null,s).done(r)});p=n,(u=t).$emit("$includeContentLoaded",i),a.$eval(f)}},function(){a.$$destroyed||o===d&&(h(),a.$emit("$includeContentError",i))}),a.$emit("$includeContentRequested",i)):(h(),c.template=null)})}}}}],Oo=["$compile",function(r){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(e,t,n,i){if(he.call(t[0]).match(/SVG/))return t.empty(),void r(pt(i.template,H.document).childNodes)(e,function(e){t.append(e)},{futureParentElement:t});t.html(i.template),r(t.contents())(e)}}}],No=Or({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Bo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,i){var r=n.ngList||", ",o="false"!==n.ngTrim,a=o?Te(r):r;i.$parsers.push(function(e){if(!be(e)){var t=[];return e&&fe(e.split(a),function(e){e&&t.push(o?Te(e):e)}),t}}),i.$formatters.push(function(e){if($e(e))return e.join(r)}),i.$isEmpty=function(e){return!e||!e.length}}}},Lo="ng-valid",Io="ng-invalid",Fo="ng-pristine",Uo="ng-dirty",Ho="ng-untouched",Vo="ng-touched",zo="ng-empty",qo="ng-not-empty",Wo=A("ngModel");function Go(e,t,n,i,r,o,a,s,c){var l;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(e),this.$$parentForm=Lr,this.$options=Yo,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=r(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:e}),this.$$attr=n,this.$$element=i,this.$$animate=o,this.$$timeout=a,this.$$parse=r,this.$$q=s,this.$$exceptionHandler=t,qr(this),(l=this).$$scope.$watch(function(e){var t=l.$$ngModelGet(e);return t===l.$modelValue||l.$modelValue!=l.$modelValue&&t!=t||l.$$setModelValue(t),t})}Go.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Go.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var n=this.$$parse(this.$$attr.ngModel+"()"),i=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var t=this.$$parsedNgModel(e);return Se(t)&&(t=n(e)),t},this.$$ngModelSet=function(e,t){Se(this.$$parsedNgModel(e))?i(e,{$$$p:t}):this.$$parsedNgModelAssign(e,t)}}else if(!this.$$parsedNgModel.assign)throw Wo("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Oe(this.$$element))},$render:ge,$isEmpty:function(e){return be(e)||""===e||null===e||e!=e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,qo),this.$$animate.addClass(this.$$element,zo)):(this.$$animate.removeClass(this.$$element,zo),this.$$animate.addClass(this.$$element,qo))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Uo),this.$$animate.addClass(this.$$element,Fo)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Fo),this.$$animate.addClass(this.$$element,Uo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Ho,Vo)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Vo,Ho)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!j(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,i=this.$modelValue,r=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(t,e,function(e){r||n===e||(o.$modelValue=e?t:void 0,o.$modelValue!==i&&o.$$writeModelToScope())})}},$$runValidators:function(r,o,t){this.$$currentValidationRunId++;var i,a,n=this.$$currentValidationRunId,s=this;(function(){var e=s.$$parserName||"parse";{if(!be(s.$$parserValid))return s.$$parserValid||(fe(s.$validators,function(e,t){c(t,null)}),fe(s.$asyncValidators,function(e,t){c(t,null)})),c(e,s.$$parserValid),s.$$parserValid;c(e,null)}return!0})()?!function(){var i=!0;if(fe(s.$validators,function(e,t){var n=Boolean(e(r,o));i=i&&n,c(t,n)}),!i)return fe(s.$asyncValidators,function(e,t){c(t,null)}),!1;return!0}()?e(!1):(i=[],a=!0,fe(s.$asyncValidators,function(e,t){var n=e(r,o);if(!M(n))throw Wo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",n);c(t,void 0),i.push(n.then(function(){c(t,!0)},function(){c(t,a=!1)}))}),i.length?s.$$q.all(i).then(function(){e(a)},ge):e(!0)):e(!1);function c(e,t){n===s.$$currentValidationRunId&&s.$setValidity(e,t)}function e(e){n===s.$$currentValidationRunId&&t(e)}},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,n=this;if(this.$$parserValid=!be(t)||void 0,this.$$parserValid)for(var e=0;e<this.$parsers.length;e++)if(be(t=this.$parsers[e](t))){this.$$parserValid=!1;break}j(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var i=this.$modelValue,r=this.$options.getOption("allowInvalid");function o(){n.$modelValue!==i&&n.$$writeModelToScope()}this.$$rawModelValue=t,r&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(e){r||(n.$modelValue=e?t:void 0,o())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),fe(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");$(t[e])?t=t[e]:$(t.default)&&(t=t.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;0<t?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e),this.$$setUpdateOnEvents()},$processModelValue:function(){var e=this.$$format();this.$viewValue!==e&&(this.$$updateEmptyClasses(e),this.$viewValue=this.$$lastCommittedViewValue=e,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,ge))},$$format:function(){for(var e=this.$formatters,t=e.length,n=this.$modelValue;t--;)n=e[t](n);return n},$$setModelValue:function(e){this.$modelValue=this.$$rawModelValue=e,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(e){this.$$debounceViewValueCommit(e&&e.type)}},Wr({clazz:Go,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Yo,Ko=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Go,priority:1,compile:function(e){return e.addClass(Fo).addClass(Ho).addClass(Lo),{pre:function(e,t,n,i){var r=i[0],o=i[1]||r.$$parentForm,a=i[2];a&&(r.$options=a.$options),r.$$initGetterSetters(),o.$addControl(r),n.$observe("name",function(e){r.$name!==e&&r.$$parentForm.$$renameControl(r,e)}),e.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(e,t,n,i){var r=i[0];function o(){r.$setTouched()}r.$$setUpdateOnEvents(),t.on("blur",function(){r.$touched||(a.$$phase?e.$evalAsync(o):e.$apply(o))})}}}}}],Xo=/(\s+|^)default(\s+|$)/;function Zo(e){this.$$options=e}Zo.prototype={getOption:function(e){return this.$$options[e]},createChild:function(n){var i=!1;return fe(n=me({},n),function(e,t){"$inherit"===e?"*"===t?i=!0:(n[t]=this.$$options[t],"updateOn"===t&&(n.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===t&&(n.updateOnDefault=!1,n[t]=Te(e.replace(Xo,function(){return n.updateOnDefault=!0," "})))},this),i&&(delete n["*"],Qo(n,this.$$options)),Qo(n,Yo.$$options),new Zo(n)}},Yo=new Zo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Jo=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Yo,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}};function Qo(n,e){fe(e,function(e,t){xe(n[t])||(n[t]=e)})}var ea=Or({terminal:!0,priority:1e3}),ta=A("ngOptions"),na=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ia=["$compile","$document","$parse",function(v,g,_){var y=H.document.createElement("option"),b=H.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,i){i[0].registerOption=ge},post:function(e,a,t,n){for(var s=n[0],c=n[1],l=t.multiple,i=0,r=a.children(),o=r.length;i<o;i++)if(""===r[i].value){s.hasEmptyOption=!0,s.emptyOption=r.eq(i);break}a.empty();var u,p=!!s.emptyOption;de(y.cloneNode(!1)).val("?");var d=function(e,t,d){var p=e.match(na);if(!p)throw ta("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Oe(t));var n=p[5]||p[7],i=p[6],r=/ as /.test(p[0])&&p[1],h=p[9],o=_(p[2]?p[1]:n),f=r&&_(r)||o,a=h&&_(h),m=h?function(e,t){return a(d,t)}:function(e){return Bt(e)},v=function(e,t){return m(e,E(e,t))},g=_(p[2]||p[1]),y=_(p[3]||""),b=_(p[4]||""),x=_(p[8]),s={},E=i?function(e,t){return s[i]=t,s[n]=e,s}:function(e){return s[n]=e,s};function w(e,t,n,i,r){this.selectValue=e,this.viewValue=t,this.label=n,this.group=i,this.disabled=r}function $(e){var t;if(!i&&D(e))t=e;else for(var n in t=[],e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n);return t}return{trackBy:h,getTrackByValue:v,getWatchables:_(x,function(e){for(var t=[],n=$(e=e||[]),i=n.length,r=0;r<i;r++){var o=e===n?r:n[r],a=e[o],s=E(a,o),c=m(a,s);if(t.push(c),p[2]||p[1]){var l=g(d,s);t.push(l)}if(p[4]){var u=b(d,s);t.push(u)}}return t}),getOptions:function(){for(var e=[],t={},n=x(d)||[],i=$(n),r=i.length,o=0;o<r;o++){var a=n===i?o:i[o],s=n[a],c=E(s,a),l=f(d,c),u=m(l,c),p=new w(u,l,g(d,c),y(d,c),b(d,c));e.push(p),t[u]=p}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[v(e)]},getViewValueFromOption:function(e){return h?B(e.viewValue):e.viewValue}}}}}(t.ngOptions,a,e),h=g[0].createDocumentFragment();function f(e,t){var n,i,r=y.cloneNode(!1);t.appendChild(r),i=r,((n=e).element=i).disabled=n.disabled,n.label!==i.label&&(i.label=n.label,i.textContent=n.label),i.value=n.selectValue}function m(e){var t=u.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}s.generateUnknownOptionValue=function(e){return"?"},l?(s.writeValue=function(e){if(u){var t=e&&e.map(m)||[];u.items.forEach(function(e){e.element.selected&&!N(t,e)&&(e.element.selected=!1)})}},s.readValue=function(){var e=a.val()||[],n=[];return fe(e,function(e){var t=u.selectValueMap[e];t&&!t.disabled&&n.push(u.getViewValueFromOption(t))}),n},d.trackBy&&e.$watchCollection(function(){if($e(c.$viewValue))return c.$viewValue.map(function(e){return d.getTrackByValue(e)})},function(){c.$render()})):(s.writeValue=function(e){if(u){var t=a[0].options[a[0].selectedIndex],n=u.getOptionFromViewValue(e);t&&t.removeAttribute("selected"),n?(a[0].value!==n.selectValue&&(s.removeUnknownOption(),a[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):s.selectUnknownOrEmptyOption(e)}},s.readValue=function(){var e=u.selectValueMap[a.val()];return e&&!e.disabled?(s.unselectEmptyOption(),s.removeUnknownOption(),u.getViewValueFromOption(e)):null},d.trackBy&&e.$watch(function(){return d.getTrackByValue(c.$viewValue)},function(){c.$render()})),p&&(v(s.emptyOption)(e),a.prepend(s.emptyOption),s.emptyOption[0].nodeType===ze?(s.hasEmptyOption=!1,s.registerOption=function(e,t){""===t.val()&&(s.hasEmptyOption=!0,s.emptyOption=t,s.emptyOption.removeClass("ng-scope"),c.$render(),t.on("$destroy",function(){var e=s.$isEmptyOptionSelected();s.hasEmptyOption=!1,s.emptyOption=void 0,e&&c.$render()}))}):s.emptyOption.removeClass("ng-scope")),e.$watchCollection(d.getWatchables,function(){var e=u&&s.readValue();if(u)for(var t=u.items.length-1;0<=t;t--){var n=u.items[t];xe(n.group)?At(n.element.parentNode):At(n.element)}u=d.getOptions();var i={};if(u.items.forEach(function(e){var t;xe(e.group)?((t=i[e.group])||(t=b.cloneNode(!1),h.appendChild(t),t.label=null===e.group?"null":e.group,i[e.group]=t),f(e,t)):f(e,h)}),a[0].appendChild(h),c.$render(),!c.$isEmpty(e)){var r=s.readValue(),o=d.trackBy||l;(o?Pe(e,r):e===r)||(c.$setViewValue(r),c.$render())}})}}}}],ra=["$locale","$interpolate","$log",function(f,m,v){var g=/{}/g,y=/^when(Minus)?(.+)$/;return{link:function(r,o,a){var s,e=a.count,c=a.$attr.when&&o.attr(a.$attr.when),l=a.offset||0,u=r.$eval(c)||{},p={},t=m.startSymbol(),n=m.endSymbol(),i=t+e+"-"+l+n,d=b.noop;function h(e){o.text(e||"")}fe(a,function(e,t){var n=y.exec(t);if(n){var i=(n[1]?"-":"")+ue(n[2]);u[i]=o.attr(a.$attr[t])}}),fe(u,function(e,t){p[t]=m(e.replace(g,i))}),r.$watch(e,function(e){var t=parseFloat(e),n=j(t);if(n||t in u||(t=f.pluralCat(t-l)),!(t===s||n&&j(s))){d();var i=p[t];be(i)?(null!=e&&v.debug("ngPluralize: no rule defined for '"+t+"' in "+c),d=ge,h()):d=r.$watch(i,h),s=t}})}}}],oa=["$parse","$animate","$compile",function(c,k,l){var M="$$NG_REMOVED",P=A("ngRepeat"),R=function(e,t,n,i,r,o,a){e[n]=i,r&&(e[r]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,t){var w=t.ngRepeat,$=l.$$createComment("end ngRepeat",w),n=w.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!n)throw P("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",w);var i=n[1],r=n[2],_=n[3],o=n[4];if(!(n=i.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw P("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",i);var a,S,C,A,T=n[3]||n[1],j=n[2];if(_&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(_)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(_)))throw P("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",_);var s={$id:Bt};return o?a=c(o):(C=function(e,t){return Bt(t)},A=function(e){return e}),function(y,b,e,t,x){a&&(S=function(e,t,n){return j&&(s[j]=e),s[T]=t,s.$index=n,a(y,s)});var E=Fe();y.$watchCollection(r,function(e){var i,t,n,r,o,a,s,c,l,u,p,d,h,f=b[0],m=Fe();if(_&&(y[_]=e),D(e))l=e,c=S||C;else for(var v in c=S||A,l=[],e)V.call(e,v)&&"$"!==v.charAt(0)&&l.push(v);for(r=l.length,p=new Array(r),i=0;i<r;i++)if(o=e===l?i:l[i],a=e[o],s=c(o,a,i),E[s])u=E[s],delete E[s],m[s]=u,p[i]=u;else{if(m[s])throw fe(p,function(e){e&&e.scope&&(E[e.id]=e)}),P("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",w,s,a);p[i]={id:s,scope:void 0,clone:void 0},m[s]=!0}for(var g in E){if(d=Ie((u=E[g]).clone),k.leave(d),d[0].parentNode)for(i=0,t=d.length;i<t;i++)d[i][M]=!0;u.scope.$destroy()}for(i=0;i<r;i++)if(o=e===l?i:l[i],a=e[o],(u=p[i]).scope){for(n=f;(n=n.nextSibling)&&n[M];);u.clone[0]!==n&&k.move(Ie(u.clone),null,f),f=(h=u).clone[h.clone.length-1],R(u.scope,i,T,a,j,o,r)}else x(function(e,t){u.scope=t;var n=$.cloneNode(!1);e[e.length++]=n,k.enter(e,null,f),f=n,u.clone=e,m[u.id]=u,R(u.scope,i,T,a,j,o,r)});E=m})}}}}],aa="ng-hide",sa="ng-hide-animate",ca=["$animate",function(i){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngShow,function(e){i[e?"removeClass":"addClass"](t,aa,{tempClasses:sa})})}}}],la=["$animate",function(i){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngHide,function(e){i[e?"addClass":"removeClass"](t,aa,{tempClasses:sa})})}}}],ua=Or(function(e,n,t){e.$watch(t.ngStyle,function(e,t){t&&e!==t&&fe(t,function(e,t){n.css(t,"")}),e&&n.css(e)},!0)}),pa=["$animate","$compile",function(u,p){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(e,t,n,r){var i=n.ngSwitch||n.on,o=[],a=[],s=[],c=[],l=function(t,n){return function(e){!1!==e&&t.splice(n,1)}};e.$watch(i,function(e){for(var t,n;s.length;)u.cancel(s.pop());for(t=0,n=c.length;t<n;++t){var i=Ie(a[t].clone);c[t].$destroy(),(s[t]=u.leave(i)).done(l(s,t))}a.length=0,c.length=0,(o=r.cases["!"+e]||r.cases["?"])&&fe(o,function(r){r.transclude(function(e,t){c.push(t);var n=r.element;e[e.length++]=p.$$createComment("end ngSwitchWhen");var i={clone:e};a.push(i),u.enter(e,n.parent(),n)})})})}}}],da=Or({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){fe(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e}),function(e){i.cases["!"+e]=i.cases["!"+e]||[],i.cases["!"+e].push({transclude:r,element:t})})}}),ha=Or({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:t})}}),fa=A("ngTransclude"),ma=["$compile",function(t){return{restrict:"EAC",compile:function(e){var s=t(e.contents());return e.empty(),function(e,n,t,i,r){if(!r)throw fa("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Oe(n));t.ngTransclude===t.$attr.ngTransclude&&(t.ngTransclude="");var o=t.ngTransclude||t.ngTranscludeSlot;function a(){s(e,function(e){n.append(e)})}r(function(e,t){e.length&&function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];if(i.nodeType!==Ve||i.nodeValue.trim())return!0}}(e)?n.append(e):(a(),t.$destroy())},null,o),o&&!r.isSlotFilled(o)&&a()}}}}],va=["$templateCache",function(r){return{restrict:"E",terminal:!0,compile:function(e,t){if("text/ng-template"===t.type){var n=t.id,i=e[0].text;r.put(n,i)}}}}],ga={$setViewValue:ge,$render:ge};function ya(e,t){e.prop("selected",t),e.attr("selected",t)}var ba=["$element","$scope",function(r,t){var s=this,i=new Ft;s.selectValueMap={},s.ngModelCtrl=ga,s.multiple=!1,s.unknownOption=de(H.document.createElement("option")),s.hasEmptyOption=!1,s.emptyOption=void 0,s.renderUnknownOption=function(e){var t=s.generateUnknownOptionValue(e);s.unknownOption.val(t),r.prepend(s.unknownOption),ya(s.unknownOption,!0),r.val(t)},s.updateUnknownOption=function(e){var t=s.generateUnknownOptionValue(e);s.unknownOption.val(t),ya(s.unknownOption,!0),r.val(t)},s.generateUnknownOptionValue=function(e){return"? "+Bt(e)+" ?"},s.removeUnknownOption=function(){s.unknownOption.parent()&&s.unknownOption.remove()},s.selectEmptyOption=function(){s.emptyOption&&(r.val(""),ya(s.emptyOption,!0))},s.unselectEmptyOption=function(){s.hasEmptyOption&&ya(s.emptyOption,!1)},t.$on("$destroy",function(){s.renderUnknownOption=ge}),s.readValue=function(){var e=r.val(),t=e in s.selectValueMap?s.selectValueMap[e]:e;return s.hasOption(t)?t:null},s.writeValue=function(e){var t=r[0].options[r[0].selectedIndex];if(t&&ya(de(t),!1),s.hasOption(e)){s.removeUnknownOption();var n=Bt(e);r.val(n in s.selectValueMap?n:e);var i=r[0].options[r[0].selectedIndex];ya(de(i),!0)}else s.selectUnknownOrEmptyOption(e)},s.addOption=function(e,t){if(t[0].nodeType!==ze){Le(e,'"option value"'),""===e&&(s.hasEmptyOption=!0,s.emptyOption=t);var n=i.get(e)||0;i.set(e,n+1),c()}},s.removeOption=function(e){var t=i.get(e);t&&(1===t?(i.delete(e),""===e&&(s.hasEmptyOption=!1,s.emptyOption=void 0)):i.set(e,t-1))},s.hasOption=function(e){return!!i.get(e)},s.$hasEmptyOption=function(){return s.hasEmptyOption},s.$isUnknownOptionSelected=function(){return r[0].options[0]===s.unknownOption[0]},s.$isEmptyOptionSelected=function(){return s.hasEmptyOption&&r[0].options[r[0].selectedIndex]===s.emptyOption[0]},s.selectUnknownOrEmptyOption=function(e){null==e&&s.emptyOption?(s.removeUnknownOption(),s.selectEmptyOption()):s.unknownOption.parent().length?s.updateUnknownOption(e):s.renderUnknownOption(e)};var e=!1;function c(){e||(e=!0,t.$$postDigest(function(){e=!1,s.ngModelCtrl.$render()}))}var n=!1;function l(e){n||(n=!0,t.$$postDigest(function(){t.$$destroyed||(n=!1,s.ngModelCtrl.$setViewValue(s.readValue()),e&&s.ngModelCtrl.$render())}))}s.registerOption=function(e,i,r,t,n){if(r.$attr.ngValue){var o,a=NaN;r.$observe("value",function(e){var t,n=i.prop("selected");xe(a)&&(s.removeOption(o),delete s.selectValueMap[a],t=!0),a=Bt(e),o=e,s.selectValueMap[a]=e,s.addOption(e,i),i.attr("value",a),t&&n&&l()})}else t?r.$observe("value",function(e){var t;s.readValue();var n=i.prop("selected");xe(o)&&(s.removeOption(o),t=!0),o=e,s.addOption(e,i),t&&n&&l()}):n?e.$watch(n,function(e,t){r.$set("value",e);var n=i.prop("selected");t!==e&&s.removeOption(t),s.addOption(e,i),t&&n&&l()}):s.addOption(r.value,i);r.$observe("disabled",function(e){("true"===e||e&&i.prop("selected"))&&(s.multiple?l(!0):(s.ngModelCtrl.$setViewValue(null),s.ngModelCtrl.$render()))}),i.on("$destroy",function(){var e=s.readValue(),t=r.value;s.removeOption(t),c(),(s.multiple&&e&&-1!==e.indexOf(t)||e===t)&&l(!0)})}}],xa=function(){return{restrict:"E",require:["select","?ngModel"],controller:ba,priority:1,link:{pre:function(e,t,n,i){var r=i[0],o=i[1];if(!o)return void(r.registerOption=ge);if(r.ngModelCtrl=o,t.on("change",function(){r.removeUnknownOption(),e.$apply(function(){o.$setViewValue(r.readValue())})}),n.multiple){r.multiple=!0,r.readValue=function(){var n=[];return fe(t.find("option"),function(e){if(e.selected&&!e.disabled){var t=e.value;n.push(t in r.selectValueMap?r.selectValueMap[t]:t)}}),n},r.writeValue=function(i){fe(t.find("option"),function(e){var t=!!i&&(N(i,e.value)||N(i,r.selectValueMap[e.value])),n=e.selected;t!==n&&ya(de(e),t)})};var a,s=NaN;e.$watch(function(){s!==o.$viewValue||Pe(a,o.$viewValue)||(a=Ge(o.$viewValue),o.$render()),s=o.$viewValue}),o.$isEmpty=function(e){return!e||0===e.length}}},post:function(e,t,n,i){var r=i[1];if(!r)return;var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}}},Ea=["$interpolate",function(n){return{restrict:"E",priority:100,compile:function(e,t){var a,s;return xe(t.ngValue)||(xe(t.value)?a=n(t.value,!0):(s=n(e.text(),!0))||t.$set("value",e.text())),function(e,t,n){var i="$selectController",r=t.parent(),o=r.data(i)||r.parent().data(i);o&&o.registerOption(e,t,n,a,s)}}}}],wa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i&&(n.required=!0,i.$validators.required=function(e,t){return!n.required||!i.$isEmpty(t)},n.$observe("required",function(){i.$validate()}))}}},$a=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r,o=n.ngPattern||n.pattern;n.$observe("pattern",function(e){if(we(e)&&0<e.length&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw A("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",o,e,Oe(t));r=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||be(r)||r.test(t)}}}}},_a=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=-1;n.$observe("maxlength",function(e){var t=x(e);r=j(t)?-1:t,i.$validate()}),i.$validators.maxlength=function(e,t){return r<0||i.$isEmpty(t)||t.length<=r}}}}},Sa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=0;n.$observe("minlength",function(e){r=x(e)||0,i.$validate()}),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=r}}}}};H.angular.bootstrap?H.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var r;if(!se){var e=I();(a=be(e)?H.jQuery:e?H[e]:void 0)&&a.fn.on?(me((de=a).fn,{scope:jt.scope,isolateScope:jt.isolateScope,controller:jt.controller,injector:jt.injector,inheritedData:jt.inheritedData}),r=a.cleanData,a.cleanData=function(e){for(var t,n,i=0;null!=(n=e[i]);i++)(t=a._data(n,"events"))&&t.$destroy&&a(n).triggerHandler("$destroy");r(e)}):de=ht,b.element=de,se=!0}}(),me(b,{errorHandlingConfig:e,bootstrap:ie,copy:B,extend:me,merge:r,equals:Pe,element:de,forEach:fe,injector:Xt,noop:ge,bind:De,toJson:z,fromJson:q,identity:ye,isUndefined:be,isDefined:xe,isString:we,isFunction:Se,isObject:Ee,isNumber:$,isElement:O,isArray:$e,version:Ke,isDate:_,lowercase:ue,uppercase:u,callbacks:{$$counter:0},getTestability:oe,reloadWithDebugInfo:re,$$minErr:A,$$csp:L,$$encodeUriSegment:J,$$encodeUriQuery:Q,$$stringify:Ue}),(g=function(e){var p=A("$injector"),d=A("ng");function t(e,t,n){return e[t]||(e[t]=n())}var n=t(e,"angular",Object);return n.$$minErr=n.$$minErr||A,t(n,"module",function(){var e={};return function(s,c,l){var u={};return function(e,t){if("hasOwnProperty"===e)throw d("badname","hasOwnProperty is not a valid {0} name",t)}(s,"module"),c&&e.hasOwnProperty(s)&&(e[s]=null),t(e,s,function(){if(!c)throw p("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",s);var o=[],e=[],t=[],n=i("$injector","invoke","push",e),a={_invokeQueue:o,_configBlocks:e,_runBlocks:t,info:function(e){if(xe(e)){if(!Ee(e))throw d("aobj","Argument '{0}' must be an object","value");return u=e,this}return u},requires:c,name:s,provider:r("$provide","provider"),factory:r("$provide","factory"),service:r("$provide","service"),value:i("$provide","value"),constant:i("$provide","constant","unshift"),decorator:r("$provide","decorator",e),animation:r("$animateProvider","register"),filter:r("$filterProvider","register"),controller:r("$controllerProvider","register"),directive:r("$compileProvider","directive"),component:r("$compileProvider","component"),config:n,run:function(e){return t.push(e),this}};return l&&n(l),a;function i(e,t,n,i){return i||(i=o),function(){return i[n||"push"]([e,t,arguments]),a}}function r(n,i,r){return r||(r=o),function(e,t){return t&&Se(t)&&(t.$$moduleName=s),r.push([n,i,arguments]),a}}})}})}(H))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Vi}),e.provider("$compile",mn).directive({a:Nr,input:yo,textarea:yo,form:Vr,script:va,select:xa,option:Ea,ngBind:Eo,ngBindHtml:$o,ngBindTemplate:wo,ngClass:Co,ngClassEven:To,ngClassOdd:Ao,ngCloak:jo,ngController:ko,ngForm:zr,ngHide:la,ngIf:Ro,ngInclude:Do,ngInit:No,ngNonBindable:ea,ngPluralize:ra,ngRepeat:oa,ngShow:ca,ngStyle:ua,ngSwitch:pa,ngSwitchWhen:da,ngSwitchDefault:ha,ngOptions:ia,ngTransclude:ma,ngModel:Ko,ngList:Bo,ngChange:_o,pattern:$a,ngPattern:$a,required:wa,ngRequired:wa,minlength:Sa,ngMinlength:Sa,maxlength:_a,ngMaxlength:_a,ngValue:xo,ngModelOptions:Jo}).directive({ngInclude:Oo}).directive(Br).directive(Mo),e.provider({$anchorScroll:Zt,$animate:an,$animateCss:ln,$$animateJs:rn,$$animateQueue:on,$$AnimateRunner:cn,$$animateAsyncRun:sn,$browser:un,$cacheFactory:pn,$controller:_n,$document:Sn,$$isDocumentHidden:Cn,$exceptionHandler:An,$filter:lr,$$forceReflow:Tn,$interpolate:Gn,$interval:Yn,$http:Vn,$httpParamSerializer:Nn,$httpParamSerializerJQLike:Bn,$httpBackend:qn,$xhrFactory:zn,$jsonpCallbacks:Kn,$location:hi,$log:fi,$parse:Di,$rootScope:Hi,$q:Oi,$$q:Ni,$sce:Xi,$sceDelegate:Ki,$sniffer:Zi,$templateCache:dn,$templateRequest:Qi,$$testability:er,$timeout:tr,$window:ar,$$rAF:Ui,$$jqLite:Nt,$$Map:Ut,$$cookieReader:cr})}]).info({angularVersion:"1.6.9"}),b.module("ngLocale",[],["$provide",function(e){var r="one",o="other";e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var n=0|e,i=function(e,t){var n,i,r=t;void 0===r&&(r=Math.min((n=e,-1==(i=(n+="").indexOf("."))?0:n.length-i-1),3));var o=Math.pow(10,r);return{v:r,f:(e*o|0)%o}}(e,t);return 1==n&&0==i.v?r:o}})}]),de(function(){ne(H.document,ie)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},{}],5:[function(e,t,n){e("./angular"),t.exports=angular},{"./angular":4}],6:[function(e,t,n){t.exports=e("./lib")},{"./lib":30}],7:[function(e,t,n){"use strict";var i=1e3;function r(e,t){var n=this;t=t||i,e.on("propertiesPanel.isEntryVisible",t,function(e){return n.isEntryVisible(e.entry,e.element)}),e.on("propertiesPanel.isPropertyEditable",t,function(e){return n.isPropertyEditable(e.entry,e.propertyName,e.element)})}r.$inject=["eventBus"],(t.exports=r).prototype.isEntryVisible=function(e,t){return!0},r.prototype.isPropertyEditable=function(e,t,n){return!0}},{}],8:[function(e,t,n){"use strict";var y=e("min-dom/lib/domify"),b=e("min-dom/lib/query"),a=e("min-dom/lib/remove"),p=e("min-dom/lib/classes"),l=e("min-dom/lib/closest"),x=e("min-dom/lib/attr"),i=e("min-dom/lib/delegate"),r=e("min-dom/lib/matches"),E=e("lodash/collection/forEach"),o=e("lodash/collection/filter"),c=e("lodash/object/get"),s=e("lodash/object/keys"),u=e("lodash/lang/isEmpty"),d=e("lodash/lang/isArray"),h=e("lodash/array/xor"),f=e("lodash/function/debounce"),w=e("selection-update"),m=e("scroll-tabs"),$=e("bpmn-js/lib/util/ModelUtil").getBusinessObject,_="bpp-hidden";function S(e){return"checkbox"===e.type||"radio"===e.type}function C(e){return x(e,"contenteditable")}function v(e,t){var n=b.all("input[name], textarea[name], select[name], [contenteditable]",e);return n&&n.length||(n=r(e,"option")?[e]:n),t||(n=o(n,function(e){return!l(e,"."+_)})),n}function g(e){var i={},t=v(e);return E(t,function(e){var t=e.value,n=x(e,"name")||x(e,"data-name");S(e)?t=e.checked?!x(e,"value")||e.value:null:C(e)&&(t=e.innerText),null!==t&&(i[n]=t)}),i}function A(e){var t,n=b("[data-list-entry-container]",e);if(n){t=[];var i=n.children||[];E(i,function(e){t.push(g(e))})}else t=g(e);return t}function T(t,n){return!(t&&!n)&&s(t).concat(s(n)).every(function(e){return t[e]===n[e]})}function j(e){return P(M(R(M(R(e,"groups")),"entries")),"id")}function k(e,t,n,i,r,o){this._eventBus=t,this._modeling=n,this._commandStack=r,this._canvas=o,this._propertiesProvider=i,this._init(e)}k.$inject=["config.propertiesPanel","eventBus","modeling","propertiesProvider","commandStack","canvas"],(t.exports=k).prototype._init=function(e){var t=this._eventBus,o=this;t.on("root.added",function(e){o.update(e.element)}),t.on("selection.changed",function(e){var t=e.newSelection[0];o.update(t)}),t.on(["propertiesPanel.changed","propertiesPanel.resized"],function(e){var t=b(".bpp-properties-tab-bar",o._container);if(t){var n=m.get(t);n||(n=m(t,{selectors:{tabsContainer:".bpp-properties-tabs-links",tab:".bpp-properties-tabs-links li",ignore:".bpp-hidden",active:".bpp-active"}})).on("scroll",function(e,t,n){var i=b("[data-tab-target]",e),r=x(i,"data-tab-target");o.activateTab(r)}),n.update()}}),t.on("elements.changed",function(e){var t=o._current,n=t&&t.element;n&&-1!==e.elements.indexOf(n)&&o.update(n)}),t.on("elementTemplates.changed",function(){var e=o._current,t=e&&e.element;t&&o.update(t)}),t.on("diagram.destroy",function(){o.detach()}),this._container=y('<div class="bpp-properties-panel"></div>'),this._bindListeners(this._container),e&&e.parent&&this.attachTo(e.parent)},k.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=b(e));var t=this._container;e.appendChild(t),this._emit("attach")},k.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach"),t.removeChild(e))},k.prototype.activateTab=function(e){var i="string"==typeof e?e:e.id,t=this._current.panel,n=b.all(".bpp-properties-tab",t),r=b.all(".bpp-properties-tab-link",t);E(n,function(e){var t=x(e,"data-tab");p(e).toggle("bpp-active",i===t)}),E(r,function(e){var t=b("[data-tab-target]",e),n=x(t,"data-tab-target");p(e).toggle("bpp-active",i===n)})},k.prototype.update=function(e){var t=this._current,n=!0;void 0===e&&(e=this._canvas.getRootElement());var i=this._propertiesProvider.getTabs(e);if(t&&t.element===e&&(n=this._entriesChanged(t,i)),n){if(t){var r,o=b(".bpp-properties-tab.bpp-active",t.panel);o&&(r=x(o,"data-tab")),a(t.panel)}this._current=this._create(e,i),r?this.activateTab(r):this.activateTab(this._current.tabs[0])}this._current&&this._updateActivation(this._current),this._emit("changed")},k.prototype._entriesChanged=function(e,t){var n=s(e.entries),i=s(j(t));return!u(h(n,i))},k.prototype._emit=function(e){this._eventBus.fire("propertiesPanel."+e,{panel:this,current:this._current})},k.prototype._bindListeners=function(e){var c=this,t=function(e){var t,n,i=l(e.delegateTarget,"[data-entry]");if(i){t=x(i,"data-entry"),n=c.getEntry(t);var r=A(i);if("change"===e.type){var o=e.delegateTarget.getAttribute("data-on-change");if(o)if(!c.executeAction(n,i,o,e))return c.update(c._current.element)}c.applyChanges(n,r,i),c.updateState(n,i)}};i.bind(e,"input, textarea, [contenteditable]","input",f(t,300)),i.bind(e,"input, textarea, select, [contenteditable]","change",t),i.bind(e,"[data-action]","click",function(e){var t=e.delegateTarget,n=l(t,"[data-entry]"),i=x(t,"data-action"),r=x(n,"data-entry"),o=c.getEntry(r);if(c.executeAction(o,n,i,e)){var a=A(n);c.applyChanges(o,a,n)}c.updateState(o,n)}),i.bind(e,"[data-blur]","blur",function(e,t){var n=e.delegateTarget,i=l(n,"[data-entry]");if(i){var r=x(n,"data-blur"),o=x(i,"data-entry"),a=c.getEntry(o);if(c.executeAction(a,i,r,e)){var s=A(i);c.applyChanges(a,s,i)}c.updateState(a,i)}},!0),i.bind(e,".bpp-properties-tabs-links [data-tab-target]","click",function(e){e.preventDefault();var t=e.delegateTarget,n=x(t,"data-tab-target");c.activateTab(n)})},k.prototype.updateState=function(e,t){this.updateShow(e,t),this.updateDisable(e,t)},k.prototype.updateShow=function(r,o){var a=this._current;if(a){var e=b.all("[data-show]",o)||[];E(e,function(e){var t=x(e,"data-show"),n=c(r,t);if(n){var i=l(e,"[data-scope]")||o;n(a.element,o,e,i)||!1?p(e).remove(_):p(e).add(_)}})}},k.prototype.updateDisable=function(o,a){var s=this._current;if(s){var e=b.all("[data-disable]",a)||[];E(e,function(e){var t=x(e,"data-disable"),n=c(o,t);if(n){var i=l(e,"[data-scope]")||a,r=n(s.element,a,e,i)||!1;x(e,"disabled",r?"":null)}})}},k.prototype.executeAction=function(e,t,n,i){var r=this._current;if(r){var o=c(e,n);if(o){var a=l(i.target,"[data-scope]")||t;return o.apply(e,[r.element,t,i,a])}}},k.prototype.applyChanges=function(e,t,n){var i=this._current.element;if(r=t,o=e.oldValues,d(r)?r.length!==o.length||!r.every(function(e,t){return T(e,o[t])}):!T(r,o)){var r,o,a,s=e.set(i,t,n);d(s)?s.length&&(a={cmd:"properties-panel.multi-command-executor",context:M(s)}):a=s,a?this._commandStack.execute(a.cmd,a.context||{element:i}):this.update(i)}},k.prototype.applyValidationErrors=function(r,e){var o=!0,t=v(e,!0);return E(t,function(e){var t=x(e,"name")||x(e,"data-name"),n=r&&r[t],i=b(".bpp-error-message",e.parentNode);n?(o=!1,i||(i=y("<div></div>"),p(i).add("bpp-error-message"),e.parentNode.insertBefore(i,e.nextSibling)),i.innerHTML=n,p(e).add("invalid")):(p(e).remove("invalid"),i&&e.parentNode.removeChild(i))}),o},k.prototype.validate=function(e,t,n){var i=this._current,r=!0;if(n=n||b('[data-entry="'+e.id+'"]',i.panel),t instanceof Array)for(var o=b("[data-list-entry-container]",n).children||[],a=0;a<t.length;a++){var s=t[a];if(e.validateListItem){var c=e.validateListItem(i.element,s,n,a),l=o[a];r=this.applyValidationErrors(c,l)&&r}}else e.validate&&(this.validationErrors=e.validate(i.element,t,n),r=this.applyValidationErrors(this.validationErrors,n)&&r);return r},k.prototype.getEntry=function(e){return this._current&&this._current.entries[e]};var M=e("lodash/array/flattenDeep"),P=e("lodash/collection/indexBy"),R=e("lodash/collection/map");k.prototype._create=function(e,t){if(!e)return null;var n=this._container,i=this._createPanel(e,t);n.appendChild(i);var r=j(t);return{tabs:t,groups:P(M(R(t,"groups")),"id"),entries:r,element:e,panel:i}},k.prototype._bindTemplate=function(d,h,f,m,v){var g=this._eventBus;var e,t,n,i=(e=m,t="input[name], textarea[name], [data-value], [contenteditable]",(n=b.all(t,e))&&n.length||!r(e,t)||(n=[e]),n);E(i,function(e){var t,n,i,r,o,a,s,c,l,u,p;"value"in e||"true"===C(e)?(t=x(e,"name")||x(e,"data-name"),n=f[t],u=h,p=t,(i=g.fire("propertiesPanel.isPropertyEditable",{entry:u,propertyName:p,element:d}))&&h.editable&&(i=h.editable(d,m,e,t,n,v)),x(e,"readonly",i?null:""),x(e,"disabled",i?null:""),h.setControlValue?h.setControlValue(d,m,e,t,n,v):S(e)?(c=n,l=(s=e).value,s.checked=c===l||!x(s,"value")&&c):"select-one"===e.type?(o=e,void 0!==(a=n)&&(o.value=a)):function(e,t){var n,i=C(e),r=i?e.innerText:e.value;void 0===t&&(t="");if(r===t)return;document.activeElement===e&&(n=w(C(o=e)?function(e){var t=window.getSelection(),n=t.focusNode,i=t.focusOffset,r=t.anchorOffset;if(!n)throw new Error("not selected");if(!e.contains(n))throw new Error("not selected");return{start:Math.min(i,r),end:Math.max(i,r)}}(o):{start:o.selectionStart,end:o.selectionEnd},r,t));var o;i?e.innerText=t:e.value=t;n&&(s=n,C(a=e)?(l=s,u=(c=a).firstChild||c,(p=document.createRange()).setStart(u,l.start),p.setEnd(u,l.end),(d=window.getSelection()).removeAllRanges(),d.addRange(p)):(a.selectionStart=s.start,a.selectionEnd=s.end));var a,s,c,l,u,p,d}(e,n)):(t=x(e,"data-value"),n=f[t],h.setControlValue?h.setControlValue(d,m,e,t,n,v):(r=n,e.textContent=r))})},k.prototype._updateActivation=function(c){var f=this,m=this._eventBus,v=c.element;function g(e,t){p(e).toggle(_,!t)}function l(e,t,n){var i=b(t,e);i&&(i.textContent=n)}var u=c.panel;E(c.tabs,function(e){var t,n,i,r,o=b("[data-tab="+e.id+"]",u),a=b("[data-tab-target="+e.id+"]",u).parentNode,s=!1;E(e.groups,function(e){var t,n,i,d=!1,h=b("[data-group="+e.id+"]",o);E(e.entries,function(e){var t,n=b('[data-entry="'+e.id+'"]',h),i=(t=e,m.fire("propertiesPanel.isEntryVisible",{entry:t,element:v}));d=d||i,g(n,i);var r="get"in e?e.get(v,n):{};if(r instanceof Array){for(var o=b("[data-list-entry-container]",n),a=o.children||[],s=0;s<r.length;s++){var c=r[s],l=a[s];l||(l=y(e.createListEntryTemplate(c,s,o)),o.appendChild(l)),x(l,"data-index",s),f._bindTemplate(v,e,c,l,s)}for(var u=a.length-r.length,p=0;p<u;p++)o.removeChild(o.lastChild)}else f._bindTemplate(v,e,r,n);f.updateState(e,n),f.validate(e,r,n),e.oldValues=A(n)}),"function"==typeof e.label&&l(h,".group-label",e.label(v,h)),d=d&&(n=v,i=h,"function"!=typeof(t=e).enabled||t.enabled(n,i)),s=s||d,g(h,d)}),s=s&&(n=v,"function"!=typeof(t=e).enabled||t.enabled(n)),g(o,s),g(a,s),i=s,r=p(o).has("bpp-active"),!i&&r&&f.activateTab(c.tabs[0])}),l(u,"[data-label-id]",$(v).id||"")},k.prototype._createPanel=function(e,t){var o=this,n=y('<div class="bpp-properties"></div>'),i=y('<div class="bpp-properties-header"><div class="label" data-label-id></div><div class="search"><input type="search" placeholder="Search for property" /><button><span>Search</span></button></div></div>'),r=y('<div class="bpp-properties-tab-bar"></div>'),a=y('<ul class="bpp-properties-tabs-links"></ul>'),s=y('<div class="bpp-properties-tabs-container"></div>');return n.appendChild(i),E(t,function(e,t){if(!e.id)throw new Error("tab must have an id");var n=y('<div class="bpp-properties-tab" data-tab="'+e.id+'"></div>'),i=y('<li class="bpp-properties-tab-link"><a href data-tab-target="'+e.id+'">'+e.label+"</a></li>"),r=e.groups;E(r,function(e){if(!e.id)throw new Error("group must have an id");var i=y('<div class="bpp-properties-group" data-group="'+e.id+'"><span class="group-toggle"></span><span class="group-label">'+e.label+"</span></div>");i.querySelector(".group-toggle").addEventListener("click",function(e){p(i).toggle("group-closed"),e.preventDefault(),e.stopPropagation()}),i.addEventListener("click",function(e){!e.defaultPrevented&&p(i).has("group-closed")&&p(i).remove("group-closed")}),E(e.entries,function(e){if(!e.id)throw new Error("entry must have an id");var t=e.html;"string"==typeof t&&(t=y(t)),t.get&&t.constructor.prototype.jquery&&(t=t.get(0));var n=y('<div class="bpp-properties-entry" data-entry="'+e.id+'"></div>');E(e.cssClasses||[],function(e){p(n).add(e)}),n.appendChild(t),i.appendChild(n),o.updateState(e,n)}),n.appendChild(i)}),a.appendChild(i),s.appendChild(n)}),r.appendChild(a),n.appendChild(r),n.appendChild(s),n}},{"bpmn-js/lib/util/ModelUtil":140,"lodash/array/flattenDeep":347,"lodash/array/xor":354,"lodash/collection/filter":358,"lodash/collection/forEach":360,"lodash/collection/indexBy":362,"lodash/collection/map":363,"lodash/function/debounce":371,"lodash/lang/isArray":480,"lodash/lang/isEmpty":481,"lodash/object/get":491,"lodash/object/keys":493,"min-dom/lib/attr":504,"min-dom/lib/classes":505,"min-dom/lib/closest":507,"min-dom/lib/delegate":508,"min-dom/lib/domify":509,"min-dom/lib/matches":511,"min-dom/lib/query":512,"min-dom/lib/remove":513,"scroll-tabs":531,"selection-update":532}],9:[function(e,t,n){"use strict";var a=e("min-dom/lib/query"),s=e("min-dom/lib/clear"),i=e("bpmn-js/lib/util/ModelUtil").is,c=e("lodash/collection/forEach"),l=e("min-dom/lib/domify"),r=e("ids"),o=/\s/,u=/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i,p=/^[a-z_][\w-.]*$/i,d=/\$\{([^\}]*)\}/g;function h(e){if(0<=e.selectedIndex)return e.options[e.selectedIndex].value}function f(e){for(var t=e;t.$parent;)t=t.$parent;return t}function m(e,t){var n=[];return c(e||[],function(e){i(e,t)&&n.push(e)}),n}function v(e,t){return m(f(e).rootElements,t)}function g(e){return e.push({label:"",value:"",name:""})}function y(e,t){var n=[],i=v(e,t);return c(i,function(e){n.push({label:(e.name||"")+" (id="+e.id+")",value:e.id,name:e.name})}),n}function b(e){return x(e=e.replace(d,"$1"))?"Id must not contain spaces.":p.test(e)?void 0:u.test(e)?"Id must not contain prefix.":"Id must be a valid QName."}function x(e){return o.test(e)}t.exports.selectedOption=h,t.exports.selectedType=function(e,t){return h(a(e,t))},t.exports.getRoot=f,t.exports.filterElementsByType=m,t.exports.findRootElementsByType=v,t.exports.removeAllChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.exports.addEmptyParameter=g,t.exports.refreshOptionsModel=y,t.exports.updateOptionsDropDown=function(e,t,n,i){var r=y(t,n);g(r);var o=a(e,i);return s(o),c(r,function(e){var t=l('<option value="'+e.value+'">'+e.label+"</option>");o.appendChild(t)}),r},t.exports.isIdValid=function(e,t){var n=e.$model.ids.assigned(t);return!t||n&&n!==e?"Element must have an unique id.":b(t)},t.exports.validateId=b,t.exports.containsSpace=x,t.exports.nextId=function(e){return new r([32,32,1]).nextPrefixed(e)},t.exports.triggerClickEvent=function(e){var t;if(document.createEvent){try{t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})}catch(e){(t=document.createEvent("MouseEvent")).initEvent("click",!0,!0)}return e.dispatchEvent(t)}return t=document.createEventObject(),e.fireEvent("onclick",t)}},{"bpmn-js/lib/util/ModelUtil":140,ids:342,"lodash/collection/forEach":360,"min-dom/lib/clear":506,"min-dom/lib/domify":509,"min-dom/lib/query":512}],10:[function(e,t,n){"use strict";var c=e("../helper/ElementHelper");function i(e,t){this._elementRegistry=e,this._bpmnFactory=t}function l(e,t){if(!e)throw new Error(t+" required");return e}i.$inject=["elementRegistry","bpmnFactory"],(t.exports=i).prototype.execute=function(e){var t=l(e.referencingObject,"referencingObject"),n=l(e.referenceProperty,"referenceProperty"),i=l(e.newObject,"newObject"),r=l(e.newObjectContainer,"newObjectContainer"),o=l(e.newObjectParent,"newObjectParent"),a=[e.element],s=c.createElement(i.type,i.properties,o,this._bpmnFactory);return e.referencedObject=s,r.push(s),e.previousReference=t[n],t[n]=s,e.changed=a},i.prototype.revert=function(e){var t=e.referencingObject,n=e.referenceProperty,i=e.previousReference,r=e.referencedObject,o=e.newObjectContainer;return t.set(n,i),o.splice(o.indexOf(r),1),e.changed}},{"../helper/ElementHelper":28}],11:[function(e,t,n){"use strict";var s=e("lodash/collection/forEach"),c=e("../helper/ElementHelper");function i(e,t){this._elementRegistry=e,this._bpmnFactory=t}function l(e,t){if(!e)throw new Error(t+" required");return e}i.$inject=["elementRegistry","bpmnFactory"],(t.exports=i).prototype.execute=function(e){var n=l(e.currentObject,"currentObject"),t=l(e.propertyName,"propertyName"),i=function(e,t){if(!e||"[object Array]"!==Object.prototype.toString.call(e))throw new Error(t+" needs to be a list");return e}(e.newObjects,"newObjects"),r=[e.element],o=[],a=this;return s(i,function(e){var t=c.createElement(e.type,e.properties,n,a._bpmnFactory);o.push(t)}),e.childObject=o,e.previousChilds=n[t],n[t]=o,e.changed=r},i.prototype.revert=function(e){var t=e.currentObject,n=e.propertyName,i=e.previousChilds;return t.set(n,i),e.changed}},{"../helper/ElementHelper":28,"lodash/collection/forEach":360}],12:[function(e,t,n){"use strict";var i=e("lodash/collection/forEach");function r(e){this._commandStack=e}r.$inject=["commandStack"],(t.exports=r).prototype.preExecute=function(e){var t=this._commandStack;i(e,function(e){t.execute(e.cmd,e.context)})}},{"lodash/collection/forEach":360}],13:[function(e,t,n){"use strict";var p=e("lodash/object/transform"),d=e("bpmn-js/lib/util/ModelUtil").is,h=e("lodash/object/keys"),f=e("lodash/collection/forEach");function i(e){this._elementRegistry=e}function m(n,e){f(e,function(e,t){n.set(t,e)})}i.$inject=["elementRegistry"],(t.exports=i).prototype.execute=function(e){var t=e.element,n=e.businessObject,i=function(e){for(var t=e;t.$parent;)t=t.$parent;return t}(n).rootElements,r=e.referenceType,o=e.referenceProperty,a=[t];if(!t)throw new Error("element required");if(!n)throw new Error("businessObject required");var s,c,l=e.properties,u=e.oldProperties||(s=n,c=h(l),p(c,function(e,t){return e[t]=s.get(t),e},{}));return void 0!==r&&void 0!==o&&f(i,function(e){d(e,r)&&e.id===l[o]&&(l[o]=e)}),m(n,l),e.oldProperties=u,e.changed=a},i.prototype.revert=function(e){var t=e.oldProperties;return m(e.businessObject,t),e.changed}},{"bpmn-js/lib/util/ModelUtil":140,"lodash/collection/forEach":360,"lodash/object/keys":493,"lodash/object/transform":499}],14:[function(e,t,n){"use strict";var u=e("lodash/collection/forEach");function i(e,t){this._elementRegistry=e,this._bpmnFactory=t}function p(e,t){if(!e)throw new Error(t+"required");return e}i.$inject=["elementRegistry","bpmnFactory"],(t.exports=i).prototype.execute=function(e){var t,n=p(e.currentObject,"currentObject"),i=p(e.propertyName,"propertyName"),r=e.updatedObjectList,o=e.objectsToRemove||[],a=e.objectsToAdd||[],s=[e.element];e.referencePropertyName&&(t=e.referencePropertyName);var c=n[i];if(e.previousList=n[i],r)n[i]=r;else{var l=[];if(u(c,function(e){-1==o.indexOf(e)&&l.push(e)}),0<(l=l.concat(a)).length||!t)n[i]=l;else if(t){n.$parent.set(t,void 0)}}return e.changed=s},i.prototype.revert=function(e){var t=e.currentObject,n=e.propertyName,i=e.previousList,r=t.$parent;return e.referencePropertyName&&r.set(e.referencePropertyName,t),t.set(n,i),e.changed}},{"lodash/collection/forEach":360}],15:[function(e,t,n){"use strict";var i=e("lodash/collection/forEach"),r={"properties-panel.update-businessobject":e("./UpdateBusinessObjectHandler"),"properties-panel.create-and-reference":e("./CreateAndReferenceHandler"),"properties-panel.create-businessobject-list":e("./CreateBusinessObjectListHandler"),"properties-panel.update-businessobject-list":e("./UpdateBusinessObjectListHandler"),"properties-panel.multi-command-executor":e("./MultiCommandHandler")};function o(e,n){e.on("diagram.init",function(){i(r,function(e,t){n.registerHandler(t,e)})})}o.$inject=["eventBus","commandStack"],t.exports={__init__:[o]}},{"./CreateAndReferenceHandler":10,"./CreateBusinessObjectListHandler":11,"./MultiCommandHandler":12,"./UpdateBusinessObjectHandler":13,"./UpdateBusinessObjectListHandler":14,"lodash/collection/forEach":360}],16:[function(e,t,n){"use strict";var s=e("bpmn-js/lib/util/ModelUtil").getBusinessObject,c=e("../helper/CmdHelper"),l=e("./EntryFieldDescription");t.exports=function(i,e){var t=e,n=i.label||t.id,r=!!i.disabled&&"function"==typeof i.disabled,o=!!i.hidden&&"function"==typeof i.hidden,a=i.description;return t.html='<input id="camunda-'+t.id+'" type="checkbox" name="'+i.modelProperty+'" '+(r?'data-disable="isDisabled"':"")+(o?'data-show="isHidden"':"")+' /><label for="camunda-'+t.id+'" '+(r?'data-disable="isDisabled"':"")+(o?'data-show="isHidden"':"")+">"+n+"</label>",a&&(t.html+=l(a)),t.get=function(e){var t=s(e),n={};return n[i.modelProperty]=t.get(i.modelProperty),n},t.set=function(e,t){var n={};return n[i.modelProperty]=!!t[i.modelProperty],c.updateProperties(e,n)},"function"==typeof i.set&&(t.set=i.set),"function"==typeof i.get&&(t.get=i.get),r&&(t.isDisabled=function(){return i.disabled.apply(t,arguments)}),o&&(t.isHidden=function(){return!i.hidden.apply(t,arguments)}),t.cssClasses=["bpp-checkbox"],t}},{"../helper/CmdHelper":27,"./EntryFieldDescription":19,"bpmn-js/lib/util/ModelUtil":140}],17:[function(e,t,n){"use strict";var r=e("lodash/object/assign"),l=e("lodash/collection/find"),u=e("min-dom/lib/query"),p=e("./SelectEntryFactory"),d=e("./EntryFieldDescription");t.exports=function(o){var a=o.selectOptions,s=o.modelProperty,c=o.customValue||"custom",e=o.customName||"custom "+s,t=o.description,n=r({},o);n.showCustomInput=function(e,t){var n=u('[data-entry="'+o.id+'"] select',t.parentNode);return!!n&&n.value===c},n.get=function(e,t){var n,i=o.get(e,t),r={};return void 0===(n=i)[s]||l(a,function(e){return n[s]===e.value})?r[s]=i[s]||"":(r[s]=c,r["custom-"+s]=i[s]),r},n.set=function(e,t,n){var i={};return console.log("set called!"),t[s]===c?(console.log("custom value chosen!"),i[s]=t["custom-"+s]||"lalala"):o.emptyParameter&&""===t[s]?i[s]=void 0:i[s]=t[s],o.set(e,i,n)},n.selectOptions.push({name:e,value:c});var i=r({},p(n,n));return i.html+='<div class="bpp-field-wrapper bpp-combo-input" data-show="showCustomInput"><input id="camunda-'+o.id+'-input" type="text" name="custom-'+s+'"  /></div>',t&&(i.html+=d(t)),i}},{"./EntryFieldDescription":19,"./SelectEntryFactory":22,"lodash/collection/find":359,"lodash/object/assign":490,"min-dom/lib/query":512}],18:[function(e,t,n){"use strict";var o=e("bpmn-js/lib/util/ModelUtil").getBusinessObject,i=e("./TextInputEntryFactory"),r=e("./CheckboxEntryFactory"),a=e("./SelectEntryFactory"),s=e("./ComboEntryFactory"),c=e("./TextBoxEntryFactory"),l=e("./ValidationAwareTextInput"),u=e("./TableEntryFactory"),p=e("./LabelFactory"),d=e("./LinkEntryFactory"),h=e("../helper/CmdHelper");function f(e){if(!e)throw new Error(e+" must be set.");return e}var m=function(r){return{id:r.id,description:r.description||"",get:r.get||function(e){var t=o(e),n={},i=f(r.modelProperty);return n[i]=t.get(i),n},set:r.set||function(e,t){var n={},i=f(r.modelProperty);return""!==t[i]?n[i]=t[i]:n[i]=void 0,h.updateProperties(e,n)},validate:r.validate||function(){return{}},html:""}};function v(){}v.textField=function(e){return i(e,m(e))},v.validationAwareTextField=function(e){return l(e,m(e))},v.checkbox=function(e){return r(e,m(e))},v.textBox=function(e){return c(e,m(e))},v.selectBox=function(e){return a(e,m(e))},v.comboBox=function(e){return s(e)},v.table=function(e){return u(e)},v.label=function(e){return p(e)},v.link=function(e){return d(e)},t.exports=v},{"../helper/CmdHelper":27,"./CheckboxEntryFactory":16,"./ComboEntryFactory":17,"./LabelFactory":20,"./LinkEntryFactory":21,"./SelectEntryFactory":22,"./TableEntryFactory":23,"./TextBoxEntryFactory":24,"./TextInputEntryFactory":25,"./ValidationAwareTextInput":26,"bpmn-js/lib/util/ModelUtil":140}],19:[function(e,t,n){"use strict";var i=/\[([^\)]+)\]\(([^\]]+)\)/g;t.exports=function(e){return'<div class="bpp-field-description">'+(e=e.replace(i,'<a href="$2" target="_blank">$1</a>'))+"</div>"}},{}],20:[function(e,t,n){"use strict";t.exports=function(n){return{id:n.id,html:'<label data-value="label" data-show="showLabel" class="entry-label'+(n.divider?" divider":"")+'"></label>',get:function(e,t){return"function"==typeof n.get?n.get(e,t):{label:n.labelText}},showLabel:function(e,t){return"function"!=typeof n.showLabel||n.showLabel(e,t)}}}},{}],21:[function(e,t,n){"use strict";var l=e("../Utils"),u=e("./EntryFieldDescription");t.exports=function(e,t){var n=e.id,i=e.label||n,r=e.hideLink,o="function"==typeof r,a=e.getClickableElement,s=e.description,c={id:n};return c.html='<a data-action="linkSelected" '+(o?'data-show="hideLink" ':"")+'class="bpp-entry-link'+(e.cssClasses?" "+e.cssClasses:"")+'">'+i+"</a>",s&&(c.html+=u(s)),c.linkSelected=function(e,t,n,i){if("function"==typeof a){var r=a.apply(c,[e,t,n,i]);r&&l.triggerClickEvent(r)}return!1},o&&(c.hideLink=function(){return!r.apply(c,arguments)}),c}},{"../Utils":9,"./EntryFieldDescription":19}],22:[function(e,t,n){"use strict";var p=e("min-dom/lib/domify"),d=e("lodash/collection/forEach"),h=e("./EntryFieldDescription");t.exports=function(e,t){var n,i=t,r=e.label||i.id,a=e.selectOptions||[{name:"",value:""}],o=e.modelProperty,s=e.emptyParameter,c=!!e.disabled&&"function"==typeof e.disabled,l=!!e.hidden&&"function"==typeof e.hidden,u=e.description;return s&&(a=a.concat([{name:"",value:""}])),i.html='<label for="camunda-'+i.id+'"'+(c?'data-disable="isDisabled" ':"")+(l?'data-show="isHidden" ':"")+">"+r+'</label><select id="camunda-'+i.id+'-select" name="'+o+'"'+(c?'data-disable="isDisabled" ':"")+(l?'data-show="isHidden" ':"")+" data-value>",(n=a)&&"[object Array]"===Object.prototype.toString.call(n)&&d(a,function(e){i.html+='<option value="'+e.value+'">'+(e.name||"")+"</option>"}),i.html+="</select>",u&&"function"===(e.showCustomInput,!1)&&(i.html+=h(u)),i.setControlValue=function(e,t,i,n,r){if("function"==typeof a){var o=a(e,i);if(o){for(;i.firstChild;)i.removeChild(i.firstChild);d(o,function(e){var t,n=p('<option value="'+(t=e).value+'">'+t.name+"</option>");i.appendChild(n)})}}void 0!==r&&(i.value=r)},c&&(i.isDisabled=function(){return e.disabled.apply(i,arguments)}),l&&(i.isHidden=function(){return!e.hidden.apply(i,arguments)}),i.cssClasses=["dropdown"],i}},{"./EntryFieldDescription":19,"lodash/collection/forEach":360,"min-dom/lib/domify":509}],23:[function(e,t,n){"use strict";var x=e("../helper/CmdHelper"),i=e("min-dom/lib/query"),E=e("min-dom/lib/attr"),w=e("min-dom/lib/closest"),a=e("lodash/collection/filter"),$=e("lodash/collection/forEach"),l=e("lodash/object/keys"),_=e("min-dom/lib/domify"),S=e("./EntryFieldDescription"),C=e("selection-update"),s='<div class="bpp-field-wrapper bpp-table-row">',c='<button class="clear" data-action="deleteElement"><span>X</span></button>';function A(e,t){var n,i,r,o,a=s;return a+=(i=t,r=(n=e).length,o="",$(n,function(e){o+='<input class="bpp-table-row-columns-'+r+" "+(i?"bpp-table-row-removable":"")+'" id="camunda-table-row-cell-input-value" type="text" name="'+e+'" />'}),o),a+=t?c:"",a+="</div>"}function T(e){var t,n,i,r=s;return r+=(n=(t=e).length,i="",$(t,function(e){i+='<label class="bpp-table-row-columns-'+n+'">'+e+"</label>"}),i),r+="</div>"}function j(n,i,e,r,o){return a(e,function(e,t){return!function(i,r,o,a,s,c){if(o&&!a)return!1;return l(o).concat(l(a)).every(function(e){var t=o[e]||void 0,n=a[e]||void 0;return!s(i,r,e,c)||t===n})}(n,i,e,r[t],o,t)})}function k(e){return w(e,"[data-entry]",!0)}function M(e){return i("div[data-list-entry-container]",e)}t.exports=function(l){var e=l.id,o=l.modelProperties,t=l.labels,n=l.description,i=T(t),r=l.getElements,u=l.removeElement,a="function"==typeof u,p=l.addElement,s="function"==typeof p,c=l.addLabel||"Add Value",d=l.updateElement,h="function"==typeof d,f=l.editable||function(){return!0},m=l.setControlValue,v=l.show,g="function"==typeof v,y=function(e,t){return n=r(e,t),i=o,(n||[]).map(function(t){var n={};return $(i,function(e){n[e]=t[e]||""}),n});var n,i},b={id:e,html:(s?'<div class="bpp-table-add-row" '+(g?'data-show="show"':"")+"><label>"+c+'</label><button class="add" data-action="addElement"><span>+</span></button></div>':"")+'<div class="bpp-table" data-show="showTable"><div class="bpp-field-wrapper bpp-table-row">'+i+"</div><div data-list-entry-container></div></div>"+(n?S(n):""),get:function(e,t){var i=y(e,t,this.__invalidValues),n=this.__invalidValues;return delete this.__invalidValues,$(n,function(t,e){var n=i[e];$(o,function(e){n[e]=t[e]})}),i},set:function(r,o,a){var e=this.__action||{};if(delete this.__action,"delete-element"===e.id)return u(r,a,e.idx);if("add-element"===e.id)return p(r,a);if(h){var s=[],t=o;"function"!=typeof l.validate&&(t=j(r,a,o,y(r,a),f));var c=this;return $(t,function(e){var t,n=o.indexOf(e);if("function"==typeof l.validate&&(t=l.validate(r,e,a,n)),t)c.__invalidValues=c.__invalidValues||{},c.__invalidValues[n]=e,s.push(x.updateProperties(r,{}));else{var i=d(r,e,a,n);i&&s.push(i)}}),s}},createListEntryTemplate:function(e,t,n){return A(o,a)},addElement:function(e,t,n,i){var r=_(A(o,a));return M(t).appendChild(r),this.__action={id:"add-element"},!0},deleteElement:function(e,t,n,i){var r=M(t),o=n.delegateTarget.parentNode,a=parseInt(E(o,"data-index"),10);return r.removeChild(o),this.__action={id:"delete-element",idx:a},!0},editable:function(e,t,n,i,r,o){var a=w(t,"[data-entry]");return f(e,a,i,o)},show:function(e,t,n,i){return t=k(t),v(e,t,n,i)},showTable:function(e,t,n,i){t=k(t);var r=y(e,t);return r&&r.length&&(!g||v(e,t,n,i))},validateListItem:function(e,t,n,i){if("function"==typeof l.validate)return l.validate(e,t,n,i)}};return m&&(b.setControlValue=function(e,t,n,i,r,o){var a,s,c,l,u=k(t),p=E(n,"readonly"),d=n.value;(void 0===r&&(r=""),p&&d===r)||(document.activeElement===n&&(a=C({start:(s=n).selectionStart,end:s.selectionEnd},d,r)),m(e,u,n,i,r,o),a&&(l=a,(c=n).selectionStart=l.start,c.selectionEnd=l.end))}),b}},{"../helper/CmdHelper":27,"./EntryFieldDescription":19,"lodash/collection/filter":358,"lodash/collection/forEach":360,"lodash/object/keys":493,"min-dom/lib/attr":504,"min-dom/lib/closest":507,"min-dom/lib/domify":509,"min-dom/lib/query":512,"selection-update":532}],24:[function(e,t,n){"use strict";var a=e("./EntryFieldDescription");t.exports=function(e,t){var n=t,i=e.label||n.id,r=!!e.show&&"function"==typeof e.show,o=e.description;return n.html='<label for="camunda-'+n.id+'" '+(r?'data-show="isShown"':"")+">"+i+'</label><div class="bpp-field-wrapper" '+(r?'data-show="isShown"':"")+'><div contenteditable="true" id="camunda-'+n.id+'" name="'+e.modelProperty+'" /></div>',o&&(n.html+=a(o)),r&&(n.isShown=function(){return e.show.apply(n,arguments)}),n.cssClasses=["bpp-textbox"],n}},{"./EntryFieldDescription":19}],25:[function(e,t,n){"use strict";var h=e("min-dom/lib/query"),f=e("./EntryFieldDescription");t.exports=function(n,e){var t=e,i=n.label||t.id,r=n.dataValueLabel,o=n.buttonLabel||"X",a=void 0!==n.buttonAction?n.buttonAction.name:"clear",s=void 0!==n.buttonAction?n.buttonAction.method:function(e,t){return h('input[name="'+n.modelProperty+'"]',t).value="",!0},c=void 0!==n.buttonShow?n.buttonShow.name:"canClear",l=void 0!==n.buttonShow?n.buttonShow.method:function(e,t){return""!==h('input[name="'+n.modelProperty+'"]',t).value},u=!!n.disabled&&"function"==typeof n.disabled,p=!!n.hidden&&"function"==typeof n.hidden,d=n.description;return t.html='<label for="camunda-'+t.id+'" '+(u?'data-disable="isDisabled" ':"")+(p?'data-show="isHidden" ':"")+(r?'data-value="'+r+'"':"")+">"+i+'</label><div class="bpp-field-wrapper" '+(u?'data-disable="isDisabled"':"")+(p?'data-show="isHidden"':"")+'><input id="camunda-'+t.id+'" type="text" name="'+n.modelProperty+'"  /><button class="'+a+'" data-action="'+a+'" data-show="'+c+'" '+(u?'data-disabled="isDisabled"':"")+(p?' data-show="isHidden"':"")+"><span>"+o+"</span></button></div>",d&&(t.html+=f(d)),t[a]=s,t[c]=l,u&&(t.isDisabled=function(){return n.disabled.apply(t,arguments)}),p&&(t.isHidden=function(){return!n.hidden.apply(t,arguments)}),t.cssClasses=["bpp-textfield"],t}},{"./EntryFieldDescription":19,"min-dom/lib/query":512}],26:[function(e,t,n){"use strict";var i=e("./TextInputEntryFactory");t.exports=function(a,e){var s=a.modelProperty;e.get=function(e,t){var n=this.__lastInvalidValue;delete this.__lastInvalidValue;var i={};return i[s]=void 0!==n?n:a.getProperty(e,t),i},e.set=function(e,t,n){var i=c.apply(this,[e,t,n]),r=t[s];if(i&&i[s])return this.__lastInvalidValue=r,a.setProperty(e,{},n);var o={};return o[s]=r,a.setProperty(e,o,n)};var c=e.validate=function(e,t,n){var i=t[s]||this.__lastInvalidValue,r={};return r[s]=i,a.validate(e,r,n)};return i(a,e)}},{"./TextInputEntryFactory":25}],27:[function(e,t,n){"use strict";var i={};(t.exports=i).updateProperties=function(e,t){return{cmd:"element.updateProperties",context:{element:e,properties:t}}},i.updateBusinessObject=function(e,t,n){return{cmd:"properties-panel.update-businessobject",context:{element:e,businessObject:t,properties:n}}},i.addElementsTolist=function(e,t,n,i){return{cmd:"properties-panel.update-businessobject-list",context:{element:e,currentObject:t,propertyName:n,objectsToAdd:i}}},i.removeElementsFromList=function(e,t,n,i,r){return{cmd:"properties-panel.update-businessobject-list",context:{element:e,currentObject:t,propertyName:n,referencePropertyName:i,objectsToRemove:r}}},i.addAndRemoveElementsFromList=function(e,t,n,i,r,o){return{cmd:"properties-panel.update-businessobject-list",context:{element:e,currentObject:t,propertyName:n,referencePropertyName:i,objectsToAdd:r,objectsToRemove:o}}},i.setList=function(e,t,n,i){return{cmd:"properties-panel.update-businessobject-list",context:{element:e,currentObject:t,propertyName:n,updatedObjectList:i}}}},{}],28:[function(e,t,n){"use strict";var i={};(t.exports=i).createElement=function(e,t,n,i){var r=i.create(e,t);return r.$parent=n,r}},{}],29:[function(e,t,n){"use strict";var r=e("bpmn-js/lib/util/ModelUtil").getBusinessObject,o=e("bpmn-js/lib/util/ModelUtil").is,a=e("lodash/collection/forEach"),i={};(t.exports=i).getEventDefinition=function(e,t){var n=r(e),i=null;return n.eventDefinitions&&a(n.eventDefinitions,function(e){o(e,t)&&(i=e)}),i},i.getTimerEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:TimerEventDefinition")},i.getMessageEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:MessageEventDefinition")},i.getSignalEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:SignalEventDefinition")},i.getErrorEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:ErrorEventDefinition")},i.getEscalationEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:EscalationEventDefinition")},i.getCompensateEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:CompensateEventDefinition")},i.getLinkEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:LinkEventDefinition")},i.getConditionalEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:ConditionalEventDefinition")}},{"bpmn-js/lib/util/ModelUtil":140,"lodash/collection/forEach":360}],30:[function(e,t,n){t.exports={__depends__:[e("./cmd"),e("diagram-js/lib/i18n/translate")],__init__:["propertiesPanel"],propertiesPanel:["type",e("./PropertiesPanel")]}},{"./PropertiesPanel":8,"./cmd":15,"diagram-js/lib/i18n/translate":328}],31:[function(e,t,n){"use strict";var l=e("../../../factory/EntryFactory"),u=e("../../../helper/CmdHelper"),i=e("bpmn-js/lib/util/ModelUtil"),p=i.is,d=i.getBusinessObject;t.exports=function(e,t,r,n){var i,o=function(n){return function(e){var t=n&&n.get("documentation");return{documentation:t&&0<t.length?t[0].text:""}}},a=function(i){return function(e,t){var n=[];return void 0!==t.documentation&&""!==t.documentation&&n.push(r.create("bpmn:Documentation",{text:t.documentation})),u.setList(e,i,"documentation",n)}},s=l.textBox({id:"documentation",label:n("Element Documentation"),modelProperty:"documentation"});if(s.set=a(d(t)),s.get=o(d(t)),e.entries.push(s),p(t,"bpmn:Participant")&&(i=d(t).processRef)){var c=l.textBox({id:"process-documentation",label:n("Process Documentation"),modelProperty:"documentation"});c.set=a(i),c.get=o(i),e.entries.push(c)}}},{"../../../factory/EntryFactory":18,"../../../helper/CmdHelper":27,"bpmn-js/lib/util/ModelUtil":140}],32:[function(e,t,n){"use strict";var a=e("bpmn-js/lib/util/ModelUtil").is,s=e("bpmn-js/lib/features/modeling/util/ModelingUtil").isAny,c=e("bpmn-js/lib/util/DiUtil").isEventSubProcess,l=e("bpmn-js/lib/util/ModelUtil").getBusinessObject,u=e("../../../helper/EventDefinitionHelper"),p=e("lodash/collection/forEach"),d=e("./implementation/MessageEventDefinition"),h=e("./implementation/SignalEventDefinition"),f=e("./implementation/ErrorEventDefinition"),m=e("./implementation/EscalationEventDefinition"),v=e("./implementation/TimerEventDefinition"),g=e("./implementation/CompensateEventDefinition"),y=e("./implementation/ConditionalEventDefinition");t.exports=function(i,r,o,n,e){p(["bpmn:StartEvent","bpmn:EndEvent","bpmn:IntermediateThrowEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent"],function(e){if(a(r,e)){var t=u.getMessageEventDefinition(r),n=u.getSignalEventDefinition(r);t&&d(i,r,o,t),n&&h(i,r,o,n)}}),a(r,"bpmn:ReceiveTask")&&d(i,r,o,l(r));p(["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:EndEvent"],function(e){if(a(r,e)){var t=u.getErrorEventDefinition(r);if(t){var n=a(r,"bpmn:StartEvent")||a(r,"bpmn:BoundaryEvent");f(i,r,o,t,n,n)}}});p(["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent"],function(e){if(a(r,e)){var t=a(r,"bpmn:StartEvent")||a(r,"bpmn:BoundaryEvent"),n=u.getEscalationEventDefinition(r);n&&m(i,r,o,n,t)}});p(["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent"],function(e){if(a(r,e)){var t=u.getTimerEventDefinition(r);t&&v(i,r,o,t)}});p(["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],function(e){if(a(r,e)){var t=u.getCompensateEventDefinition(r);t&&g(i,r,o,t,n)}});if(s(r,["bpmn:BoundaryEvent","bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])||a(r,"bpmn:StartEvent")&&c(r.parent)){var t=u.getConditionalEventDefinition(r);t&&y(i,r,o,t,n)}}},{"../../../helper/EventDefinitionHelper":29,"./implementation/CompensateEventDefinition":36,"./implementation/ConditionalEventDefinition":37,"./implementation/ErrorEventDefinition":39,"./implementation/EscalationEventDefinition":40,"./implementation/MessageEventDefinition":42,"./implementation/SignalEventDefinition":44,"./implementation/TimerEventDefinition":45,"bpmn-js/lib/features/modeling/util/ModelingUtil":113,"bpmn-js/lib/util/DiUtil":138,"bpmn-js/lib/util/ModelUtil":140,"lodash/collection/forEach":360}],33:[function(e,t,n){"use strict";var i=e("../../../factory/EntryFactory"),o=e("bpmn-js/lib/util/ModelUtil").getBusinessObject,a=e("../../../Utils"),r=e("../../../helper/CmdHelper");t.exports=function(e,t,n){e.entries.push(i.validationAwareTextField({id:"id",label:n("Id"),modelProperty:"id",getProperty:function(e){return o(e).id},setProperty:function(e,t){return e=e.labelTarget||e,r.updateProperties(e,t)},validate:function(e,t){var n=t.id,i=o(e),r=a.isIdValid(i,n);return r?{id:r}:{}}}))}},{"../../../Utils":9,"../../../factory/EntryFactory":18,"../../../helper/CmdHelper":27,"bpmn-js/lib/util/ModelUtil":140}],34:[function(e,t,n){"use strict";var c=e("bpmn-js/lib/util/ModelUtil").is,l=e("bpmn-js/lib/util/ModelUtil").getBusinessObject,u=e("../../../factory/EntryFactory"),p=e("../../../helper/CmdHelper"),d=e("lodash/collection/forEach");t.exports=function(o,a,s){d(["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"],function(e){if(c(a,e)){var i=(n=l(a),r=null,n.eventDefinitions&&d(n.eventDefinitions,function(e){c(e,"bpmn:LinkEventDefinition")&&(r=e)}),r);if(i){var t=u.textField({id:"link-event",label:s("Link Name"),modelProperty:"link-name"});t.get=function(){return{"link-name":i.get("name")}},t.set=function(e,t){var n={name:t["link-name"]};return p.updateBusinessObject(e,i,n)},o.entries.push(t)}}var n,r})}},{"../../../factory/EntryFactory":18,"../../../helper/CmdHelper":27,"bpmn-js/lib/util/ModelUtil":140,"lodash/collection/forEach":360}],35:[function(e,t,n){"use strict";var r=e("./implementation/Name"),o=e("bpmn-js/lib/util/ModelUtil").is;t.exports=function(e,t,n){var i;o(t,"bpmn:Collaboration")||(o(t,"bpmn:TextAnnotation")&&(i={modelProperty:"text"}),e.entries=e.entries.concat(r(t,i,n)))}},{"./implementation/Name":43,"bpmn-js/lib/util/ModelUtil":140}],36:[function(e,t,n){"use strict";var o=e("../../../../factory/EntryFactory"),a=e("../../../../helper/CmdHelper"),r=e("../../../../helper/EventDefinitionHelper"),i=e("../../../../Utils"),s=e("bpmn-js/lib/util/ModelUtil").getBusinessObject,c=e("bpmn-js/lib/util/ModelUtil").is,l=e("lodash/collection/forEach"),u=e("lodash/collection/find"),p=e("lodash/collection/filter");function d(e,t){return i.filterElementsByType(e.flowElements,t)}function h(e,t){return c(e,"bpmn:SubProcess")&&!e.triggeredByEvent||c(e,"bpmn:CallActivity")||(n=t,i=e.id,!!u(n,function(e){var t=r.getCompensateEventDefinition(e),n=e.attachedToRef;return t&&n&&n.id===i}));var n,i}function f(e){var t=d(e,"bpmn:BoundaryEvent");return p(d(e,"bpmn:Activity"),function(e){return h(e,t)})}function m(e){var t,n,i=[{value:""}],r=(t=s(e).$parent,n=f(t),c(t,"bpmn:SubProcess")&&t.triggeredByEvent&&(t=t.$parent)&&(n=n.concat(f(t))),n);return l(r,function(e){var t=e.id,n=(e.name?e.name+" ":"")+"(id="+t+")";i.push({value:t,name:n})}),i}t.exports=function(e,t,n,i,r){e.entries.push(o.checkbox({id:"wait-for-completion",label:"Wait for Completion",modelProperty:"waitForCompletion",get:function(e,t){return{waitForCompletion:i.waitForCompletion}},set:function(e,t){return t.waitForCompletion=t.waitForCompletion||void 0,a.updateBusinessObject(e,i,t)}})),e.entries.push(o.selectBox({id:"activity-ref",label:"Activity Ref",selectOptions:m(t),modelProperty:"activityRef",get:function(e,t){var n=i.activityRef;return{activityRef:(n=n&&n.id)||""}},set:function(e,t){var n=t.activityRef||void 0;return n=n&&s(r.get(n)),a.updateBusinessObject(e,i,{activityRef:n})}}))}},{"../../../../Utils":9,"../../../../factory/EntryFactory":18,"../../../../helper/CmdHelper":27,"../../../../helper/EventDefinitionHelper":29,"bpmn-js/lib/util/ModelUtil":140,"lodash/collection/filter":358,"lodash/collection/find":359,"lodash/collection/forEach":360}],37:[function(e,t,n){"use strict";var r=e("../../../../factory/EntryFactory"),c=e("../../../../helper/ElementHelper"),l=e("../../../../helper/CmdHelper");t.exports=function(e,t,a,s){var n=function(i){return function(e){var t=s.get("camunda:"+i),n={};return n[i]=t,n}},i=function(i){return function(e,t){var n={};return n["camunda:"+i]=t[i]||void 0,l.updateBusinessObject(e,s,n)}};e.entries.push(r.textField({id:"condition",label:"Condition",modelProperty:"condition",get:function(e){var t=s.get("condition");return{condition:t&&t.get("body")||""}},set:function(e,t){var n,i,r,o=s.get("condition");return""===t.condition?l.updateBusinessObject(e,s,{condition:void 0}):o?l.updateBusinessObject(e,o,{body:t.condition||void 0}):(n=s,i=t.condition,r=a,i=i||void 0,o=c.createElement("bpmn:FormalExpression",{body:i},n,r),l.updateBusinessObject(e,s,{condition:o}))},validate:function(e,t){if(""===t.condition)return{condition:"Must provide a value"}}})),e.entries.push(r.textField({id:"variableName",label:"Variable Name",modelProperty:"variableName",get:n("variableName"),set:i("variableName")})),e.entries.push(r.textField({id:"variableEvent",label:"Variable Event",description:"Specify more than one variable change event as a comma separated list.",modelProperty:"variableEvent",get:n("variableEvent"),set:i("variableEvent")}))}},{"../../../../factory/EntryFactory":18,"../../../../helper/CmdHelper":27,"../../../../helper/ElementHelper":28}],38:[function(e,t,n){"use strict";var u=e("../../../../factory/EntryFactory"),p=e("../../../../helper/CmdHelper");t.exports=function(e,o,t,n){var i=n.id||"element-property",r=n.label,a=n.referenceProperty,s=n.modelProperty||"name",c=n.shouldValidate||!1,l=u.textField({id:i,label:r,modelProperty:s,get:function(e,t){var n=o.get(a),i={};return i[s]=n&&n.get(s),i},set:function(e,t,n){var i=o.get(a),r={};return r[s]=t[s]||void 0,p.updateBusinessObject(e,i,r)},hidden:function(e,t){return!o.get(a)}});return c&&(l.validate=function(e,t,n){if(o.get(a)&&!t[s]){var i={};return i[s]="Must provide a value",i}}),[l]}},{"../../../../factory/EntryFactory":18,"../../../../helper/CmdHelper":27}],39:[function(e,t,n){"use strict";var c=e("../../../../factory/EntryFactory"),l=e("../../../../helper/CmdHelper"),u=e("./EventDefinitionReference"),p=e("./ElementReferenceProperty");t.exports=function(e,t,n,r,i,o){var a=function(i){return function(e){var t=r.get("camunda:"+i),n={};return n[i]=t,n}},s=function(i){return function(e,t){var n={};return n["camunda:"+i]=t[i]||void 0,l.updateBusinessObject(e,r,n)}};e.entries=e.entries.concat(u(t,r,n,{label:"Error",elementName:"error",elementType:"bpmn:Error",referenceProperty:"errorRef",newElementIdPrefix:"Error_"})),e.entries=e.entries.concat(p(t,r,n,{id:"error-element-name",label:"Error Name",referenceProperty:"errorRef",modelProperty:"name",shouldValidate:!0})),e.entries=e.entries.concat(p(t,r,n,{id:"error-element-code",label:"Error Code",referenceProperty:"errorRef",modelProperty:"errorCode"})),i&&e.entries.push(c.textField({id:"errorCodeVariable",label:"Error Code Variable",modelProperty:"errorCodeVariable",get:a("errorCodeVariable"),set:s("errorCodeVariable")})),o&&e.entries.push(c.textField({id:"errorMessageVariable",label:"Error Message Variable",modelProperty:"errorMessageVariable",get:a("errorMessageVariable"),set:s("errorMessageVariable")}))}},{"../../../../factory/EntryFactory":18,"../../../../helper/CmdHelper":27,"./ElementReferenceProperty":38,"./EventDefinitionReference":41}],40:[function(e,t,n){"use strict";var o=e("../../../../factory/EntryFactory"),a=e("../../../../helper/CmdHelper"),s=e("./EventDefinitionReference"),c=e("./ElementReferenceProperty");t.exports=function(e,t,n,i,r){e.entries=e.entries.concat(s(t,i,n,{label:"Escalation",elementName:"escalation",elementType:"bpmn:Escalation",referenceProperty:"escalationRef",newElementIdPrefix:"Escalation_"})),e.entries=e.entries.concat(c(t,i,n,{id:"escalation-element-name",label:"Escalation Name",referenceProperty:"escalationRef",modelProperty:"name",shouldValidate:!0})),e.entries=e.entries.concat(c(t,i,n,{id:"escalation-element-code",label:"Escalation Code",referenceProperty:"escalationRef",modelProperty:"escalationCode"})),r&&e.entries.push(o.textField({id:"escalationCodeVariable",label:"Escalation Code Variable",modelProperty:"escalationCodeVariable",get:function(e){return{escalationCodeVariable:i.get("camunda:escalationCodeVariable")}},set:function(e,t){return a.updateBusinessObject(e,i,{"camunda:escalationCodeVariable":t.escalationCodeVariable||void 0})}}))}},{"../../../../factory/EntryFactory":18,"../../../../helper/CmdHelper":27,"./ElementReferenceProperty":38,"./EventDefinitionReference":41}],41:[function(e,t,n){"use strict";var m=e("../../../../helper/CmdHelper"),s=e("min-dom/lib/query"),c=e("min-dom/lib/domify"),l=e("min-dom/lib/attr"),u=e("lodash/collection/forEach"),v=e("lodash/collection/find"),g=e("../../../../helper/ElementHelper"),y=e("../../../../Utils"),b="select[name=selectedElement]";t.exports=function(e,p,d,t){var n=t.elementName||"",h=t.elementType,f=t.referenceProperty,o=t.newElementIdPrefix||"elem_",i=t.label||"",r=t.description||"",a=[];return a.push({id:"event-definitions-"+n,description:r,html:'<div class="bpp-row bpp-select"><label for="camunda-'+n+'">'+i+'</label><div class="bpp-field-wrapper"><select id="camunda-'+n+'" name="selectedElement" data-value></select><button class="add" id="addElement" data-action="addElement"><span>+</span></button></div></div>',get:function(e,t){y.updateOptionsDropDown(b,p,h,t);var n=p.get(f);return{selectedElement:n&&n.id||""}},set:function(e,t){var n=t.selectedElement,i={};if(!n||void 0===n)return i[f]=void 0,m.updateBusinessObject(e,p,i);var r,o,a,s,c=[],l=(r=p,o=h,a=n,s=y.findRootElementsByType(r,o),v(s,function(e){return e.id===a}));if(!l){var u=y.getRoot(p);l=g.createElement(h,{name:n},u,d),c.push(m.addAndRemoveElementsFromList(e,u,"rootElements",null,[l]))}return i[f]=l,c.push(m.updateBusinessObject(e,p,i)),c},addElement:function(e,t){var n=y.nextId(o),i=c('<option value="'+n+'"> (id='+n+")</option>"),r=s(b,t.parentElement);return r.insertBefore(i,r.firstChild),u(r,function(e){e.value===n?l(e,"selected","selected"):l(e,"selected",null)}),!0}}),a}},{"../../../../Utils":9,"../../../../helper/CmdHelper":27,"../../../../helper/ElementHelper":28,"lodash/collection/find":359,"lodash/collection/forEach":360,"min-dom/lib/attr":504,"min-dom/lib/domify":509,"min-dom/lib/query":512}],42:[function(e,t,n){"use strict";var r=e("./EventDefinitionReference"),o=e("./ElementReferenceProperty");t.exports=function(e,t,n,i){e.entries=e.entries.concat(r(t,i,n,{label:"Message",elementName:"message",elementType:"bpmn:Message",referenceProperty:"messageRef",newElementIdPrefix:"Message_"})),e.entries=e.entries.concat(o(t,i,n,{id:"message-element-name",label:"Message Name",referenceProperty:"messageRef",modelProperty:"name",shouldValidate:!0}))}},{"./ElementReferenceProperty":38,"./EventDefinitionReference":41}],43:[function(e,t,n){"use strict";var a=e("../../../../factory/EntryFactory");t.exports=function(e,t,n){var i=(t=t||{}).id||"name",r=t.label||n("Name"),o=t.modelProperty||"name";return[a.textBox({id:i,label:r,modelProperty:o})]}},{"../../../../factory/EntryFactory":18}],44:[function(e,t,n){"use strict";var r=e("./EventDefinitionReference"),o=e("./ElementReferenceProperty");t.exports=function(e,t,n,i){e.entries=e.entries.concat(r(t,i,n,{label:"Signal",elementName:"signal",elementType:"bpmn:Signal",referenceProperty:"signalRef",newElementIdPrefix:"Signal_"})),e.entries=e.entries.concat(o(t,i,n,{id:"signal-element-name",label:"Signal Name",referenceProperty:"signalRef",modelProperty:"name",shouldValidate:!0}))}},{"./ElementReferenceProperty":38,"./EventDefinitionReference":41}],45:[function(e,t,n){"use strict";var p=e("../../../../helper/ElementHelper"),d=e("../../../../helper/CmdHelper"),i=e("../../../../factory/EntryFactory");function h(e){return void 0!==e.get("timeDate")?"timeDate":void 0!==e.get("timeCycle")?"timeCycle":void 0!==e.get("timeDuration")?"timeDuration":void 0}t.exports=function(e,t,l,u){e.entries.push(i.selectBox({id:"timer-event-definition-type",label:"Timer Definition Type",selectOptions:[{value:"timeDate",name:"Date"},{value:"timeDuration",name:"Duration"},{value:"timeCycle",name:"Cycle"}],emptyParameter:!0,modelProperty:"timerDefinitionType",get:function(e,t){return{timerDefinitionType:h(u)||""}},set:function(e,t){var n,i,r,o={timeDuration:void 0,timeDate:void 0,timeCycle:void 0},a=t.timerDefinitionType;if(t.timerDefinitionType){var s,c=h(u);c&&(s=u.get(c).get("body")),o[a]=(n=u,r=l,i=(i=s)||void 0,p.createElement("bpmn:FormalExpression",{body:i},n,r))}return d.updateBusinessObject(e,u,o)}})),e.entries.push(i.textField({id:"timer-event-definition",label:"Timer Definition",modelProperty:"timerDefinition",get:function(e,t){var n=h(u),i=n&&u.get(n);return{timerDefinition:i&&i.get("body")}},set:function(e,t){var n=h(u),i=n&&u.get(n);if(i)return d.updateBusinessObject(e,i,{body:t.timerDefinition||void 0})},validate:function(e){var t=h(u),n=t&&u.get(t);if(n&&!n.get("body"))return{timerDefinition:"Must provide a value"}},hidden:function(e){return!h(u)}}))}},{"../../../../factory/EntryFactory":18,"../../../../helper/CmdHelper":27,"../../../../helper/ElementHelper":28}],46:[function(e,t,n){"use strict";var i=e("inherits"),r=e("ids"),o=e("./Viewer"),a=e("./NavigatedViewer");function s(e){o.call(this,e),this.on("import.parse.complete",function(e){e.error||this._collectIds(e.definitions,e.context)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}i(s,o),t.exports=s,t.exports.Viewer=o,t.exports.NavigatedViewer=a,s.prototype.createDiagram=function(e){return this.importXML('<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>',e)},s.prototype._createModdle=function(e){var t=o.prototype._createModdle.call(this,e);return t.ids=new r([32,36,1]),t},s.prototype._collectIds=function(e,t){var n,i=e.$model.ids;for(n in i.clear(),t.elementsById)i.claim(n,t.elementsById[n])},s.prototype._interactionModules=[e("diagram-js/lib/navigation/movecanvas"),e("diagram-js/lib/navigation/touch"),e("diagram-js/lib/navigation/zoomscroll")],s.prototype._modelingModules=[e("diagram-js/lib/features/auto-scroll"),e("diagram-js/lib/features/bendpoints"),e("diagram-js/lib/features/move"),e("diagram-js/lib/features/resize"),e("./features/auto-resize"),e("./features/editor-actions"),e("./features/context-pad"),e("./features/keyboard"),e("./features/label-editing"),e("./features/modeling"),e("./features/palette"),e("./features/replace-preview"),e("./features/snapping")],s.prototype._modules=[].concat(s.prototype._modules,s.prototype._interactionModules,s.prototype._modelingModules)},{"./NavigatedViewer":47,"./Viewer":48,"./features/auto-resize":55,"./features/context-pad":57,"./features/editor-actions":63,"./features/keyboard":67,"./features/label-editing":72,"./features/modeling":111,"./features/palette":117,"./features/replace-preview":122,"./features/snapping":132,"diagram-js/lib/features/auto-scroll":166,"diagram-js/lib/features/bendpoints":172,"diagram-js/lib/features/move":233,"diagram-js/lib/features/resize":251,"diagram-js/lib/navigation/movecanvas":283,"diagram-js/lib/navigation/touch":284,"diagram-js/lib/navigation/zoomscroll":287,ids:342,inherits:343}],47:[function(e,t,n){"use strict";var i=e("inherits"),r=e("./Viewer");function o(e){r.call(this,e)}i(o,r),(t.exports=o).prototype._navigationModules=[e("diagram-js/lib/navigation/zoomscroll"),e("diagram-js/lib/navigation/movecanvas")],o.prototype._modules=[].concat(o.prototype._modules,o.prototype._navigationModules)},{"./Viewer":48,"diagram-js/lib/navigation/movecanvas":283,"diagram-js/lib/navigation/zoomscroll":287,inherits:343}],48:[function(e,t,n){"use strict";var s=e("lodash/object/assign"),c=e("lodash/object/omit"),i=e("lodash/lang/isNumber"),r=e("min-dom/lib/domify"),l=e("min-dom/lib/query"),o=e("min-dom/lib/remove"),u=e("tiny-svg/lib/innerSVG"),p=e("diagram-js"),a=e("bpmn-moddle"),d=e("inherits"),h=e("./import/Importer").importBpmnDiagram;var f={width:"100%",height:"100%",position:"relative"};function m(e){return e+(i(e)?"px":"")}function v(e){var t,n,i;e=s({},f,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),t=this._container,n=g.BPMNIO_LOGO,i=r('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100"><img src="data:image/png;base64,'+n+'"></a>'),t.appendChild(i),y.bind(i,"click",function(e){g.open(),e.preventDefault()}),this._init(this._container,this._moddle,e)}d(v,p),(t.exports=v).prototype.importXML=function(e,a){a=a||function(){};var s=this;e=this._emit("import.parse.start",{xml:e})||e,this._moddle.fromXML(e,"bpmn:Definitions",function(e,t,n){t=s._emit("import.parse.complete",{error:e,definitions:t,context:n})||t;var i,r,o=n.warnings;if(e)return(r=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec((i=e).message))&&(i.message="unparsable content <"+r[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+r[2]),e=i,s._emit("import.done",{error:e,warnings:o}),a(e,o);s.importDefinitions(t,function(e,t){var n=[].concat(o,t||[]);s._emit("import.done",{error:e,warnings:n}),a(e,n)})})},v.prototype.saveXML=function(e,t){t||(t=e,e={});var n=this._definitions;if(!n)return t(new Error("no definitions loaded"));this._moddle.toXML(n,e,t)},v.prototype.saveSVG=function(e,t){t||(t=e,e={});var n=this.get("canvas"),i=n.getDefaultLayer(),r=l("defs",n._svg),o=u(i),a=r?"<defs>"+u(r)+"</defs>":"",s=i.getBBox();t(null,'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+s.width+'" height="'+s.height+'" viewBox="'+s.x+" "+s.y+" "+s.width+" "+s.height+'" version="1.1">'+a+o+"</svg>")},v.prototype.importDefinitions=function(e,t){var n;try{return this._definitions&&this.clear(),this._definitions=e,h(this,e,t)}catch(e){n=e}return t(n)},v.prototype.getModules=function(){return this._modules},v.prototype.destroy=function(){p.prototype.destroy.call(this),o(this._container)},v.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},v.prototype.off=function(e,t){this.get("eventBus").off(e,t)},v.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=l(e)),e.appendChild(this._container),this._emit("attach",{})},v.prototype.getDefinitions=function(){return this._definitions},v.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},v.prototype._init=function(e,t,n){var i=n.modules||this.getModules(),r=n.additionalModules||[],o=[].concat([{bpmnjs:["value",this],moddle:["value",t]}],i,r),a=s(c(n,"additionalModules"),{canvas:s({},n.canvas,{container:e}),modules:o});p.call(this,a),n&&n.container&&this.attachTo(n.container)},v.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},v.prototype._createContainer=function(e){var t=r('<div class="bjs-container"></div>');return s(t.style,{width:m(e.width),height:m(e.height),position:e.position}),t},v.prototype._createModdle=function(e){var t=s({},this._moddleExtensions,e.moddleExtensions);return new a(t)},v.prototype._modules=[e("./core"),e("diagram-js/lib/i18n/translate"),e("diagram-js/lib/features/selection"),e("diagram-js/lib/features/overlays")],v.prototype._moddleExtensions={};var g=e("./util/PoweredByUtil"),y=e("min-dom/lib/event")},{"./core":49,"./import/Importer":135,"./util/PoweredByUtil":141,"bpmn-moddle":308,"diagram-js":144,"diagram-js/lib/features/overlays":238,"diagram-js/lib/features/selection":260,"diagram-js/lib/i18n/translate":275,inherits:343,"lodash/lang/isNumber":484,"lodash/object/assign":490,"lodash/object/omit":496,"min-dom/lib/domify":509,"min-dom/lib/event":510,"min-dom/lib/query":512,"min-dom/lib/remove":513,"tiny-svg/lib/innerSVG":542}],49:[function(e,t,n){t.exports={__depends__:[e("../draw"),e("../import")]}},{"../draw":52,"../import":137}],50:[function(e,t,n){"use strict";var i=e("inherits"),C=e("lodash/lang/isObject"),A=e("lodash/object/assign"),T=e("lodash/collection/forEach"),o=e("lodash/collection/every"),a=e("lodash/collection/some"),j=e("diagram-js/lib/draw/BaseRenderer"),k=e("diagram-js/lib/util/Text"),M=e("../util/DiUtil"),r=e("../util/ModelUtil").getBusinessObject,$=e("../util/ModelUtil").is,s=e("diagram-js/lib/util/RenderUtil"),_=s.componentsToPath,P=s.createLine,R=e("min-dom/lib/query"),D=e("tiny-svg/lib/append"),O=e("tiny-svg/lib/attr"),N=e("tiny-svg/lib/create"),B=e("tiny-svg/lib/classes"),L=e("diagram-js/lib/util/SvgTransformUtil").rotate,I=e("diagram-js/lib/util/SvgTransformUtil").transform,F=e("diagram-js/lib/util/SvgTransformUtil").translate,U=new(e("ids")),H=10,V=3,z={fontFamily:"Arial, sans-serif",fontSize:12};function c(e,r,d,s,t){j.call(this,e,t);var p=U.next(),o=new k({style:z,size:{width:100}}),c={},l=r.computeStyle;function h(e,t){var n=A({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),i=t.ref||{x:0,y:0},r=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var o=N("marker");O(t.element,n),D(o,t.element),O(o,{id:e,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*r,markerHeight:20*r,orient:"auto"});var a=R("defs",s._svg);a||(a=N("defs"),D(s._svg,a)),D(a,o),c[e]=o}function u(e,t,n){var i=e+"-"+t+"-"+n+"-"+p;return c[i]||function(e,t,n){var i=e+"-"+t+"-"+n+"-"+p;if("sequenceflow-end"===e){var r=N("path");O(r,{d:"M 1 5 L 11 10 L 1 15 Z"}),h(i,{element:r,ref:{x:11,y:10},scale:.5,attrs:{fill:n,stroke:n}})}if("messageflow-start"===e){var o=N("circle");O(o,{cx:6,cy:6,r:3.5}),h(i,{element:o,attrs:{fill:t,stroke:n},ref:{x:6,y:6}})}if("messageflow-end"===e){var a=N("path");O(a,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),h(i,{element:a,attrs:{fill:t,stroke:n,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if("association-start"===e){var s=N("path");O(s,{d:"M 11 5 L 1 10 L 11 15"}),h(i,{element:s,attrs:{fill:"none",stroke:n,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if("association-end"===e){var c=N("path");O(c,{d:"M 1 5 L 11 10 L 1 15"}),h(i,{element:c,attrs:{fill:"none",stroke:n,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if("conditional-flow-marker"===e){var l=N("path");O(l,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),h(i,{element:l,attrs:{fill:t,stroke:n},ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===e){var u=N("path");O(u,{d:"M 6 4 L 10 16"}),h(i,{element:u,attrs:{stroke:n},ref:{x:0,y:10},scale:.5})}}(e,t,n),"url(#"+i+")"}function f(e,t,n,i,r){C(i)&&(r=i,i=0),i=i||0,r=l(r,{stroke:"black",strokeWidth:2,fill:"white"});var o=t/2,a=n/2,s=N("circle");return O(s,{cx:o,cy:a,r:Math.round((t+n)/4-i)}),O(s,r),D(e,s),s}function a(e,t,n,i,r,o){C(r)&&(o=r,r=0),r=r||0,o=l(o,{stroke:"black",strokeWidth:2,fill:"white"});var a=N("rect");return O(a,{x:r,y:r,width:t-2*r,height:n-2*r,rx:i,ry:i}),O(a,o),D(e,a),a}function m(e,t,n,i){var r=t/2,o=n/2,a=[{x:r,y:0},{x:t,y:o},{x:r,y:n},{x:0,y:o}].map(function(e){return e.x+","+e.y}).join(" ");i=l(i,{stroke:"black",strokeWidth:2,fill:"white"});var s=N("polygon");return O(s,{points:a}),O(s,i),D(e,s),s}function v(e,t,n){n=l(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});var i=P(t,n);return D(e,i),i}function g(e,t,n){n=l(n,["no-fill"],{strokeWidth:2,stroke:"black"});var i=N("path");return O(i,{d:t}),O(i,n),D(e,i),i}function i(e,t,n,i){return g(t,n,A({"data-marker":e},i))}function n(n){return function(e,t){return _[n](e,t)}}function y(e){return _[e]}function b(e,t){var n,i=G(e),r="bpmn:IntermediateThrowEvent"===(n=i).$type||"bpmn:EndEvent"===n.$type;return q(i,"bpmn:MessageEventDefinition")?y("bpmn:MessageEventDefinition")(t,e,r):q(i,"bpmn:TimerEventDefinition")?y("bpmn:TimerEventDefinition")(t,e,r):q(i,"bpmn:ConditionalEventDefinition")?y("bpmn:ConditionalEventDefinition")(t,e):q(i,"bpmn:SignalEventDefinition")?y("bpmn:SignalEventDefinition")(t,e,r):q(i,"bpmn:CancelEventDefinition")&&q(i,"bpmn:TerminateEventDefinition",{parallelMultiple:!1})?y("bpmn:MultipleEventDefinition")(t,e,r):q(i,"bpmn:CancelEventDefinition")&&q(i,"bpmn:TerminateEventDefinition",{parallelMultiple:!0})?y("bpmn:ParallelMultipleEventDefinition")(t,e,r):q(i,"bpmn:EscalationEventDefinition")?y("bpmn:EscalationEventDefinition")(t,e,r):q(i,"bpmn:LinkEventDefinition")?y("bpmn:LinkEventDefinition")(t,e,r):q(i,"bpmn:ErrorEventDefinition")?y("bpmn:ErrorEventDefinition")(t,e,r):q(i,"bpmn:CancelEventDefinition")?y("bpmn:CancelEventDefinition")(t,e,r):q(i,"bpmn:CompensateEventDefinition")?y("bpmn:CompensateEventDefinition")(t,e,r):q(i,"bpmn:TerminateEventDefinition")?y("bpmn:TerminateEventDefinition")(t,e,r):null}function x(e,t,n){var i=o.createText(t||"",n);return B(i).add("djs-label"),D(e,i),i}function E(e,t,n){return x(e,G(t).name,{box:t,align:n,padding:5,style:{fill:K(t)}})}function w(e,t,n){var i=x(e,t,{box:{height:30,width:n.height},align:"center-middle",style:{fill:K(n)}}),r=-1*n.height;I(i,0,-r,270)}function $(e){for(var t=e.waypoints,n="m  "+t[0].x+","+t[0].y,i=1;i<t.length;i++)n+="L"+t[i].x+","+t[i].y+" ";return n}var _=this.handlers={"bpmn:Event":function(e,t,n){return f(e,t.width,t.height,n)},"bpmn:StartEvent":function(e,t){var n={fill:Y(t),stroke:K(t)};G(t).isInterrupting||(n={strokeDasharray:"6",strokeLinecap:"round"});var i=y("bpmn:Event")(e,t,n);return b(t,e),i},"bpmn:MessageEventDefinition":function(e,t,n){return g(e,d.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:n?K(t):Y(t),stroke:n?Y(t):K(t)})},"bpmn:TimerEventDefinition":function(e,t){var n=f(e,t.width,t.height,.2*t.height,{strokeWidth:2,fill:Y(t),stroke:K(t)});g(e,d.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square",stroke:K(t)});for(var i=0;i<12;i++){var r=d.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),o=t.width/2;g(e,r,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*i+","+t.height/2+","+o+")",stroke:K(t)})}return n},"bpmn:EscalationEventDefinition":function(e,t,n){return g(e,d.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?K(t):"none",stroke:K(t)})},"bpmn:ConditionalEventDefinition":function(e,t){return g(e,d.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:K(t)})},"bpmn:LinkEventDefinition":function(e,t,n){return g(e,d.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:n?K(t):"none",stroke:K(t)})},"bpmn:ErrorEventDefinition":function(e,t,n){return g(e,d.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:n?K(t):"none",stroke:K(t)})},"bpmn:CancelEventDefinition":function(e,t,n){var i=g(e,d.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:n?"black":"none"});return L(i,45),i},"bpmn:CompensateEventDefinition":function(e,t,n){return g(e,d.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:n?K(t):"none",stroke:K(t)})},"bpmn:SignalEventDefinition":function(e,t,n){return g(e,d.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?K(t):"none",stroke:K(t)})},"bpmn:MultipleEventDefinition":function(e,t,n){return g(e,d.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:n?"black":"none"})},"bpmn:ParallelMultipleEventDefinition":function(e,t){return g(e,d.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:t.width,containerHeight:t.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:K(t),stroke:K(t)})},"bpmn:EndEvent":function(e,t){var n=y("bpmn:Event")(e,t,{strokeWidth:4,fill:Y(t),stroke:K(t)});return b(t,e),n},"bpmn:TerminateEventDefinition":function(e,t){return f(e,t.width,t.height,8,{strokeWidth:4,fill:K(t),stroke:K(t)})},"bpmn:IntermediateEvent":function(e,t){var n=y("bpmn:Event")(e,t,{strokeWidth:1,fill:Y(t),stroke:K(t)});return f(e,t.width,t.height,V,{strokeWidth:1,fill:Y(t,"none"),stroke:K(t)}),b(t,e),n},"bpmn:IntermediateCatchEvent":n("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":n("bpmn:IntermediateEvent"),"bpmn:Activity":function(e,t,n){return a(e,t.width,t.height,H,n)},"bpmn:Task":function(e,t){var n={fill:Y(t),stroke:K(t)},i=y("bpmn:Activity")(e,t,n);return E(e,t,"center-middle"),S(e,t),i},"bpmn:ServiceTask":function(e,t){var n=y("bpmn:Task")(e,t);return g(e,d.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:Y(t),stroke:K(t)}),g(e,d.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:Y(t)}),g(e,d.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:Y(t),stroke:K(t)}),n},"bpmn:UserTask":function(e,t){var n=y("bpmn:Task")(e,t);return g(e,d.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Y(t),stroke:K(t)}),g(e,d.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Y(t),stroke:K(t)}),g(e,d.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:K(t),stroke:K(t)}),n},"bpmn:ManualTask":function(e,t){var n=y("bpmn:Task")(e,t);return g(e,d.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:Y(t),stroke:K(t)}),n},"bpmn:SendTask":function(e,t){var n=y("bpmn:Task")(e,t);return g(e,d.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:K(t),stroke:Y(t)}),n},"bpmn:ReceiveTask":function(e,t){var n,i=G(t),r=y("bpmn:Task")(e,t);return i.instantiate?(f(e,28,28,4.4,{strokeWidth:1}),n=d.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):n=d.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),g(e,n,{strokeWidth:1,fill:Y(t),stroke:K(t)}),r},"bpmn:ScriptTask":function(e,t){var n=y("bpmn:Task")(e,t);return g(e,d.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:K(t)}),n},"bpmn:BusinessRuleTask":function(e,t){var n=y("bpmn:Task")(e,t),i=g(e,d.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}));O(i,{strokeWidth:1,fill:Y(t,"#aaaaaa"),stroke:K(t)});var r=g(e,d.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}));return O(r,{strokeWidth:1,stroke:K(t)}),n},"bpmn:SubProcess":function(e,t,n){n=A({fillOpacity:.95,fill:Y(t),stroke:K(t)},n);var i=y("bpmn:Activity")(e,t,n),r=M.isExpanded(t);return M.isEventSubProcess(t)&&O(i,{strokeDasharray:"1,2"}),E(e,t,r?"center-top":"center-middle"),r?S(e,t):S(e,t,["SubProcessMarker"]),i},"bpmn:AdHocSubProcess":function(e,t){return y("bpmn:SubProcess")(e,t)},"bpmn:Transaction":function(e,t){var n=y("bpmn:SubProcess")(e,t),i=r.style(["no-fill","no-events"],{stroke:K(t)});return a(e,t.width,t.height,H-2,V,i),n},"bpmn:CallActivity":function(e,t){return y("bpmn:SubProcess")(e,t,{strokeWidth:5})},"bpmn:Participant":function(e,t){var n={fillOpacity:.95,fill:Y(t),stroke:K(t)},i=y("bpmn:Lane")(e,t,n);M.isExpanded(t)?(v(e,[{x:30,y:0},{x:30,y:t.height}],{stroke:K(t)}),w(e,G(t).name,t)):x(e,G(t).name,{box:t,align:"center-middle",style:{fill:K(t)}});return!!G(t).participantMultiplicity&&y("ParticipantMultiplicityMarker")(e,t),i},"bpmn:Lane":function(e,t,n){var i=a(e,t.width,t.height,0,A({fill:Y(t),stroke:K(t)},n)),r=G(t);"bpmn:Lane"===r.$type&&w(e,r.name,t);return i},"bpmn:InclusiveGateway":function(e,t){var n={fill:Y(t),stroke:K(t)},i=m(e,t.width,t.height,n);return f(e,t.width,t.height,.24*t.height,{strokeWidth:2.5,fill:Y(t),stroke:K(t)}),i},"bpmn:ExclusiveGateway":function(e,t){var n={fill:Y(t),stroke:K(t)},i=m(e,t.width,t.height,n),r=d.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return W(t).isMarkerVisible&&g(e,r,{strokeWidth:1,fill:K(t),stroke:K(t)}),i},"bpmn:ComplexGateway":function(e,t){var n={fill:Y(t),stroke:K(t)},i=m(e,t.width,t.height,n);return g(e,d.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:K(t),stroke:K(t)}),i},"bpmn:ParallelGateway":function(e,t){var n={fill:Y(t),stroke:K(t)},i=m(e,t.width,t.height,n);return g(e,d.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:K(t),stroke:K(t)}),i},"bpmn:EventBasedGateway":function(e,t){var n=G(t),i={fill:Y(t),stroke:K(t)},r=m(e,t.width,t.height,i);f(e,t.width,t.height,.2*t.height,{strokeWidth:1,fill:"none",stroke:K(t)});var o,a,s=n.eventGatewayType,c=!!n.instantiate;if("Parallel"===s){var l=d.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),u=g(e,l);O(u,{strokeWidth:1,fill:"none"})}else if("Exclusive"===s){if(!c){var p=f(e,t.width,t.height,.26*t.height);O(p,{strokeWidth:1,fill:"none",stroke:K(t)})}o=d.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}}),a={strokeWidth:2,fill:Y(t,"none"),stroke:K(t)},g(e,o,a)}return r},"bpmn:Gateway":function(e,t){return m(e,t.width,t.height)},"bpmn:SequenceFlow":function(e,t){var n=$(t),i=Y(t),r=K(t),o=g(e,n,{strokeLinejoin:"round",markerEnd:u("sequenceflow-end",i,r),stroke:K(t)}),a=G(t),s=t.source.businessObject;return a.conditionExpression&&s.$instanceOf("bpmn:Activity")&&O(o,{markerStart:u("conditional-flow-marker",i,r)}),s.default&&(s.$instanceOf("bpmn:Gateway")||s.$instanceOf("bpmn:Activity"))&&s.default===a&&O(o,{markerStart:u("conditional-default-flow-marker",i,r)}),o},"bpmn:Association":function(e,t,n){var i=G(t),r=Y(t),o=K(t);return n=A({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:K(t)},n||{}),"One"!==i.associationDirection&&"Both"!==i.associationDirection||(n.markerEnd=u("association-end",r,o)),"Both"===i.associationDirection&&(n.markerStart=u("association-start",r,o)),v(e,t.waypoints,n)},"bpmn:DataInputAssociation":function(e,t){var n=Y(t),i=K(t);return y("bpmn:Association")(e,t,{markerEnd:u("association-end",n,i)})},"bpmn:DataOutputAssociation":function(e,t){var n=Y(t),i=K(t);return y("bpmn:Association")(e,t,{markerEnd:u("association-end",n,i)})},"bpmn:MessageFlow":function(e,t){var n=G(t),i=W(t),r=Y(t),o=K(t),a=g(e,$(t),{markerEnd:u("messageflow-end",r,o),markerStart:u("messageflow-start",r,o),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:K(t)});if(n.messageRef){var s=a.getPointAtLength(a.getTotalLength()/2),c=d.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:s.x,y:s.y}}),l={strokeWidth:1};"initiating"===i.messageVisibleKind?(l.fill="white",l.stroke="black"):(l.fill="#888",l.stroke="white"),g(e,c,l)}return a},"bpmn:DataObject":function(e,t){var n,i,r,o,a,s,c=g(e,d.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:Y(t),stroke:K(t)}),l=G(t);return s=(a=l).dataObjectRef,(a.isCollection||s&&s.isCollection)&&(n=e,r=((i=t).height-16)/i.height,o=d.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:i.width,containerHeight:i.height,position:{mx:.451,my:r}}),g(n,o,{strokeWidth:2})),c},"bpmn:DataObjectReference":n("bpmn:DataObject"),"bpmn:DataInput":function(e,t){var n=d.getRawPath("DATA_ARROW"),i=y("bpmn:DataObject")(e,t);return g(e,n,{strokeWidth:1}),i},"bpmn:DataOutput":function(e,t){var n=d.getRawPath("DATA_ARROW"),i=y("bpmn:DataObject")(e,t);return g(e,n,{strokeWidth:1,fill:"black"}),i},"bpmn:DataStoreReference":function(e,t){return g(e,d.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:Y(t),stroke:K(t)})},"bpmn:BoundaryEvent":function(e,t){var n=G(t).cancelActivity,i={strokeWidth:1,fill:Y(t),stroke:K(t)};n||(i.strokeDasharray="6",i.strokeLinecap="round");var r=y("bpmn:Event")(e,t,i);return f(e,t.width,t.height,V,A(i,{fill:"none"})),b(t,e),r},"bpmn:Group":function(e,t){return a(e,t.width,t.height,H,{strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(e,t){return n=e,r=G(i=t),o={width:90,height:30,x:i.width/2+i.x,y:i.height/2+i.y},x(n,r.name,{box:o,fitBox:!0,style:{fontSize:"11px"}});var n,i,r,o},"bpmn:TextAnnotation":function(e,t){var n=a(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return g(e,d.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),{stroke:K(t)}),x(e,G(t).text||"",{box:t,align:"left-top",padding:5}),n},ParticipantMultiplicityMarker:function(e,t){i("participant-multiplicity",e,d.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:t.width/2/t.width,my:(t.height-15)/t.height}}))},SubProcessMarker:function(e,t){var n=a(e,14,14,0,{strokeWidth:1,fill:Y(t),stroke:K(t)});F(n,t.width/2-7.5,t.height-20),i("sub-process",e,d.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}}),{fill:Y(t),stroke:K(t)})},ParallelMarker:function(e,t,n){i("parallel",e,d.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.parallel)/t.width,my:(t.height-20)/t.height}}))},SequentialMarker:function(e,t,n){i("sequential",e,d.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.seq)/t.width,my:(t.height-19)/t.height}}))},CompensationMarker:function(e,t,n){i("compensation",e,d.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.compensation)/t.width,my:(t.height-13)/t.height}}),{strokeWidth:1})},LoopMarker:function(e,t,n){i("loop",e,d.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.loop)/t.width,my:(t.height-7)/t.height}}),{strokeWidth:1,fill:"none",strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(e,t,n){i("adhoc",e,d.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.adhoc)/t.width,my:(t.height-15)/t.height}}),{strokeWidth:1,fill:"black"})}};function S(t,n,e){var i,r=G(n),o=e&&-1!==e.indexOf("SubProcessMarker");i=o?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},T(e,function(e){y(e)(t,n,i)}),r.isForCompensation&&y("CompensationMarker")(t,n,i),"bpmn:AdHocSubProcess"===r.$type&&y("AdhocMarker")(t,n,i);var a=r.loopCharacteristics,s=a&&a.isSequential;a&&(void 0===s&&y("LoopMarker")(t,n,i),!1===s&&y("ParallelMarker")(t,n,i),!0===s&&y("SequentialMarker")(t,n,i))}this._drawPath=g}function q(t,i,r){return a(t.eventDefinitions,function(e){return e.$type===i&&(n=t,o(r,function(e,t){return n[t]==e}));var n})}function W(e){return e.businessObject.di}function G(e){return e.businessObject}function Y(e,t){return r(e).di.get("fill")||t||"white"}function K(e,t){return r(e).di.get("stroke")||t||"black"}i(c,j),c.$inject=["eventBus","styles","pathMap","canvas"],(t.exports=c).prototype.canRender=function(e){return $(e,"bpmn:BaseElement")},c.prototype.drawShape=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},c.prototype.drawConnection=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},c.prototype.getShapePath=function(e){return $(e,"bpmn:Event")?(n=(t=e).x+t.width/2,i=t.y+t.height/2,r=t.width/2,_([["M",n,i],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]])):$(e,"bpmn:Activity")?(a=H,s=(o=e).x,c=o.y,l=o.width,u=o.height,_([["M",s+a,c],["l",l-2*a,0],["a",a,a,0,0,1,a,a],["l",0,u-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-l,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-u],["a",a,a,0,0,1,a,-a],["z"]])):$(e,"bpmn:Gateway")?(d=(p=e).width,h=p.height,f=p.x,m=p.y,_([["M",f+(v=d/2),m],["l",v,g=h/2],["l",-v,g],["l",-v,-g],["z"]])):(b=(y=e).x,x=y.y,E=y.width,w=y.height,_([["M",b,x],["l",E,0],["l",0,w],["l",-E,0],["z"]]));var t,n,i,r,o,a,s,c,l,u,p,d,h,f,m,v,g,y,b,x,E,w}},{"../util/DiUtil":138,"../util/ModelUtil":140,"diagram-js/lib/draw/BaseRenderer":155,"diagram-js/lib/util/RenderUtil":305,"diagram-js/lib/util/SvgTransformUtil":306,"diagram-js/lib/util/Text":307,ids:342,inherits:343,"lodash/collection/every":357,"lodash/collection/forEach":360,"lodash/collection/some":367,"lodash/lang/isObject":485,"lodash/object/assign":490,"min-dom/lib/query":512,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/classes":537,"tiny-svg/lib/create":540}],51:[function(e,t,n){"use strict";t.exports=function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m {mx}, {my} m  0 15  l 0 -15 m  4 15  l 0 -15 m  4 15  l 0 -15 ",height:61,width:51,heightElements:[12],widthElements:[1,6,12,15]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,r=this.pathMap[e];t.abspos?(n=t.abspos.x,i=t.abspos.y):(n=t.containerWidth*t.position.mx,i=t.containerHeight*t.position.my);var o,a,s={};if(t.position){for(var c=t.containerHeight/r.height*t.yScaleFactor,l=t.containerWidth/r.width*t.xScaleFactor,u=0;u<r.heightElements.length;u++)s["y"+u]=r.heightElements[u]*c;for(var p=0;p<r.widthElements.length;p++)s["x"+p]=r.widthElements[p]*l}return o=r.d,a={mx:n,my:i,e:s},String(o).replace(d,function(e,t){return n=e,o=i=a,t.replace(h,function(e,t,n,i,r){t=t||i,o&&(t in o&&(o=o[t]),"function"==typeof o&&r&&(o=o()))}),o=(null==o||o==i?n:o)+"";var n,i,o})}};var d=/\{([^\}]+)\}/g,h=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g},{}],52:[function(e,t,n){t.exports={__init__:["bpmnRenderer"],bpmnRenderer:["type",e("./BpmnRenderer")],pathMap:["type",e("./PathMap")]}},{"./BpmnRenderer":50,"./PathMap":51}],53:[function(e,t,n){var r=e("diagram-js/lib/features/auto-resize/AutoResize"),i=e("inherits"),o=e("../../util/ModelUtil").is;function a(e,t,n,i){r.call(this,e,t,n,i)}a.$inject=["eventBus","elementRegistry","modeling","rules"],i(a,r),(t.exports=a).prototype.resize=function(e,t){o(e,"bpmn:Participant")?this._modeling.resizeLane(e,t):this._modeling.resizeShape(e,t)}},{"../../util/ModelUtil":140,"diagram-js/lib/features/auto-resize/AutoResize":163,inherits:343}],54:[function(e,t,n){"use strict";var i=e("../../util/ModelUtil").is,r=e("inherits"),o=e("lodash/collection/forEach"),a=e("diagram-js/lib/features/auto-resize/AutoResizeProvider");function s(e,t){a.call(this,e),this._modeling=t}r(s,a),s.$inject=["eventBus","modeling"],(t.exports=s).prototype.canResize=function(e,t){if(!i(t,"bpmn:Participant")&&!i(t,"bpmn:Lane")&&!i(t,"bpmn:SubProcess"))return!1;var n=!0;return o(e,function(e){(i(e,"bpmn:Lane")||e.labelTarget)&&(n=!1)}),n}},{"../../util/ModelUtil":140,"diagram-js/lib/features/auto-resize/AutoResizeProvider":164,inherits:343,"lodash/collection/forEach":360}],55:[function(e,t,n){t.exports={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",e("./BpmnAutoResize")],bpmnAutoResizeProvider:["type",e("./BpmnAutoResizeProvider")]}},{"./BpmnAutoResize":53,"./BpmnAutoResizeProvider":54}],56:[function(e,t,n){"use strict";var b=e("lodash/object/assign"),a=e("lodash/collection/forEach"),x=e("lodash/lang/isArray"),E=e("../../util/ModelUtil").is,w=e("../../util/DiUtil").isExpanded,$=e("../modeling/util/ModelingUtil").isAny,_=e("../modeling/util/LaneUtil").getChildLanes,S=e("../../util/DiUtil").isEventSubProcess,u=e("diagram-js/lib/util/Mouse").hasPrimaryModifier;function i(e,i,t,n,r,o,a,s,c,l){i.registerProvider(this),this._contextPad=i,this._modeling=t,this._elementFactory=n,this._connect=r,this._create=o,this._popupMenu=a,this._canvas=s,this._rules=c,this._translate=l,e.on("create.end",250,function(e){var t=e.context.shape;if(u(e)){var n=i.getEntries(t);n.replace&&n.replace.action.click(e,t)}})}function C(e,t,n){var i=e.$instanceOf(t),r=!1,o=e.eventDefinitions||[];return a(o,function(e){e.$type===n&&(r=!0)}),i&&r}i.$inject=["eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],(t.exports=i).prototype.getContextPadEntries=function(t){var c=this._contextPad,i=this._modeling,o=this._elementFactory,r=this._connect,a=this._create,e=this._popupMenu,l=this._canvas,n=this._rules,s=this._translate,u={};if("label"===t.type)return u;var p,d=t.businessObject;function h(e,t,n){r.start(e,t,n)}function f(e){i.removeElements([t])}function m(i,e,t,r){function n(e,t){var n=o.createShape(b({type:i},r));a.start(e,n,t)}return"string"!=typeof t&&(r=t,t=s("Append {type}",{type:i.replace(/^bpmn\:/,"")})),{group:"model",className:e,title:t,action:{dragstart:n,click:n}}}function v(n){return function(e,t){i.splitLane(t,n),c.open(t,!0)}}if($(d,["bpmn:Lane","bpmn:Participant"])&&w(d)){var g=_(t);b(u,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:s("Add Lane above"),action:{click:function(e,t){i.addLane(t,"top")}}}}),g.length<2&&(120<=t.height&&b(u,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:s("Divide into two Lanes"),action:{click:v(2)}}}),180<=t.height&&b(u,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:s("Divide into three Lanes"),action:{click:v(3)}}})),b(u,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:s("Add Lane below"),action:{click:function(e,t){i.addLane(t,"bottom")}}}})}E(d,"bpmn:FlowNode")&&(E(d,"bpmn:EventBasedGateway")?b(u,{"append.receive-task":m("bpmn:ReceiveTask","bpmn-icon-receive-task"),"append.message-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condtion-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",{eventDefinitionType:"bpmn:SignalEventDefinition"})}):C(d,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?b(u,{"append.compensation-activity":m("bpmn:Task","bpmn-icon-task",s("Append compensation activity"),{isForCompensation:!0})}):E(d,"bpmn:EndEvent")||d.isForCompensation||C(d,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||S(d)||b(u,{"append.end-event":m("bpmn:EndEvent","bpmn-icon-end-event-none"),"append.gateway":m("bpmn:ExclusiveGateway","bpmn-icon-gateway-xor"),"append.append-task":m("bpmn:Task","bpmn-icon-task"),"append.intermediate-event":m("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none")})),e._providers["bpmn-replace"]&&(p=e.create("bpmn-replace",t)),p&&!p.isEmpty()&&b(u,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:s("Change type"),action:{click:function(e,t){var n,i,r,o,a,s;p.open(b((n=t,i=l.getContainer(),r=c.getPad(n).html,o=i.getBoundingClientRect(),a=r.getBoundingClientRect(),s=a.top-o.top,{x:a.left-o.left,y:s+a.height+5}),{cursor:{x:e.x,y:e.y}}),t)}}}}),$(d,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&b(u,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:s("Connect using "+(d.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:h,dragstart:h}}}),$(d,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&b(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:s("Connect using DataInputAssociation"),action:{click:h,dragstart:h}}});var y=n.allowed("elements.delete",{elements:[t]});return x(y)&&(y=y[0]===t),y&&b(u,{delete:{group:"edit",className:"bpmn-icon-trash",title:s("Remove"),action:{click:f,dragstart:f}}}),u}},{"../../util/DiUtil":138,"../../util/ModelUtil":140,"../modeling/util/LaneUtil":112,"../modeling/util/ModelingUtil":113,"diagram-js/lib/util/Mouse":301,"lodash/collection/forEach":360,"lodash/lang/isArray":480,"lodash/object/assign":490}],57:[function(e,t,n){t.exports={__depends__:[e("diagram-js-direct-editing"),e("diagram-js/lib/features/context-pad"),e("diagram-js/lib/features/selection"),e("diagram-js/lib/features/connect"),e("diagram-js/lib/features/create"),e("../popup-menu")],__init__:["contextPadProvider"],contextPadProvider:["type",e("./ContextPadProvider")]}},{"../popup-menu":119,"./ContextPadProvider":56,"diagram-js-direct-editing":323,"diagram-js/lib/features/connect":178,"diagram-js/lib/features/context-pad":180,"diagram-js/lib/features/create":184,"diagram-js/lib/features/selection":260}],58:[function(e,t,n){"use strict";var i=e("../../util/ModelUtil"),r=i.getBusinessObject,v=i.is,o=e("../../util/model/ModelCloneHelper"),a=e("../../util/model/ModelCloneUtils"),g=a.getProperties,y=a.IGNORED_PROPERTIES,b=e("lodash/collection/filter"),x=e("lodash/collection/forEach");function E(t,n,e){x(e,function(e){void 0!==n[e]&&(t[e]=n[e])})}function s(d,e,t,n,h,f){var m=new o(e);t.registerDescriptor(function(e,t){var n=t.oldBusinessObject=r(e),i={};return t.type=e.type,E(t,n.di,["isExpanded"]),E(i,n.di,["fill","stroke"]),t.colors=i,"label"===e.type||(E(t,n,["type","processRef","triggeredByEvent"]),n.default&&(t.default=n.default.id)),t}),e.on("element.paste",function(e){var t,n,i,r,o=e.descriptor,a=e.createdElements,s=o.parent,c=h.getRootElement(),l=o.oldBusinessObject;t=d.create(l.$type);var u,p=g(l.$descriptor);(p=b(p,function(e){return-1===y.indexOf(e.replace(/bpmn:/,""))}),o.businessObject=m.clone(l,t,p),"label"!==o.type)&&(v(s,"bpmn:Process")&&(o.parent=v(c,"bpmn:Collaboration")?c:s),"bpmn:DataOutputAssociation"!==o.type&&"bpmn:DataInputAssociation"!==o.type&&"bpmn:MessageFlow"!==o.type||(o.parent=c),v(s,"bpmn:Lane")&&(o.parent=s.parent),o.waypoints&&(n=a[o.source],i=a[o.target],n&&i&&(n=n.element,i=i.element),(r=f.canConnect(n,i))&&(o.type=r.type)),delete t.id,d._ensureId(t),"bpmn:Participant"===o.type&&o.processRef&&(o.processRef=t.processRef=d.create("bpmn:Process")),E(t,o,["isExpanded","triggeredByEvent"]),u=o,x(["triggeredByEvent"],function(e){u[e]&&delete u[e]}))})}s.$inject=["bpmnFactory","eventBus","copyPaste","clipboard","canvas","bpmnRules"],t.exports=s},{"../../util/ModelUtil":140,"../../util/model/ModelCloneHelper":142,"../../util/model/ModelCloneUtils":143,"lodash/collection/filter":358,"lodash/collection/forEach":360}],59:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/copy-paste")],__init__:["bpmnCopyPaste"],bpmnCopyPaste:["type",e("./BpmnCopyPaste")]}},{"./BpmnCopyPaste":58,"diagram-js/lib/features/copy-paste":182}],60:[function(e,t,n){"use strict";var i=e("lodash/collection/filter"),r=e("../modeling/util/ModelingUtil").isAny;function o(e){e.registerFilter(function(e){return i(e,function(e){var t=r(e,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:Participant","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(e.labelTarget||t)})})}o.$inject=["distributeElements"],t.exports=o},{"../modeling/util/ModelingUtil":113,"lodash/collection/filter":358}],61:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/distribute-elements")],__init__:["bpmnDistributeElements"],bpmnDistributeElements:["type",e("./BpmnDistributeElements")]}},{"./BpmnDistributeElements":60,"diagram-js/lib/features/distribute-elements":186}],62:[function(e,t,n){"use strict";var i=e("inherits"),h=e("diagram-js/lib/features/editor-actions/EditorActions"),f=e("lodash/collection/filter"),m=e("../../util/ModelUtil").is,v=e("diagram-js/lib/util/Elements").getBBox;function r(e,i,r,o,t,n,a,s,c,l,u,p,d){e.invoke(h,this),this.register({selectElements:function(){var t=i.getRootElement(),e=r.filter(function(e){return e!==t});return o.select(e),e},spaceTool:function(){t.toggle()},lassoTool:function(){n.toggle()},handTool:function(){a.toggle()},globalConnectTool:function(){s.toggle()},distributeElements:function(e){var t=o.get(),n=e.type;t.length&&c.trigger(t,n)},alignElements:function(e){var t=o.get(),n=[],i=e.type;t.length&&(n=f(t,function(e){return!m(e,"bpmn:Lane")}),l.trigger(n,i))},setColor:function(e){var t=o.get();t.length&&d.setColor(t,e)},directEditing:function(){var e=o.get();e.length&&u.activate(e[0])},find:function(){p.toggle()},moveToOrigin:function(){var e,t,n=i.getRootElement();t=m(n,"bpmn:Collaboration")?r.filter(function(e){return m(e.parent,"bpmn:Collaboration")}):r.filter(function(e){return e!==n&&!m(e.parent,"bpmn:SubProcess")}),e=v(t),d.moveElements(t,{x:-e.x,y:-e.y},n)}})}i(r,h),r.$inject=["injector","canvas","elementRegistry","selection","spaceTool","lassoTool","handTool","globalConnect","distributeElements","alignElements","directEditing","searchPad","modeling"],t.exports=r},{"../../util/ModelUtil":140,"diagram-js/lib/features/editor-actions/EditorActions":190,"diagram-js/lib/util/Elements":293,inherits:343,"lodash/collection/filter":358}],63:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/align-elements"),e("diagram-js/lib/features/editor-actions"),e("diagram-js/lib/features/hand-tool"),e("diagram-js/lib/features/lasso-tool"),e("diagram-js/lib/features/space-tool"),e("../global-connect"),e("../copy-paste"),e("../distribute-elements"),e("../search"),e("../modeling")],editorActions:["type",e("./BpmnEditorActions")]}},{"../copy-paste":59,"../distribute-elements":61,"../global-connect":65,"../modeling":111,"../search":129,"./BpmnEditorActions":62,"diagram-js/lib/features/align-elements":160,"diagram-js/lib/features/editor-actions":191,"diagram-js/lib/features/hand-tool":195,"diagram-js/lib/features/lasso-tool":203,"diagram-js/lib/features/space-tool":267}],64:[function(e,t,n){"use strict";var i=e("../modeling/util/ModelingUtil").isAny;function r(e){e.registerProvider(this)}r.$inject=["globalConnect"],(t.exports=r).prototype.canStartConnect=function(e){if(!(t=e)||t.labelTarget)return null;var t,n=e.businessObject;return i(n,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])}},{"../modeling/util/ModelingUtil":113}],65:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/global-connect")],__init__:["bpmnGlobalConnect"],bpmnGlobalConnect:["type",e("./BpmnGlobalConnect")]}},{"./BpmnGlobalConnect":64,"diagram-js/lib/features/global-connect":193}],66:[function(e,t,n){"use strict";function i(n,i){n.addListener(function(e,t){return 65===e&&n.isCmd(t)?(i.trigger("selectElements"),!0):70===e&&n.isCmd(t)?(i.trigger("find"),!0):n.hasModifier(t)?void 0:83===e?(i.trigger("spaceTool"),!0):76===e?(i.trigger("lassoTool"),!0):72===e?(i.trigger("handTool"),!0):67===e?(i.trigger("globalConnectTool"),!0):69===e?(i.trigger("directEditing"),!0):void 0})}i.$inject=["keyboard","editorActions"],t.exports=i},{}],67:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/keyboard")],__init__:["bpmnKeyBindings"],bpmnKeyBindings:["type",e("./BpmnKeyBindings")]}},{"./BpmnKeyBindings":66,"diagram-js/lib/features/keyboard":199}],68:[function(e,t,n){var h=e("tiny-svg/lib/append"),f=e("tiny-svg/lib/attr"),m=e("tiny-svg/lib/create"),i=e("tiny-svg/lib/remove"),v=e("../../util/ModelUtil").getBusinessObject,g=e("../../util/ModelUtil").is,y=e("diagram-js/lib/util/SvgTransformUtil").translate,b="djs-element-hidden",x="djs-label-hidden";function r(e,a,t,s){var c,l,u,p=this,d=a.getDefaultLayer();e.on("directEditing.activate",function(e){var t,n,i=e.active;if(c=i.element.label||i.element,g(c,"bpmn:TextAnnotation")){l=a.getAbsoluteBBox(c),u=m("g");var r=s.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:c.width,containerHeight:c.height,position:{mx:0,my:0}}),o=p.path=m("path");f(o,{d:r,strokeWidth:2,stroke:(t=c,v(t).di.get("stroke")||n||"black")}),h(u,o),h(d,u),y(u,c.x,c.y)}g(c,"bpmn:TextAnnotation")||c.labelTarget?a.addMarker(c,b):(g(c,"bpmn:Task")||g(c,"bpmn:CallActivity")||g(c,"bpmn:SubProcess")||g(c,"bpmn:Participant"))&&a.addMarker(c,x)}),e.on("directEditing.resize",function(e){if(g(c,"bpmn:TextAnnotation")){var t=e.height,n=e.dy,i=Math.max(c.height/l.height*(t+n),0),r=s.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:c.width,containerHeight:i,position:{mx:0,my:0}});f(p.path,{d:r})}}),e.on(["directEditing.complete","directEditing.cancel"],function(e){var t=e.active;t&&(a.removeMarker(t.element.label||t.element,b),a.removeMarker(c,x)),l=c=void 0,u&&(i(u),u=void 0)})}r.$inject=["eventBus","canvas","elementRegistry","pathMap"],t.exports=r},{"../../util/ModelUtil":140,"diagram-js/lib/util/SvgTransformUtil":306,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540,"tiny-svg/lib/remove":543}],69:[function(e,t,n){"use strict";var v=e("lodash/object/assign"),o=e("./cmd/UpdateLabelHandler"),a=e("./LabelUtil"),g=e("../../util/ModelUtil").is,y=e("../../util/DiUtil").isExpanded;function i(e,t,n,i,r){this._canvas=t,this._commandStack=i,n.registerProvider(this),i.registerHandler("element.updateLabel",o),e.on("element.dblclick",function(e){n.activate(e.element),r.removeResizers()}),e.on(["element.mousedown","drag.init","canvas.viewbox.changing"],function(e){n.complete()}),e.on(["commandStack.changed"],function(e){n.cancel()}),"ontouchstart"in document.documentElement||e.on("create.end",500,function(e){var t=e.shape;e.context.canExecute&&(g(t,"bpmn:Task")||g(t,"bpmn:TextAnnotation")||g(t,"bpmn:SubProcess")&&!y(t))&&(n.activate(t),r.removeResizers())})}i.$inject=["eventBus","canvas","directEditing","commandStack","resizeHandles"],(t.exports=i).prototype.activate=function(e){var t=a.getLabel(e);if(void 0!==t){var n={text:t},i=this.getEditingBBox(e);v(n,i);var r=e.label||e,o={};return(g(e,"bpmn:Task")||g(e,"bpmn:Participant")||g(e,"bpmn:Lane")||g(e,"bpmn:CallActivity")&&!y(e)||g(e,"bpmn:SubProcess")&&!y(e))&&v(o,{centerVertically:!0}),r.labelTarget&&v(o,{autoResize:!0}),g(e,"bpmn:TextAnnotation")&&v(o,{resizable:!0,autoResize:!0}),v(n,{options:o}),n}},i.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r=i.x+i.width/2,o=i.y+i.height/2,a={x:i.x,y:i.y},s=t.zoom(),c=11*s,l=13*s,u=12*s,p=14*s,d={};if((g(e,"bpmn:Participant")&&y(e)||g(e,"bpmn:Lane"))&&(v(a,{width:i.height,height:30*s,x:i.x-i.height/2+15*s,y:o-30*s/2}),v(d,{fontSize:u+"px",lineHeight:p+"px",paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:"rotate(-90deg)"})),(g(e,"bpmn:Task")||g(e,"bpmn:CallActivity")&&!y(e)||g(e,"bpmn:SubProcess")&&!y(e)||g(e,"bpmn:Participant")&&!y(e))&&(v(a,{width:i.width,height:i.height}),v(d,{fontSize:u+"px",lineHeight:p+"px",paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"})),g(e,"bpmn:SubProcess")&&y(e)&&(v(a,{width:i.width,x:i.x}),v(d,{fontSize:u+"px",lineHeight:p+"px",paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"})),n.labelTarget){var h=90*s,f=7*s,m=4*s;v(a,{width:h,height:i.height+f+m,x:r-h/2,y:i.y-f}),v(d,{fontSize:c+"px",lineHeight:l+"px",paddingTop:f+"px",paddingBottom:m+"px"})}return g(e,"bpmn:TextAnnotation")&&(v(a,{width:i.width,height:i.height,minWidth:30*s,minHeight:10*s}),v(d,{textAlign:"left",paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",fontSize:u+"px",lineHeight:p+"px"})),{bounds:a,style:d}},i.prototype.update=function(e,t,n,i){var r=this._canvas.getAbsoluteBBox(e);this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,bounds:{x:e.x,y:e.y,width:e.width/r.width*i.width,height:e.height/r.height*i.height}})}},{"../../util/DiUtil":138,"../../util/ModelUtil":140,"./LabelUtil":70,"./cmd/UpdateLabelHandler":71,"lodash/object/assign":490}],70:[function(e,t,n){"use strict";var i=e("../../util/ModelUtil").is;function o(e){return i(e,"bpmn:FlowElement")||i(e,"bpmn:Participant")||i(e,"bpmn:Lane")||i(e,"bpmn:SequenceFlow")||i(e,"bpmn:MessageFlow")?"name":i(e,"bpmn:TextAnnotation")?"text":void 0}t.exports.getLabel=function(e){var t=e.businessObject,n=o(t);if(n)return t[n]||""},t.exports.setLabel=function(e,t,n){var i=e.businessObject,r=o(i);return r&&(i[r]=t),n&&(e.hidden=!t),e}},{"../../util/ModelUtil":140}],71:[function(e,t,n){"use strict";var r=e("../LabelUtil"),i=e("diagram-js/lib/util/Text"),d=e("../../../util/LabelUtil").hasExternalLabel,h=e("../../../util/ModelUtil").getBusinessObject,f=e("../../../util/ModelUtil").is,m={width:0,height:0};function o(u){var p=new i;function t(e,t){var n=e.label||e,i=e.labelTarget||e;return r.setLabel(n,t,i!==n),[n,i]}this.execute=function(e){return e.oldLabel=r.getLabel(e.element),t(e.element,e.newLabel)},this.revert=function(e){return t(e.element,e.oldLabel)},this.postExecute=function(e){var t=e.element,n=t.label||t,i=e.bounds;if(d(t)||f(t,"bpmn:TextAnnotation")){var r=h(n),o=r.name||r.text;if(o){var a,s,c,l=f(t,"bpmn:TextAnnotation")?i:(a=n,s=o,c=p.getDimensions(s,{box:{width:90,height:30,x:a.width/2+a.x,y:a.height/2+a.y},style:v}),{x:Math.round(a.x+a.width/2-c.width/2),y:Math.round(a.y),width:Math.ceil(c.width),height:Math.ceil(c.height)});u.resizeShape(n,l,m)}}}}o.$inject=["modeling"],t.exports=o;var v={fontFamily:"Arial, sans-serif",fontSize:"11px"}},{"../../../util/LabelUtil":139,"../../../util/ModelUtil":140,"../LabelUtil":70,"diagram-js/lib/util/Text":307}],72:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/command"),e("diagram-js/lib/features/change-support"),e("diagram-js/lib/features/resize"),e("diagram-js-direct-editing")],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",e("./LabelEditingProvider")],labelEditingPreview:["type",e("./LabelEditingPreview")]}},{"./LabelEditingPreview":68,"./LabelEditingProvider":69,"diagram-js-direct-editing":323,"diagram-js/lib/command":148,"diagram-js/lib/features/change-support":174,"diagram-js/lib/features/resize":251}],73:[function(e,t,n){"use strict";var i=e("lodash/collection/map"),r=e("lodash/object/assign"),o=e("lodash/object/pick");function a(e){this._model=e}a.$inject=["moddle"],a.prototype._needsId=function(e){return e.$instanceOf("bpmn:RootElement")||e.$instanceOf("bpmn:FlowElement")||e.$instanceOf("bpmn:MessageFlow")||e.$instanceOf("bpmn:DataAssociation")||e.$instanceOf("bpmn:Artifact")||e.$instanceOf("bpmn:Participant")||e.$instanceOf("bpmn:Lane")||e.$instanceOf("bpmn:Process")||e.$instanceOf("bpmn:Collaboration")||e.$instanceOf("bpmndi:BPMNShape")||e.$instanceOf("bpmndi:BPMNEdge")||e.$instanceOf("bpmndi:BPMNDiagram")||e.$instanceOf("bpmndi:BPMNPlane")||e.$instanceOf("bpmn:Property")},a.prototype._ensureId=function(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},a.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},a.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},a.prototype.createDiShape=function(e,t,n){return this.create("bpmndi:BPMNShape",r({bpmnElement:e,bounds:this.createDiBounds(t)},n))},a.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},a.prototype.createDiWaypoints=function(e){return i(e,function(e){return this.createDiWaypoint(e)},this)},a.prototype.createDiWaypoint=function(e){return this.create("dc:Point",o(e,["x","y"]))},a.prototype.createDiEdge=function(e,t,n){return this.create("bpmndi:BPMNEdge",r({bpmnElement:e},n))},a.prototype.createDiPlane=function(e){return this.create("bpmndi:BPMNPlane",{bpmnElement:e})},t.exports=a},{"lodash/collection/map":363,"lodash/object/assign":490,"lodash/object/pick":498}],74:[function(e,t,n){"use strict";var i=e("inherits"),d=e("lodash/object/assign"),r=e("diagram-js/lib/layout/BaseLayouter"),h=e("diagram-js/lib/layout/ManhattanLayout"),o=e("diagram-js/lib/layout/LayoutUtil"),a=e("../../util/DiUtil").isExpanded,f=o.getMid,m=o.getOrientation,v=e("../../util/ModelUtil").is;function s(){}function g(e,t){return e?e.original||e:f(t)}function y(e){var t=e.source,n=e.target;return v(n,"bpmn:Activity")&&v(t,"bpmn:BoundaryEvent")&&n.businessObject.isForCompensation}function b(e){return v(e,"bpmn:SubProcess")&&a(e)}i(s,r),(t.exports=s).prototype.layoutConnection=function(e,t){t=t||{};var n,i,r,o,a=e.source,s=e.target,c=e.waypoints,l=t.connectionStart,u=t.connectionEnd;if(l||(l=g(c&&c[0],a)),u||(u=g(c&&c[c.length-1],s)),(v(e,"bpmn:Association")||v(e,"bpmn:DataAssociation"))&&c&&!y(e))return[].concat([l],c.slice(1,-1),[u]);if(v(e,"bpmn:MessageFlow"))n={preferredLayouts:["v:v"]},v(s,"bpmn:Participant")&&(n={preferredLayouts:["straight","v:v"]}),b(s)&&(n={preferredLayouts:["straight","v:v"]}),b(a)&&v(s,"bpmn:FlowNode")&&(n={preferredLayouts:["straight","v:v"],preserveDocking:b(s)?"source":"target"}),v(a,"bpmn:Participant")&&v(s,"bpmn:FlowNode")&&(n={preferredLayouts:["straight","v:v"],preserveDocking:"target"}),v(s,"bpmn:Event")&&(n={preferredLayouts:["v:v"]});else if(v(e,"bpmn:SequenceFlow")||y(e))if(v(a,"bpmn:BoundaryEvent")){var p=(o=(r=a).host,m(f(r),o,-10));/left|right/.test(p)?n={preferredLayouts:["h:v"]}:/top|bottom/.test(p)&&(n={preferredLayouts:["v:h"]})}else n=v(a,"bpmn:Gateway")?{preferredLayouts:["v:h"]}:v(s,"bpmn:Gateway")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]};return n&&(n=d(n,t),i=h.repairConnection(a,s,l,u,c,n)),i||[l,u]}},{"../../util/DiUtil":138,"../../util/ModelUtil":140,"diagram-js/lib/layout/BaseLayouter":277,"diagram-js/lib/layout/LayoutUtil":279,"diagram-js/lib/layout/ManhattanLayout":280,inherits:343,"lodash/object/assign":490}],75:[function(e,t,n){"use strict";var i=e("lodash/object/assign"),u=e("lodash/collection/forEach"),r=e("inherits"),l=e("diagram-js/lib/util/Collections"),a=e("diagram-js/lib/model"),p=e("../../util/ModelUtil").getBusinessObject,d=e("../../util/ModelUtil").is,h=e("diagram-js/lib/command/CommandInterceptor");function o(e,t,i,n){h.call(this,e),this._bpmnFactory=t,this._translate=n;var r=this;function o(e){var t=e.context.oldRoot.children;u(t,function(e){d(e,"bpmn:BaseElement")&&r.updateParent(e)})}function a(e){var t=e.context.shape;d(t,"bpmn:BaseElement")&&r.updateBounds(t)}function s(e){r.updateConnection(e.context)}function c(e){r.updateConnectionWaypoints(e.context.connection)}function l(e){r.updateAttachment(e.context)}this.executed(["connection.layout","connection.create","connection.reconnectEnd","connection.reconnectStart"],function(e){var t,n=e.context;n.cropped||((t=n.connection).waypoints=i.getCroppedWaypoints(t),n.cropped=!0)}),this.reverted(["connection.layout"],function(e){delete e.context.cropped}),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],f(function(e){var t=e.context;r.updateParent(t.shape||t.connection,t.oldParent)})),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],f(function(e){var t=e.context,n=t.shape||t.connection,i=t.parent||t.newParent;r.updateParent(n,i)})),this.executed(["canvas.updateRoot"],o),this.reverted(["canvas.updateRoot"],o),this.executed(["shape.move","shape.create","shape.resize"],f(function(e){"label"!==e.context.shape.type&&a(e)})),this.reverted(["shape.move","shape.create","shape.resize"],f(function(e){"label"!==e.context.shape.type&&a(e)})),e.on("shape.changed",function(e){"label"===e.element.type&&a({context:{shape:e.element}})}),this.executed(["connection.create","connection.move","connection.delete","connection.reconnectEnd","connection.reconnectStart"],f(s)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnectEnd","connection.reconnectStart"],f(s)),this.executed(["connection.layout","connection.move","connection.updateWaypoints","connection.reconnectEnd","connection.reconnectStart"],f(c)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints","connection.reconnectEnd","connection.reconnectStart"],f(c)),this.executed(["connection.reconnectEnd","connection.reconnectStart"],f(function(e){var t=e.context,n=t.connection,i=p(n),r=p(t.oldSource),o=p(t.oldTarget),a=p(n.source),s=p(n.target);r!==a&&o!==s&&(r&&r.default===i&&(t.default=r.default,r.default=void 0),i.sourceRef&&i.sourceRef.default&&!(d(s,"bpmn:Activity")||d(s,"bpmn:EndEvent")||d(s,"bpmn:Gateway")||d(s,"bpmn:IntermediateThrowEvent"))&&(t.default=i.sourceRef.default,i.sourceRef.default=void 0),r&&i.conditionExpression&&!d(a,"bpmn:Activity")&&!d(a,"bpmn:Gateway")&&(t.conditionExpression=i.conditionExpression,i.conditionExpression=void 0),o&&i.conditionExpression&&!(d(s,"bpmn:Activity")||d(s,"bpmn:EndEvent")||d(s,"bpmn:Gateway")||d(s,"bpmn:IntermediateThrowEvent"))&&(t.conditionExpression=i.conditionExpression,i.conditionExpression=void 0))})),this.reverted(["connection.reconnectEnd","connection.reconnectStart"],f(function(e){var t=e.context,n=t.connection,i=p(n),r=p(n.source);t.default&&(d(r,"bpmn:ExclusiveGateway")||d(r,"bpmn:InclusiveGateway")||d(r,"bpmn:Activity"))&&(r.default=t.default),t.conditionExpression&&d(r,"bpmn:Activity")&&(i.conditionExpression=t.conditionExpression)})),this.executed(["element.updateAttachment"],f(l)),this.reverted(["element.updateAttachment"],f(l))}function f(i){return function(e){var t=e.context,n=t.shape||t.connection;d(n,"bpmn:BaseElement")&&i(e)}}r(o,h),(t.exports=o).$inject=["eventBus","bpmnFactory","connectionDocking","translate"],o.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject},o.prototype.updateParent=function(e,t){if(!(e instanceof a.Label)){var n=e.parent,i=e.businessObject,r=n&&n.businessObject,o=r&&r.di;d(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,r,t&&t.businessObject),d(e,"bpmn:DataOutputAssociation")&&(r=e.source?e.source.businessObject:null),d(e,"bpmn:DataInputAssociation")&&(r=e.target?e.target.businessObject:null),this.updateSemanticParent(i,r),d(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,r),this.updateDiParent(i.di,o)}},o.prototype.updateBounds=function(e){var t=e.businessObject.di,n=e instanceof a.Label?this._getLabel(t).bounds:t.bounds;i(n,{x:e.x,y:e.y,width:e.width,height:e.height})},o.prototype.updateFlowNodeRefs=function(e,t,n){var i,r;n!==t&&(d(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),l.remove(i,e)),d(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),l.add(r,e)))},o.prototype.updateDiConnection=function(e,t,n){e.sourceElement&&e.sourceElement.bpmnElement!==t&&(e.sourceElement=t&&t.di),e.targetElement&&e.targetElement.bpmnElement!==n&&(e.targetElement=n&&n.di)},o.prototype.updateDiParent=function(e,t){if(t&&!d(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(l.remove(n,e),e.$parent=null)}},o.prototype.getLaneSet=function(e){var t,n;return d(e,"bpmn:Lane")?(t=e.childLaneSet)||(t=this._bpmnFactory.create("bpmn:LaneSet"),(e.childLaneSet=t).$parent=e):(d(e,"bpmn:Participant")&&(e=e.processRef),(t=(n=e.get("laneSets"))[0])||((t=this._bpmnFactory.create("bpmn:LaneSet")).$parent=e,n.push(t))),t},o.prototype.updateSemanticParent=function(e,t,n){var i,r=this._translate;if(e.$parent!==t){if(d(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(d(e,"bpmn:FlowElement")){if(t)if(d(t,"bpmn:Participant"))t=t.processRef;else if(d(t,"bpmn:Lane"))for(;t=t.$parent.$parent,d(t,"bpmn:Lane"););i="flowElements"}else if(d(e,"bpmn:Artifact")){for(;t&&!d(t,"bpmn:Process")&&!d(t,"bpmn:SubProcess")&&!d(t,"bpmn:Collaboration");){if(d(t,"bpmn:Participant")){t=t.processRef;break}t=t.$parent}i="artifacts"}else if(d(e,"bpmn:MessageFlow"))i="messageFlows";else if(d(e,"bpmn:Participant")){i="participants";var o,a=e.processRef;a&&(o=function(e){for(;e&&!d(e,"bpmn:Definitions");)e=e.$parent;return e}(e.$parent||t),e.$parent&&(l.remove(o.get("rootElements"),a),a.$parent=null),t&&(l.add(o.get("rootElements"),a),a.$parent=o))}else d(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":d(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(r("no parent for {element} in {parent}",{element:e.id,parent:t.id}));var s;if(e.$parent&&(s=e.$parent.get(i),l.remove(s,e)),t?((s=t.get(i)).push(e),e.$parent=t):e.$parent=null,n){var c=n.get(i);l.remove(s,e),t&&(c||(c=[],t.set(i,c)),c.push(e))}}},o.prototype.updateConnectionWaypoints=function(e){e.businessObject.di.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))},o.prototype.updateConnection=function(e){var t,n=e.connection,i=p(n),r=p(n.source),o=p(n.target);if(d(i,"bpmn:DataAssociation"))d(i,"bpmn:DataInputAssociation")?(i.get("sourceRef")[0]=r,t=e.parent||e.newParent||o,this.updateSemanticParent(i,o,parent.businessObject)):d(i,"bpmn:DataOutputAssociation")&&(t=e.parent||e.newParent||r,this.updateSemanticParent(i,r,t),i.targetRef=o);else{var a=d(i,"bpmn:SequenceFlow");i.sourceRef!==r&&(a&&(l.remove(i.sourceRef&&i.sourceRef.get("outgoing"),i),r&&r.get("outgoing")&&r.get("outgoing").push(i)),i.sourceRef=r),i.targetRef!==o&&(a&&(l.remove(i.targetRef&&i.targetRef.get("incoming"),i),o&&o.get("incoming")&&o.get("incoming").push(i)),i.targetRef=o)}this.updateConnectionWaypoints(n),this.updateDiConnection(i.di,r,o)},o.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label}},{"../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,"diagram-js/lib/model":281,"diagram-js/lib/util/Collections":290,inherits:343,"lodash/collection/forEach":360,"lodash/object/assign":490}],76:[function(e,t,n){"use strict";var l=e("lodash/object/assign"),u=e("lodash/collection/forEach"),i=e("inherits"),p=e("../../util/ModelUtil").is,r=e("../../util/DiUtil").isExpanded,o=e("diagram-js/lib/core/ElementFactory"),a=e("../../util/LabelUtil");function s(e,t,n){o.call(this),this._bpmnFactory=e,this._moddle=t,this._translate=n}function d(e,t,n){e[n]=t[n],delete t[n]}i(s,o),s.$inject=["bpmnFactory","moddle","translate"],(t.exports=s).prototype.baseCreate=o.prototype.create,s.prototype.create=function(e,t){return"label"===e?this.baseCreate(e,l({type:"label"},a.DEFAULT_LABEL_SIZE,t)):this.createBpmnElement(e,t)},s.prototype.createBpmnElement=function(e,t){var n,i,r,o,a,s=this._translate,c=(t=t||{}).businessObject;if(!c){if(!t.type)throw new Error(s("no shape type specified"));c=this._bpmnFactory.create(t.type)}return c.di||(c.di="root"===e?this._bpmnFactory.createDiPlane(c,[],{id:c.id+"_di"}):"connection"===e?this._bpmnFactory.createDiEdge(c,[],{id:c.id+"_di"}):this._bpmnFactory.createDiShape(c,{},{id:c.id+"_di"})),t.colors&&(l(c.di,t.colors),delete t.colors),i=c,r=t,u(["processRef","isInterrupting","associationDirection","isForCompensation"],function(e){void 0!==r[e]&&d(i,r,e)}),t.isExpanded&&d(c.di,t,"isExpanded"),p(c,"bpmn:ExclusiveGateway")&&(c.di.isMarkerVisible=!0),t.eventDefinitionType&&(o=c.get("eventDefinitions")||[],a=this._moddle.create(t.eventDefinitionType),o.push(a),(a.$parent=c).eventDefinitions=o,delete t.eventDefinitionType),n=this._getDefaultSize(c),t=l({businessObject:c,id:c.id},n,t),this.baseCreate(e,t)},s.prototype._getDefaultSize=function(e){return p(e,"bpmn:SubProcess")?r(e)?{width:350,height:200}:{width:100,height:80}:p(e,"bpmn:Task")?{width:100,height:80}:p(e,"bpmn:Gateway")?{width:50,height:50}:p(e,"bpmn:Event")?{width:36,height:36}:p(e,"bpmn:Participant")?r(e)?{width:600,height:250}:{width:400,height:100}:p(e,"bpmn:Lane")?{width:400,height:100}:p(e,"bpmn:DataObjectReference")?{width:36,height:50}:p(e,"bpmn:DataStoreReference")?{width:50,height:50}:p(e,"bpmn:TextAnnotation")?{width:100,height:30}:{width:100,height:80}},s.prototype.createParticipantShape=function(e){var t={type:"bpmn:Participant"};return e||(t.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(t)}},{"../../util/DiUtil":138,"../../util/LabelUtil":139,"../../util/ModelUtil":140,"diagram-js/lib/core/ElementFactory":150,inherits:343,"lodash/collection/forEach":360,"lodash/object/assign":490}],77:[function(e,t,n){"use strict";var i=e("inherits"),r=e("diagram-js/lib/features/modeling/Modeling"),o=e("./cmd/UpdatePropertiesHandler"),a=e("./cmd/UpdateCanvasRootHandler"),s=e("./cmd/AddLaneHandler"),c=e("./cmd/SplitLaneHandler"),l=e("./cmd/ResizeLaneHandler"),u=e("./cmd/UpdateFlowNodeRefsHandler"),p=e("./cmd/IdClaimHandler"),d=e("./cmd/SetColorHandler");function h(e,t,n,i){r.call(this,e,t,n),this._bpmnRules=i}i(h,r),h.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],(t.exports=h).prototype.getHandlers=function(){var e=r.prototype.getHandlers.call(this);return e["element.updateProperties"]=o,e["canvas.updateRoot"]=a,e["lane.add"]=s,e["lane.resize"]=l,e["lane.split"]=c,e["lane.updateRefs"]=u,e["id.updateClaim"]=p,e["element.setColor"]=d,e},h.prototype.updateLabel=function(e,t){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t})},h.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),n)return this.createConnection(e,t,n,e.parent,i)},h.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},h.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})},h.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane},h.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})},h.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e},h.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})},h.prototype.makeProcess=function(){var e={newRoot:this._create("root",{type:"bpmn:Process"})};this._commandStack.execute("canvas.updateRoot",e)},h.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},h.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},h.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})}},{"./cmd/AddLaneHandler":103,"./cmd/IdClaimHandler":104,"./cmd/ResizeLaneHandler":105,"./cmd/SetColorHandler":106,"./cmd/SplitLaneHandler":107,"./cmd/UpdateCanvasRootHandler":108,"./cmd/UpdateFlowNodeRefsHandler":109,"./cmd/UpdatePropertiesHandler":110,"diagram-js/lib/features/modeling/Modeling":204,inherits:343}],78:[function(e,t,n){"use strict";var i=e("inherits"),r=e("../../../util/ModelUtil").is,o=e("diagram-js/lib/command/CommandInterceptor");function a(e,t,n){o.call(this,e),this.preExecute("shape.append",function(e){var t=e.source,n=e.shape;e.position||(r(n,"bpmn:TextAnnotation")?e.position={x:t.x+t.width/2+75,y:t.y-50-n.height/2}:e.position={x:t.x+t.width+80+n.width/2,y:t.y+t.height/2})},!0)}a.$inject=["eventBus","elementFactory","bpmnRules"],i(a,o),t.exports=a},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,inherits:343}],79:[function(e,t,n){"use strict";var i=e("inherits"),r=e("lodash/collection/forEach"),s=e("../../../util/ModelUtil").is,o=e("diagram-js/lib/command/CommandInterceptor");function a(e,a,n){o.call(this,e),this.preExecute("elements.paste",1500,function(e){var t=e.topParent;if(t.parent||(e.topParent=n.getRootElement()),s(t,"bpmn:Lane"))for(;t=e.topParent=t.parent,s(t,"bpmn:Lane")||!s(t,"bpmn:Participant"););},!0),this.postExecute("elements.paste",function(e){var o=e.tree.createdElements;r(o,function(e){var t,n=e.element,i=n.businessObject,r=e.descriptor;(s(i,"bpmn:ExclusiveGateway")||s(i,"bpmn:InclusiveGateway")||s(i,"bpmn:Activity"))&&r.default&&(t=(t=o[r.default])?t.element:void 0,delete n.default,a.updateProperties(n,{default:t}))})},!0)}a.$inject=["eventBus","modeling","canvas"],i(a,o),t.exports=a},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,inherits:343,"lodash/collection/forEach":360}],80:[function(e,t,n){"use strict";var i=e("inherits"),r=e("diagram-js/lib/command/CommandInterceptor"),s=e("../../../util/ModelUtil").is;function o(e,t,o,a){r.call(this,e),this.preExecute("shape.create",function(e){var t,n=e.shape,i=e.host,r={cancelActivity:!0};i&&s(n,"bpmn:IntermediateThrowEvent")&&(r.attachedToRef=i.businessObject,t={type:"bpmn:BoundaryEvent",businessObject:a.create("bpmn:BoundaryEvent",r)},e.shape=o.createShape(t))},!0)}o.$inject=["eventBus","modeling","elementFactory","bpmnFactory"],i(o,r),t.exports=o},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,inherits:343}],81:[function(e,t,n){"use strict";var i=e("inherits"),r=e("diagram-js/lib/command/CommandInterceptor"),o=e("../../../util/ModelUtil").is;function a(e,i,t){r.call(this,e),this.preExecute("shape.create",function(e){var t=e.context.shape;if(o(t,"bpmn:DataObjectReference")&&"label"!==t.type){var n=i.create("bpmn:DataObject");t.businessObject.dataObjectRef=n}})}a.$inject=["eventBus","bpmnFactory","moddle"],i(a,r),t.exports=a},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,inherits:343}],82:[function(e,t,n){"use strict";var i=e("inherits"),r=e("diagram-js/lib/command/CommandInterceptor"),c=e("../../../util/ModelUtil").is;function o(e,a,t,n,s){r.call(this,e),this.preExecute("shape.create",function(e){var t=e.parent,n=e.shape,i=e.position,r=s.getRootElement();if(c(t,"bpmn:Process")&&c(n,"bpmn:Participant")&&!c(r,"bpmn:Collaboration")){var o=a.makeCollaboration();e.position=i,e.parent=o,e.processRoot=t}},!0),this.execute("shape.create",function(e){var t=e.processRoot,n=e.shape;t&&(e.oldProcessRef=n.businessObject.processRef,n.businessObject.processRef=t.businessObject)},!0),this.revert("shape.create",function(e){var t=e.processRoot,n=e.shape;t&&(n.businessObject.processRef=e.oldProcessRef)},!0),this.postExecute("shape.create",function(e){var t=e.processRoot,n=e.shape;if(t){var i=t.children.slice();a.moveElements(i,{x:0,y:0},n)}},!0)}o.$inject=["eventBus","modeling","elementFactory","bpmnFactory","canvas"],i(o,r),t.exports=o},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,inherits:343}],83:[function(e,t,n){"use strict";var i=e("inherits"),o=e("diagram-js/lib/command/CommandInterceptor"),a=e("diagram-js/lib/util/Collections"),s=e("lodash/collection/find"),r=e("../../../util/ModelUtil").is,c="__targetRef_placeholder";function l(e,r){function d(e,t){var n=e.get("properties"),i=s(n,function(e){return e.name===c});return!i&&t&&(i=r.create("bpmn:Property",{name:c}),a.add(n,i)),i}function h(e,t){var n,i,r,o=d(e);o&&(n=o,i=t,r=e.get("dataInputAssociations"),s(r,function(e){return e!==i&&e.targetRef===n})||a.remove(e.get("properties"),o))}function t(e){var t,n=e.context,i=n.connection,r=i.businessObject,o=i.target,a=o&&o.businessObject,s=n.newTarget,c=s&&s.businessObject,l=n.oldTarget||n.target,u=l&&l.businessObject,p=i.businessObject;u&&u!==a&&h(u,r),c&&c!==a&&h(c,r),a?(t=d(a,!0),p.targetRef=t):p.targetRef=null}o.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnectEnd"],u(t)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnectEnd"],u(t))}function u(n){return function(e){var t=e.context.connection;if(r(t,"bpmn:DataInputAssociation"))return n(e)}}l.$inject=["eventBus","bpmnFactory"],i(l,o),t.exports=l},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,"diagram-js/lib/util/Collections":290,inherits:343,"lodash/collection/find":359}],84:[function(e,t,n){"use strict";var i=e("inherits"),r=e("diagram-js/lib/command/CommandInterceptor"),h=e("../../../util/ModelUtil").is,f=e("../util/LaneUtil").getChildLanes,m=e("diagram-js/lib/util/Elements").eachElement,o=500;function a(e,t,d){r.call(this,e),this.postExecuted("shape.delete",o,function(e){var t,n,i,r,o,a,s,c=e.context,l=c.hints,u=c.shape,p=c.oldParent;h(u,"bpmn:Lane")&&(l&&l.nested||(t=u,o=f(p),a=[],s=[],m(o,function(e){return e.y>t.y?s.push(e):a.push(e),e.children}),o.length&&(n=s.length&&a.length?t.height/2:t.height,a.length&&(i=d.calculateAdjustments(a,"y",n,t.y-10),d.makeSpace(i.movingShapes,i.resizingShapes,{x:0,y:n},"s")),s.length&&(r=d.calculateAdjustments(s,"y",-n,t.y+t.height+10),d.makeSpace(r.movingShapes,r.resizingShapes,{x:0,y:-n},"n")))))})}a.$inject=["eventBus","modeling","spaceTool"],i(a,r),t.exports=a},{"../../../util/ModelUtil":140,"../util/LaneUtil":112,"diagram-js/lib/command/CommandInterceptor":146,"diagram-js/lib/util/Elements":293,inherits:343}],85:[function(e,t,n){"use strict";var i=e("inherits"),r=e("lodash/object/assign"),l=e("lodash/collection/find"),o=e("diagram-js/lib/command/CommandInterceptor"),h=e("diagram-js/lib/util/LineIntersection").getApproxIntersection;function f(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function m(e){return r({},e)}function a(e,p,d){function r(e,t,n){var i,r,o,a,s,c,l=t.waypoints,u=h(l,n);u&&(i=l.slice(0,u.index),r=l.slice(u.index+(u.bendpoint?1:0)),o=u.bendpoint?l[u.index]:n,f(e,i[i.length-1])||i.push(m(o)),f(e,r[0])||r.unshift(m(o))),a=t.source,s=t.target,p.canConnect(a,e,t)&&(d.reconnectEnd(t,e,i||n),c=!0),p.canConnect(e,s,t)&&(c?d.connect(e,s,{type:t.type,waypoints:r}):d.reconnectStart(t,e,r||n))}o.call(this,e),this.preExecute("elements.move",function(e){var t=e.newParent,n=e.shapes,i=e.delta,r=n[0];if(r&&t){t&&t.waypoints&&(e.newParent=t=t.parent);var o,a=(o=r,{x:Math.round(o.x+o.width/2),y:Math.round(o.y+o.height/2)}),s={x:a.x+i.x,y:a.y+i.y},c=l(t.children,function(e){return p.canInsert(n,e)&&h(e.waypoints,s)});c&&(e.targetFlow=c,e.position=s)}},!0),this.postExecuted("elements.move",function(e){var t=e.shapes,n=e.targetFlow,i=e.position;n&&r(t[0],n,i)},!0),this.preExecute("shape.create",function(e){var t=e.parent,n=e.shape;p.canInsert(n,t)&&(e.targetFlow=t,e.parent=t.parent)},!0),this.postExecute("shape.create",function(e){var t=e.shape,n=e.targetFlow,i=e.position;n&&r(t,n,i)},!0)}i(a,o),a.$inject=["eventBus","bpmnRules","modeling"],t.exports=a},{"diagram-js/lib/command/CommandInterceptor":146,"diagram-js/lib/util/LineIntersection":299,inherits:343,"lodash/collection/find":359,"lodash/object/assign":490}],86:[function(e,t,n){"use strict";var o=e("diagram-js/lib/layout/LayoutUtil").getMid,c=e("./util/LineIntersect");function i(e){function r(e,t,n){var i,r={x:n.x,y:n.y-50},o={x:n.x-50,y:n.y},a=c(e,t,n,r),s=c(e,t,n,o);i=a&&s?l(a,n)>l(s,n)?s:a:a||s,e.original=i}e.on("bpmnElement.added",function(e){var t,n,i=e.element;i.waypoints&&(r((n=(t=i).waypoints)[0],n[1],o(t.source)),r(n[n.length-1],n[n.length-2],o(t.target)))})}function l(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}i.$inject=["eventBus"],t.exports=i},{"./util/LineIntersect":102,"diagram-js/lib/layout/LayoutUtil":279}],87:[function(e,t,n){"use strict";var m=e("lodash/object/assign"),i=e("inherits"),r=e("../../../util/LabelUtil"),o=e("./util/LabelLayoutUtil"),a=e("../../../util/ModelUtil"),s=a.is,c=a.getBusinessObject,u=r.hasExternalLabel,v=r.getExternalLabelMid,g=o.getLabelAdjustment,p=e("diagram-js/lib/command/CommandInterceptor"),d=e("diagram-js/lib/util/Text"),h={width:90,height:20};function l(e,f,i){p.call(this,e);var l=new d;this.postExecute(["shape.create","connection.create"],function(e){var t=e.context,n=t.shape||t.connection,i=n.businessObject;if(u(i)){var r,o,a,s=v(n),c=(r=h,o=i.name||"",a=l.getDimensions(o,{box:{width:90,height:30,x:r.width/2+r.x,y:r.height/2+r.y},style:y}),{x:Math.round(r.x+r.width/2-a.width/2),y:Math.round(r.y),width:Math.ceil(a.width),height:Math.ceil(a.height)});f.createLabel(n,s,{id:i.id+"_label",hidden:!i.name,businessObject:i,width:c.width,height:c.height})}}),this.executed(["label.create"],function(e){var t,n=e.context.shape;n.labelTarget&&s(n.labelTarget||n,"bpmn:BaseElement")&&((t=n.businessObject.di).label||(t.label=i.create("bpmndi:BPMNLabel",{bounds:i.create("dc:Bounds")})),m(t.label.bounds,{x:n.x,y:n.y,width:n.width,height:n.height}))}),this.postExecute(["connection.layout","connection.reconnectEnd","connection.reconnectStart","connection.updateWaypoints"],function(e){var t,n,i,r,o,a,s,c,l,u,p,d,h=e.context.connection.label;h&&(h.hidden?(u=e.context.connection,p=u.label,t={x:(d=v(u)).x-p.x-p.width/2,y:d.y-p.y-p.height/2}):(i=(n=e).command,r=n.context,o=r.connection,a=o.label,s=m({},r.hints),c=r.newWaypoints||o.waypoints,l=r.oldWaypoints,void 0===s.startChanged&&(s.startChanged="connection.reconnectStart"===i),void 0===s.endChanged&&(s.endChanged="connection.reconnectEnd"===i),t=g(a,c,l,s)),f.moveShape(h,t))}),this.postExecute(["shape.replace"],function(e){var t=e.context,n=t.newShape,i=t.oldShape,r=c(n);r&&u(r)&&(n.label.x=i.label.x,n.label.y=i.label.y)})}i(l,p),l.$inject=["eventBus","modeling","bpmnFactory"],t.exports=l;var y={fontFamily:"Arial, sans-serif",fontSize:"11px"}},{"../../../util/LabelUtil":139,"../../../util/ModelUtil":140,"./util/LabelLayoutUtil":100,"diagram-js/lib/command/CommandInterceptor":146,"diagram-js/lib/util/Text":307,inherits:343,"lodash/object/assign":490}],88:[function(e,t,n){"use strict";var a=e("../../../util/ModelUtil").is,s="flow elements must be children of pools/participants",c="participants cannot be pasted onto a non-empty process diagram";function i(e,i,r){function o(e,t,n){i.add({position:{x:e.x+5,y:e.y+5},type:"error",timeout:n||2e3,html:"<div>"+t+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(e){var t=e.context,n=t.shape,i=t.target;a(i,"bpmn:Collaboration")&&a(n,"bpmn:FlowNode")&&o(e,r(s))}),e.on(["elements.paste.rejected"],function(e){var t=e.context,n=t.position,i=t.target;a(i,"bpmn:Collaboration")&&o(n,r(s)),a(i,"bpmn:Process")&&o(n,r(c),3e3)})}i.$inject=["eventBus","tooltips","translate"],t.exports=i},{"../../../util/ModelUtil":140}],89:[function(e,t,n){"use strict";var i=e("inherits"),r=e("diagram-js/lib/command/CommandInterceptor"),u=e("./util/LineIntersect");function o(e,c,l){r.call(this,e),this.preExecute("shape.delete",function(e){var t,n,i,r=e.context.shape;if(1==r.incoming.length&&1==r.outgoing.length){var o=r.incoming[0],a=r.outgoing[0];if(c.canConnect(o.source,a.target,o)){var s=(t=o.waypoints,n=a.waypoints,(i=u(p(t[t.length-2]),p(t[t.length-1]),p(n[1]),p(n[0])))?[].concat(t.slice(0,t.length-1),[i],n.slice(1)):[p(t[0]),p(n[n.length-1])]);l.reconnectEnd(o,a.target,s)}}})}function p(e){return e.original||e}i(o,r),o.$inject=["eventBus","bpmnRules","modeling"],t.exports=o},{"./util/LineIntersect":102,"diagram-js/lib/command/CommandInterceptor":146,inherits:343}],90:[function(e,t,n){"use strict";var i=e("inherits"),r=e("diagram-js/lib/command/CommandInterceptor"),o=e("../../../util/ModelUtil").is;function a(e,n){r.call(this,e),this.preExecute("shape.delete",function(e){var t=e.shape,n=t.parent;o(t,"bpmn:Participant")&&(e.collaborationRoot=n)},!0),this.postExecute("shape.delete",function(e){var t=e.collaborationRoot;t&&!t.businessObject.participants.length&&n.makeProcess()},!0)}a.$inject=["eventBus","modeling"],i(a,r),t.exports=a},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,inherits:343}],91:[function(e,t,n){"use strict";var i=e("lodash/collection/forEach"),s=e("lodash/collection/find"),r=e("inherits"),c=e("diagram-js/lib/command/CommandInterceptor"),l=e("../../../util/ModelUtil").is;function o(e,a,o){function n(e){var t,n,i=e.source,r=e.target;e.parent&&(l(e,"bpmn:SequenceFlow")&&(o.canConnectSequenceFlow(i,r)||(n=!0),o.canConnectMessageFlow(i,r)&&(t="bpmn:MessageFlow")),l(e,"bpmn:MessageFlow")&&(o.canConnectMessageFlow(i,r)||(n=!0),o.canConnectSequenceFlow(i,r)&&(t="bpmn:SequenceFlow")),l(e,"bpmn:Association")&&!o.canConnectAssociation(i,r)&&(n=!0),n&&a.removeConnection(e),t&&a.connect(i,r,{type:t,waypoints:e.waypoints.slice()}))}c.call(this,e),this.postExecuted("elements.move",function(e){var t=e.closure.allConnections;i(t,n)},!0),this.postExecuted(["connection.reconnectStart","connection.reconnectEnd"],function(e){n(e.context.connection)}),this.postExecuted("element.updateProperties",function(e){var t,n=e.context,i=n.properties,r=n.element,o=r.businessObject;i.default&&(t=s(r.outgoing,{id:r.businessObject.default.id}))&&a.updateProperties(t,{conditionExpression:void 0}),i.conditionExpression&&o.sourceRef.default===o&&a.updateProperties(r.source,{default:void 0})})}r(o,c),o.$inject=["eventBus","modeling","bpmnRules"],t.exports=o},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,inherits:343,"lodash/collection/find":359,"lodash/collection/forEach":360}],92:[function(e,t,n){"use strict";var i=e("inherits"),o=e("diagram-js/lib/command/CommandInterceptor"),l=e("lodash/collection/forEach"),s=e("../../../util/DiUtil").isEventSubProcess,u=e("../../../util/ModelUtil").is;function r(e,t,a,n,i,r){o.call(this,e),this._bpmnReplace=t,this._elementRegistry=n,this._selection=i,this._modeling=r,this.postExecuted(["elements.move"],500,function(e){var t=e.context,n=t.newParent,i=t.newHost,r=[];l(t.closure.topLevel,function(e){r=s(e)?r.concat(e.children):r.concat(e)}),1===r.length&&i&&(n=i);var o=a.canReplace(r,n);o&&this.replaceElements(r,o.replacements,i)},this),this.postExecute(["shape.replace"],1500,function(e){var t,n=e.context,i=n.oldShape,r=n.newShape,o=i.attachers;o&&o.length&&(t=a.canReplace(o,r),this.replaceElements(o,t.replacements))},this),this.postExecuted(["shape.replace"],1500,function(e){var t=e.context,n=t.oldShape,i=t.newShape;r.unclaimId(n.businessObject.id,n.businessObject),r.updateProperties(i,{id:n.id})})}i(r,o),r.prototype.replaceElements=function(r,e,o){var a=this._elementRegistry,s=this._bpmnReplace,t=this._selection,c=this._modeling;l(e,function(e){var t={type:e.newElementType},n=a.get(e.oldElementId);o&&u(n,"bpmn:BoundaryEvent")&&c.updateAttachment(n,null);var i=r.indexOf(n);r[i]=s.replaceElement(n,t,{select:!1}),o&&u(r[i],"bpmn:BoundaryEvent")&&c.updateAttachment(r[i],o)}),e&&t.select(r)},r.$inject=["eventBus","bpmnReplace","bpmnRules","elementRegistry","selection","modeling"],t.exports=r},{"../../../util/DiUtil":138,"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,inherits:343,"lodash/collection/forEach":360}],93:[function(e,t,n){"use strict";var a=e("../../../util/ModelUtil").is,s=e("diagram-js/lib/layout/LayoutUtil").roundBounds,i=e("diagram-js/lib/util/Mouse").hasPrimaryModifier,r=1001;function o(e,o){e.on("resize.start",r+500,function(e){var t=e.context,n=t.shape;(a(n,"bpmn:Lane")||a(n,"bpmn:Participant"))&&(t.balanced=!i(e))}),e.on("resize.end",r,function(e){var t=e.context,n=t.shape,i=t.canExecute,r=t.newBounds;if(a(n,"bpmn:Lane")||a(n,"bpmn:Participant"))return i&&(r=s(r),o.resizeLane(n,r,t.balanced)),!1})}o.$inject=["eventBus","modeling"],t.exports=o},{"../../../util/ModelUtil":140,"diagram-js/lib/layout/LayoutUtil":279,"diagram-js/lib/util/Mouse":301}],94:[function(e,t,n){"use strict";var i=e("inherits"),r=e("diagram-js/lib/command/CommandInterceptor"),o=e("../../../util/ModelUtil").getBusinessObject,a=e("../../../util/ModelUtil").is,m=e("diagram-js/lib/features/resize/ResizeUtil").computeChildrenBBox,s=500;function c(e,h,f,t){r.call(this,e),this.executed(["shape.toggleCollapse"],s,function(e){var t,n=e.context.shape;a(n,"bpmn:SubProcess")&&(n.collapsed?o(n).di.isExpanded=!1:((t=n.children).length&&t.forEach(function(e){"label"!==e.type||e.businessObject.name||(e.hidden=!0)}),o(n).di.isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],s,function(e){var t=e.context.shape;t.collapsed?o(t).di.isExpanded=!1:o(t).di.isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],s,function(e){var t,n,i,r,o,a,s,c,l,u,p=e.context.shape,d=h._getDefaultSize(p);p.collapsed?(u=d,t={x:(l=p).x+(l.width-u.width)/2,y:l.y+(l.height-u.height)/2,width:u.width,height:u.height}):(i=d,s=(n=p).children,c=i,r=(a=s,a.filter(function(e){return!e.hidden})).concat([n]),(o=m(r))?(c.width=Math.max(o.width,c.width),c.height=Math.max(o.height,c.height),c.x=o.x+(o.width-c.width)/2,c.y=o.y+(o.height-c.height)/2):(c.x=n.x+(n.width-c.width)/2,c.y=n.y+(n.height-c.height)/2),t=c),f.resizeShape(p,t)})}i(c,r),c.$inject=["eventBus","elementFactory","modeling"],t.exports=c},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,"diagram-js/lib/features/resize/ResizeUtil":250,inherits:343}],95:[function(e,t,n){"use strict";var i=e("lodash/collection/forEach"),r=e("inherits"),o=e("diagram-js/lib/command/CommandInterceptor");function a(e,n){o.call(this,e),this.preExecute("elements.delete",function(e){var t=e.context.elements;i(t,function(e){n.unclaimId(e.businessObject.id,e.businessObject)})})}r(a,o),a.$inject=["eventBus","modeling"],t.exports=a},{"diagram-js/lib/command/CommandInterceptor":146,inherits:343,"lodash/collection/forEach":360}],96:[function(e,t,n){"use strict";var i=e("inherits"),r=e("diagram-js/lib/command/CommandInterceptor"),o=e("../../../util/ModelUtil").is,a=e("../../../util/ModelUtil").getBusinessObject;function s(e,i){r.call(this,e),this.preExecute("connection.delete",function(e){var t=e.context.connection,n=t.source;(function(e,t){if(!o(e,"bpmn:SequenceFlow"))return!1;var n=a(t),i=a(e);return n.get("default")===i})(t,n)&&i.updateProperties(n,{default:null})})}i(s,r),s.$inject=["eventBus","modeling"],t.exports=s},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,inherits:343}],97:[function(e,t,n){"use strict";var i=e("inherits"),o=e("diagram-js/lib/command/CommandInterceptor"),a=e("../../../util/ModelUtil").is,s=500,c=5e3;function r(e,t,i){var r;o.call(this,e);var n=["spaceTool","lane.add","lane.resize","lane.split","elements.move","elements.delete","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(n,c,function(e){(r=r||new function(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}).enter()}),this.postExecuted(n,s,function(e){!function(){if(!r)throw new Error(i("out of bounds release"));var e=r.leave();e&&(t.updateLaneRefs(r.flowNodes,r.lanes),r=null)}()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(e){var t=e.context.shape,n=function(){if(!r)throw new Error(i("out of bounds release"));return r}();t.labelTarget||(a(t,"bpmn:Lane")&&n.addLane(t),a(t,"bpmn:FlowNode")&&n.addFlowNode(t))})}r.$inject=["eventBus","modeling","translate"],i(r,o),t.exports=r},{"../../../util/ModelUtil":140,"diagram-js/lib/command/CommandInterceptor":146,inherits:343}],98:[function(e,t,n){t.exports={__init__:["appendBehavior","copyPasteBehavior","createBoundaryEventBehavior","createDataObjectBehavior","dropOnFlowBehavior","createParticipantBehavior","dataInputAssociationBehavior","deleteLaneBehavior","importDockingFix","labelBehavior","modelingFeedback","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeLaneBehavior","unsetDefaultFlowBehavior","updateFlowNodeRefsBehavior","removeElementBehavior","unclaimIdBehavior","toggleElementCollapseBehaviour"],appendBehavior:["type",e("./AppendBehavior")],copyPasteBehavior:["type",e("./CopyPasteBehavior")],createBoundaryEventBehavior:["type",e("./CreateBoundaryEventBehavior")],createDataObjectBehavior:["type",e("./CreateDataObjectBehavior")],dropOnFlowBehavior:["type",e("./DropOnFlowBehavior")],createParticipantBehavior:["type",e("./CreateParticipantBehavior")],dataInputAssociationBehavior:["type",e("./DataInputAssociationBehavior")],deleteLaneBehavior:["type",e("./DeleteLaneBehavior")],importDockingFix:["type",e("./ImportDockingFix")],labelBehavior:["type",e("./LabelBehavior")],modelingFeedback:["type",e("./ModelingFeedback")],removeParticipantBehavior:["type",e("./RemoveParticipantBehavior")],replaceConnectionBehavior:["type",e("./ReplaceConnectionBehavior")],replaceElementBehaviour:["type",e("./ReplaceElementBehaviour")],resizeLaneBehavior:["type",e("./ResizeLaneBehavior")],unsetDefaultFlowBehavior:["type",e("./UnsetDefaultFlowBehavior")],updateFlowNodeRefsBehavior:["type",e("./UpdateFlowNodeRefsBehavior")],removeElementBehavior:["type",e("./RemoveElementBehavior")],unclaimIdBehavior:["type",e("./UnclaimIdBehavior")],toggleElementCollapseBehaviour:["type",e("./ToggleElementCollapseBehaviour")]}},{"./AppendBehavior":78,"./CopyPasteBehavior":79,"./CreateBoundaryEventBehavior":80,"./CreateDataObjectBehavior":81,"./CreateParticipantBehavior":82,"./DataInputAssociationBehavior":83,"./DeleteLaneBehavior":84,"./DropOnFlowBehavior":85,"./ImportDockingFix":86,"./LabelBehavior":87,"./ModelingFeedback":88,"./RemoveElementBehavior":89,"./RemoveParticipantBehavior":90,"./ReplaceConnectionBehavior":91,"./ReplaceElementBehaviour":92,"./ResizeLaneBehavior":93,"./ToggleElementCollapseBehaviour":94,"./UnclaimIdBehavior":95,"./UnsetDefaultFlowBehavior":96,"./UpdateFlowNodeRefsBehavior":97}],99:[function(e,t,n){"use strict";function i(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function r(e,t){var n,i,r,o,a=t[0],s=t[1],c={x:s.x-a.x,y:s.y-a.y},l=(n=[a.x,a.y],i=[c.x,c.y],r=[e.x,e.y],-((o=[{n:n[0]-r[0],lambda:i[0]},{n:n[1]-r[1],lambda:i[1]}])[0].n*i[0]+o[1].n*i[1])/(o[0].lambda*i[0]+o[1].lambda*i[1]));return{x:a.x+l*c.x,y:a.y+l*c.y}}t.exports.vectorLength=i,t.exports.getAngle=function(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))},t.exports.rotateVector=function(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e},t.exports.perpendicularFoot=r,t.exports.getDistancePointLine=function(e,t){var n=r(e,t);return i({x:n.x-e.x,y:n.y-e.y})},t.exports.getDistancePointPoint=function(e,t){return i({x:e.x-t.x,y:e.y-t.y})}},{}],100:[function(e,t,n){"use strict";var k=e("./GeometricUtil"),M=e("./GeometricUtil").getDistancePointPoint,P=e("./LineAttachmentUtil").getAttachment;function R(e,t,n,i){var r=n.segmentIndex,o=t.length-e.length;if(i.segmentMove){var a=i.segmentMove.segmentStartIndex,s=i.segmentMove.newSegmentStartIndex;return r===a?s:s<=r?r+o<s?s:r+o:r}if(i.bendpointMove){var c,l=i.bendpointMove.insert,u=i.bendpointMove.bendpointIndex;if(0===o)return r;if(u<=r&&(c=l?r+1:r-1),r<u)if(c=r,l&&"bendpoint"!==n.type&&u-1===r)D(t,u)<n.relativeLocation&&c++;return c}return 0===o?r:i.connectionStart?0===r?0:null:i.connectionEnd&&r===e.length-2?t.length-2:null}function D(e,t){var n=M(e[t-1],e[t]);return n/(n+M(e[t],e[t+1]))}function O(e,t){return[e[t],e[t+1]]}t.exports.findNewLabelLineStartIndex=R,t.exports.getLabelAdjustment=function(e,t,n,i){var r,o=0,a=0,s={x:(r=e).x+r.width/2,y:r.y+r.height/2},c=P(s,n),l=c.segmentIndex,u=R(n,t,c,i);if(null===u)return{x:o,y:a};if(u<0||u>t.length-2)return{x:o,y:a};var p,d,h,f,m,v,g,y=O(n,l),b=O(t,u),x=c.position,E=(m=x,v=M((f=y)[0],f[1]),g=M(f[0],m),0===v?0:g/v),w=(p=y,d=b,h=k.getAngle(p),k.getAngle(d)-h);if("bendpoint"===c.type){var $=t.length-n.length,_=c.bendpointIndex,S=n[_];if(-1!==t.indexOf(S))return{x:o,y:a};if(0===$){var C=t[_];return{x:C.x-c.position.x,y:C.y-c.position.y}}$<0&&0!==_&&_<n.length-1&&(E=D(n,_))}var A=(b[1].x-b[0].x)*E+b[0].x,T=(b[1].y-b[0].y)*E+b[0].y,j=k.rotateVector({x:s.x-x.x,y:s.y-x.y},w);return{x:o=A+j.x-s.x,y:a=T+j.y-s.y}}},{"./GeometricUtil":99,"./LineAttachmentUtil":101}],101:[function(e,t,n){"use strict";var m=Math.sqrt,v=Math.min,i=Math.max,r=Math.abs;function o(e){return Math.pow(e,2)}function g(e,t){return m(o(e.x-t.x)+o(e.y-t.y))}function y(r,o,e,t){var n=o.x-r.x,i=o.y-r.y,a=e.x-r.x,s=e.y-r.y,c=n*n+i*i,l=(n*a+i*s)/c,u=l*l-(a*a+s*s-t*t)/c;if(u<0&&-1e-6<u&&(u=0),u<0)return[];var p=m(u),d=-l+p,h=-l-p,f={x:r.x-n*d,y:r.y-i*d};return 0===u?[f]:[f,{x:r.x-n*h,y:r.y-i*h}].filter(function(e){return n=r,i=o,b((t=e).x,n.x,i.x)&&b(t.y,n.y,i.y);var t,n,i})}function b(e,t,n){return e>=v(t,n)-a&&e<=i(t,n)+a}t.exports.getAttachment=function(e,t){var n,i,r,o,a,s,c,l,u,p,d,h,f=0;for(f=0;f<t.length-1;f++){if(x(n=t[f],i=t[f+1])?s=[n]:(r=g(e,n),o=g(e,i),s=y(n,i,e,v(r,o))),s.length<1)throw new Error("expected between [1, 2] circle -> line intersections");1===s.length&&(c={type:"bendpoint",position:s[0],segmentIndex:f,bendpointIndex:x(n,s[0])?f:f+1}),2===s.length&&(d=s[0],h=s[1],c={type:"segment",position:a={x:(d.x+h.x)/2,y:(d.y+h.y)/2},segmentIndex:f,relativeLocation:g(n,a)/g(n,i)}),l=g(c.position,e),(!p||l<u)&&(p=c,u=l)}return p};var a=.1;function x(e,t){return r(e.x-t.x)<=a&&r(e.y-t.y)<=a}},{}],102:[function(e,t,n){"use strict";t.exports=function(e,t,n,i){var r,o,a,s;return 0==(r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y))?null:(o=e.y-n.y,a=e.x-n.x,s=((i.x-n.x)*o-(i.y-n.y)*a)/r,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}},{}],103:[function(e,t,n){"use strict";var f=e("lodash/collection/filter"),m=e("diagram-js/lib/util/Elements"),v=e("../util/LaneUtil").getLanesRoot,g=e("../util/LaneUtil").getChildLanes,y=e("../util/LaneUtil").LANE_INDENTATION;function i(e,t){this._modeling=e,this._spaceTool=t}i.$inject=["modeling","spaceTool"],(t.exports=i).prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,o=v(i),a=o===i,s=a?i:i.parent;g(s).length||n.createShape({type:"bpmn:Lane"},{x:i.x+y,y:i.y,width:i.width-y,height:i.height},s);var c=[];m.eachElement(o,function(e){return c.push(e),e===i?[]:f(e.children,function(e){return e!==i})});var l="top"===r?-120:120,u="top"===r?i.y:i.y+i.height,p=u+("top"===r?10:-10),d="top"===r?"n":"s",h=t.calculateAdjustments(c,"y",l,p);t.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:l},d),e.newLane=n.createShape({type:"bpmn:Lane"},{x:i.x+(a?y:0),y:u-("top"===r?120:0),width:i.width-(a?y:0),height:120},s)}},{"../util/LaneUtil":112,"diagram-js/lib/util/Elements":293,"lodash/collection/filter":358}],104:[function(e,t,n){"use strict";function i(e){this._moddle=e}i.$inject=["moddle"],(t.exports=i).prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)},i.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)}},{}],105:[function(e,t,n){"use strict";var f=e("../../../util/ModelUtil").is,m=e("../util/LaneUtil").getLanesRoot,r=e("../util/LaneUtil").computeLanesResize,v=e("diagram-js/lib/util/Elements").eachElement,g=e("diagram-js/lib/layout/LayoutUtil").asTRBL,y=e("diagram-js/lib/features/resize/ResizeUtil").substractTRBL;function i(e,t){this._modeling=e,this._spaceTool=t}i.$inject=["modeling","spaceTool"],(t.exports=i).prototype.preExecute=function(e){var t=e.shape,n=e.newBounds;!1!==e.balanced?this.resizeBalanced(t,n):this.resizeSpace(t,n)},i.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=r(e,t);n.resizeShape(e,t),i.forEach(function(e){n.resizeShape(e.shape,e.newBounds)})},i.prototype.resizeSpace=function(e,t){var n,i,r,o,a,s=this._spaceTool,c=g(e),l=g(t),u=y(l,c),p=m(e),d=[],h=[];v(p,function(e){return d.push(e),(f(e,"bpmn:Lane")||f(e,"bpmn:Participant"))&&h.push(e),e.children}),(u.bottom||u.top)&&(n=u.bottom||u.top,i=e.y+(u.bottom?e.height:0)+(u.bottom?-10:10),r=u.bottom?"s":"n",o=0<u.top||u.bottom<0?-n:n,a=s.calculateAdjustments(d,"y",o,i),s.makeSpace(a.movingShapes,a.resizingShapes,{x:0,y:n},r)),(u.left||u.right)&&(n=u.right||u.left,i=e.x+(u.right?e.width:0)+(u.right?-10:100),r=u.right?"e":"w",o=0<u.left||u.right<0?-n:n,a=s.calculateAdjustments(h,"x",o,i),s.makeSpace(a.movingShapes,a.resizingShapes,{x:n,y:0},r))}},{"../../../util/ModelUtil":140,"../util/LaneUtil":112,"diagram-js/lib/features/resize/ResizeUtil":250,"diagram-js/lib/layout/LayoutUtil":279,"diagram-js/lib/util/Elements":293}],106:[function(e,t,n){"use strict";var o=e("lodash/object/assign"),a=e("lodash/collection/forEach");function i(e){this._commandStack=e}i.$inject=["commandStack"],(t.exports=i).prototype.postExecute=function(e){var t=e.elements,n=e.colors||{fill:void 0,stroke:void 0},i=this,r={};"fill"in n&&o(r,{fill:n.fill}),"stroke"in n&&o(r,{stroke:n.stroke}),a(t,function(e){i._commandStack.execute("element.updateProperties",{element:e,properties:{di:r}})})},i.prototype.execute=function(e){},i.prototype.revert=function(e){}},{"lodash/collection/forEach":360,"lodash/object/assign":490}],107:[function(e,t,n){"use strict";var h=e("../util/LaneUtil").getChildLanes,f=e("../util/LaneUtil").LANE_INDENTATION;function i(e,t){this._modeling=e,this._translate=t}i.$inject=["modeling","translate"],(t.exports=i).prototype.preExecute=function(e){var t=this._modeling,n=this._translate,i=e.shape,r=e.count,o=h(i),a=o.length;if(r<a)throw new Error(n("more than {count} child lanes",{count:r}));var s,c,l,u,p,d=Math.round(i.height/r);for(p=0;p<r;p++)s=i.y+p*d,c=p===r-1?i.height-d*p:d,l={x:i.x+f,y:s,width:i.width-f,height:c},p<a?t.resizeShape(o[p],l):(u={type:"bpmn:Lane"},t.createShape(u,l,i))}},{"../util/LaneUtil":112}],108:[function(e,t,n){"use strict";var c=e("diagram-js/lib/util/Collections");function i(e,t){this._canvas=e,this._modeling=t}i.$inject=["canvas","modeling"],(t.exports=i).prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),o=r.businessObject,a=o.$parent,s=o.di;t.setRootElement(n,!0),c.add(a.rootElements,i),i.$parent=a,c.remove(a.rootElements,o),o.$parent=null,o.di=null,(s.bpmnElement=i).di=s,e.oldRoot=r},i.prototype.revert=function(e){var t=this._canvas,n=e.newRoot.businessObject,i=e.oldRoot,r=i.businessObject,o=n.$parent,a=n.di;t.setRootElement(i,!0),c.remove(o.rootElements,n),n.$parent=null,c.add(o.rootElements,r),r.$parent=o,n.di=null,(a.bpmnElement=r).di=a}},{"diagram-js/lib/util/Collections":290}],109:[function(e,t,n){"use strict";var c=e("../util/LaneUtil").collectLanes,l=e("../util/LaneUtil").getLanesRoot,u=e("../../../util/ModelUtil").is,i=e("diagram-js/lib/util/Collections"),p=e("diagram-js/lib/layout/LayoutUtil").asTRBL,d="flowNodeRef";function r(e){this._elementRegistry=e}r.$inject=["elementRegistry"],(t.exports=r).prototype.computeUpdates=function(e,t){var n={},r=[],i={},o=[];function a(e){n[e.id]||(o.push(e),n[e.id]=e)}function s(o){return o.parent?(e=l(o),i[e.id]||(i[e.id]=c(e)),i[e.id]).filter(function(e){return t=o,n=p(e),i=t.x+t.width/2,r=t.y+t.height/2,i>n.left&&i<n.right&&r>n.top&&r<n.bottom;var t,n,i,r}).map(function(e){return e.businessObject}):[];var e}return t.forEach(function(e){var t=l(e);t&&!n[t.id]&&(t.children.filter(function(e){return u(e,"bpmn:FlowNode")}).forEach(a),n[t.id]=t)}),e.forEach(a),o.forEach(function(e){var t=e.businessObject,n=t.get("lanes").slice(),i=s(e);r.push({flowNode:t,remove:n,add:i})}),t.forEach(function(e){var t=e.businessObject;e.parent||t.get(d).forEach(function(e){r.push({flowNode:e,remove:[t],add:[]})})}),r},r.prototype.execute=function(e){var t=e.updates;t||(t=e.updates=this.computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(e){var t=e.flowNode,n=t.get("lanes");e.remove.forEach(function(e){i.remove(n,e),i.remove(e.get(d),t)}),e.add.forEach(function(e){i.add(n,e),i.add(e.get(d),t)})})},r.prototype.revert=function(e){e.updates.forEach(function(e){var t=e.flowNode,n=t.get("lanes");e.add.forEach(function(e){i.remove(n,e),i.remove(e.get(d),t)}),e.remove.forEach(function(e){i.add(n,e),i.add(e.get(d),t)})})}},{"../../../util/ModelUtil":140,"../util/LaneUtil":112,"diagram-js/lib/layout/LayoutUtil":279,"diagram-js/lib/util/Collections":290}],110:[function(e,t,n){"use strict";var f=e("lodash/object/transform"),m=e("lodash/object/keys"),i=e("lodash/collection/forEach"),v=e("lodash/object/assign"),g=e("../../../util/ModelUtil").getBusinessObject,r=e("diagram-js/lib/util/Text"),y="default",b="id",x="di",c={width:0,height:0};function o(e,t,n,i){this._elementRegistry=e,this._moddle=t,this._translate=n,this._modeling=i,this._textUtil=new r}function E(e,t){return b in e&&e[b]!==t[b]}function w(n,e){i(e,function(e,t){n.set(t,e)})}function $(n,e){i(e,function(e,t){n.set(t,e)})}o.$inject=["elementRegistry","moddle","translate","modeling"],(t.exports=o).prototype.execute=function(e){var t=e.element,n=[t],i=this._translate;if(!t)throw new Error(i("element required"));var r,o,a,s,c,l=this._elementRegistry,u=this._moddle.ids,p=t.businessObject,d=(s=e.properties,c=v({},s),_.forEach(function(e){e in s&&(c[e]=g(c[e]))}),c),h=e.oldProperties||(r=p,a=m(o=d),f(a,function(e,t){var n,i;return e[t]=t!==x?r.get(t):(n=r.di,i=m(o.di),f(i,function(e,t){return e[t]=n.get(t),e},{})),e},{}));return E(d,p)&&(u.unclaim(p[b]),l.updateId(t,d[b]),u.claim(d[b],p)),y in d&&(d[y]&&n.push(l.get(d[y].id)),p[y]&&n.push(l.get(p[y].id))),"name"in d&&t.label&&(n.push(t.label),t.label.hidden=!d.name),x in d&&p.di&&$(p.di,d.di),w(p,d),e.oldProperties=h,e.changed=n},o.prototype.postExecute=function(e){var t=e.element.label,n=t&&g(t).name;if(n){var i,r,o,a,s=(i=t,r=n,o=this._textUtil,a=o.getDimensions(r,{box:{width:90,height:30,x:i.width/2+i.x,y:i.height/2+i.y},style:l}),{x:Math.round(i.x+i.width/2-a.width/2),y:Math.round(i.y),width:Math.ceil(a.width),height:Math.ceil(a.height)});this._modeling.resizeShape(t,s,c)}},o.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return x in i&&r.di&&$(r.di,i.di),w(r,i),E(n,r)&&(a.unclaim(n[b]),o.updateId(t,i[b]),a.claim(i[b],r)),e.changed};var _=["default"];var l={fontFamily:"Arial, sans-serif",fontSize:"11px"}},{"../../../util/ModelUtil":140,"diagram-js/lib/util/Text":307,"lodash/collection/forEach":360,"lodash/object/assign":490,"lodash/object/keys":493,"lodash/object/transform":499}],111:[function(e,t,n){t.exports={__init__:["modeling","bpmnUpdater"],__depends__:[e("./behavior"),e("../label-editing"),e("../rules"),e("../ordering"),e("../replace"),e("diagram-js/lib/command"),e("diagram-js/lib/features/tooltips"),e("diagram-js/lib/features/label-support"),e("diagram-js/lib/features/attach-support"),e("diagram-js/lib/features/selection"),e("diagram-js/lib/features/change-support"),e("diagram-js/lib/features/space-tool")],bpmnFactory:["type",e("./BpmnFactory")],bpmnUpdater:["type",e("./BpmnUpdater")],elementFactory:["type",e("./ElementFactory")],modeling:["type",e("./Modeling")],layouter:["type",e("./BpmnLayouter")],connectionDocking:["type",e("diagram-js/lib/layout/CroppingConnectionDocking")]}},{"../label-editing":72,"../ordering":115,"../replace":125,"../rules":127,"./BpmnFactory":73,"./BpmnLayouter":74,"./BpmnUpdater":75,"./ElementFactory":76,"./Modeling":77,"./behavior":98,"diagram-js/lib/command":148,"diagram-js/lib/features/attach-support":162,"diagram-js/lib/features/change-support":174,"diagram-js/lib/features/label-support":201,"diagram-js/lib/features/selection":260,"diagram-js/lib/features/space-tool":267,"diagram-js/lib/features/tooltips":271,"diagram-js/lib/layout/CroppingConnectionDocking":278}],112:[function(e,t,n){"use strict";var r=e("../../../util/ModelUtil").is,i=e("./ModelingUtil").getParent,p=e("diagram-js/lib/layout/LayoutUtil").asTRBL,o=e("diagram-js/lib/features/resize/ResizeUtil").substractTRBL,d=e("diagram-js/lib/features/resize/ResizeUtil").resizeTRBL,h=Math.abs;var a=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"];function f(e,t){return t=t||[],e.children.filter(function(e){r(e,"bpmn:Lane")&&(f(e,t),t.push(e))}),t}function m(e){return i(e,a)||e}t.exports.LANE_INDENTATION=30,t.exports.collectLanes=f,t.exports.getChildLanes=function(e){return e.children.filter(function(e){return r(e,"bpmn:Lane")})},t.exports.getLanesRoot=m,t.exports.computeLanesResize=function(a,e){var t,n=m(a),i=f(n,r(n,"bpmn:Process")?[]:[n]),s=p(a),c=p(e),l=(t=a,o(p(e),p(t))),u=[];return i.forEach(function(e){if(e!==a){var t=0,n=l.right,i=0,r=l.left,o=p(e);l.top&&(h(o.bottom-s.top)<10&&(i=c.top-o.bottom),h(o.top-s.top)<5&&(t=c.top-o.top)),l.bottom&&(h(o.top-s.bottom)<10&&(t=c.bottom-o.top),h(o.bottom-s.bottom)<5&&(i=c.bottom-o.bottom)),(t||n||i||r)&&u.push({shape:e,newBounds:d(e,{top:t,right:n,bottom:i,left:r})})}}),u}},{"../../../util/ModelUtil":140,"./ModelingUtil":113,"diagram-js/lib/features/resize/ResizeUtil":250,"diagram-js/lib/layout/LayoutUtil":279}],113:[function(e,t,n){"use strict";var i=e("lodash/collection/any"),r=e("../../../util/ModelUtil").is;function o(t,e){return i(e,function(e){return r(t,e)})}t.exports.isAny=o,t.exports.getParent=function(e,t){for("string"==typeof t&&(t=[t]);e=e.parent;)if(o(e,t))return e;return null}},{"../../../util/ModelUtil":140,"lodash/collection/any":356}],114:[function(e,t,n){"use strict";var i=e("inherits"),r=e("diagram-js/lib/features/ordering/OrderingProvider"),s=e("../modeling/util/ModelingUtil").isAny,c=e("lodash/array/findIndex"),l=e("lodash/collection/find");function o(e,o){r.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:5,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function a(e){var t=e.order;return t||(e.order=t=function(t){if(t.labelTarget)return{level:10};var e=l(n,function(e){return s(t,[e.type])});return e&&e.order||{level:1}}(e)),t}this.getOrdering=function(t,e){var n=a(t);n.containers&&(e=function(e,t,n){for(var i=t;i&&!s(i,n);)i=i.parent;if(!i)throw new Error(o("no parent for {element} in {parent}",{element:e.id,parent:t.id}));return i}(t,e,n.containers));var i=e.children.indexOf(t),r=c(e.children,function(e){return!(!t.labelTarget&&e.labelTarget)&&n.level<a(e).level});return-1!==r&&-1!==i&&i<r&&(r-=1),{index:r,parent:e}}}o.$inject=["eventBus","translate"],i(o,r),t.exports=o},{"../modeling/util/ModelingUtil":113,"diagram-js/lib/features/ordering/OrderingProvider":234,inherits:343,"lodash/array/findIndex":345,"lodash/collection/find":359}],115:[function(e,t,n){t.exports={__init__:["bpmnOrderingProvider"],__depends__:[e("diagram-js/lib/i18n/translate")],bpmnOrderingProvider:["type",e("./BpmnOrderingProvider")]}},{"./BpmnOrderingProvider":114,"diagram-js/lib/i18n/translate":275}],116:[function(e,t,n){"use strict";var p=e("lodash/object/assign");function i(e,t,n,i,r,o,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=a,this._translate=s,e.registerProvider(this)}(t.exports=i).$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],i.prototype.getPaletteEntries=function(e){var t={},s=this._create,c=this._elementFactory,n=this._spaceTool,i=this._lassoTool,r=this._handTool,o=this._globalConnect,l=this._translate;function a(n,e,t,i,r){function o(e){var t=c.createShape(p({type:n},r));r&&(t.businessObject.di.isExpanded=r.isExpanded),s.start(e,t)}var a=n.replace(/^bpmn\:/,"");return{group:e,className:t,title:i||l("Create {type}",{type:a}),action:{dragstart:o,click:o}}}function u(e,t){s.start(e,c.createParticipantShape(t))}return p(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:l("Activate the hand tool"),action:{click:function(e){r.activateHand(e)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:l("Activate the lasso tool"),action:{click:function(e){i.activateSelection(e)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:l("Activate the create/remove space tool"),action:{click:function(e){n.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:l("Activate the global connect tool"),action:{click:function(e){o.toggle(e)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":a("bpmn:StartEvent","event","bpmn-icon-start-event-none"),"create.intermediate-event":a("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",l("Create IntermediateThrowEvent/BoundaryEvent")),"create.end-event":a("bpmn:EndEvent","event","bpmn-icon-end-event-none"),"create.exclusive-gateway":a("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-xor"),"create.task":a("bpmn:Task","activity","bpmn-icon-task"),"create.data-object":a("bpmn:DataObjectReference","data-object","bpmn-icon-data-object"),"create.data-store":a("bpmn:DataStoreReference","data-store","bpmn-icon-data-store"),"create.subprocess-expanded":a("bpmn:SubProcess","activity","bpmn-icon-subprocess-expanded",l("Create expanded SubProcess"),{isExpanded:!0}),"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:l("Create Pool/Participant"),action:{dragstart:u,click:u}}}),t}},{"lodash/object/assign":490}],117:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/palette"),e("diagram-js/lib/features/create"),e("diagram-js/lib/features/space-tool"),e("diagram-js/lib/features/lasso-tool"),e("diagram-js/lib/features/hand-tool"),e("diagram-js/lib/i18n/translate"),e("../global-connect")],__init__:["paletteProvider"],paletteProvider:["type",e("./PaletteProvider")]}},{"../global-connect":65,"./PaletteProvider":116,"diagram-js/lib/features/create":184,"diagram-js/lib/features/hand-tool":195,"diagram-js/lib/features/lasso-tool":203,"diagram-js/lib/features/palette":240,"diagram-js/lib/features/space-tool":267,"diagram-js/lib/i18n/translate":275}],118:[function(e,t,n){"use strict";var s=e("../../util/ModelUtil").is,i=e("../../util/DiUtil").isEventSubProcess,c=e("../../util/ModelUtil").getBusinessObject,l=e("../../util/DiUtil").isExpanded,u=e("./util/TypeUtil").isDifferentType,p=e("lodash/collection/forEach"),d=e("lodash/collection/filter"),h=e("lodash/collection/reject"),f=e("../replace/ReplaceOptions");function r(e,t,n,i,r,o){this._popupMenu=e,this._modeling=t,this._moddle=n,this._bpmnReplace=i,this._rules=r,this._translate=o,this.register()}r.$inject=["popupMenu","modeling","moddle","bpmnReplace","rules","translate"],r.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},r.prototype.getEntries=function(r){var e,o=r.businessObject;if(!this._rules.allowed("shape.replace",{element:r}))return[];var a=u(r);return s(o,"bpmn:StartEvent")&&!i(o.$parent)?(e=d(f.START_EVENT,a),this._createEntries(r,e)):s(o,"bpmn:Participant")?(e=d(f.PARTICIPANT,function(e){return l(o)!==e.target.isExpanded}),this._createEntries(r,e)):s(o,"bpmn:StartEvent")&&i(o.$parent)?(e=d(f.EVENT_SUB_PROCESS_START_EVENT,function(e){var t=!1!==e.target.isInterrupting,n=c(r).isInterrupting===t;return a(e)||!a(e)&&!n}),this._createEntries(r,e)):s(o,"bpmn:EndEvent")?(e=d(f.END_EVENT,function(e){return!("bpmn:CancelEventDefinition"==e.target.eventDefinitionType&&!s(o.$parent,"bpmn:Transaction"))&&a(e)}),this._createEntries(r,e)):s(o,"bpmn:BoundaryEvent")?(e=d(f.BOUNDARY_EVENT,function(e){var t=e.target;if("bpmn:CancelEventDefinition"==t.eventDefinition&&!s(o.attachedToRef,"bpmn:Transaction"))return!1;var n=!1!==t.cancelActivity,i=o.cancelActivity==n;return a(e)||!a(e)&&!i}),this._createEntries(r,e)):s(o,"bpmn:IntermediateCatchEvent")||s(o,"bpmn:IntermediateThrowEvent")?(e=d(f.INTERMEDIATE_EVENT,a),this._createEntries(r,e)):s(o,"bpmn:Gateway")?(e=d(f.GATEWAY,a),this._createEntries(r,e)):s(o,"bpmn:Transaction")?(e=d(f.TRANSACTION,a),this._createEntries(r,e)):i(o)&&l(o)?(e=d(f.EVENT_SUB_PROCESS,a),this._createEntries(r,e)):s(o,"bpmn:SubProcess")&&l(o)?(e=d(f.SUBPROCESS_EXPANDED,a),this._createEntries(r,e)):s(o,"bpmn:AdHocSubProcess")&&!l(o)?(e=d(f.TASK,function(e){var t=e.target,n="bpmn:SubProcess"===t.type,i=!0===t.isExpanded;return u(r,t)&&(!n||i)}),this._createEntries(r,e)):s(o,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(r,f.SEQUENCE_FLOW):s(o,"bpmn:FlowNode")?(e=d(f.TASK,a),s(o,"bpmn:SubProcess")&&!l(o)&&(e=h(e,function(e){return"Sub Process (collapsed)"===e.label})),this._createEntries(r,e)):[]},r.prototype.getHeaderEntries=function(e){var t=[];return s(e,"bpmn:Activity")&&!i(e)&&(t=t.concat(this._getLoopEntries(e))),!s(e,"bpmn:SubProcess")||s(e,"bpmn:Transaction")||i(e)||t.push(this._getAdHocEntry(e)),t},r.prototype._createEntries=function(n,e){var i=[],r=this;return p(e,function(e){var t=r._createMenuEntry(e,n);i.push(t)}),i},r.prototype._createSequenceFlowEntries=function(t,e){var n=c(t),i=[],r=this._modeling,o=this._moddle,a=this;return p(e,function(e){switch(e.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(s(n.sourceRef,"bpmn:ExclusiveGateway")||s(n.sourceRef,"bpmn:InclusiveGateway")||s(n.sourceRef,"bpmn:ComplexGateway")||s(n.sourceRef,"bpmn:Activity"))&&i.push(a._createMenuEntry(e,t,function(){r.updateProperties(t.source,{default:n})}));break;case"replace-with-conditional-flow":!n.conditionExpression&&s(n.sourceRef,"bpmn:Activity")&&i.push(a._createMenuEntry(e,t,function(){var e=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(t,{conditionExpression:e})}));break;default:if(s(n.sourceRef,"bpmn:Activity")&&n.conditionExpression)return i.push(a._createMenuEntry(e,t,function(){r.updateProperties(t,{conditionExpression:void 0})}));if((s(n.sourceRef,"bpmn:ExclusiveGateway")||s(n.sourceRef,"bpmn:InclusiveGateway")||s(n.sourceRef,"bpmn:ComplexGateway")||s(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n)return i.push(a._createMenuEntry(e,t,function(){r.updateProperties(t.source,{default:void 0})}))}}),i},r.prototype._createMenuEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement;return n=n||function(){return r(t,e.target)},{label:i(e.label),className:e.className,id:e.actionName,action:n}},r.prototype._getLoopEntries=function(i){var r=this,e=this._translate;function t(e,t){var n;t.active?n=void 0:(n=r._moddle.create(t.options.loopCharacteristics),t.options.isSequential&&(n.isSequential=t.options.isSequential)),r._modeling.updateProperties(i,{loopCharacteristics:n})}var n,o,a,s=c(i).loopCharacteristics;return s&&(n=s.isSequential,o=void 0===s.isSequential,a=void 0!==s.isSequential&&!s.isSequential),[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:e("Parallel Multi Instance"),active:a,action:t,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:e("Sequential Multi Instance"),active:n,action:t,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:e("Loop"),active:o,action:t,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}]},r.prototype._getAdHocEntry=function(n){var e=this._translate,t=c(n),i=s(t,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement;return{id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:e("Ad-hoc"),active:i,action:function(e,t){return r(n,i?{type:"bpmn:SubProcess"}:{type:"bpmn:AdHocSubProcess"})}}},t.exports=r},{"../../util/DiUtil":138,"../../util/ModelUtil":140,"../replace/ReplaceOptions":124,"./util/TypeUtil":120,"lodash/collection/filter":358,"lodash/collection/forEach":360,"lodash/collection/reject":365}],119:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/popup-menu"),e("../replace")],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",e("./ReplaceMenuProvider")]}},{"../replace":125,"./ReplaceMenuProvider":118,"diagram-js/lib/features/popup-menu":242}],120:[function(e,t,n){"use strict";var l=e("../../../util/ModelUtil").getBusinessObject,u=e("../../../util/DiUtil").isExpanded;t.exports.isDifferentType=function(c){return function(e){var t=e.target,n=l(c),i=n.eventDefinitions&&n.eventDefinitions[0],r=n.$type===t.type,o=(i&&i.$type)===t.eventDefinitionType,a=n.triggeredByEvent===t.triggeredByEvent,s=void 0===t.isExpanded||t.isExpanded===u(n);return!(r&&o&&a&&s)}}},{"../../../util/DiUtil":138,"../../../util/ModelUtil":140}],121:[function(e,t,n){"use strict";var i=e("diagram-js/lib/command/CommandInterceptor"),r=e("inherits"),d=e("lodash/object/assign"),a=e("lodash/collection/forEach"),h=e("min-dom/lib/query"),f=e("tiny-svg/lib/attr"),o=250;function s(e,c,l,u,p){i.call(this,e),e.on("shape.move.move",o,function(e){var i,r,s,t,n=e.context,o=n.canExecute;n.visualReplacements||(n.visualReplacements={}),o.replacements?(t=(s=n).canExecute.replacements,a(t,function(e){var t=e.oldElementId,n={type:e.newElementType};if(!s.visualReplacements[t]){var i=c.get(t);d(n,{x:i.x,y:i.y});var r=l.createShape(n);u.addShape(r,i.parent);var o=h("[data-element-id="+i.id+"]",s.dragGroup);o&&f(o,{display:"none"});var a=p.addDragger(r,s.dragGroup);s.visualReplacements[t]=a,u.removeShape(r)}})):(r=(i=n).visualReplacements,a(r,function(e,t){var n=h("[data-element-id="+t+"]",i.dragGroup);n&&f(n,{display:"inline"}),e.remove(),r[t]&&delete r[t]}))})}s.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],r(s,i),t.exports=s},{"diagram-js/lib/command/CommandInterceptor":146,inherits:343,"lodash/collection/forEach":360,"lodash/object/assign":490,"min-dom/lib/query":512,"tiny-svg/lib/attr":536}],122:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/preview-support")],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",e("./BpmnReplacePreview")]}},{"./BpmnReplacePreview":121,"diagram-js/lib/features/preview-support":244}],123:[function(e,t,n){"use strict";var y=e("lodash/object/pick"),b=e("lodash/object/assign"),x=e("lodash/array/intersection"),E=e("lodash/collection/filter"),w=e("lodash/object/has"),$=e("../../util/ModelUtil").is,_=e("../../util/DiUtil").isExpanded,S=e("../../util/DiUtil").isEventSubProcess,i=e("../../util/model/ModelCloneUtils"),C=i.getProperties,A=i.IGNORED_PROPERTIES,r=e("../../util/model/ModelCloneHelper"),T=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function o(h,f,m,v,e){var g=new r(e);this.replaceElement=function(e,n,t){t=t||{};var i,r,o,a=n.type,s=e.businessObject;if($(s,"bpmn:SubProcess")&&"bpmn:SubProcess"===a&&(r=n,(o=w(i=e,"collapsed")?i.collapsed:!_(i))!==(w(r,"collapsed")||w(r,"isExpanded")?w(r,"collapsed")?r.collapsed:!r.isExpanded:o)&&(i.collapsed=o,1)))return v.toggleCollapse(e),e;var c=h.create(a),l={type:a,businessObject:c},u=C(s.$descriptor),p=C(c.$descriptor,!0),d=x(u,p);return b(c,y(n,T)),d=E(d,function(e){var t=e.replace(/bpmn:/,"");return void 0===c[e]&&("loopCharacteristics"===t?!S(c):("processRef"!==t||!1!==n.isExpanded)&&"triggeredByEvent"!==t&&"eventDefinitions"!==t&&-1===A.indexOf(t))}),c=g.clone(s,c,d),n.eventDefinitionType&&(l.eventDefinitionType=n.eventDefinitionType),$(s,"bpmn:Activity")&&($(s,"bpmn:SubProcess")?l.isExpanded=_(s):w(n,"isExpanded")&&(l.isExpanded=n.isExpanded),_(s)&&!$(s,"bpmn:Task")&&l.isExpanded&&(l.width=e.width,l.height=e.height)),$(s,"bpmn:Participant")&&(!0===n.isExpanded?c.processRef=h.create("bpmn:Process"):t.moveChildren=!1,l.width=e.width,l.height=e.height),c.name=s.name,($(s,"bpmn:ExclusiveGateway")||$(s,"bpmn:InclusiveGateway")||$(s,"bpmn:Activity"))&&($(c,"bpmn:ExclusiveGateway")||$(c,"bpmn:InclusiveGateway")||$(c,"bpmn:Activity"))&&(c.default=s.default),("fill"in s.di||"stroke"in s.di)&&b(l,{colors:y(s.di,["fill","stroke"])}),l=f.replaceElement(e,l,t),!1!==t.select&&m.select(l),l}}o.$inject=["bpmnFactory","replace","selection","modeling","eventBus"],t.exports=o},{"../../util/DiUtil":138,"../../util/ModelUtil":140,"../../util/model/ModelCloneHelper":142,"../../util/model/ModelCloneUtils":143,"lodash/array/intersection":348,"lodash/collection/filter":358,"lodash/object/assign":490,"lodash/object/has":492,"lodash/object/pick":498}],124:[function(e,t,n){"use strict";t.exports.START_EVENT=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],t.exports.INTERMEDIATE_EVENT=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition"}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition"}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],t.exports.END_EVENT=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],t.exports.GATEWAY=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],t.exports.SUBPROCESS_EXPANDED=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],t.exports.TRANSACTION=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],t.exports.EVENT_SUB_PROCESS=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}}],t.exports.TASK=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],t.exports.BOUNDARY_EVENT=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],t.exports.EVENT_SUB_PROCESS_START_EVENT=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],t.exports.SEQUENCE_FLOW=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],t.exports.PARTICIPANT=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:"Collapsed Pool",actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}]},{}],125:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/replace"),e("diagram-js/lib/features/selection")],bpmnReplace:["type",e("./BpmnReplace")]}},{"./BpmnReplace":123,"diagram-js/lib/features/replace":246,"diagram-js/lib/features/selection":260}],126:[function(e,t,n){"use strict";var i=e("lodash/collection/find"),r=e("lodash/collection/any"),o=e("lodash/collection/every"),a=e("lodash/collection/filter"),s=e("lodash/collection/forEach"),c=e("inherits"),l=e("../../util/ModelUtil").is,u=e("../modeling/util/ModelingUtil").isAny,p=e("../../util/ModelUtil").getBusinessObject,d=e("../../util/DiUtil").isExpanded,h=e("../../util/DiUtil").isEventSubProcess,f=e("../../util/DiUtil").isInterrupting,m=e("../../util/DiUtil").hasErrorEventDefinition,v=e("../../util/DiUtil").hasEscalationEventDefinition,g=e("../../util/DiUtil").hasCompensateEventDefinition,y=e("diagram-js/lib/features/rules/RuleProvider"),b=e("../snapping/BpmnSnappingUtil").getBoundaryAttachment;function x(e){y.call(this,e)}function E(e){return!e||k(e)}function w(e,t){return e===t}function $(e){for(var t=p(e);t&&!l(t,"bpmn:Process");){if(l(t,"bpmn:Participant"))return t.processRef||t;t=t.$parent}return t}function _(e){return l(e,"bpmn:TextAnnotation")}function S(e){return l(e,"bpmn:BoundaryEvent")&&T(e,"bpmn:CompensateEventDefinition")}function C(e){return p(e).isForCompensation}function A(e){var t=p(e);if(l(t,"bpmn:Participant"))return null;for(;t;)if(t=t.$parent,l(t,"bpmn:FlowElementsContainer"))return t;return t}function T(e,t){var n=p(e);return!!i(n.eventDefinitions||[],function(e){return l(e,t)})}function j(e,t){return(p(e).eventDefinitions||[]).every(function(e){return l(e,t)})}function k(e){return e.labelTarget}function M(e){return e.waypoints}function P(e,t){return-1!==function(e){for(var t=[];e;)(e=e.parent)&&t.push(e);return t}(t).indexOf(e)}function R(e,t,n){if(E(e)||E(t))return null;if(w(e,t))return!1;if(!l(n,"bpmn:DataAssociation")){if(V(e,t))return{type:"bpmn:MessageFlow"};if(z(e,t))return{type:"bpmn:SequenceFlow"}}var i=q(e,t);return i||(S(e)&&C(t)?{type:"bpmn:Association",associationDirection:"One"}:!!H(e,t)&&{type:"bpmn:Association"})}function D(e,t,n){return!(!k(e)||M(t))||!(l(t,"bpmn:Participant")&&!d(t))&&(l(e,"bpmn:Participant")?l(t,"bpmn:Process")||l(t,"bpmn:Collaboration"):l(e,"bpmn:Lane")?l(t,"bpmn:Participant")||l(t,"bpmn:Lane"):!l(e,"bpmn:BoundaryEvent")&&(l(e,"bpmn:FlowElement")?l(t,"bpmn:FlowElementsContainer")?d(t):u(t,["bpmn:Participant","bpmn:Lane"]):u(e,["bpmn:Artifact","bpmn:DataAssociation"])?u(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):!!l(e,"bpmn:MessageFlow")&&(l(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t)))}function O(e){return!k(e)&&l(e,"bpmn:BoundaryEvent")}function N(e){return l(e,"bpmn:Lane")}function B(e,t,n,i){if(Array.isArray(e)||(e=[e]),n)return!1;if(1!==e.length)return!1;var r,o=e[0];return!k(o)&&(!!(O(r=o)||l(r,"bpmn:IntermediateThrowEvent")&&!r.parent)&&(!t||!h(t)&&(!(!l(t,"bpmn:Activity")||C(t))&&(!(i&&!b(i,t))&&"attach"))))}function L(e,t,n){if(!t)return!1;var i={replacements:[]};return s(e,function(e){h(t)||l(e,"bpmn:StartEvent")&&"label"!==e.type&&D(e,t)&&(f(e)||i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"}),(m(e)||v(e)||g(e))&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"})),l(t,"bpmn:Transaction")||T(e,"bpmn:CancelEventDefinition")&&"label"!==e.type&&(l(e,"bpmn:EndEvent")&&D(e,t)&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:EndEvent"}),l(e,"bpmn:BoundaryEvent")&&B(e,t,null,n)&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:BoundaryEvent"}))}),!!i.replacements.length&&i}function I(e,t){return!r(e,O)&&(!r(e,N)&&(!t||e.every(function(e){return D(e,t)})))}function F(e,t,n,i){return!!t&&(k(t)?null:!w(n,t)&&((!n||!P(n,t))&&(D(e,t)||W(e,t,i))))}function U(e,t){return l(e,"bpmn:SubProcess")?!!d(e)&&(!t||100<=t.width&&80<=t.height):l(e,"bpmn:Lane")?!t||130<=t.width&&60<=t.height:l(e,"bpmn:Participant")?!t||250<=t.width&&50<=t.height:!!_(e)}function H(e,t){return!M(e)&&!M(t)&&(!(!S(e)||!C(t))||!P(t,e)&&!P(e,t)&&(n=t,i=_(e),r=_(n),(i||r)&&i!==r));var n,i,r}function V(e,t){return l(r=e,"bpmn:InteractionNode")&&!C(r)&&(!l(r,"bpmn:Event")||l(r,"bpmn:ThrowEvent")&&j(r,"bpmn:MessageEventDefinition"))&&(l(i=t,"bpmn:InteractionNode")&&!C(i)&&(!l(i,"bpmn:Event")||l(i,"bpmn:CatchEvent")&&j(i,"bpmn:MessageEventDefinition")))&&(n=t,!($(e)===$(n)));var n,i,r}function z(e,t){return l(s=e,"bpmn:FlowNode")&&!l(s,"bpmn:EndEvent")&&!h(s)&&!(l(s,"bpmn:IntermediateThrowEvent")&&T(s,"bpmn:LinkEventDefinition"))&&!S(s)&&!C(s)&&(l(a=t,"bpmn:FlowNode")&&!l(a,"bpmn:StartEvent")&&!l(a,"bpmn:BoundaryEvent")&&!h(a)&&!(l(a,"bpmn:IntermediateCatchEvent")&&T(a,"bpmn:LinkEventDefinition"))&&!C(a))&&(i=t,r=A(e),o=A(i),r&&r===o)&&!(l(e,"bpmn:EventBasedGateway")&&!(l(n=t,"bpmn:ReceiveTask")||l(n,"bpmn:IntermediateCatchEvent")&&(T(n,"bpmn:MessageEventDefinition")||T(n,"bpmn:TimerEventDefinition")||T(n,"bpmn:ConditionalEventDefinition")||T(n,"bpmn:SignalEventDefinition"))));var n,i,r,o,a,s}function q(e,t){return u(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&u(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!(!u(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])||!u(e,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function W(e,t,n){if(Array.isArray(e)){if(1!==e.length)return!1;e=e[0]}return u(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!k(t)&&l(e,"bpmn:FlowNode")&&!l(e,"bpmn:BoundaryEvent")&&D(e,t.parent)}function G(e,t){return e&&t&&-1!==e.indexOf(t)}function Y(e,t){return!(l(t,"bpmn:Lane")&&!G(e,t.parent))&&!(l(t,"bpmn:BoundaryEvent")&&!G(e,t.host))}c(x,y),x.$inject=["eventBus"],(t.exports=x).prototype.init=function(){this.addRule("connection.create",function(e){return R(e.source,e.target)}),this.addRule("connection.reconnectStart",function(e){var t=e.connection;return R(e.hover||e.source,t.target,t)}),this.addRule("connection.reconnectEnd",function(e){var t=e.connection;return R(t.source,e.hover||e.target,t)}),this.addRule("connection.updateWaypoints",function(e){return null}),this.addRule("shape.resize",function(e){return U(e.shape,e.newBounds)}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return B(n,t,null,i)||L(n,t,i)||I(n,t)||W(n,t,i)}),this.addRule(["shape.create","shape.append"],function(e){var t=e.target,n=e.shape,i=e.source,r=e.position;return B([n],t,i,r)||F(n,t,i,r)}),this.addRule("element.copy",function(e){return Y(e.collection,e.element)}),this.addRule("element.paste",function(e){var t=e.parent,n=e.element,i=e.position,r=e.source,o=e.target;return r||o?R(r,o):B([n],t,null,i)||F(n,t,null,i)}),this.addRule("elements.paste",function(e){return function(e,t){var n=e[0];if(l(t,"bpmn:Collaboration"))return o(n,function(e){return"bpmn:Participant"===e.type});if(l(t,"bpmn:Process"))return!(r(n,function(e){return"bpmn:Participant"===e.type})&&0<t.children.length);if(l(t,"bpmn:Participant")&&!d(t))return!1;if(l(t,"bpmn:FlowElementsContainer"))return d(t);return u(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"])}(e.tree,e.target)}),this.addRule(["elements.delete"],function(e){return a(e.elements,function(e){return!k(e)})})},x.prototype.canConnectMessageFlow=V,x.prototype.canConnectSequenceFlow=z,x.prototype.canConnectDataAssociation=q,x.prototype.canConnectAssociation=H,x.prototype.canMove=I,x.prototype.canAttach=B,x.prototype.canReplace=L,x.prototype.canDrop=D,x.prototype.canInsert=W,x.prototype.canCreate=F,x.prototype.canConnect=R,x.prototype.canResize=U,x.prototype.canCopy=Y},{"../../util/DiUtil":138,"../../util/ModelUtil":140,"../modeling/util/ModelingUtil":113,"../snapping/BpmnSnappingUtil":131,"diagram-js/lib/features/rules/RuleProvider":252,inherits:343,"lodash/collection/any":356,"lodash/collection/every":357,"lodash/collection/filter":358,"lodash/collection/find":359,"lodash/collection/forEach":360}],127:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/rules")],__init__:["bpmnRules"],bpmnRules:["type",e("./BpmnRules")]}},{"./BpmnRules":126,"diagram-js/lib/features/rules":254}],128:[function(e,t,n){"use strict";var i=e("lodash/collection/map"),r=e("lodash/collection/filter"),o=e("lodash/collection/sortBy"),a=e("../label-editing/LabelUtil");function s(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}function c(e){return 0<r(e,function(e){return!!e.matched}).length}function l(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return-1<r?(0!==r&&n.push({normal:i.substr(0,r)}),n.push({matched:i.substr(r,t.length)}),t.length+r<e.length&&n.push({normal:i.substr(t.length+r,e.length)})):n.push({normal:i}),n}(t.exports=s).$inject=["elementRegistry","searchPad","canvas"],s.prototype.find=function(t){var n=this._canvas.getRootElement(),e=this._elementRegistry.filter(function(e){return!e.labelTarget});return e=r(e,function(e){return e!==n}),e=i(e,function(e){return{primaryTokens:l(a.getLabel(e),t),secondaryTokens:l(e.id,t),element:e}}),e=r(e,function(e){return c(e.primaryTokens)||c(e.secondaryTokens)}),e=o(e,function(e){return a.getLabel(e.element)+e.element.id})}},{"../label-editing/LabelUtil":70,"lodash/collection/filter":358,"lodash/collection/map":363,"lodash/collection/sortBy":368}],129:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/search-pad")],__init__:["bpmnSearch"],bpmnSearch:["type",e("./BpmnSearchProvider")]}},{"./BpmnSearchProvider":128,"diagram-js/lib/features/search-pad":256}],130:[function(e,t,n){"use strict";var i=e("inherits"),c=Math.abs,l=e("lodash/collection/forEach"),u=e("lodash/collection/filter"),p=e("lodash/object/assign"),r=e("diagram-js/lib/util/Elements").getBBox,d=e("../../util/ModelUtil").is,h=e("../modeling/util/ModelingUtil").isAny,o=e("../../util/DiUtil").isExpanded,f=e("diagram-js/lib/features/snapping/Snapping"),a=e("diagram-js/lib/features/snapping/SnapUtil"),m=e("diagram-js/lib/layout/LayoutUtil").asTRBL,v=Math.round,g=a.mid,y=a.topLeft,b=a.bottomRight,x=a.isSnapped,E=a.setSnapped,w=e("./BpmnSnappingUtil").getBoundaryAttachment,$=e("./BpmnSnappingUtil").getParticipantSizeConstraints,_=e("../modeling/util/LaneUtil").getLanesRoot,S=1500;function s(e,r,s,i){f.call(this,e,r),e.on("create.start",function(e){var t=e.context,n=t.shape,i=r.getRootElement();d(n,"bpmn:Participant")&&d(i,"bpmn:Process")&&C(t,n,i.children)}),e.on(["create.move","create.end"],S,function(e){var t=e.context,n=t.shape,i=t.participantSnapBox;!x(e)&&i&&function(e,t,n,i){i=i||0;var r=t.width/2-i,o=t.height/2,a={x:n.x-r-i,y:n.y-o},s={x:n.x+r+i,y:n.y+o},c=e,l=b(e);a.x>=c.x?E(n,"x",c.x+i+r):s.x<=l.x&&E(n,"x",l.x-i-r);a.y>=c.y?E(n,"y",c.y+o):s.y<=l.y&&E(n,"y",l.y-o)}(i,n,e)}),e.on("shape.move.start",function(e){var t=e.context,n=t.shape,i=r.getRootElement();d(n,"bpmn:Participant")&&d(i,"bpmn:Process")&&C(t,n,i.children)}),e.on(["create.move","create.end","shape.move.move","shape.move.end"],S,function(e){var t,n,i,r=e.context,o=r.target,a=r.shape;o&&!x(e)&&(t=a,n=o,i=e,"attach"===s.canAttach([t],n,null,i))&&function(e,t,n){var i=m(n),r=w(e,n);/top/.test(r)?E(e,"y",i.top):/bottom/.test(r)&&E(e,"y",i.bottom);/left/.test(r)?E(e,"x",i.left):/right/.test(r)&&E(e,"x",i.right)}(e,0,o)}),e.on(["shape.move.hover","shape.move.move","shape.move.end","create.hover","create.move","create.end"],S,function(e){var t=e.context.shape,n=e.hover;d(n,"bpmn:Lane")&&!h(t,["bpmn:Lane","bpmn:Participant"])&&(e.hover=_(n),e.hoverGfx=i.getGraphics(e.hover))}),e.on(["connect.move","connect.hover","connect.end"],S,function(e){var t,n,i=e.context,r=i.source,o=i.target,a=(t=r,n=o,s.canConnect(t,n)||{});i.initialSourcePosition||(i.initialSourcePosition=i.sourcePosition),o&&"bpmn:SequenceFlow"===a.type?(i.sourcePosition=g(r),p(e,g(o))):i.sourcePosition=i.initialSourcePosition}),e.on(["create.move","shape.move.move"],function(e){var t=e.context,n=t.shape,i=t.target;if(d(n,"bpmn:Lane")&&h(i,["bpmn:Lane","bpmn:Participant"])){var r,o=u(i.children,function(e){return d(e,"bpmn:Lane")}),a=e.y,s=o.reduce(function(e,t){var n=m(t);return c(n.top-a)<30?e=p(e||{},{before:{element:t,y:n.top}}):c(n.bottom-a)<30?e=p(e||{},{after:{element:t,y:n.bottom}}):n.top<a&&n.bottom>a&&(e=c(n.top-a)>c(n.bottom-a)?p(e||{},{after:{element:t,y:n.bottom}}):p(e||{},{before:{element:t,y:n.top}})),e},!1);s||(r=m(i),s=c(r.top-a)<30?{before:{element:i,y:r.top}}:c(r.bottom-a)<30?{after:{element:i,y:r.bottom}}:{into:{element:i,y:(r.top+r.bottom)/2}}),s.before&&s.after?(console.log("insert between",s.before.element.id,"and",s.after.element.id),E(e,"x",s.before.element.x+s.before.element.width/2),E(e,"y",s.before.y)):s.after?(console.log("insert after",s.after.element.id),E(e,"x",s.after.element.x+s.after.element.width/2),E(e,"y",s.after.y)):s.before?(console.log("insert before",s.before.element.id),E(e,"x",s.before.element.x+s.before.element.width/2),E(e,"y",s.before.y)):s.into&&(console.log("insert into",s.into.element.id),E(e,"x",s.into.element.x+s.into.element.width/2),E(e,"y",s.into.y))}}),e.on("resize.start",S,function(e){var t=e.context,n=t.shape;d(n,"bpmn:SubProcess")&&o(n)&&(t.minDimensions={width:140,height:120}),d(n,"bpmn:Participant")&&(t.minDimensions={width:300,height:150}),(d(n,"bpmn:Lane")||d(n,"bpmn:Participant"))&&(t.resizeConstraints=$(n,t.direction,t.balanced)),d(n,"bpmn:TextAnnotation")&&(t.minDimensions={width:50,height:30})})}function C(e,t,n){if(n.length){var i=r(n.filter(function(e){return!e.labelTarget&&!e.waypoints}));i.x-=50,i.y-=20,i.width+=70,i.height+=40,t.width=Math.max(t.width,i.width),t.height=Math.max(t.height,i.height),e.participantSnapBox=i}}i(s,f),s.$inject=["eventBus","canvas","bpmnRules","elementRegistry"],(t.exports=s).prototype.initSnap=function(n){var e,t,i,r,o,a=n.context,s=n.shape;o=f.prototype.initSnap.call(this,n),d(s,"bpmn:Participant")&&o.setSnapLocations(["top-left","bottom-right","mid"]),s&&(e=g(s,n),t={width:s.width,height:s.height,x:isNaN(s.x)?v(e.x-s.width/2):s.x,y:isNaN(s.y)?v(e.y-s.height/2):s.y},i=y(t),r=b(t),o.setSnapOrigin("top-left",{x:i.x-n.x,y:i.y-n.y}),o.setSnapOrigin("bottom-right",{x:r.x-n.x,y:r.y-n.y}),l(s.outgoing,function(e){var t=e.waypoints[0];t=t.original||t,o.setSnapOrigin(e.id+"-docking",{x:t.x-n.x,y:t.y-n.y})}),l(s.incoming,function(e){var t=e.waypoints[e.waypoints.length-1];t=t.original||t,o.setSnapOrigin(e.id+"-docking",{x:t.x-n.x,y:t.y-n.y})}));var c=a.source;c&&o.addDefaultSnap("mid",g(c))},s.prototype.addTargetSnaps=function(r,e,t){d(e,"bpmn:BoundaryEvent")&&"label"!==e.type&&(t=t.parent),d(t,"bpmn:SequenceFlow")&&this.addTargetSnaps(r,e,t.parent);var n=this.getSiblings(e,t)||[];l(n,function(i){d(i,"bpmn:Lane")||(i.waypoints?l(i.waypoints,function(e,t){var n=i.waypoints[t+1];n&&(n.x!==e.x&&n.y!==e.y||r.add("mid",e))}):(r.add("mid",g(i)),d(i,"bpmn:Participant")&&(r.add("top-left",y(i)),r.add("bottom-right",b(i)))))}),l(e.incoming,function(e){-1===n.indexOf(e.source)&&r.add("mid",g(e.source));var t=e.waypoints[0];r.add(e.id+"-docking",t.original||t)}),l(e.outgoing,function(e){-1===n.indexOf(e.target)&&r.add("mid",g(e.target));var t=e.waypoints[e.waypoints.length-1];r.add(e.id+"-docking",t.original||t)})}},{"../../util/DiUtil":138,"../../util/ModelUtil":140,"../modeling/util/LaneUtil":112,"../modeling/util/ModelingUtil":113,"./BpmnSnappingUtil":131,"diagram-js/lib/features/snapping/SnapUtil":262,"diagram-js/lib/features/snapping/Snapping":263,"diagram-js/lib/layout/LayoutUtil":279,"diagram-js/lib/util/Elements":293,inherits:343,"lodash/collection/filter":358,"lodash/collection/forEach":360,"lodash/object/assign":490}],131:[function(e,t,n){"use strict";var i=e("diagram-js/lib/layout/LayoutUtil").getOrientation;t.exports.getBoundaryAttachment=function(e,t){var n=i(e,t,-15);return"intersect"!==n?n:null};var u=e("../../util/ModelUtil").is,p=e("diagram-js/lib/layout/LayoutUtil").asTRBL,d=e("../modeling/util/LaneUtil").collectLanes,h=e("../modeling/util/LaneUtil").getLanesRoot,f=Math.abs,r=Math.min,o=Math.max;function a(e,t,n,i){var r=e[t];e[t]=void 0===r?n:i(n,r)}function m(e,t,n){return a(e,t,n,r)}function v(e,t,n){return a(e,t,n,o)}var g=60,y=300,b=20,x=50,E=20,w=20;t.exports.getParticipantSizeConstraints=function(e,n,i){var t=h(e),r=!0,o=!0,a=d(t,[t]),s=p(e),c={},l={};return/e/.test(n)?l.right=s.left+y:/w/.test(n)&&(l.left=s.right-y),a.forEach(function(e){var t=p(e);/n/.test(n)&&(t.top<s.top-10&&(r=!1),i&&f(s.top-t.bottom)<10&&v(c,"top",t.top+g),f(s.top-t.top)<5&&m(l,"top",t.bottom-g)),/s/.test(n)&&(t.bottom>s.bottom+10&&(o=!1),i&&f(s.bottom-t.top)<10&&m(c,"bottom",t.bottom-g),f(s.bottom-t.bottom)<5&&v(l,"bottom",t.top+g))}),t.children.filter(function(e){return!e.hidden&&!e.waypoints&&(u(e,"bpmn:FlowElement")||u(e,"bpmn:Artifact"))}).forEach(function(e){var t=p(e);r&&/n/.test(n)&&m(l,"top",t.top-E),/e/.test(n)&&v(l,"right",t.right+b),o&&/s/.test(n)&&v(l,"bottom",t.bottom+w),/w/.test(n)&&m(l,"left",t.left-x)}),{min:l,max:c}}},{"../../util/ModelUtil":140,"../modeling/util/LaneUtil":112,"diagram-js/lib/layout/LayoutUtil":279}],132:[function(e,t,n){t.exports={__init__:["snapping"],snapping:["type",e("./BpmnSnapping")]}},{"./BpmnSnapping":130}],133:[function(e,t,n){"use strict";var i=e("lodash/object/assign"),p=e("lodash/collection/map"),r=e("../util/LabelUtil"),o=e("diagram-js/lib/util/Text"),d=e("../util/ModelUtil").is,h=r.hasExternalLabel,l=r.getExternalLabelBounds,f=e("../util/DiUtil").isExpanded,m=e("./Util").elementToString;function v(e,t){return i({id:e.id,type:e.$type,businessObject:e},t)}function a(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:m(n),referenced:m(t),property:i}))}function s(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textUtil=new o}s.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate"],(t.exports=s).prototype.add=function(e,t){var n,i,r,o=e.di,a=this._translate;if(d(o,"bpmndi:BPMNPlane"))n=this._elementFactory.createRoot(v(e)),this._canvas.setRootElement(n);else if(d(o,"bpmndi:BPMNShape")){var s=!f(e);i=t&&(t.hidden||t.collapsed);var c=e.di.bounds;n=this._elementFactory.createShape(v(e,{collapsed:s,hidden:i,x:Math.round(c.x),y:Math.round(c.y),width:Math.round(c.width),height:Math.round(c.height)})),d(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,n),this._canvas.addShape(n,t)}else{if(!d(o,"bpmndi:BPMNEdge"))throw new Error(a("unknown di {di} for element {semantic}",{di:m(o),semantic:m(e)}));var l=this._getSource(e),u=this._getTarget(e);i=t&&(t.hidden||t.collapsed),n=this._elementFactory.createConnection(v(e,{hidden:i,source:l,target:u,waypoints:(r=e.di.waypoint,p(r,function(e){return{x:e.x,y:e.y}}))})),d(e,"bpmn:DataAssociation")&&(t=null),this._canvas.addConnection(n,t)}return h(e)&&this.addLabel(e,n),this._eventBus.fire("bpmnElement.added",{element:n}),n},s.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:m(e)}));var r=this._elementRegistry.get(i.id),o=r&&r.attachers;if(!r)throw a(n,e,i,"attachedToRef");t.host=r,o||(r.attachers=o=[]),-1===o.indexOf(t)&&o.push(t)},s.prototype.addLabel=function(e,t){var n,i,r,o,a,s,c;return n=l(e,t),(i=e.name)&&(o=n,a=i,s=this._textUtil,c=s.getDimensions(a,{box:{width:90,height:30,x:o.width/2+o.x,y:o.height/2+o.y},style:u}),n={x:Math.round(o.x+o.width/2-c.width/2),y:Math.round(o.y),width:Math.ceil(c.width),height:Math.ceil(c.height)}),r=this._elementFactory.createLabel(v(e,{id:e.id+"_label",labelTarget:t,type:"label",hidden:t.hidden||!e.name,x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(r,t.parent)},s.prototype._getEnd=function(e,t){var n,i,r=e.$type,o=this._translate;if(i=e[t+"Ref"],"source"===t&&"bpmn:DataInputAssociation"===r&&(i=i&&i[0]),("source"===t&&"bpmn:DataOutputAssociation"===r||"target"===t&&"bpmn:DataInputAssociation"===r)&&(i=e.$parent),n=i&&this._getElement(i))return n;throw i?a(o,e,i,t+"Ref"):new Error(o("{semantic}#{side} Ref not specified",{semantic:m(e),side:t}))},s.prototype._getSource=function(e){return this._getEnd(e,"source")},s.prototype._getTarget=function(e){return this._getEnd(e,"target")},s.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};var u={fontFamily:"Arial, sans-serif",fontSize:"11px"}},{"../util/DiUtil":138,"../util/LabelUtil":139,"../util/ModelUtil":140,"./Util":136,"diagram-js/lib/util/Text":307,"lodash/collection/map":363,"lodash/object/assign":490}],134:[function(e,t,n){"use strict";var A=e("lodash/collection/filter"),T=e("lodash/collection/find"),j=e("lodash/collection/forEach"),i=e("object-refs"),k=e("./Util").elementToString,M=new i({name:"bpmnElement",enumerable:!0},{name:"di"});function P(e,t){return e.$instanceOf(t)}t.exports=function(u,p){var d={},h=[];function f(t,n){return function(e){t(e,n)}}function i(e){d[e.id]=e}function o(t,e){try{var n=t.di&&function(e,t){if(e.gfx)throw new Error(p("already rendered {element}",{element:k(e)}));return u.element(e,t)}(t,e);return i(t),n}catch(e){m(e.message,{element:t,error:e}),console.error(p("failed to import {element}",{element:k(t)})),console.error(e)}}function m(e,t){u.error(e,t)}function v(e){var t=e.bpmnElement;t?t.di?m(p("multiple DI elements defined for {element}",{element:k(t)}),{element:t}):(M.bind(t,"di"),t.di=e):m(p("no bpmnElement referenced in {element}",{element:k(e)}),{element:e})}function g(e){var t;v(t=e.plane),j(t.planeElement,n)}function n(e){v(e)}function y(e,t){S(e,t),l(e.ioSpecification,t),x(e.artifacts,t),i(e)}function b(e,t){o(e,t)}function a(e,t){o(e,t)}function r(e,t){o(e,t)}function s(e,t){o(e,t)}function c(e,t){o(e,t)}function x(e,t){j(e,function(e){P(e,"bpmn:Association")?h.push(function(){c(e,t)}):c(e,t)})}function l(e,t){e&&(j(e.dataInputs,f(r,t)),j(e.dataOutputs,f(s,t)))}function E(e,t){var n,i,r=o(e,t);P(e,"bpmn:SubProcess")&&(S(n=e,i=r||t),x(n.artifacts,i)),P(e,"bpmn:Activity")&&l(e.ioSpecification,t),h.push(function(){j(e.dataInputAssociations,f(a,t)),j(e.dataOutputAssociations,f(a,t))})}function w(e,t){o(e,t)}function $(e,t){var n,i=o(e,t);e.childLaneSet&&_(e.childLaneSet,i||t),j((n=e).flowNodeRef,function(e){var t=e.get("lanes");t&&t.push(n)})}function _(e,t){j(e.lanes,f($,t))}function S(e,t){var n,i,r;e.laneSets&&(n=e.laneSets,j(n,f(_,t))),i=e.flowElements,r=t,j(i,function(e){P(e,"bpmn:SequenceFlow")?h.push(function(){o(e,r)}):P(e,"bpmn:BoundaryEvent")?h.unshift(function(){o(e,r)}):P(e,"bpmn:FlowNode")?E(e,r):P(e,"bpmn:DataObject")||(P(e,"bpmn:DataStoreReference")?w(e,r):P(e,"bpmn:DataObjectReference")?w(e,r):m(p("unrecognized flowElement {element} in context {context}",{element:k(e),context:r?k(r.businessObject):"null"}),{element:e,context:r}))})}function C(e,t){var n=o(e,t),i=e.processRef;i&&y(i,n||t)}return{handleDefinitions:function(e,t){var n=e.diagrams;if(t&&-1===n.indexOf(t))throw new Error(p("diagram not part of bpmn:Definitions"));if(!t&&n&&n.length&&(t=n[0]),!t)throw new Error(p("no diagram to display"));g(t);var i=t.plane;if(!i)throw new Error(p("no plane for {element}",{element:k(t)}));var r=i.bpmnElement;if(!r){if(!(r=T(e.rootElements,function(e){return P(e,"bpmn:Process")||P(e,"bpmn:Collaboration")})))throw new Error(p("no process or collaboration to display"));m(p("correcting missing bpmnElement on {plane} to {rootElement}",{plane:k(i),rootElement:k(r)})),i.bpmnElement=r,v(i)}var o,a,s,c,l=(o=r,a=i,u.root(o,a));if(P(r,"bpmn:Process"))y(r,l);else{if(!P(r,"bpmn:Collaboration"))throw new Error(p("unsupported bpmnElement for {plane}: {rootElement}",{plane:k(i),rootElement:k(r)}));j((c=r).participants,f(C)),x(c.artifacts),h.push(function(){var e,t;e=c.messageFlows,j(e,f(b,t))}),s=e.rootElements,A(s,function(e){return!d[e.id]&&P(e,"bpmn:Process")&&e.laneSets}).forEach(f(y))}j(h,function(e){e()})}}}},{"./Util":136,"lodash/collection/filter":358,"lodash/collection/find":359,"lodash/collection/forEach":360,"object-refs":526}],135:[function(e,t,n){"use strict";var l=e("./BpmnTreeWalker");t.exports.importBpmnDiagram=function(e,t,n){var i,r,o=e.get("bpmnImporter"),a=e.get("eventBus"),s=e.get("translate"),c=[];a.fire("import.render.start",{definitions:t});try{r=t,new l({root:function(e){return o.add(e)},element:function(e,t){return o.add(e,t)},error:function(e,t){c.push({message:e,context:t})}},s).handleDefinitions(r)}catch(e){i=e}a.fire("import.render.complete",{error:i,warnings:c}),n(i,c)}},{"./BpmnTreeWalker":134}],136:[function(e,t,n){"use strict";t.exports.elementToString=function(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}},{}],137:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/i18n/translate")],bpmnImporter:["type",e("./BpmnImporter")]}},{"./BpmnImporter":133,"diagram-js/lib/i18n/translate":275}],138:[function(e,t,n){"use strict";var r=e("./ModelUtil").is,o=e("./ModelUtil").getBusinessObject,a=e("lodash/collection/forEach");function i(e,t){var n=o(e),i=!1;return n.eventDefinitions&&a(n.eventDefinitions,function(e){r(e,t)&&(i=!0)}),i}t.exports.isExpanded=function(e){return!r(e,"bpmn:CallActivity")&&(r(e,"bpmn:SubProcess")?!!o(e).di.isExpanded:!r(e,"bpmn:Participant")||!!o(e).processRef)},t.exports.isInterrupting=function(e){return e&&!1!==o(e).isInterrupting},t.exports.isEventSubProcess=function(e){return e&&!!o(e).triggeredByEvent},t.exports.hasEventDefinition=i,t.exports.hasErrorEventDefinition=function(e){return i(e,"bpmn:ErrorEventDefinition")},t.exports.hasEscalationEventDefinition=function(e){return i(e,"bpmn:EscalationEventDefinition")},t.exports.hasCompensateEventDefinition=function(e){return i(e,"bpmn:CompensateEventDefinition")}},{"./ModelUtil":140,"lodash/collection/forEach":360}],139:[function(e,t,n){"use strict";var a=e("lodash/object/assign"),i=e("./ModelUtil").is,s=t.exports.DEFAULT_LABEL_SIZE={width:90,height:20},c=t.exports.FLOW_LABEL_INDENT=15;function r(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=l(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),a=r.x,s=r.y;return Math.abs(o)<Math.PI/2?s-=c:a+=c,{x:a,y:s}}function l(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function u(e){return e.waypoints?r(e.waypoints):{x:e.x+e.width/2,y:e.y+e.height+s.height/2}}t.exports.hasExternalLabel=function(e){return i(e,"bpmn:Event")||i(e,"bpmn:Gateway")||i(e,"bpmn:DataStoreReference")||i(e,"bpmn:DataObjectReference")||i(e,"bpmn:SequenceFlow")||i(e,"bpmn:MessageFlow")},t.exports.getFlowLabelPosition=r,t.exports.getWaypointsMid=l,t.exports.getExternalLabelMid=u,t.exports.getExternalLabelBounds=function(e,t){var n,i,r,o=e.di.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(s.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=u(t),i=s),a({x:n.x-i.width/2,y:n.y-i.height/2},i)}},{"./ModelUtil":140,"lodash/object/assign":490}],140:[function(e,t,n){"use strict";function i(e){return e&&e.businessObject||e}t.exports.is=function(e,t){var n=i(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)},t.exports.getBusinessObject=i},{}],141:[function(e,t,n){"use strict";var i=e("min-dom/lib/domify"),r=e("min-dom/lib/delegate"),o=t.exports.BPMNIO_LOGO="iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC";function a(e){return e.join(";")}var s,c='<div class="bjs-powered-by-lightbox" style="'+a(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+a(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"])+'"></div><div class="notice" style="'+a(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"])+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px"><img src="data:image/png;base64,'+o+'"></a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>';t.exports.open=function(){s||(s=i(c),r.bind(s,".backdrop","click",function(e){document.body.removeChild(s)})),document.body.appendChild(s)}},{"min-dom/lib/delegate":508,"min-dom/lib/domify":509}],142:[function(e,t,n){"use strict";var p=e("lodash/collection/forEach"),i=e("lodash/collection/filter"),u=e("lodash/collection/any"),r=e("lodash/collection/sortBy"),d=e("lodash/lang/isArray"),o=e("./ModelCloneUtils").IGNORED_PROPERTIES;function a(e){this._eventBus=e}(t.exports=a).prototype.clone=function(s,c,e){var l={newElement:c,hasNestedProperty:!1};return e=r(e,function(e){return"bpmn:extensionElements"===e}),p(e,function(e){var t,n,i,r=s.get(e),o=c.get(e),a=c.$model.getPropertyDescriptor(c,e);o===r||a&&(a.isId||a.isReference)||(i=r,u(["boolean","string","number"],function(e){return typeof i===e})||null===r?c.set(e,r):d(r)?p(r,function(e){var t;l.refTopLevelProperty=e,t=this._deepClone(e,l),l.hasNestedProperty&&(t.$parent=c,o.push(t)),l.hasNestedProperty=!1},this):(n=e.replace(/bpmn:/,""),l.refTopLevelProperty=r,t=this._deepClone(r,l),l.hasNestedProperty&&(c[n]=t),l.hasNestedProperty=!1))},this),c},a.prototype._deepClone=function(s,c){var l=this._eventBus,u=s.$model.create(s.$type),e=i(Object.keys(s),function(e){var t=u.$model.getPropertyDescriptor(u,e);return(!t||!t.isId&&!t.isReference)&&(-1===o.indexOf(e)&&"$type"!==e)});return e.length||(c.hasNestedProperty=!0),p(e,function(a){void 0!==s[a]&&(s[a].$type||d(s[a]))?d(s[a])?(u[a]=[],p(s[a],function(e){var t,n=s.$model.getTypeDescriptor(e.$type);if(n){var i,r,o;if(!l.fire("property.clone",{newElement:c.newElement,refTopLevelProperty:c.refTopLevelProperty,propertyDescriptor:n})&&"bpmn:ExtensionElements"===s.$type&&n.meta&&n.meta.allowedIn&&(i=n,r=c.newElement.$type,(1!==(o=i.meta.allowedIn).length||"*"!==o[0])&&-1===o.indexOf(r)))return!1;((t=this._deepClone(e,c)).$parent=u)[a]||(u[a]=[]),c.hasNestedProperty=!0,u[a].push(t)}},this)):s[a].$type&&(u[a]=this._deepClone(s[a],c),u[a]&&(c.hasNestedProperty=!0,u[a].$parent=u)):(c.hasNestedProperty=!0,u[a]=s[a])},this),u}},{"./ModelCloneUtils":143,"lodash/collection/any":356,"lodash/collection/filter":358,"lodash/collection/forEach":360,"lodash/collection/sortBy":368,"lodash/lang/isArray":480}],143:[function(e,t,n){"use strict";var i=e("lodash/collection/forEach");t.exports.IGNORED_PROPERTIES=["lanes","incoming","outgoing","artifacts","default","flowElements"],t.exports.getProperties=function(e,t){var n=[];return i(e.properties,function(e){t&&e.default||n.push(e.ns.name)}),n}},{"lodash/collection/forEach":360}],144:[function(e,t,n){t.exports=e("./lib/Diagram")},{"./lib/Diagram":145}],145:[function(i,e,t){"use strict";var n=i("didi");function r(e){var i=[],r=[];function o(e){return 0<=i.indexOf(e)}e.forEach(function e(t){var n;o(t)||((t.__depends__||[]).forEach(e),o(t)||(n=t,i.push(n),(t.__init__||[]).forEach(function(e){r.push(e)})))});var t=new n.Injector(i);return r.forEach(function(e){try{t["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}}),t}function o(e,t){var n;this.injector=t=t||r([{config:["value",n=(n=e)||{}]},i("./core")].concat(n.modules||[])),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}(e.exports=o).prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},o.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},{"./core":154,didi:335}],146:[function(e,t,n){"use strict";var i=e("lodash/collection/forEach"),u=e("lodash/lang/isFunction"),p=e("lodash/lang/isArray"),d=e("lodash/lang/isNumber");function r(e){this._eventBus=e}r.$inject=["eventBus"],(t.exports=r).prototype.on=function(e,r,o,a,s,c){if((u(r)||d(r))&&(c=s,s=a,a=o,o=r,r=null),u(o)&&(c=s,s=a,a=o,o=1e3),"object"==typeof s&&(c=s,s=!1),!u(a))throw new Error("handlerFn must be a function");p(e)||(e=[e]);var l=this._eventBus;i(e,function(e){var t,n,i=["commandStack",e,r].filter(function(e){return e}).join(".");l.on(i,o,s?(t=a,n=c,function(e){return t.call(n||null,e.context,e.command,e)}):a,c)})};i(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],function(o){r.prototype[o]=function(e,t,n,i,r){(u(e)||d(e))&&(r=i,i=n,n=t,t=e,e=null),this.on(e,o,t,n,i,r)}})},{"lodash/collection/forEach":360,"lodash/lang/isArray":480,"lodash/lang/isFunction":482,"lodash/lang/isNumber":484}],147:[function(e,t,n){"use strict";var i=e("lodash/array/unique"),r=e("lodash/lang/isArray"),s=e("lodash/object/assign"),c=e("../core/EventBus").Event;function o(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}o.$inject=["eventBus","injector"],(t.exports=o).prototype.execute=function(e,t){if(!e)throw new Error("command required");var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},o.prototype.canExecute=function(e,t){var n={command:e,context:t},i=this._getHandler(e),r=this._fire(e,"canExecute",n);if(void 0===r){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r},o.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed")},o.prototype.undo=function(){var e,t=this._getUndoAction();if(t){for(this._pushAction(t);t&&(this._internalUndo(t),(e=this._getUndoAction())&&e.id===t.id);)t=e;this._popAction()}},o.prototype.redo=function(){var e,t=this._getRedoAction();if(t){for(this._pushAction(t);t&&(this._internalExecute(t,!0),(e=this._getRedoAction())&&e.id===t.id);)t=e;this._popAction()}},o.prototype.register=function(e,t){this._setHandler(e,t)},o.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)},o.prototype.canUndo=function(){return!!this._getUndoAction()},o.prototype.canRedo=function(){return!!this._getRedoAction()},o.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},o.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},o.prototype._internalUndo=function(e){var t=this,n=e.command,i=e.context,r=this._getHandler(n);this._atomicDo(function(){t._fire(n,"revert",e),r.revert&&t._markDirty(r.revert(i)),t._revertedAction(e),t._fire(n,"reverted",e)})},o.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var i,r,o,a=t?[e+"."+t,t]:[e];for(n=s(new c,n),i=0;(r=a[i])&&(o=this._eventBus.fire("commandStack."+r,n),!n.cancelBubble);i++);return o},o.prototype._createId=function(){return this._uid++},o.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},o.prototype._internalExecute=function(e,t){var n=this,i=e.command,r=e.context,o=this._getHandler(i);if(!o)throw new Error("no command handler registered for <"+i+">");this._pushAction(e),t||(this._fire(i,"preExecute",e),o.preExecute&&o.preExecute(r),this._fire(i,"preExecuted",e)),this._atomicDo(function(){n._fire(i,"execute",e),o.execute&&n._markDirty(o.execute(r)),n._executedAction(e,t),n._fire(i,"executed",e)}),t||(this._fire(i,"postExecute",e),o.postExecute&&o.postExecute(r),this._fire(i,"postExecuted",e)),this._popAction(e)},o.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)},o.prototype._popAction=function(){var e=this._currentExecution,t=e.actions,n=e.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:i(n)}),n.length=0,this._fire("changed"))},o.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=r(e)?e:[e],t.dirty=t.dirty.concat(e))},o.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},o.prototype._revertedAction=function(e){this._stackIdx--},o.prototype._getHandler=function(e){return this._handlerMap[e]},o.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t}},{"../core/EventBus":152,"lodash/array/unique":352,"lodash/lang/isArray":480,"lodash/object/assign":490}],148:[function(e,t,n){t.exports={commandStack:["type",e("./CommandStack")]}},{"./CommandStack":147}],149:[function(e,t,n){"use strict";var i=e("lodash/lang/isNumber"),p=e("lodash/object/assign"),r=e("lodash/collection/forEach"),o=e("lodash/collection/every"),c=e("lodash/function/debounce"),a=e("lodash/collection/reduce"),s=e("../util/Collections"),l=e("../util/Elements"),u=e("tiny-svg/lib/append"),d=e("tiny-svg/lib/attr"),h=e("tiny-svg/lib/classes"),f=e("tiny-svg/lib/create"),m=e("tiny-svg/lib/transform"),v=e("tiny-svg/lib/geometry").createMatrix;function g(e,t){return Math.round(e*t)/t}function y(e){return i(e)?e+"px":e}function b(e,t,n){var i=f("g");h(i).add(t);var r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]),i}var x={shape:["x","y","width","height"],connection:["waypoints"]};function E(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._init(e||{})}function w(e,t){var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}E.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],(t.exports=E).prototype._init=function(e){var t,n,i,r=this._eventBus,o=this._container=(n=(t=p({},{width:"100%",height:"100%"},t=e)).container||document.body,(i=document.createElement("div")).setAttribute("class","djs-container"),p(i.style,{position:"relative",overflow:"hidden",width:y(t.width),height:y(t.height)}),n.appendChild(i),i),a=this._svg=f("svg");d(a,{width:"100%",height:"100%"}),u(o,a);var s=this._viewport=b(a,"viewport");this._layers={},!1!==e.deferUpdate&&(this._viewboxChanged=c(this._viewboxChanged,300)),r.on("diagram.init",function(){r.fire("canvas.init",{svg:a,viewport:s})},this),r.on("diagram.destroy",500,this._destroy,this),r.on("diagram.clear",500,this._clear,this)},E.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},E.prototype._clear=function(){var n=this;this._elementRegistry.getAll().forEach(function(e){var t=l.getType(e);"root"===t?n.setRootElement(null,!0):n._removeElement(e,t)}),delete this._cachedViewbox},E.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},E.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");var n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},E.prototype._createLayer=function(e,n){n||(n=0);var t=a(this._layers,function(e,t){return n>=t.index&&e++,e},0);return{group:b(this._viewport,"layer-"+e,t),index:n}},E.prototype.getContainer=function(){return this._container},E.prototype._updateMarker=function(e,t,n){var i;e.id||(e=this._elementRegistry.get(e)),(i=this._elementRegistry._elements[e.id])&&(r([i.gfx,i.secondaryGfx],function(e){e&&(n?h(e).add(t):h(e).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))},E.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},E.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},E.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));var n=this.getGraphics(e);return h(n).has(t)},E.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},E.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},E.prototype.setRootElement=function(e,t){e&&this._ensureValid("root",e);var n=this._rootElement,i=this._elementRegistry,r=this._eventBus;if(n){if(!t)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:n}),r.fire("root.removed",{element:n}),i.remove(n)}if(e){var o=this.getDefaultLayer();r.fire("root.add",{element:e}),i.add(e,o,this._svg),r.fire("root.added",{element:e,gfx:o})}return this._rootElement=e},E.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=x[e];if(!o(n,function(e){return void 0!==t[e]}))throw new Error("must supply { "+n.join(", ")+" } with "+e)},E.prototype._setParent=function(e,t,n){s.add(t.children,e,n),e.parent=t},E.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();var r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);var a=o.create(e,t);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+".added",{element:t,gfx:a}),t},E.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},E.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},E.prototype._removeElement=function(e,t){var n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+".remove",{element:e}),i.remove(e),s.remove(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},E.prototype.removeShape=function(e){return this._removeElement(e,"shape")},E.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},E.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},E.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},E.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},E.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;var e,n,i,r,o,a=this._viewport,s=this.getSize();if(!t){e=this.getDefaultLayer().getBBox();var c=m(a);return n=c?c.matrix:v(),i=g(n.a,1e3),r=g(-n.e||0,1e3),o=g(-n.f||0,1e3),t=this._cachedViewbox={x:r?r/i:0,y:o?o/i:0,width:s.width/i,height:s.height/i,scale:i,inner:{width:e.width,height:e.height,x:e.x,y:e.y},outer:s}}return this._changeViewbox(function(){i=Math.min(s.width/t.width,s.height/t.height);var e=this._svg.createSVGMatrix().scale(i).translate(-t.x,-t.y);m(a,e)}),t},E.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=p({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),w(t,n)}),{x:n.e,y:n.f}},E.prototype.zoom=function(e,t){return e?"fit-viewport"===e?this._fitViewport(t):(this._changeViewbox(function(){"object"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),g(i.a,1e3)):this.viewbox(e).scale;var n,i},E.prototype._fitViewport=function(e){var t,n,i=this.viewbox(),r=i.outer,o=i.inner;return 0<=o.x&&0<=o.y&&o.x+o.width<=r.width&&o.y+o.height<=r.height&&!e?n={x:0,y:0,width:Math.max(o.width+o.x,r.width),height:Math.max(o.height+o.y,r.height)}:(t=Math.min(1,r.width/o.width,r.height/o.height),n={x:o.x+(e?o.width/2-r.width/t/2:0),y:o.y+(e?o.height/2-r.height/t/2:0),width:r.width/t,height:r.height/t}),this.viewbox(n),this.viewbox(!1).scale},E.prototype._setZoom=function(e,t){var n,i,r,o,a=this._svg,s=this._viewport,c=a.createSVGMatrix(),l=a.createSVGPoint(),u=(i=s.getCTM()).a;return t?(n=p(l,t).matrixTransform(i.inverse()),r=c.translate(n.x,n.y).scale(1/u*e).translate(-n.x,-n.y),o=i.multiply(r)):o=c.scale(e),w(this._viewport,o),o},E.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},E.prototype.getAbsoluteBBox=function(e){var t,n=this.viewbox();e.waypoints?t=this.getGraphics(e).getBBox():t=e;return{x:t.x*n.scale-n.x*n.scale,y:t.y*n.scale-n.y*n.scale,width:t.width*n.scale,height:t.height*n.scale}},E.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")}},{"../util/Collections":290,"../util/Elements":293,"lodash/collection/every":357,"lodash/collection/forEach":360,"lodash/collection/reduce":364,"lodash/function/debounce":371,"lodash/lang/isNumber":484,"lodash/object/assign":490,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/classes":537,"tiny-svg/lib/create":540,"tiny-svg/lib/geometry":541,"tiny-svg/lib/transform":544}],150:[function(e,t,n){"use strict";var i=e("../model"),r=e("lodash/object/assign");function o(){this._uid=12}(t.exports=o).prototype.createRoot=function(e){return this.create("root",e)},o.prototype.createLabel=function(e){return this.create("label",e)},o.prototype.createShape=function(e){return this.create("shape",e)},o.prototype.createConnection=function(e){return this.create("connection",e)},o.prototype.create=function(e,t){return(t=r({},t||{})).id||(t.id=e+"_"+this._uid++),i.create(e,t)}},{"../model":281,"lodash/object/assign":490}],151:[function(e,t,n){"use strict";var r="data-element-id",o=e("tiny-svg/lib/attr");function i(e){this._elements={},this._eventBus=e}i.$inject=["eventBus"],(t.exports=i).prototype.add=function(e,t,n){var i=e.id;this._validateId(i),o(t,r,i),n&&o(n,r,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},i.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(o(i.gfx,r,""),i.secondaryGfx&&o(i.secondaryGfx,r,""),delete t[n])},i.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},i.prototype.get=function(e){var t;t="string"==typeof e?e:e&&o(e,r);var n=this._elements[t];return n&&n.element},i.prototype.filter=function(n){var i=[];return this.forEach(function(e,t){n(e,t)&&i.push(e)}),i},i.prototype.getAll=function(){return this.filter(function(e){return e})},i.prototype.forEach=function(r){var o=this._elements;Object.keys(o).forEach(function(e){var t=o[e],n=t.element,i=t.gfx;return r(n,i)})},i.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},i.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}},{"tiny-svg/lib/attr":536}],152:[function(e,t,n){"use strict";var s=e("lodash/lang/isFunction"),c=e("lodash/lang/isArray"),l=e("lodash/lang/isNumber"),u=e("lodash/function/bind"),i=e("lodash/object/assign"),p=Array.prototype.slice;function r(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function d(){}(t.exports=r).prototype.on=function(e,t,n,i){if(e=c(e)?e:[e],s(t)&&(i=n,n=t,t=1e3),!l(t))throw new Error("priority must be a number");var r=n;i&&((r=u(n,i)).__fn=n.__fn||n);var o=this,a={priority:t,callback:r};e.forEach(function(e){o._addListener(e,a)})},r.prototype.once=function(e,t,n,i){var r=this;if(s(t)&&(i=n,n=t,t=1e3),!l(t))throw new Error("priority must be a number");function o(){return r.off(e,o),n.apply(i,arguments)}o.__fn=n,this.on(e,t,o)},r.prototype.off=function(e,t){var n,i,r,o=this._getListeners(e);if(t)for(r=o.length-1;n=o[r];r--)(i=n.callback)!==t&&i.__fn!==t||o.splice(r,1);else o.length=0},r.prototype.fire=function(e,t){var n,i,r,o;if(o=p.call(arguments),"object"==typeof e&&(e=(n=e).type),!e)throw new Error("no event type specified");if(i=this._listeners[e]){t instanceof d?n=t:(n=new d).init(t);var a=(o[0]=n).type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==a&&(n.type=a)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},r.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},r.prototype._destroy=function(){this._listeners={}},r.prototype._invokeListeners=function(e,t,n){var i,r,o;for(i=0;(r=n[i])&&!e.cancelBubble;i++)o=this._invokeListener(e,t,r);return o},r.prototype._invokeListener=function(e,t,n){var i,r,o;try{r=n.callback,o=t,void 0!==(i=r.apply(null,o))&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e}return i},r.prototype._addListener=function(e,t){var n,i,r=this._getListeners(e);for(i=0;n=r[i];i++)if(n.priority<t.priority)return void r.splice(i,0,t);r.push(t)},r.prototype._getListeners=function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t},(t.exports.Event=d).prototype.stopPropagation=function(){this.cancelBubble=!0},d.prototype.preventDefault=function(){this.defaultPrevented=!0},d.prototype.init=function(e){i(this,e||{})}},{"lodash/function/bind":370,"lodash/lang/isArray":480,"lodash/lang/isFunction":482,"lodash/lang/isNumber":484,"lodash/object/assign":490}],153:[function(e,t,n){"use strict";var i=e("lodash/collection/forEach"),r=e("lodash/collection/reduce"),o=e("../util/GraphicsUtil"),a=e("../util/SvgTransformUtil").translate,s=e("min-dom/lib/clear"),c=e("tiny-svg/lib/append"),l=e("tiny-svg/lib/attr"),u=e("tiny-svg/lib/classes"),p=e("tiny-svg/lib/create"),d=e("tiny-svg/lib/remove");function h(e,t){this._eventBus=e,this._elementRegistry=t}h.$inject=["eventBus","elementRegistry"],(t.exports=h).prototype._getChildren=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=o.getChildren(n))||(t=p("g"),u(t).add("djs-children"),c(n.parentNode,t)):t=n,t},h.prototype._clear=function(e){var t=o.getVisual(e);return s(t),t},h.prototype._createContainer=function(e,t){var n=p("g");u(n).add("djs-group"),c(t,n);var i=p("g");u(i).add("djs-element"),u(i).add("djs-"+e),c(n,i);var r=p("g");return u(r).add("djs-visual"),c(i,r),i},h.prototype.create=function(e,t){var n=this._getChildren(t.parent);return this._createContainer(e,n)},h.prototype.updateContainments=function(e){var t,n=this,o=this._elementRegistry;t=r(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),i(t,function(e){var r=n._getChildren(e),t=e.children;t&&i(t.slice().reverse(),function(e){var t,n,i=o.getGraphics(e);t=i.parentNode,(n=r).insertBefore(t,n.firstChild)})})},h.prototype.drawShape=function(e,t){return this._eventBus.fire("render.shape",{gfx:e,element:t})},h.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},h.prototype.drawConnection=function(e,t){return this._eventBus.fire("render.connection",{gfx:e,element:t})},h.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},h.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if("shape"===e)this.drawShape(i,t),a(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(i,t)}t.hidden?l(n,"display","none"):l(n,"display","block")}},h.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);d(t.parentNode)}},{"../util/GraphicsUtil":296,"../util/SvgTransformUtil":306,"lodash/collection/forEach":360,"lodash/collection/reduce":364,"min-dom/lib/clear":506,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/classes":537,"tiny-svg/lib/create":540,"tiny-svg/lib/remove":543}],154:[function(e,t,n){t.exports={__depends__:[e("../draw")],__init__:["canvas"],canvas:["type",e("./Canvas")],elementRegistry:["type",e("./ElementRegistry")],elementFactory:["type",e("./ElementFactory")],eventBus:["type",e("./EventBus")],graphicsFactory:["type",e("./GraphicsFactory")]}},{"../draw":158,"./Canvas":149,"./ElementFactory":150,"./ElementRegistry":151,"./EventBus":152,"./GraphicsFactory":153}],155:[function(e,t,n){"use strict";var i=1e3;function r(e,t){var o=this;t=t||i,e.on(["render.shape","render.connection"],t,function(e,t){var n=e.type,i=t.element,r=t.gfx;if(o.canRender(i))return"render.shape"===n?o.drawShape(r,i):o.drawConnection(r,i)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(o.canRender(t))return"render.getShapePath"===e.type?o.getShapePath(t):o.getConnectionPath(t)})}r.prototype.canRender=function(){},r.prototype.drawShape=function(){},r.prototype.drawConnection=function(){},r.prototype.getShapePath=function(){},r.prototype.getConnectionPath=function(){},t.exports=r},{}],156:[function(e,t,n){"use strict";var i=e("inherits"),r=e("./BaseRenderer"),o=e("../util/RenderUtil"),a=o.componentsToPath,s=o.createLine,c=e("tiny-svg/lib/append"),l=e("tiny-svg/lib/attr"),u=e("tiny-svg/lib/create"),p=1;function d(e,t){r.call(this,e,p),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2})}i(d,r),d.prototype.canRender=function(){return!0},d.prototype.drawShape=function(e,t){var n=u("rect");return l(n,{x:0,y:0,width:t.width||0,height:t.height||0}),l(n,this.SHAPE_STYLE),c(e,n),n},d.prototype.drawConnection=function(e,t){var n=s(t.waypoints,this.CONNECTION_STYLE);return c(e,n),n},d.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width,r=e.height;return a([["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]])},d.prototype.getConnectionPath=function(e){var t,n,i=e.waypoints,r=[];for(t=0;n=i[t];t++)n=n.original||n,r.push([0===t?"M":"L",n.x,n.y]);return a(r)},d.$inject=["eventBus","styles"],t.exports=d},{"../util/RenderUtil":305,"./BaseRenderer":155,inherits:343,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540}],157:[function(e,t,n){"use strict";var o=e("lodash/lang/isArray"),a=e("lodash/object/assign"),s=e("lodash/collection/reduce");t.exports=function(){var i={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},r=this;this.cls=function(e,t,n){var i=this.style(t,n);return a(i,{class:e})},this.style=function(e,t){o(e)||t||(t=e,e=[]);var n=s(e,function(e,t){return a(e,i[t]||{})},{});return t?a(n,t):n},this.computeStyle=function(e,t,n){return o(t)||(n=t,t=[]),r.style(t||[],a({},n,e||{}))}}},{"lodash/collection/reduce":364,"lodash/lang/isArray":480,"lodash/object/assign":490}],158:[function(e,t,n){t.exports={__init__:["defaultRenderer"],defaultRenderer:["type",e("./DefaultRenderer")],styles:["type",e("./Styles")]}},{"./DefaultRenderer":156,"./Styles":157}],159:[function(e,t,n){"use strict";var a=e("lodash/collection/filter"),h=e("lodash/collection/forEach"),f=e("lodash/collection/sortBy");function m(e){return e&&e[e.length-1]}function i(e){return e.y}function r(e){return e.x}var s={left:r,center:r,right:function(e){return e.x+e.width},top:i,middle:i,bottom:function(e){return e.y+e.height}};function o(e){this._modeling=e}(t.exports=o).$inject=["modeling"],o.prototype._getOrientationDetails=function(e){var t="x",n="width";return-1!==["top","bottom","middle"].indexOf(e)&&(t="y",n="height"),{axis:t,dimension:n}},o.prototype._isType=function(e,t){return-1!==t.indexOf(e)},o.prototype._alignmentPosition=function(e,t){var n,i,r,o,a,s=this._getOrientationDetails(e),c=s.axis,l=s.dimension,u={},p={},d=!1;if(this._isType(e,["left","top"]))u[e]=t[0][c];else if(this._isType(e,["right","bottom"]))r=m(t),u[e]=r[c]+r[l];else if(this._isType(e,["center","middle"])){if(h(t,function(e){var t=e[c]+Math.round(e[l]/2);p[t]?p[t].elements.push(e):p[t]={elements:[e],center:t}}),n=f(p,function(e){return 1<e.elements.length&&(d=!0),e.elements.length}),d)return u[e]=m(n).center,u;i=t[0],r=m(t=f(t,function(e){return e[c]+e[l]})),u[e]=(o=i,a=r,Math.round((o[c]+a[c]+a[l])/2))}return u},o.prototype.trigger=function(e,t){var n=this._modeling,i=a(e,function(e){return!(e.waypoints||e.host||e.labelTarget)}),r=f(i,s[t]),o=this._alignmentPosition(t,r);n.alignElements(r,o)}},{"lodash/collection/filter":358,"lodash/collection/forEach":360,"lodash/collection/sortBy":368}],160:[function(e,t,n){"use strict";t.exports={__init__:["alignElements"],alignElements:["type",e("./AlignElements")]}},{"./AlignElements":159}],161:[function(e,t,n){"use strict";var s=e("lodash/collection/forEach"),i=e("lodash/array/flatten"),c=e("lodash/array/union"),l=e("lodash/collection/filter"),u=e("lodash/collection/groupBy"),r=e("lodash/collection/map"),o=e("../../util/Removal").saveClear,p=e("../../util/Collections"),d=e("../../util/AttachUtil").getNewAttachShapeDelta,a=e("inherits"),h=1500,f=e("../../command/CommandInterceptor");function m(e,a,t,r){f.call(this,e),e.on("shape.move.start",h,function(e){var t,n,i,r,o=e.context,a=o.shapes,s=o.validatedShapes;o.shapes=(n=v(t=a),c(t,n)),o.validatedShapes=(r=u(i=s,"id"),l(i,function(e){for(;e;){if(e.host&&r[e.host.id])return!1;e=e.parent}return!0}))}),this.postExecuted(["elements.move"],function(e){var t=e.context,n=t.delta,i=t.newParent,r=t.closure.enclosedElements,o=v(r);s(o,function(e){r[e.id]||(a.moveShape(e,n,i),e.label&&a.moveShape(e.label,n,i))})}),this.postExecuted(["elements.move"],function(e){var t,n=e.context,i=n.shapes,r=n.newHost;1<i.length||(t=r?i:l(i,function(e){return!!e.host}),s(t,function(e){a.updateAttachment(e,r)}))}),this.postExecuted(["elements.move"],function(e){var t=e.context.shapes;s(t,function(e){s(e.attachers,function(e){s(e.outgoing.slice(),function(e){r.allowed("connection.reconnectStart",{connection:e,source:e.source,target:e.target})||a.removeConnection(e)}),s(e.incoming.slice(),function(e){r.allowed("connection.reconnectEnd",{connection:e,source:e.source,target:e.target})||a.removeConnection(e)})})})}),this.postExecute(["shape.create"],function(e){var t=e.context,n=t.shape,i=t.host;i&&a.updateAttachment(n,i)}),this.postExecute(["shape.replace"],function(e){var t=e.context,n=t.oldShape,i=t.newShape;o(n.attachers,function(e){"attach"===r.allowed("elements.move",{target:i,shapes:[e]})?a.updateAttachment(e,i):a.removeShape(e)}),i.attachers.length&&s(i.attachers,function(e){var t=d(e,n,i);a.moveShape(e,t,e.parent)})}),this.postExecute(["shape.resize"],function(e){var t=e.context,n=t.shape,i=t.oldBounds,r=t.newBounds,o=n.attachers;o.length&&s(o,function(e){var t=d(e,i,r);a.moveShape(e,t,e.parent),e.label&&a.moveShape(e.label,t,e.label.parent)})}),this.preExecute(["shape.delete"],function(e){var t=e.context.shape;o(t.attachers,function(e){a.removeShape(e)}),t.host&&a.updateAttachment(t,null)}),e.on("spaceTool.move",function(e){var t=e.context.movingShapes,n=l(t,function(e){return e.host&&e.host.id});s(n,function(e){p.remove(t,e),e.label&&p.remove(t,e.label)})})}function v(e){return i(r(e,function(e){return e.attachers||[]}))}a(m,f),m.$inject=["eventBus","modeling","movePreview","rules"],t.exports=m},{"../../command/CommandInterceptor":146,"../../util/AttachUtil":288,"../../util/Collections":290,"../../util/Removal":304,inherits:343,"lodash/array/flatten":346,"lodash/array/union":350,"lodash/collection/filter":358,"lodash/collection/forEach":360,"lodash/collection/groupBy":361,"lodash/collection/map":363}],162:[function(e,t,n){t.exports={__depends__:[e("../move"),e("../label-support")],__init__:["attachSupport"],attachSupport:["type",e("./AttachSupport")]}},{"../label-support":201,"../move":233,"./AttachSupport":161}],163:[function(e,t,n){"use strict";var i=e("inherits"),s=e("../../util/Elements").getBBox,c=e("../../layout/LayoutUtil").asTRBL,l=e("../../layout/LayoutUtil").asBounds,u=e("lodash/object/assign"),a=e("lodash/collection/forEach"),p=e("lodash/object/values"),d=e("lodash/array/flatten"),h=e("lodash/collection/groupBy"),r=e("../../command/CommandInterceptor");function o(e,t,n,i){r.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var o=this;this.postExecuted(["shape.create"],function(e){var t=e.context,n=t.hints,i=t.shape,r=t.parent||t.newParent;n&&!1===n.root||o._expand([i],r)}),this.postExecuted(["elements.move"],function(e){var t=e.context,n=d(p(t.closure.topLevel)),i=t.hints;if(!i||!1!==i.autoResize){var r=h(n,function(e){return e.parent.id});a(r,function(e,t){o._expand(e,t)})}})}o.$inject=["eventBus","elementRegistry","modeling","rules"],i(o,r),(t.exports=o).prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=c(s(e)),o=c(t),a={};return r.top-o.top<i.top&&(a.top=r.top-n.top),r.left-o.left<i.left&&(a.left=r.left-n.left),o.right-r.right<i.right&&(a.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(a.bottom=r.bottom+n.bottom),l(u({},o,a))},o.prototype._expand=function(e,t){if("string"==typeof t&&(t=this._elementRegistry.get(t)),this._rules.allowed("element.autoResize",{elements:e,target:t})){var n=this._getOptimalBounds(e,t);if(r=t,(i=n).x!==r.x||i.y!==r.y||i.width!==r.width||i.height!==r.height){var i,r;this.resize(t,n);var o=t.parent;o&&this._expand([t],o)}}},o.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}},o.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}},o.prototype.resize=function(e,t){this._modeling.resizeShape(e,t)}},{"../../command/CommandInterceptor":146,"../../layout/LayoutUtil":279,"../../util/Elements":293,inherits:343,"lodash/array/flatten":346,"lodash/collection/forEach":360,"lodash/collection/groupBy":361,"lodash/object/assign":490,"lodash/object/values":500}],164:[function(e,t,n){var i=e("../rules/RuleProvider"),r=e("inherits");function o(e){i.call(this,e);var t=this;this.addRule("element.autoResize",function(e){return t.canResize(e.elements,e.target)})}o.$inject=["eventBus"],r(o,i),(t.exports=o).prototype.canResize=function(e,t){return!1}},{"../rules/RuleProvider":252,inherits:343}],165:[function(e,t,n){"use strict";var o=e("lodash/object/assign"),i=e("../../util/Event");function r(e,t,n,i){this._canvas=n,this._mouseTracking=i,this._opts=o({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var r=this;t.on("drag.move",function(e){var t=r._toBorderPoint(e);r.startScroll(t)}),t.on(["drag.cleanup"],function(){r.stopScroll()})}function l(e,t,n){return t<e&&e<n}r.$inject=["config.autoScroll","eventBus","canvas","mouseTracking"],(t.exports=r).prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var a=0,s=0,c=0;c<4;c++)l(o[c],n.scrollThresholdOut[c],n.scrollThresholdIn[c])&&(0===c?a=n.scrollStep:1==c?s=n.scrollStep:2==c?a=-n.scrollStep:3==c&&(s=-n.scrollStep));0===a&&0===s||(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))},r.prototype.stopScroll=function(){clearTimeout(this._scrolling)},r.prototype.setOptions=function(e){this._opts=o({},this._opts,e)},r.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=i.toPoint(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}}},{"../../util/Event":294,"lodash/object/assign":490}],166:[function(e,t,n){t.exports={__depends__:[e("../dragging"),e("../mouse-tracking")],__init__:["autoScroll"],autoScroll:["type",e("./AutoScroll")]}},{"../dragging":189,"../mouse-tracking":230,"./AutoScroll":165}],167:[function(e,t,n){"use strict";var p=e("../../util/Geometry"),d=e("./BendpointUtil"),r="connect-ok",o="connect-not-ok",h="connect-hover",f="djs-updating",m="connection.updateWaypoints",v="connection.reconnectStart",g="connection.reconnectEnd",y=Math.round,b=e("tiny-svg/lib/classes"),x=e("tiny-svg/lib/remove"),E=e("../../util/SvgTransformUtil").translate;function i(e,t,s,c,n,i,l){var a=e.get("connectionDocking",!1);function u(e){n.update("connection",e.connection,e.connectionGfx)}this.start=function(e,t,n,i){var r,o=t.waypoints,a=s.getGraphics(t);r={connection:t,bendpointIndex:n,insert:i,type:i||0!==n?i||n!==o.length-1?m:g:v},c.init(e,"bendpoint.move",{data:{connection:t,connectionGfx:a,context:r}})},t.on("bendpoint.move.start",function(e){var t=e.context,n=t.connection,i=n.waypoints,r=i.slice(),o=t.insert,a=t.bendpointIndex;t.originalWaypoints=i,o&&r.splice(a,0,null),n.waypoints=r,t.draggerGfx=d.addBendpoint(s.getLayer("overlays")),b(t.draggerGfx).add("djs-dragging"),s.addMarker(n,f)}),t.on("bendpoint.move.hover",function(e){var t=e.context;if(t.hover=e.hover,e.hover){s.addMarker(e.hover,h);var n=t.allowed=i.allowed(t.type,t);n?(s.removeMarker(t.hover,o),s.addMarker(t.hover,r),t.target=t.hover):!1===n&&(s.removeMarker(t.hover,r),s.addMarker(t.hover,o),t.target=null)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(e){var t=e.context.hover;t&&(s.removeMarker(t,h),s.removeMarker(t,e.context.target?r:o))}),t.on("bendpoint.move.move",function(e){var t,n,i=e.context,r=i.type,o=e.connection;o.waypoints[i.bendpointIndex]={x:e.x,y:e.y},a&&(i.hover&&(r===v&&(t=i.hover),r===g&&(n=i.hover)),o.waypoints=a.getCroppedWaypoints(o,t,n)),E(i.draggerGfx,e.x,e.y),u(e)}),t.on(["bendpoint.move.end","bendpoint.move.cancel"],function(e){var t=e.context,n=t.hover,i=t.connection;x(t.draggerGfx),t.newWaypoints=i.waypoints.slice(),i.waypoints=t.originalWaypoints,s.removeMarker(i,f),n&&(s.removeMarker(n,r),s.removeMarker(n,o))}),t.on("bendpoint.move.end",function(e){var t,n=e.context,i=n.newWaypoints,r=n.bendpointIndex,o=i[r],a=n.allowed;if(o.x=y(o.x),o.y=y(o.y),a&&n.type===v)l.reconnectStart(n.connection,n.target,o);else if(a&&n.type===g)l.reconnectEnd(n.connection,n.target,o);else{if(!1===a||n.type!==m)return u(e),!1;t={bendpointMove:{insert:e.context.insert,bendpointIndex:r}},l.updateWaypoints(n.connection,function(e){e=e.slice();for(var t,n,i,r=0;e[r];)t=e[r],n=e[r-1],i=e[r+1],0===p.pointDistance(t,i)||p.pointsOnLine(n,i,t)?e.splice(r,1):r++;return e}(i),t)}}),t.on("bendpoint.move.cancel",function(e){u(e)})}i.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"],t.exports=i},{"../../util/Geometry":295,"../../util/SvgTransformUtil":306,"./BendpointUtil":169,"tiny-svg/lib/classes":537,"tiny-svg/lib/remove":543}],168:[function(e,t,n){"use strict";var p=e("lodash/object/assign"),d=e("lodash/collection/forEach"),r=e("lodash/lang/isArray"),o=Math.abs,i=Math.round,a=10;function s(e){function l(e,t){if(r(e)){for(var n=e.length;n--;)if(o(e[n]-t)<=a)return e[n]}else{var i=t%(e=+e);if(i<a)return t-i;if(e-a<i)return t-i+e}return t}function u(e){if(e.width)return{x:i(e.width/2+e.x),y:i(e.height/2+e.y)}}e.on("connectionSegment.move.move",1500,function(e){var t,n,i=function(e){var t=e.snapPoints,n=e.connection,i=n.waypoints,r=e.segmentStart,o=e.segmentStartIndex,a=e.segmentEnd,s=e.segmentEndIndex,c=e.axis;if(t)return t;var l=[i[o-1],r,a,i[s+1]];return o<2&&l.unshift(u(n.source)),s>i.length-3&&l.unshift(u(n.target)),e.snapPoints=t={horizontal:[],vertical:[]},d(l,function(e){e&&(e=e.original||e,"y"===c&&t.horizontal.push(e.y),"x"===c&&t.vertical.push(e.x))}),t}(e.context),r=e.x,o=e.y;if(i){var a=r-(t=l(i.vertical,r)),s=o-(n=l(i.horizontal,o));p(e,{dx:e.dx-a,dy:e.dy-s,x:t,y:n})}}),e.on("bendpoint.move.move",1500,function(e){var t=e.context,n=function(e){var t=e.snapPoints,n=e.connection.waypoints,i=e.bendpointIndex;if(t)return t;var r=[n[i-1],n[i+1]];return e.snapPoints=t={horizontal:[],vertical:[]},d(r,function(e){e&&(e=e.original||e,t.horizontal.push(e.y),t.vertical.push(e.x))}),t}(t),i=t.target,r=i&&u(i),o=e.x,a=e.y;if(n){var s=o-l(r?n.vertical.concat([r.x]):n.vertical,o),c=a-l(r?n.horizontal.concat([r.y]):n.horizontal,a);p(e,{dx:e.dx-s,dy:e.dy-c,x:e.x-s,y:e.y-c})}})}s.$inject=["eventBus"],t.exports=s},{"lodash/collection/forEach":360,"lodash/lang/isArray":480,"lodash/object/assign":490}],169:[function(e,t,n){"use strict";var a=e("../../util/Event"),s=e("../../util/Geometry"),o=t.exports.BENDPOINT_CLS="djs-bendpoint",c=t.exports.SEGMENT_DRAGGER_CLS="djs-segment-dragger",l=e("tiny-svg/lib/append"),u=e("tiny-svg/lib/attr"),p=e("tiny-svg/lib/classes"),d=e("tiny-svg/lib/create"),h=e("../../util/SvgTransformUtil").rotate,f=e("../../util/SvgTransformUtil").translate;t.exports.toCanvasCoordinates=function(e,t){var n,i=a.toPoint(t),r=e._container.getBoundingClientRect();n={x:r.left,y:r.top};var o=e.viewbox();return{x:o.x+(i.x-n.x)/o.scale,y:o.y+(i.y-n.y)/o.scale}},t.exports.addBendpoint=function(e,t){var n=d("g");p(n).add(o),l(e,n);var i=d("circle");u(i,{cx:0,cy:0,r:4}),p(i).add("djs-visual"),l(n,i);var r=d("circle");return u(r,{cx:0,cy:0,r:10}),p(r).add("djs-hit"),l(n,r),t&&p(n).add(t),n},t.exports.addSegmentDragger=function(e,t,n){var i=d("g"),r=s.getMidPoint(t,n),o=s.pointsAligned(t,n);return l(e,i),function(e,t,n){var i=d("g");l(e,i);var r=d("rect");u(r,{x:-7,y:-1.5,width:14,height:3}),p(r).add("djs-visual"),l(i,r);var o=d("rect");u(o,{x:-10,y:-4.5,width:20,height:9}),p(o).add("djs-hit"),l(i,o),h(i,"h"===n?90:0,0,0)}(i,0,o),p(i).add(c),p(i).add("h"===o?"vertical":"horizontal"),f(i,r.x,r.y),i}},{"../../util/Event":294,"../../util/Geometry":295,"../../util/SvgTransformUtil":306,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/classes":537,"tiny-svg/lib/create":540}],170:[function(e,t,n){"use strict";var p=e("lodash/collection/forEach"),d=e("min-dom/lib/event"),h=e("min-dom/lib/query"),f=e("./BendpointUtil"),y=e("../../util/Geometry").pointsAligned,b=e("../../util/Geometry").getMidPoint,x=f.BENDPOINT_CLS,E=f.SEGMENT_DRAGGER_CLS,w=e("../../util/LineIntersection").getApproxIntersection,$=e("tiny-svg/lib/append"),_=e("tiny-svg/lib/attr"),S=e("tiny-svg/lib/classes"),C=e("tiny-svg/lib/create"),A=e("tiny-svg/lib/remove"),T=e("../../util/SvgTransformUtil").translate;function i(e,r,i,m,v){function g(e,t){var n=f.toCanvasCoordinates(r,t);return w(e,n)}function o(e,t){var n,i,r,o,a,s,c,l,u,p,d,h=t.waypoints,f=g(h,e);if(f)return i=h,r=10,p=(n=f).index,d=n.point,!(p<=0||n.bendpoint)&&(o=i[p-1],a=i[p],s=b(o,a),c=y(o,a),l=Math.abs(d.x-s.x),u=Math.abs(d.y-s.y),c&&l<=r&&u<=r)?v.start(e,t,f.index):m.start(e,t,f.index,!f.bendpoint),!0}function a(e,t,n){d.bind(e,t,function(e){i.triggerMouseEvent(t,e,n),e.stopPropagation()})}function s(e,t){var n=r.getLayer("overlays"),i=h(".djs-bendpoints[data-element-id="+e.id+"]",n);return!i&&t&&(i=C("g"),_(i,{"data-element-id":e.id}),S(i).add("djs-bendpoints"),$(n,i),a(i,"mousedown",e),a(i,"click",e),a(i,"dblclick",e)),i}function c(i,e){e.waypoints.forEach(function(e,t){var n=f.addBendpoint(i);$(i,n),T(n,e.x,e.y)}),f.addBendpoint(i,"floating")}function l(e,t){for(var n,i,r=t.waypoints,o=1;o<r.length;o++)n=r[o-1],i=r[o],y(n,i)&&f.addSegmentDragger(e,n,i)}function u(e){var t=s(e);return t||(c(t=s(e,!0),e),l(t,e)),t}function t(e){var t,n,i=s(e);i&&(n=i,p(h.all("."+E,n),function(e){A(e)}),t=i,p(h.all("."+x,t),function(e){A(e)}),l(i,e),c(i,e))}e.on("connection.changed",function(e){t(e.element)}),e.on("connection.remove",function(e){var t=s(e.element);t&&A(t)}),e.on("element.marker.update",function(e){var t,n=e.element;n.waypoints&&(t=u(n),e.add?S(t).add(e.marker):S(t).remove(e.marker))}),e.on("element.mousemove",function(e){var t,n,i,r=e.element,o=r.waypoints;if(o){if(t=s(r,!0),!(n=h(".floating",t)))return;(i=g(o,e.originalEvent))&&T(n,i.point.x,i.point.y)}}),e.on("element.mousedown",function(e){var t=e.originalEvent,n=e.element,i=n.waypoints;if(i)return o(t,n)}),e.on("selection.changed",function(e){var t=e.newSelection[0];t&&t.waypoints&&u(t)}),e.on("element.hover",function(e){var t=e.element;t.waypoints&&(u(t),i.registerEvent(e.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(e){i.unregisterEvent(e.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(e){var t=e.element,n=e.newId;if(t.waypoints){var i=s(t);i&&_(i,{"data-element-id":n})}}),this.addHandles=u,this.updateHandles=t,this.getBendpointsContainer=s}i.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"],t.exports=i},{"../../util/Geometry":295,"../../util/LineIntersection":299,"../../util/SvgTransformUtil":306,"./BendpointUtil":169,"lodash/collection/forEach":360,"min-dom/lib/event":510,"min-dom/lib/query":512,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/classes":537,"tiny-svg/lib/create":540,"tiny-svg/lib/remove":543}],171:[function(e,t,n){"use strict";var y=e("../../util/Geometry"),o=e("./BendpointUtil"),b=e("../../layout/LayoutUtil"),a="connect-hover",s="djs-updating",c=e("tiny-svg/lib/classes"),l=e("tiny-svg/lib/remove"),x=e("../../util/SvgTransformUtil").translate;function E(e,t,n){return w(e,t,e[t]+n)}function w(e,t,n){return{x:"x"===t?n:e.x,y:"y"===t?n:e.y}}function $(e){return"x"===e?"y":"x"}function _(e,t,n){var i,r;return e.original?e.original:(i=b.getMid(t),w(e,r=$(n),i[r]))}function i(e,t,d,h,n,i,f){var r=e.get("connectionDocking",!1);function m(e,t){if(!r)return t;var n,i=e.waypoints;return e.waypoints=t,n=r.getCroppedWaypoints(e),e.waypoints=i,n}function v(e){n.update("connection",e.connection,e.connectionGfx)}function g(e,t,n){var i,r,o,a,s,c,l=e.newWaypoints,u=l[e.segmentStartIndex+t],p=l[e.segmentEndIndex+t],d=$(e.axis),h=(i=n,r=u,o=p,a=d,s=Math.max(r[a],o[a]),c=Math.min(r[a],o[a]),w(r,a,Math.min(Math.max(c+20,i[a]),s-20)));x(e.draggerGfx,h.x,h.y)}this.start=function(e,t,n){var i,r,o,a=d.getGraphics(t),s=n-1,c=n,l=t.waypoints,u=l[s],p=l[c];(r=y.pointsAligned(u,p))&&(o="v"===r?"y":"x",0===s&&(u=_(u,t.source,o)),c===l.length-1&&(p=_(p,t.target,o)),i={connection:t,segmentStartIndex:s,segmentEndIndex:c,segmentStart:u,segmentEnd:p,axis:o},h.init(e,{x:(u.x+p.x)/2,y:(u.y+p.y)/2},"connectionSegment.move",{cursor:"x"===o?"resize-ew":"resize-ns",data:{connection:t,connectionGfx:a,context:i}}))},t.on("connectionSegment.move.start",function(e){var t=e.context,n=e.connection,i=d.getLayer("overlays");t.originalWaypoints=n.waypoints.slice(),t.draggerGfx=o.addSegmentDragger(i,t.segmentStart,t.segmentEnd),c(t.draggerGfx).add("djs-dragging"),d.addMarker(n,s)}),t.on("connectionSegment.move.move",function(e){var t,n,i=e.context,r=i.connection,o=i.segmentStartIndex,a=i.segmentEndIndex,s=i.segmentStart,c=i.segmentEnd,l=i.axis,u=i.originalWaypoints.slice(),p=E(s,l,e["d"+l]),d=E(c,l,e["d"+l]),h=u.length,f=0;u[o]=p,u[a]=d,o<2&&(t=b.getOrientation(r.source,p),1===o?"intersect"===t&&(u.shift(),u[0]=p,f--):"intersect"!==t&&(u.unshift(s),f++)),h-3<a&&(n=b.getOrientation(r.target,d),a===h-2?"intersect"===n&&(u.pop(),u[u.length-1]=d):"intersect"!==n&&u.push(c)),i.newWaypoints=r.waypoints=m(r,u),g(i,f,e),i.newSegmentStartIndex=o+f,v(e)}),t.on("connectionSegment.move.hover",function(e){e.context.hover=e.hover,d.addMarker(e.hover,a)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(e){var t=e.context.hover;t&&d.removeMarker(t,a)}),t.on("connectionSegment.move.cleanup",function(e){var t=e.context,n=t.connection;t.draggerGfx&&l(t.draggerGfx),d.removeMarker(n,s)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(e){var t=e.context;t.connection.waypoints=t.originalWaypoints,v(e)}),t.on("connectionSegment.move.end",function(e){var t=e.context,n=t.connection,i=t.newWaypoints,r=t.newSegmentStartIndex;i=i.map(function(e){return{original:e.original,x:Math.round(e.x),y:Math.round(e.y)}});var o,a,s,c=(a=r,s=0,{waypoints:(o=i).filter(function(e,t){return!y.pointsOnLine(o[t-1],o[t+1],e)||(s=t<=a?s-1:s,!1)}),segmentOffset:s}),l=m(n,c.waypoints),u=c.segmentOffset,p={segmentMove:{segmentStartIndex:t.segmentStartIndex,newSegmentStartIndex:r+u}};f.updateWaypoints(n,l,p)})}i.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"],t.exports=i},{"../../layout/LayoutUtil":279,"../../util/Geometry":295,"../../util/SvgTransformUtil":306,"./BendpointUtil":169,"tiny-svg/lib/classes":537,"tiny-svg/lib/remove":543}],172:[function(e,t,n){t.exports={__depends__:[e("../dragging"),e("../rules")],__init__:["bendpoints","bendpointSnapping"],bendpoints:["type",e("./Bendpoints")],bendpointMove:["type",e("./BendpointMove")],connectionSegmentMove:["type",e("./ConnectionSegmentMove")],bendpointSnapping:["type",e("./BendpointSnapping")]}},{"../dragging":189,"../rules":254,"./BendpointMove":167,"./BendpointSnapping":168,"./Bendpoints":170,"./ConnectionSegmentMove":171}],173:[function(e,t,n){"use strict";var a=e("../../util/Elements").getType;function i(n,i,r,o){n.on("element.changed",function(e){var t=e.element;(t.parent||t===i.getRootElement())&&(e.gfx=r.getGraphics(t)),e.gfx&&n.fire(a(t)+".changed",e)}),n.on("elements.changed",function(e){var t=e.elements;t.forEach(function(e){n.fire("element.changed",{element:e})}),o.updateContainments(t)}),n.on("shape.changed",function(e){o.update("shape",e.element,e.gfx)}),n.on("connection.changed",function(e){o.update("connection",e.element,e.gfx)})}i.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"],t.exports=i},{"../../util/Elements":293}],174:[function(e,t,n){t.exports={__init__:["changeSupport"],changeSupport:["type",e("./ChangeSupport")]}},{"./ChangeSupport":173}],175:[function(e,t,n){"use strict";function i(){}(t.exports=i).prototype.get=function(){return this._data},i.prototype.set=function(e){this._data=e},i.prototype.clear=function(){var e=this._data;return delete this._data,e},i.prototype.isEmpty=function(){return!this._data}},{}],176:[function(e,t,n){t.exports={clipboard:["type",e("./Clipboard")]}},{"./Clipboard":175}],177:[function(e,t,n){"use strict";var v=e("../../layout/LayoutUtil"),a="connect-ok",s="connect-not-ok",i=e("tiny-svg/lib/append"),g=e("tiny-svg/lib/attr"),c=e("tiny-svg/lib/create"),p=e("tiny-svg/lib/remove");function r(e,r,l,n,o,m){function u(e,t){return n.allowed("connection.create",{source:e,target:t})}e.on("connect.move",function(e){var t,n,i,r,o,a,s,c,l,u=e.context,p=u.source,d=u.target,h=u.visual,f=u.sourcePosition;t={x:e.x,y:e.y},i=f,r=t,o=p,a=d,s=m.getShapePath(o),c=a&&m.getShapePath(a),l=m.getConnectionPath({waypoints:[i,r]}),n=[i=v.getElementLineIntersection(s,l,!0)||i,r=a&&v.getElementLineIntersection(c,l,!1)||r],g(h,{points:[n[0].x,n[0].y,n[1].x,n[1].y]})}),e.on("connect.hover",function(e){var t,n=e.context,i=n.source,r=e.hover;null!==(t=n.canExecute=u(i,r))&&(n.target=r,o.addMarker(r,t?a:s))}),e.on(["connect.out","connect.cleanup"],function(e){var t=e.context;t.target&&o.removeMarker(t.target,t.canExecute?a:s),t.target=null,t.canExecute=!1}),e.on("connect.cleanup",function(e){var t=e.context;t.visual&&p(t.visual)}),e.on("connect.start",function(e){var t,n=e.context;t=c("polyline"),g(t,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),i(o.getDefaultLayer(),t),n.visual=t}),e.on("connect.end",function(e){var t=e.context,n=t.source,i=t.sourcePosition,r=t.target,o={x:e.x,y:e.y},a=t.canExecute||u(n,r);if(!a)return!1;var s=null,c={connectionStart:i,connectionEnd:o};"object"==typeof a&&(s=a),l.connect(n,r,s,c)}),this.start=function(e,t,n,i){"object"!=typeof n&&(i=n,n=v.getMid(t)),r.init(e,"connect",{autoActivate:i,data:{shape:t,context:{source:t,sourcePosition:n}}})}}r.$inject=["eventBus","dragging","modeling","rules","canvas","graphicsFactory"],t.exports=r},{"../../layout/LayoutUtil":279,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540,"tiny-svg/lib/remove":543}],178:[function(e,t,n){t.exports={__depends__:[e("../selection"),e("../rules"),e("../dragging")],connect:["type",e("./Connect")]}},{"../dragging":189,"../rules":254,"../selection":260,"./Connect":177}],179:[function(e,t,n){"use strict";var c=e("lodash/lang/isFunction"),l=e("lodash/lang/isArray"),r=e("lodash/collection/forEach"),o=e("min-dom/lib/delegate"),a=e("min-dom/lib/event"),u=e("min-dom/lib/attr"),p=e("min-dom/lib/query"),d=e("min-dom/lib/classes"),h=e("min-dom/lib/domify");function i(e,t){this._providers=[],this._eventBus=e,this._overlays=t,this._current=null,this._init()}i.$inject=["eventBus","overlays"],(t.exports=i).prototype._init=function(){var e=this._eventBus,i=this;e.on("selection.changed",function(e){var t=e.newSelection;1===t.length?i.open(t[0]):i.close()}),e.on("elements.delete",function(e){var t=e.elements;r(t,function(e){i.isOpen(e)&&i.close()})}),e.on("element.changed",function(e){var t=e.element,n=i._current;n&&n.element===t&&i.open(t,!0)})},i.prototype.registerProvider=function(e){this._providers.push(e)},i.prototype.getEntries=function(n){var i={};return r(this._providers,function(e){var t=e.getContextPadEntries(n);r(t,function(e,t){i[t]=e})}),i},i.prototype.trigger=function(e,t,n){var i,r,o=this._current.element,a=this._current.entries,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();if(i=a[u(s,"data-action")].action,r=t.originalEvent||t,c(i)){if("click"===e)return i(r,o,n)}else if(i[e])return i[e](r,o,n);t.preventDefault()},i.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},i.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),c=n.html;r(t,function(e,t){var n,i,r,o,a=e.group||"default",s=h(e.html||'<div class="entry" draggable="true"></div>');u(s,"data-action",t),(n=p("[data-group="+a+"]",c))||(n=h('<div class="group" data-group="'+a+'"></div>'),c.appendChild(n)),n.appendChild(s),e.className&&(i=s,r=e.className,o=d(i),(l(r)?r:r.split(/\s+/g)).forEach(function(e){o.add(e)})),e.title&&u(s,"title",e.title),e.imageUrl&&s.appendChild(h('<img src="'+e.imageUrl+'">'))}),d(c).add("open"),this._current={element:e,pad:n,entries:t},this._eventBus.fire("contextPad.open",{current:this._current})},i.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,i=h('<div class="djs-context-pad"></div>');o.bind(i,".entry","click",function(e){t.trigger("click",e)}),o.bind(i,".entry","dragstart",function(e){t.trigger("dragstart",e)}),a.bind(i,"mousedown",function(e){e.stopPropagation()}),this._overlayId=n.add(e,"context-pad",{position:{right:-9,top:-6},html:i});var r=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:e,pad:r}),r},i.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},i.prototype.isOpen=function(e){return!(!this._current||e&&this._current.element!==e)}},{"lodash/collection/forEach":360,"lodash/lang/isArray":480,"lodash/lang/isFunction":482,"min-dom/lib/attr":504,"min-dom/lib/classes":505,"min-dom/lib/delegate":508,"min-dom/lib/domify":509,"min-dom/lib/event":510,"min-dom/lib/query":512}],180:[function(e,t,n){t.exports={__depends__:[e("../interaction-events"),e("../overlays")],contextPad:["type",e("./ContextPad")]}},{"../interaction-events":197,"../overlays":238,"./ContextPad":179}],181:[function(e,t,n){"use strict";var i=e("lodash/lang/isArray"),c=e("lodash/collection/forEach"),l=e("lodash/collection/map"),o=e("lodash/collection/find"),u=e("lodash/array/findIndex"),p=e("lodash/collection/sortBy"),d=e("lodash/collection/reduce"),a=e("../../util/Elements").getBBox,s=e("../../util/PositionUtil"),h=e("../../util/CopyPasteUtil"),f=e("../../util/Elements");function r(e,t,n,i,r,o){this._eventBus=e,this._modeling=t,this._elementFactory=n,this._rules=i,this._canvas=o,this._clipboard=r,this._descriptors=[],this.registerDescriptor(function(e,n){return n.priority=1,n.id=e.id,e.parent&&(n.parent=e.parent.id),e.labelTarget&&(n.priority=4,n.labelTarget=e.labelTarget.id),e.host&&(n.priority=2,n.host=e.host.id),"number"==typeof e.x&&(n.x=e.x,n.y=e.y),e.width&&(n.width=e.width,n.height=e.height),e.waypoints&&(n.priority=3,n.waypoints=[],c(e.waypoints,function(e){var t={x:e.x,y:e.y};e.original&&(t.original={x:e.original.x,y:e.original.y}),n.waypoints.push(t)})),e.source&&e.target&&(n.source=e.source.id,n.target=e.target.id),n})}r.$inject=["eventBus","modeling","elementFactory","rules","clipboard","canvas"],(t.exports=r).prototype.copy=function(e){var t,r,n=this._clipboard;if(i(e)||(e=e?[e]:[]),e.length)return t=this.createTree(e),r=this._bbox=s.center(a(t.allShapes)),delete t.allShapes,c(t,function(i){c(i,function(e){var n,t;e.labelTarget?(t=o(i,{id:e.labelTarget}),n=t.waypoints?s.delta(e,t.waypoints[0]):s.delta(e,t)):3===e.priority?(n=[],c(e.waypoints,function(e){var t=s.delta(e,r);n.push(t)},this)):n=s.delta(e,r),e.delta=n})}),this._eventBus.fire("elements.copy",{context:{tree:t}}),0===Object.keys(t).length?n.clear():n.set(t),this._eventBus.fire("elements.copied",{context:{tree:t}}),t},r.prototype.paste=function(e){var t,n=this._clipboard,i=this._modeling,r=this._eventBus,o=this._rules,a=n.get(),s=e.element,c=e.point;n.isEmpty()||(t=d(a,function(e,t,n){var i=parseInt(n,10);return isNaN(i)||(e[i]=t),e},{},this),o.allowed("elements.paste",{tree:t,target:s})?i.pasteElements(t,s,c):r.fire("elements.paste.rejected",{context:{tree:t,position:c,target:s}}))},r.prototype._computeDelta=function(e,t){var n=this._bbox,i={};return t.labelTarget?s.delta(t,t.labelTarget):(3===t.priority?(i=[],c(t.waypoints,function(e){var t=s.delta(e,n);i.push(t)},this)):i=s.delta(t,n),i)},r.prototype.hasRelations=function(e,t){var n,i;return!(t.waypoints&&(n=o(e,{id:t.source.id}),i=o(e,{id:t.target.id}),!n||!i))&&!(t.labelTarget&&!o(e,{id:t.labelTarget.id}))},r.prototype.registerDescriptor=function(e){if("function"!=typeof e)throw new Error("the descriptor must be a function");if(-1!==this._descriptors.indexOf(e))throw new Error("this descriptor is already registered");this._descriptors.push(e)},r.prototype._executeDescriptors=function(t){return t.descriptor||(t.descriptor={}),c(this._descriptors,function(e){t.descriptor=e(t.element,t.descriptor)}),t},r.prototype.createTree=function(e){var r,o=this._rules,a={},n=[],t=h.getTopLevel(e);function s(e){var t=u(n,{element:e.element});if(-1===t)return n.push(e);n[t].depth<e.depth&&(n.splice(t,1),n.push(e))}return a.allShapes=[],f.eachElement(t,function(e,t,n){var i,r=e.children;if(!e.labelTarget)return e.label&&s({element:e.label,depth:n}),i=[e.attachers,e.incoming,e.outgoing],c(i,function(e){e&&e.length&&c(e,function(e){e.label&&s({element:e.label,depth:n}),s({element:e,depth:n})})}),s({element:e,depth:n}),r||void 0}),n=l(n,function(e){return this._executeDescriptors(e)},this),n=p(n,function(e){return e.descriptor.priority}),r=l(n,function(e){return e.element}),c(n,function(e){var t,n,i=e.depth;this.hasRelations(a.allShapes,e.element)&&(t=r,n=e.element,o.allowed("element.copy",{collection:t,element:n})&&(a.allShapes.push(e.element),a[i]||(a[i]=[]),a[i].push(e.descriptor)))},this),a}},{"../../util/CopyPasteUtil":291,"../../util/Elements":293,"../../util/PositionUtil":303,"lodash/array/findIndex":345,"lodash/collection/find":359,"lodash/collection/forEach":360,"lodash/collection/map":363,"lodash/collection/reduce":364,"lodash/collection/sortBy":368,"lodash/lang/isArray":480}],182:[function(e,t,n){t.exports={__depends__:[e("../clipboard"),e("../rules"),e("../mouse-tracking")],__init__:["copyPaste"],copyPaste:["type",e("./CopyPaste")]}},{"../clipboard":176,"../mouse-tracking":230,"../rules":254,"./CopyPaste":181}],183:[function(e,t,n){"use strict";var r=750,p="drop-ok",d="drop-not-ok",h="attach-ok",f="new-parent",m=e("tiny-svg/lib/append"),v=e("tiny-svg/lib/attr"),g=e("tiny-svg/lib/classes"),y=e("tiny-svg/lib/create"),b=e("tiny-svg/lib/remove"),x=e("../../util/SvgTransformUtil").translate;function i(e,i,l,c,o,a,s){function u(t,n){[h,p,d,f].forEach(function(e){e===n?o.addMarker(t,e):o.removeMarker(t,e)})}e.on("create.move",function(e){var t,n,i,r,o,a=e.context,s=e.hover,c={x:e.x,y:e.y};t=a.canExecute=s&&(n=a.shape,i=s,r=a.source,o=c,r?l.allowed("shape.append",{source:r,shape:n,target:i,position:o}):l.allowed("shape.create",{shape:n,target:i,position:o})),s&&null!==t&&u(a.target=s,"attach"===t?h:a.canExecute?f:d)}),e.on("create.move",r,function(e){var t=e.context,n=t.shape,i=t.visual;i||(i=t.visual=function(e){var t,n,i;t=y("g"),v(t,a.cls("djs-drag-group",["no-events"])),m(o.getDefaultLayer(),t),n=y("g"),g(n).add("djs-dragger"),m(t,n),x(n,e.width/-2,e.height/-2);var r=y("g");return g(r).add("djs-visual"),m(n,r),i=r,s.drawShape(i,e),t}(n)),x(i,e.x,e.y)}),e.on(["create.end","create.out","create.cleanup"],function(e){var t=e.context.target;t&&u(t,null)}),e.on("create.end",function(e){var t,n=e.context,i=n.source,r=n.shape,o=n.target,a=n.canExecute,s={x:e.x,y:e.y};if(!a)return!1;i?r=c.appendShape(i,r,s,o):(t="attach"===a,r=c.createShape(r,s,o,t)),n.shape=r}),e.on("create.cleanup",function(e){var t=e.context;t.visual&&b(t.visual)}),this.start=function(e,t,n){i.init(e,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:t,context:{shape:t,source:n}}})}}i.$inject=["eventBus","dragging","rules","modeling","canvas","styles","graphicsFactory"],t.exports=i},{"../../util/SvgTransformUtil":306,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/classes":537,"tiny-svg/lib/create":540,"tiny-svg/lib/remove":543}],184:[function(e,t,n){t.exports={__depends__:[e("../dragging"),e("../selection"),e("../rules")],create:["type",e("./Create")]}},{"../dragging":189,"../rules":254,"../selection":260,"./Create":183}],185:[function(e,t,n){"use strict";var i=e("lodash/collection/sortBy"),c=e("lodash/collection/forEach"),a=e("lodash/collection/filter"),r={horizontal:["x","width"],vertical:["y","height"]};function o(e){this._modeling=e,this._filters=[],this.registerFilter(function(e,t,n){var i,r=0,o=0;return c(e,function(e){e.waypoints||e.labelTarget||(r+=e[n],o+=1)}),i=Math.round(r/o),a(e,function(e){return e[n]<i+50})})}(t.exports=o).$inject=["modeling"],o.prototype.registerFilter=function(e){if("function"!=typeof e)throw new Error("the filter has to be a function");this._filters.push(e)},o.prototype.trigger=function(e,t){var n,i,r=this._modeling;if(!(e.length<3||(this._setOrientation(t),i=this._filterElements(e),(n=this._createGroups(i)).length<=2)))return r.distributeElements(n,this._axis,this._dimension),n},o.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(c(t,function(e){r=e(r,n,i)}),r):e},o.prototype._createGroups=function(e){var o=[],a=this._axis,s=this._dimension;if(!a)throw new Error('must have a defined "axis" and "dimension"');var t=i(e,a);return c(t,function(e,t){var n,i=this._findRange(e,a,s),r=o[o.length-1];r&&this._hasIntersection(r.range,i)?o[o.length-1].elements.push(e):(n={range:i,elements:[e]},o.push(n))},this),o},o.prototype._setOrientation=function(e){var t=r[e];this._axis=t[0],this._dimension=t[1]},o.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)},o.prototype._findRange=function(e){var t=e[this._axis];return{min:t+5,max:t+e[this._dimension]-5}}},{"lodash/collection/filter":358,"lodash/collection/forEach":360,"lodash/collection/sortBy":368}],186:[function(e,t,n){"use strict";t.exports={__init__:["distributeElements"],distributeElements:["type",e("./DistributeElements")]}},{"./DistributeElements":185}],187:[function(e,t,n){"use strict";var r=Math.round,S=e("lodash/object/assign"),C=e("min-dom/lib/event"),A=e("../../util/Event"),T=e("../../util/Cursor"),o=e("../../util/ClickTrap"),a=e("../../core/EventBus").Event,j="djs-drag-active";function k(e){A.stopPropagation(e)}function M(e,t){return{x:e.x-t.x,y:e.y-t.y}}function i(u,p,d){var h,f={threshold:5,trapClick:!0};function m(e){var t=p.viewbox(),n=p._container.getBoundingClientRect();return{x:t.x+r((e.x-n.left)/t.scale),y:t.y+r((e.y-n.top)/t.scale)}}function v(e,t){t=t||h;var n=S(new a,t.payload,t.data);return!1!==u.fire("drag."+e,n)&&u.fire(t.prefix+"."+e,n)}function g(e,t){var n,i=h.payload,r=h.displacement,o=h.globalStart,a=A.toPoint(e),s=M(a,o),c=h.localStart,l=m(a),u=M(l,c);if(!h.active&&(t||(n=s,Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))>h.threshold))){if(S(i,{x:c.x+r.x,y:c.y+r.y,dx:0,dy:0},{originalEvent:e}),!1===v("start"))return _();h.active=!0,h.keepSelection||(i.previousSelection=d.get(),d.select(null)),h.cursor&&T.set(h.cursor),p.addMarker(p.getRootElement(),j)}k(e),h.active&&(S(i,{x:l.x+r.x,y:l.y+r.y,dx:u.x,dy:u.y},{originalEvent:e}),v("move"))}function y(e){var t=!0;h.active&&(e&&k(h.payload.originalEvent=e),t=v("end")),!1===t&&v("rejected"),v("ended",i(!0!==t))}function b(e){27===e.which&&(e.preventDefault(),_())}function x(e){var t;h.active&&(t=o.install(u),setTimeout(t,400)),y(e)}function E(e){g(e)}function w(e){var t=h.payload;t.hoverGfx=e.gfx,t.hover=e.element,v("hover")}function $(e){v("out");var t=h.payload;t.hoverGfx=null,t.hover=null}function _(e){var t;if(h){var n=h.active;n&&v("cancel"),t=i(e),n&&v("canceled",t)}}function i(e){var t,n;v("cleanup"),T.unset(),n=h.trapClick?x:y,C.unbind(document,"mousemove",g),C.unbind(document,"mousedown",n,!0),C.unbind(document,"mouseup",n,!0),C.unbind(document,"keyup",b),C.unbind(document,"touchstart",E,!0),C.unbind(document,"touchcancel",_,!0),C.unbind(document,"touchmove",g,!0),C.unbind(document,"touchend",y,!0),u.off("element.hover",w),u.off("element.out",$),p.removeMarker(p.getRootElement(),j);var i=h.payload.previousSelection;return!1!==e&&i&&!d.get().length&&d.select(i),t=h,h=null,t}u.on("diagram.destroy",_),this.init=function(e,t,n,i){h&&_(!1),"string"==typeof t&&(i=n,n=t,t=null);var r,o,a,s=(i=S({},f,i||{})).data||{};a=i.trapClick?x:y,e?(r=A.getOriginal(e)||e,o=A.toPoint(e),k(e)):(r=null,o={x:0,y:0});var c,l=m(o);t||(t=l),h=S({prefix:n,data:s,payload:{},globalStart:o,displacement:M(t,l),localStart:l},i),i.manual||(c=r,"undefined"!=typeof TouchEvent&&c instanceof TouchEvent?(C.bind(document,"touchstart",E,!0),C.bind(document,"touchcancel",_,!0),C.bind(document,"touchmove",g,!0),C.bind(document,"touchend",y,!0)):(C.bind(document,"mousemove",g),C.bind(document,"mousedown",a,!0),C.bind(document,"mouseup",a,!0)),C.bind(document,"keyup",b),u.on("element.hover",w),u.on("element.out",$)),v("init"),i.autoActivate&&g(e,!0)},this.move=g,this.hover=w,this.out=$,this.end=y,this.cancel=_,this.context=function(){return h},this.setOptions=function(e){S(f,e)}}i.$inject=["eventBus","canvas","selection"],t.exports=i},{"../../core/EventBus":152,"../../util/ClickTrap":289,"../../util/Cursor":292,"../../util/Event":294,"lodash/object/assign":490,"min-dom/lib/event":510}],188:[function(e,t,n){"use strict";var c=e("min-dom/lib/closest"),l=e("../../util/Event");function i(t,a,s){var n=this;t.on("drag.start",function(e){t.once("drag.move",function(){t.once("drag.move",function(e){n.ensureHover(e)})})}),this.ensureHover=function(e){if(!e.hover){var t,n,i,r,o=e.originalEvent;if(o instanceof MouseEvent)t=l.toPoint(o),n=document.elementFromPoint(t.x,t.y),(r=c(n,"svg, .djs-element",!0))&&(i=s.get(r),a.hover({element:i,gfx:r}))}}}i.$inject=["eventBus","dragging","elementRegistry"],t.exports=i},{"../../util/Event":294,"min-dom/lib/closest":507}],189:[function(e,t,n){t.exports={__init__:["hoverFix"],__depends__:[e("../selection")],dragging:["type",e("./Dragging")],hoverFix:["type",e("./HoverFix")]}},{"../selection":260,"./Dragging":187,"./HoverFix":188}],190:[function(e,t,n){"use strict";var i=e("lodash/collection/forEach"),l=e("lodash/lang/isArray"),r="is not a registered action";function o(e,t,i,r,n,o,a,s,c){this._actions={undo:function(){t.undo()},redo:function(){t.redo()},copy:function(){var e=r.get();o.copy(e)},paste:function(){var e=c.getHoverContext();o.paste(e)},stepZoom:function(e){n.stepZoom(e.value)},zoom:function(e){a.zoom(e.value)},removeSelection:function(){var e=r.get();if(e.length){var t,n=s.allowed("elements.delete",{elements:e});if(!1===n)return;(t=l(n)?n:e).length&&i.removeElements(t.slice())}},moveCanvas:function(e){var t=0,n=0,i=e.invertY,r=e.speed/Math.min(Math.sqrt(a.viewbox().scale),1);switch(e.direction){case"left":t=r;break;case"up":n=r;break;case"right":t=-r;break;case"down":n=-r}n&&i&&(n=-n),a.scroll({dx:t,dy:n})}}}function a(e,t){return new Error(e+" "+t)}o.$inject=["eventBus","commandStack","modeling","selection","zoomScroll","copyPaste","canvas","rules","mouseTracking"],(t.exports=o).prototype.trigger=function(e,t){if(!this._actions[e])throw a(e,r);return this._actions[e](t)},o.prototype.register=function(e,t){if("string"==typeof e)return this._registerAction(e,t);i(e,function(e,t){this._registerAction(t,e)},this)},o.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw a(e,"is already registered");this._actions[e]=t},o.prototype.unregister=function(e){if(!this.isRegistered(e))throw a(e,r);this._actions[e]=void 0},o.prototype.length=function(){return Object.keys(this._actions).length},o.prototype.isRegistered=function(e){return!!this._actions[e]}},{"lodash/collection/forEach":360,"lodash/lang/isArray":480}],191:[function(e,t,n){t.exports={__depends__:[e("../selection"),e("../copy-paste"),e("../../navigation/zoomscroll")],__init__:["editorActions"],editorActions:["type",e("./EditorActions")]}},{"../../navigation/zoomscroll":287,"../copy-paste":182,"../selection":260,"./EditorActions":190}],192:[function(e,t,n){"use strict";var s="connect-ok",c="connect-not-ok";function i(i,e,r,o,t){var a=this;this._dragging=e,t.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),i.on("global-connect.hover",function(e){var t=e.context,n=e.hover,i=t.canStartConnect=a.canStartConnect(n);null!==i&&(t.startTarget=n,o.addMarker(n,i?s:c))}),i.on(["global-connect.out","global-connect.cleanup"],function(e){var t=e.context.startTarget,n=e.context.canStartConnect;t&&o.removeMarker(t,n?s:c)}),i.on(["global-connect.ended"],function(e){var t=e.context.startTarget,n={x:e.x,y:e.y};if(a.canStartConnect(t))return i.once("element.out",function(){i.once(["connect.ended","connect.canceled"],function(){i.fire("global-connect.drag.ended")}),r.start(null,t,n)}),!1})}i.$inject=["eventBus","dragging","connect","canvas","toolManager"],(t.exports=i).prototype.start=function(e){this._dragging.init(e,"global-connect",{trapClick:!1,data:{context:{}}})},i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.start()},i.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)},i.prototype.registerProvider=function(e){this._provider=e},i.prototype.canStartConnect=function(e){return this._provider.canStartConnect(e)}},{}],193:[function(e,t,n){t.exports={__depends__:[e("../connect"),e("../rules"),e("../dragging"),e("../tool-manager")],globalConnect:["type",e("./GlobalConnect")]}},{"../connect":178,"../dragging":189,"../rules":254,"../tool-manager":269,"./GlobalConnect":192}],194:[function(e,t,n){"use strict";var r=e("../../util/Mouse").hasPrimaryModifier,o=1500;function i(n,i,e,t){this._dragging=e,t.registerTool("hand",{tool:"hand",dragging:"hand.move"}),n.on("element.mousedown",o,function(e){if(r(e))return this.activateMove(e.originalEvent),!1},this),n.on("hand.end",function(e){var t=e.originalEvent.target;if(!(e.hover||t instanceof SVGElement))return!1;n.once("hand.ended",function(){this.activateMove(e.originalEvent,{reactivate:!0})},this)},this),n.on("hand.move.move",function(e){var t=i.viewbox().scale;i.scroll({dx:e.dx*t,dy:e.dy*t})}),n.on("hand.move.end",function(e){var t=e.context.reactivate;return!r(e)&&t&&n.once("hand.move.ended",function(e){this.activateHand(e.originalEvent,!0,!0)},this),!1},this)}i.$inject=["eventBus","canvas","dragging","toolManager"],(t.exports=i).prototype.activateMove=function(e,t,n){"object"==typeof t&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:"grab",data:{context:n||{}}})},i.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:"grab",data:{context:{reactivate:n}}})},i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateHand()},i.prototype.isActive=function(){var e=this._dragging.context();return e&&/^hand/.test(e.prefix)}},{"../../util/Mouse":301}],195:[function(e,t,n){"use strict";t.exports={__depends__:[e("../tool-manager")],__init__:["handTool"],handTool:["type",e("./HandTool")]}},{"../tool-manager":269,"./HandTool":194}],196:[function(e,t,n){"use strict";var d=e("lodash/collection/forEach"),h=e("min-dom/lib/delegate"),f=e("../../util/Mouse").isPrimaryButton,m=e("tiny-svg/lib/append"),v=e("tiny-svg/lib/attr"),g=e("tiny-svg/lib/create"),y=e("min-dom/lib/query"),i=e("../../util/RenderUtil"),b=i.createLine,x=i.updateLine,E=500;function r(o,a,e){var r=e.cls("djs-hit",["no-fill","no-border"],{stroke:"white",strokeWidth:15});function s(e,t,n){var i,r;f(t)&&(n?r=a.getGraphics(n):(i=t.delegateTarget||t.target)&&(r=i,n=a.get(r)),r&&n&&!1===o.fire(e,{element:n,gfx:r,originalEvent:t})&&(t.stopPropagation(),t.preventDefault()))}var n={};function c(t){var e=n[t];return e||(e=n[t]=function(e){s(t,e)}),e}var l={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mouseup:"element.mouseup"};var u="svg, .djs-element";function i(e,t,n){var i=c(n);i.$delegate=h.bind(e,u,t,i)}function p(e,t,n){h.unbind(e,t,c(n).$delegate)}o.on("canvas.destroy",function(e){var n;n=e.svg,d(l,function(e,t){p(n,t,e)})}),o.on("canvas.init",function(e){var n;n=e.svg,d(l,function(e,t){i(n,t,e)})}),o.on(["shape.added","connection.added"],function(e){var t,n=e.element,i=e.gfx;n.waypoints?t=b(n.waypoints):(t=g("rect"),v(t,{x:0,y:0,width:n.width,height:n.height})),v(t,r),m(i,t)}),o.on("shape.changed",E,function(e){var t=e.element,n=e.gfx,i=y(".djs-hit",n);v(i,{width:t.width,height:t.height})}),o.on("connection.changed",function(e){var t=e.element,n=e.gfx,i=y(".djs-hit",n);x(i,t.waypoints)}),this.fire=s,this.triggerMouseEvent=function(e,t,n){var i=l[e];if(!i)throw new Error("unmapped DOM event name <"+e+">");return s(i,t,n)},this.mouseHandler=c,this.registerEvent=i,this.unregisterEvent=p}r.$inject=["eventBus","elementRegistry","styles"],t.exports=r},{"../../util/Mouse":301,"../../util/RenderUtil":305,"lodash/collection/forEach":360,"min-dom/lib/delegate":508,"min-dom/lib/query":512,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540}],197:[function(e,t,n){t.exports={__init__:["interactionEvents"],interactionEvents:["type",e("./InteractionEvents")]}},{"./InteractionEvents":196}],198:[function(e,t,n){"use strict";var i=e("min-dom/lib/event"),s=e("min-dom/lib/matches");function r(e,t,n){var a=this;this._config=e||{},this._eventBus=t,this._editorActions=n,this._listeners=[],this._keyHandler=function(e){var t,n,i=e.target,r=a._listeners,o=e.keyCode||e.charCode||-1;if(!i||!s(i,"input, textarea")&&"true"!==i.contentEditable)for(t=0;n=r[t];t++)n(o,e)&&(e.preventDefault(),e.stopPropagation())},t.on("diagram.destroy",function(){a._fire("destroy"),a.unbind(),a._listeners=null}),t.on("diagram.init",function(){a._fire("init"),e&&e.bindTo&&a.bind(e.bindTo)}),this._init()}function o(e){return e.ctrlKey||e.metaKey}function a(e){return e.shiftKey}r.$inject=["config.keyboard","eventBus","editorActions"],(t.exports=r).prototype.bind=function(e){this.unbind(),this._node=e,i.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")},r.prototype.getBinding=function(){return this._node},r.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),i.unbind(e,"keydown",this._keyHandler,!0)),this._node=null},r.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})},r.prototype._init=function(){var e=this._listeners,i=this._editorActions,r=this._config;e.push(function(e,t){if(o(t)&&!a(t)&&90===e)return i.trigger("undo"),!0}),e.push(function(e,t){if(o(t)&&(89===e||90===e&&a(t)))return i.trigger("redo"),!0}),e.push(function(e,t){if(o(t)&&67===e)return i.trigger("copy"),!0}),e.push(function(e,t){if(o(t)&&86===e)return i.trigger("paste"),!0}),e.push(function(e,t){if(46===e)return i.trigger("removeSelection"),!0}),e.push(function(e,t){if((107===e||187===e||171===e||61===e)&&o(t))return i.trigger("stepZoom",{value:1}),!0}),e.push(function(e,t){if((109===e||189===e||173===e)&&o(t))return i.trigger("stepZoom",{value:-1}),!0}),e.push(function(e,t){if((96===e||48===e)&&o(t))return i.trigger("zoom",{value:1}),!0}),e.push(function(e,t){if(0<=[37,38,39,40].indexOf(e)){var n={invertY:r.invertY,speed:r.speed||50};switch(e){case 37:n.direction="left";break;case 38:n.direction="up";break;case 39:n.direction="right";break;case 40:n.direction="down"}return i.trigger("moveCanvas",n),!0}})},r.prototype.addListener=function(e){this._listeners.push(e)},r.prototype.hasModifier=function(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey},r.prototype.isCmd=o,r.prototype.isShift=a},{"min-dom/lib/event":510,"min-dom/lib/matches":511}],199:[function(e,t,n){t.exports={__init__:["keyboard"],keyboard:["type",e("./Keyboard")]}},{"./Keyboard":198}],200:[function(e,t,n){"use strict";var o=e("lodash/collection/forEach"),i=e("lodash/collection/filter"),r=e("inherits"),a=250,s=1400,c=e("../../command/CommandInterceptor");function l(e,i,r){c.call(this,e),e.on("shape.move.start",s,function(e){var t=e.context,n=t.shapes,i=t.validatedShapes;t.shapes=u(n),t.validatedShapes=u(i)}),e.on("shape.move.start",a,function(e){var n=e.context,t=n.shapes,i=[];o(t,function(e){var t=e.label;t&&!t.hidden&&-1===n.shapes.indexOf(t)&&i.push(t),e.labelTarget&&i.push(e)}),o(i,function(e){r.makeDraggable(n,e,!0)})}),this.postExecuted(["elements.move"],function(e){var t=e.context,n=t.closure.enclosedElements;o(n,function(e){e.label&&!n[e.label.id]&&i.moveShape(e.label,t.delta,e.parent)})})}function u(t){return i(t,function(e){return-1===t.indexOf(e.labelTarget)})}r(l,c),l.$inject=["eventBus","modeling","movePreview"],t.exports=l},{"../../command/CommandInterceptor":146,inherits:343,"lodash/collection/filter":358,"lodash/collection/forEach":360}],201:[function(e,t,n){t.exports={__depends__:[e("../move")],__init__:["labelSupport"],labelSupport:["type",e("./LabelSupport")]}},{"../move":233,"./LabelSupport":200}],202:[function(e,t,n){"use strict";var i=e("lodash/object/values"),r=e("../../util/Elements").getEnclosedElements,u=e("../../util/Mouse").hasSecondaryModifier,p=e("tiny-svg/lib/append"),d=e("tiny-svg/lib/attr"),h=e("tiny-svg/lib/create"),f=e("tiny-svg/lib/remove");function o(n,i,e,r,t,o){this._selection=t,this._dragging=e;var a=this,s=function(e){var t,n=i.getDefaultLayer();t=e.frame=h("rect"),d(t,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),p(n,t)},c=function(e){var t=e.frame,n=e.bbox;d(t,{x:n.x,y:n.y,width:n.width,height:n.height})},l=function(e){e.frame&&f(e.frame)};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),n.on("lasso.selection.end",function(e){var t=e.originalEvent.target;(e.hover||t instanceof SVGElement)&&n.once("lasso.selection.ended",function(){a.activateLasso(e.originalEvent,!0)})}),n.on("lasso.end",function(e){var t=m(e),n=r.filter(function(e){return e});a.select(n,t)}),n.on("lasso.start",function(e){var t=e.context;t.bbox=m(e),s(t)}),n.on("lasso.move",function(e){var t=e.context;t.bbox=m(e),c(t)}),n.on("lasso.cleanup",function(e){var t=e.context;l(t)}),n.on("element.mousedown",1500,function(e){if(u(e))return a.activateLasso(e.originalEvent),!0})}function m(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:n.x<=t.x&&t.y<n.y||n.x<t.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&n.y<t.y||t.x<n.x&&n.y<=t.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:n.x<=t.x&&n.y<t.y||n.x<t.x&&n.y<=t.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}o.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"],(t.exports=o).prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:"crosshair",data:{context:{}}})},o.prototype.activateSelection=function(e){this._dragging.init(e,"lasso.selection",{trapClick:!1,cursor:"crosshair",data:{context:{}}})},o.prototype.select=function(e,t){var n=r(e,t);this._selection.select(i(n))},o.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},o.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)}},{"../../util/Elements":293,"../../util/Mouse":301,"lodash/object/values":500,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540,"tiny-svg/lib/remove":543}],203:[function(e,t,n){"use strict";t.exports={__depends__:[e("../tool-manager")],__init__:["lassoTool"],lassoTool:["type",e("./LassoTool")]}},{"../tool-manager":269,"./LassoTool":202}],204:[function(e,t,n){"use strict";var i=e("lodash/collection/forEach"),r=e("../../model");function o(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}o.$inject=["eventBus","elementFactory","commandStack"],(t.exports=o).prototype.getHandlers=function(){return{"shape.append":e("./cmd/AppendShapeHandler"),"shape.create":e("./cmd/CreateShapeHandler"),"shape.delete":e("./cmd/DeleteShapeHandler"),"shape.move":e("./cmd/MoveShapeHandler"),"shape.resize":e("./cmd/ResizeShapeHandler"),"shape.replace":e("./cmd/ReplaceShapeHandler"),"shape.toggleCollapse":e("./cmd/ToggleShapeCollapseHandler"),spaceTool:e("./cmd/SpaceToolHandler"),"label.create":e("./cmd/CreateLabelHandler"),"connection.create":e("./cmd/CreateConnectionHandler"),"connection.delete":e("./cmd/DeleteConnectionHandler"),"connection.move":e("./cmd/MoveConnectionHandler"),"connection.layout":e("./cmd/LayoutConnectionHandler"),"connection.updateWaypoints":e("./cmd/UpdateWaypointsHandler"),"connection.reconnectStart":e("./cmd/ReconnectConnectionHandler"),"connection.reconnectEnd":e("./cmd/ReconnectConnectionHandler"),"elements.move":e("./cmd/MoveElementsHandler"),"elements.delete":e("./cmd/DeleteElementsHandler"),"elements.distribute":e("./cmd/DistributeElementsHandler"),"elements.align":e("./cmd/AlignElementsHandler"),"element.updateAttachment":e("./cmd/UpdateAttachmentHandler"),"elements.paste":e("./cmd/PasteHandler")}},o.prototype.registerHandlers=function(n){i(this.getHandlers(),function(e,t){n.registerHandler(t,e)})},o.prototype.moveShape=function(e,t,n,i,r){"object"==typeof i&&(r=i,i=null);var o={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)},o.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},o.prototype.moveElements=function(e,t,n,i,r){"object"==typeof i&&(r=i,i=void 0);var o,a=n;!0===i&&(a=(o=n).parent),!1===i&&(o=null);var s={shapes:e,delta:t,newParent:a,newHost:o,hints:r||{}};this._commandStack.execute("elements.move",s)},o.prototype.moveConnection=function(e,t,n,i,r){"object"==typeof i&&(r=i,i=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)},o.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},o.prototype.createConnection=function(e,t,n,i,r,o){"object"==typeof n&&(o=r,r=i,i=n,n=void 0);var a={source:e,target:t,parent:r,parentIndex:n,connection:i=this._create("connection",i),hints:o};return this._commandStack.execute("connection.create",a),a.connection},o.prototype.createShape=function(e,t,n,i,r,o){"number"!=typeof i&&(o=r,r=i),"boolean"!=typeof r&&(o=r,r=!1);var a={position:t,shape:e=this._create("shape",e),parent:n,parentIndex:i,host:e.host,hints:o||{}};return r&&(a.parent=n.parent,a.host=n),this._commandStack.execute("shape.create",a),a.shape},o.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},o.prototype.appendShape=function(e,t,n,i,r,o){var a={source:e,position:n,parent:i,shape:t=this._create("shape",t),connection:r,connectionParent:o};return this._commandStack.execute("shape.append",a),a.shape},o.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},o.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)},o.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},o.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},o.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},o.prototype.pasteElements=function(e,t,n){var i={tree:e,topParent:t,position:n};this._commandStack.execute("elements.paste",i)},o.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},o.prototype.resizeShape=function(e,t,n){var i={shape:e,newBounds:t,minBounds:n};this._commandStack.execute("shape.resize",i)},o.prototype.createSpace=function(e,t,n,i){var r={movingShapes:e,resizingShapes:t,delta:n,direction:i};this._commandStack.execute("spaceTool",r)},o.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},o.prototype.reconnectStart=function(e,t,n){var i={connection:e,newSource:t,dockingOrPoints:n};this._commandStack.execute("connection.reconnectStart",i)},o.prototype.reconnectEnd=function(e,t,n){var i={connection:e,newTarget:t,dockingOrPoints:n};this._commandStack.execute("connection.reconnectEnd",i)},o.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)},o.prototype._create=function(e,t){return t instanceof r.Base?t:this._elementFactory.create(e,t)},o.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)}},{"../../model":281,"./cmd/AlignElementsHandler":205,"./cmd/AppendShapeHandler":206,"./cmd/CreateConnectionHandler":207,"./cmd/CreateLabelHandler":208,"./cmd/CreateShapeHandler":209,"./cmd/DeleteConnectionHandler":210,"./cmd/DeleteElementsHandler":211,"./cmd/DeleteShapeHandler":212,"./cmd/DistributeElementsHandler":213,"./cmd/LayoutConnectionHandler":214,"./cmd/MoveConnectionHandler":215,"./cmd/MoveElementsHandler":216,"./cmd/MoveShapeHandler":217,"./cmd/PasteHandler":219,"./cmd/ReconnectConnectionHandler":220,"./cmd/ReplaceShapeHandler":221,"./cmd/ResizeShapeHandler":222,"./cmd/SpaceToolHandler":223,"./cmd/ToggleShapeCollapseHandler":224,"./cmd/UpdateAttachmentHandler":225,"./cmd/UpdateWaypointsHandler":226,"lodash/collection/forEach":360}],205:[function(e,t,n){"use strict";var r=e("lodash/collection/forEach");function i(e,t){this._modeling=e,this._canvas=t}i.$inject=["modeling","canvas"],(t.exports=i).prototype.preExecute=function(e){var n=this._modeling,t=e.elements,i=e.alignment;r(t,function(e){var t={x:0,y:0};i.left?t.x=i.left-e.x:i.right?t.x=i.right-e.width-e.x:i.center?t.x=i.center-Math.round(e.width/2)-e.x:i.top?t.y=i.top-e.y:i.bottom?t.y=i.bottom-e.height-e.y:i.middle&&(t.y=i.middle-Math.round(e.height/2)-e.y),n.moveElements([e],t,e.parent)})},i.prototype.postExecute=function(e){}},{"lodash/collection/forEach":360}],206:[function(e,t,n){"use strict";var r=e("lodash/collection/any");function i(e){this._modeling=e}e("inherits")(i,e("./NoopHandler")),i.$inject=["modeling"],(t.exports=i).prototype.preExecute=function(e){if(!e.source)throw new Error("source required");var t=e.parent||e.source.parent,n=this._modeling.createShape(e.shape,e.position,t);e.shape=n},i.prototype.postExecute=function(e){var t,n,i=e.connectionParent||e.shape.parent;t=e.source,n=e.shape,r(t.outgoing,function(e){return e.target===n})||this._modeling.connect(e.source,e.shape,e.connection,i)}},{"./NoopHandler":218,inherits:343,"lodash/collection/any":356}],207:[function(e,t,n){"use strict";function i(e,t){this._canvas=e,this._layouter=t}i.$inject=["canvas","layouter"],(t.exports=i).prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,o=e.parentIndex,a=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,r,o),t},i.prototype.revert=function(e){var t=e.connection;this._canvas.removeConnection(t),t.source=null,t.target=null}},{}],208:[function(e,t,n){"use strict";var i=e("inherits"),r=e("./CreateShapeHandler");function o(e){r.call(this,e)}i(o,r),o.$inject=["canvas"],t.exports=o;var a=r.prototype.execute;o.prototype.execute=function(e){var t,n=e.shape;return t=n,["width","height"].forEach(function(e){void 0===t[e]&&(t[e]=0)}),n.labelTarget=e.labelTarget,a.call(this,e)};var s=r.prototype.revert;o.prototype.revert=function(e){return e.shape.labelTarget=null,s.call(this,e)}},{"./CreateShapeHandler":209,inherits:343}],209:[function(e,t,n){"use strict";var o=e("lodash/object/assign"),a=Math.round;function i(e){this._canvas=e}i.$inject=["canvas"],(t.exports=i).prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?o(t,n):o(t,{x:n.x-a(t.width/2),y:n.y-a(t.height/2)}),this._canvas.addShape(t,i,r),t},i.prototype.revert=function(e){this._canvas.removeShape(e.shape)}},{"lodash/object/assign":490}],210:[function(e,t,n){"use strict";var r=e("../../../util/Collections");function i(e,t){this._canvas=e,this._modeling=t}i.$inject=["canvas","modeling"],(t.exports=i).prototype.preExecute=function(e){var t=e.connection;t.label&&this._modeling.removeShape(t.label)},i.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=r.indexOf(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t.label=null,t},i.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,r.add(n.children,t,i),this._canvas.addConnection(t,n),t}},{"../../../util/Collections":290}],211:[function(e,t,n){"use strict";var r=e("lodash/collection/forEach");function i(e,t){this._modeling=e,this._elementRegistry=t}e("inherits")(i,e("./NoopHandler")),i.$inject=["modeling","elementRegistry"],(t.exports=i).prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;r(i,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})}},{"./NoopHandler":218,inherits:343,"lodash/collection/forEach":360}],212:[function(e,t,n){"use strict";var a=e("../../../util/Collections"),r=e("../../../util/Removal").saveClear;function i(e,t){this._canvas=e,this._modeling=t}i.$inject=["canvas","modeling"],(t.exports=i).prototype.preExecute=function(e){var t=this._modeling,n=e.shape,i=n.label;n.labelTarget&&(e.labelTarget=n.labelTarget,n.labelTarget=null),i&&this._modeling.removeShape(i,{nested:!0}),r(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),r(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),r(n.children,function(e){e.waypoints?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})})},i.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=a.indexOf(i.children,n),n.label=null,t.removeShape(n),n},i.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex,o=e.labelTarget;return a.add(i.children,n,r),o&&(o.label=n),t.addShape(n,i),n}},{"../../../util/Collections":290,"../../../util/Removal":304}],213:[function(e,t,n){"use strict";var y=e("lodash/collection/forEach"),b=e("lodash/collection/sortBy");function i(e){this._modeling=e}i.$inject=["modeling"],t.exports=i;var x={x:"y",y:"x"};i.prototype.preExecute=function(e){var o=this._modeling,a=e.groups,s=e.axis,c=e.dimension;function l(e,t){e.range.min=Math.min(t[s],e.range.min),e.range.max=Math.max(t[s]+t[c],e.range.max)}function u(e){return e[s]+e[c]/2}function p(e){return e.length-1}function d(e){return e.max-e.min}var h,t,f=a[0],m=p(a),v=a[m],g=0;y(a,function(i,e){var t,n,r;i.elements.length<2?e&&e!==a.length-1&&(l(i,i.elements[0]),g+=d(i.range)):(n=(t=b(i.elements,s))[0],e===m&&(n=t[p(t)]),r=u(n),i.range=null,y(t,function(e){var t,n;(n={y:0})[s]=r-u(t=e),n[s]&&(n[x[s]]=0,o.moveElements([t],n,t.parent)),null!==i.range?l(i,e):i.range={min:e[s],max:e[s]+e[c]}}),e&&e!==a.length-1&&(g+=d(i.range)))}),t=Math.abs(v.range.min-f.range.max),(h=Math.round((t-g)/(a.length-1)))<a.length-1||y(a,function(n,e){var i,r={};n!==f&&n!==v&&(i=a[e-1],n.range.max=0,y(n.elements,function(e,t){r[x[s]]=0,r[s]=i.range.max-e[s]+h,n.range.min!==e[s]&&(r[s]+=e[s]-n.range.min),r[s]&&o.moveElements([e],r,e.parent),n.range.max=Math.max(e[s]+e[c],t?n.range.max:0)}))})},i.prototype.postExecute=function(e){}},{"lodash/collection/forEach":360,"lodash/collection/sortBy":368}],214:[function(e,t,n){"use strict";var i=e("lodash/object/assign");function r(e,t){this._layouter=e,this._canvas=t}r.$inject=["layouter","canvas"],(t.exports=r).prototype.execute=function(e){var t=e.connection,n=t.waypoints;return i(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},r.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t}},{"lodash/object/assign":490}],215:[function(e,t,n){"use strict";var a=e("lodash/collection/forEach"),s=e("../../../util/Collections");function i(){}(t.exports=i).prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=s.remove(o.children,t),s.add(i.children,t,r),t.parent=i,a(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},i.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,o=e.delta;return s.remove(n.children,t),s.add(i.children,t,r),t.parent=i,a(t.waypoints,function(e){e.x-=o.x,e.y-=o.y,e.original&&(e.original.x-=o.x,e.original.y-=o.y)}),t}},{"../../../util/Collections":290,"lodash/collection/forEach":360}],216:[function(e,t,n){"use strict";var i=e("./helper/MoveHelper");function r(e){this._helper=new i(e)}r.$inject=["modeling"],(t.exports=r).prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},r.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},r.prototype.execute=function(e){},r.prototype.revert=function(e){}},{"./helper/MoveHelper":228}],217:[function(e,t,n){"use strict";var a=e("lodash/object/assign"),o=e("lodash/collection/forEach"),s=e("lodash/object/pick"),i=e("./helper/MoveHelper"),c=e("../../../util/Collections"),l=e("./helper/AnchorsHelper").getMovedSourceAnchor,u=e("./helper/AnchorsHelper").getMovedTargetAnchor;function r(e){this._modeling=e,this._helper=new i(e)}r.$inject=["modeling"],(t.exports=r).prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldBounds=s(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=c.remove(o.children,t),c.add(i.children,t,r),a(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t},r.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;!1!==i.layout&&(o(t.incoming,function(e){r.layoutConnection(e,{connectionEnd:u(e,t,n)})}),o(t.outgoing,function(e){r.layoutConnection(e,{connectionStart:l(e,t,n)})})),!1!==i.recurse&&this.moveChildren(e)},r.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return c.add(n.children,t,i),a(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},r.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},r.prototype.getNewParent=function(e){return e.newParent||e.shape.parent}},{"../../../util/Collections":290,"./helper/AnchorsHelper":227,"./helper/MoveHelper":228,"lodash/collection/forEach":360,"lodash/object/assign":490,"lodash/object/pick":498}],218:[function(e,t,n){"use strict";function i(){}(t.exports=i).prototype.execute=function(){},i.prototype.revert=function(){}},{}],219:[function(e,t,n){"use strict";var r=e("lodash/collection/forEach"),d=e("lodash/collection/map"),i=e("lodash/collection/sortBy"),h=e("lodash/lang/clone");function f(t,e){r(e,function(e){t[e]&&delete t[e]})}function o(e,t,n,i,r,o){this._eventBus=e,this._canvas=t,this._selection=n,this._elementFactory=i,this._modeling=r,this._rules=o}e("inherits")(o,e("./NoopHandler")),o.$inject=["eventBus","canvas","selection","elementFactory","modeling","rules"],(t.exports=o).prototype.preExecute=function(e){var c=this._eventBus,l=e.tree,u=e.topParent,p=e.position;l.createdElements={},l.labels=[],r(l,function(e,t){var s=parseInt(t,10);isNaN(s)||(s||(e=d(e,function(e){return e.parent=u,e})),e=i(e,"priority"),r(e,function(e){var t,n,i=e.id,r=e.parent,o=!1,a=h(e);if(s&&(a.parent=this._getCreatedElement(r,l)),r)if(c.fire("element.paste",{createdElements:l.createdElements,descriptor:a}),r=a.parent,a.waypoints)(a=this._createConnection(a,r,p,l))&&(l.createdElements[i]={element:a,descriptor:e});else{if(a.parent!==u&&(t={root:!1}),a.host&&(o=!0,r=this._getCreatedElement(a.host,l)),a.labelTarget)return l.labels.push(a);n={x:Math.round(p.x+a.delta.x+a.width/2),y:Math.round(p.y+a.delta.y+a.height/2)},f(a,["id","parent","delta","host","priority"]),(a=this._createShape(a,r,n,o,t))&&(l.createdElements[i]={element:a,descriptor:e})}},this))},this)},o.prototype.postExecute=function(e){var o=this._modeling,t=this._selection,a=e.tree,n=a.labels,i=[];r(n,function(e){var t,n,i,r=this._getCreatedElement(e.labelTarget,a);r&&(t=r.label)&&(n={x:r.x,y:r.y},r.waypoints&&(n=r.waypoints[0]),i={x:Math.round(n.x-t.x+e.delta.x),y:Math.round(n.y-t.y+e.delta.y)},o.moveShape(t,i,r.parent))},this),r(a[0],function(e){var t=e.id,n=a.createdElements[t];n&&i.push(n.element)}),t.select(i)},o.prototype._createConnection=function(n,e,i,t){var r,o,a=this._modeling,s=this._rules;return n.waypoints=d(n.waypoints,function(e,t){return{x:Math.round(i.x+n.delta[t].x),y:Math.round(i.y+n.delta[t].y)}}),r=this._getCreatedElement(n.source,t),o=this._getCreatedElement(n.target,t),r&&o&&s.allowed("element.paste",{source:r,target:o})?(f(n,["id","parent","delta","source","target","width","height","priority"]),a.createConnection(r,o,n,e)):null},o.prototype._createShape=function(e,t,n,i,r){var o=this._modeling,a=this._elementFactory;if(!this._rules.allowed("element.paste",{element:e,position:n,parent:t}))return null;var s=a.createShape(e);return o.createShape(s,n,t,i,r),s},o.prototype._getCreatedElement=function(e,t){return t.createdElements[e]&&t.createdElements[e].element}},{"./NoopHandler":218,inherits:343,"lodash/collection/forEach":360,"lodash/collection/map":363,"lodash/collection/sortBy":368,"lodash/lang/clone":478}],220:[function(e,t,n){"use strict";var s=e("lodash/lang/isArray");function i(){}i.$inject=[],(t.exports=i).prototype.execute=function(e){var t,n=e.newSource,i=e.newTarget,r=e.connection,o=e.dockingOrPoints,a=r.waypoints;if(!n&&!i)throw new Error("newSource or newTarget are required");if(n&&i)throw new Error("must specify either newSource or newTarget");return e.oldWaypoints=a,s(o)?t=o:(t=a.slice()).splice(n?0:-1,1,o),n&&(e.oldSource=r.source,r.source=n),i&&(e.oldTarget=r.target,r.target=i),r.waypoints=t,r},i.prototype.revert=function(e){var t=e.newSource,n=e.newTarget,i=e.connection;return t&&(i.source=e.oldSource),n&&(i.target=e.oldTarget),i.waypoints=e.oldWaypoints,i}},{"lodash/lang/isArray":480}],221:[function(e,t,n){"use strict";var h=e("lodash/collection/forEach");function i(e,t){this._modeling=e,this._rules=t}i.$inject=["modeling","rules"],(t.exports=i).prototype.preExecute=function(e){var i,r=this,t=this._modeling,o=this._rules,n=e.oldShape,a=e.newData,s=e.hints;function c(e,t,n,i){return o.allowed(e,{source:t,target:n,connection:i})}var l,u={x:a.x,y:a.y};i=e.newShape=e.newShape||r.createShape(a,u,n.parent),n.host&&t.updateAttachment(i,n.host),!1!==s.moveChildren&&(l=n.children.slice(),t.moveElements(l,{x:0,y:0},i));var p=n.incoming.slice(),d=n.outgoing.slice();h(p,function(e){var t=e.waypoints,n=t[t.length-1];c("connection.reconnectEnd",e.source,i,e)&&r.reconnectEnd(e,i,n)}),h(d,function(e){var t=e.waypoints[0],n=e.target;c("connection.reconnectStart",i,n,e)&&r.reconnectStart(e,i,t)})},i.prototype.postExecute=function(e){var t=this._modeling,n=e.oldShape,i=e.newShape;h(i.incoming,function(e){t.layoutConnection(e,{endChanged:!0})}),h(i.outgoing,function(e){t.layoutConnection(e,{startChanged:!0})}),t.removeShape(n)},i.prototype.execute=function(e){},i.prototype.revert=function(e){},i.prototype.createShape=function(e,t,n){return this._modeling.createShape(e,t,n)},i.prototype.reconnectStart=function(e,t,n){this._modeling.reconnectStart(e,t,n)},i.prototype.reconnectEnd=function(e,t,n){this._modeling.reconnectEnd(e,t,n)}},{"lodash/collection/forEach":360}],222:[function(e,t,n){"use strict";var r=e("lodash/object/assign"),o=e("lodash/collection/forEach"),a=e("./helper/AnchorsHelper").getResizedSourceAnchor,s=e("./helper/AnchorsHelper").getResizedTargetAnchor;function i(e){this._modeling=e}i.$inject=["modeling"],(t.exports=i).prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},r(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},i.prototype.postExecute=function(e){var t=e.shape,n=e.oldBounds,i=this._modeling;o(t.incoming,function(e){i.layoutConnection(e,{connectionEnd:s(e,t,n)})}),o(t.outgoing,function(e){i.layoutConnection(e,{connectionStart:a(e,t,n)})})},i.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return r(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t}},{"./helper/AnchorsHelper":227,"lodash/collection/forEach":360,"lodash/object/assign":490}],223:[function(e,t,n){"use strict";var o=e("lodash/collection/forEach"),a=e("../../space-tool/SpaceUtil");function i(e){this._modeling=e}i.$inject=["modeling"],(t.exports=i).prototype.preExecute=function(e){var n=this._modeling,t=e.resizingShapes,i=e.delta,r=e.direction;o(t,function(e){var t=a.resizeBounds(e,r,i);n.resizeShape(e,t)})},i.prototype.postExecute=function(e){var t=this._modeling,n=e.movingShapes,i=e.delta;t.moveElements(n,i,void 0,!1,{autoResize:!1})},i.prototype.execute=function(e){},i.prototype.revert=function(e){}},{"../../space-tool/SpaceUtil":266,"lodash/collection/forEach":360}],224:[function(e,t,n){"use strict";function i(e){this._modeling=e}i.$inject=["modeling"],(t.exports=i).prototype.execute=function(e){var t,n,i,r=e.shape,o=r.children;return e.oldChildrenVisibility=(t={},o.forEach(function(e){t[e.id]=e.hidden}),t),r.collapsed=!r.collapsed,n=o,i=r.collapsed,n.forEach(function(e){e.hidden=i}),[r].concat(o)},i.prototype.revert=function(e){var t,n=e.shape,i=e.oldChildrenVisibility,r=n.children;return t=i,r.forEach(function(e){e.hidden=t[e.id]}),n.collapsed=!n.collapsed,[n].concat(r)}},{}],225:[function(e,t,n){"use strict";var r=e("../../../util/Collections");function i(e){this._modeling=e}function o(e,t){return r.remove(e&&e.attachers,t)}function a(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),r.add(i,t,n)}}(t.exports=i).$inject=["modeling"],i.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=o(i,t),a(n,t),t.host=n,t},i.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,o(n,t),a(i,t,r),t}},{"../../../util/Collections":290}],226:[function(e,t,n){"use strict";function i(){}(t.exports=i).prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},i.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t}},{}],227:[function(e,t,n){"use strict";var o=e("../../../../util/AttachUtil").getNewAttachPoint;function i(e,t,n){var i=s(e)[0];return o(i.original||i,n,t)}function r(e,t,n){var i=s(e),r=i[i.length-1];return o(r.original||r,n,t)}function a(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function s(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}t.exports.getResizedSourceAnchor=i,t.exports.getResizedTargetAnchor=r,t.exports.getMovedSourceAnchor=function(e,t,n){return i(e,t,a(t,n))},t.exports.getMovedTargetAnchor=function(e,t,n){return r(e,t,a(t,n))}},{"../../../../util/AttachUtil":288}],228:[function(e,t,n){"use strict";var p=e("lodash/collection/forEach"),i=e("../../../../util/Elements"),d=e("./AnchorsHelper").getMovedSourceAnchor,h=e("./AnchorsHelper").getMovedTargetAnchor;function r(e){this._modeling=e}(t.exports=r).prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},r.prototype.moveClosure=function(e,i,r,t,n){var o=this._modeling,a=e.allShapes,s=e.allConnections,c=e.enclosedConnections,l=e.topLevel,u=!1;n&&n.parent===r&&(u=!0),p(a,function(e){o.moveShape(e,i,l[e.id]&&!u&&r,{recurse:!1,layout:!1})}),p(s,function(e){var t=!!a[e.source.id],n=!!a[e.target.id];c[e.id]&&t&&n?o.moveConnection(e,i,l[e.id]&&!u&&r):o.layoutConnection(e,{connectionStart:t&&d(e,e.source,i),connectionEnd:n&&h(e,e.target,i)})})},r.prototype.getClosure=function(e){return i.getClosure(e)}},{"../../../../util/Elements":293,"./AnchorsHelper":227,"lodash/collection/forEach":360}],229:[function(e,t,n){"use strict";var i=e("lodash/function/bind");function r(e,t){this._eventBus=e,this._canvas=t,this._init()}r.$inject=["eventBus","canvas"],(t.exports=r).prototype.getHoverContext=function(){var e=this._canvas.viewbox();return{element:this._hoverElement,point:{x:e.x+Math.round(this._mouseX/e.scale),y:e.y+Math.round(this._mouseY/e.scale)}}},r.prototype._init=function(){var e=this._eventBus,t=this._canvas.getContainer();this._setMousePosition=i(this._setMousePosition,this),t.addEventListener("mousemove",this._setMousePosition),e.on("diagram.destroy",function(){t.removeEventListener("mousemove",this._setMousePosition)},this),e.on("element.hover",this._setHoverElement,this)},r.prototype._setHoverElement=function(e){this._hoverElement=e.element},r.prototype._setMousePosition=function(e){this._mouseX=e.layerX,this._mouseY=e.layerY}},{"lodash/function/bind":370}],230:[function(e,t,n){"use strict";t.exports={__init__:["mouseTracking"],mouseTracking:["type",e("./MouseTracking")]}},{"./MouseTracking":229}],231:[function(e,t,n){"use strict";var l=e("lodash/object/assign"),u=e("lodash/collection/filter"),p=e("lodash/collection/groupBy"),i=500,d=1250,h=1500,f=e("../../util/Event").getOriginal,m=Math.round;function r(e,o,a,s,r){function c(e,t,n,i){return r.allowed("elements.move",{shapes:e,delta:t,position:n,target:i})}function n(e,t,n){if(!t.waypoints&&t.parent){var i,r={x:(i=t).x+m(i.width/2),y:i.y+m(i.height/2)};return o.init(e,r,"shape.move",{cursor:"grabbing",autoActivate:n,data:{shape:t,context:{}}}),!0}}e.on("shape.move.start",h,function(e){var t,n,i=e.context,r=e.shape,o=s.get().slice();-1===o.indexOf(r)&&(o=[r]),n=p(t=o,"id"),o=u(t,function(e){for(;e=e.parent;)if(n[e.id])return!1;return!0}),l(i,{shapes:o,validatedShapes:o,shape:r})}),e.on("shape.move.start",d,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=c(n)))return!1}),e.on("shape.move.move",i,function(e){var t,n=e.context,i=n.validatedShapes,r=e.hover,o={x:e.dx,y:e.dy};t=c(i,o,{x:e.x,y:e.y},r),n.delta=o,null!==(n.canExecute=t)?n.target=r:n.target=null}),e.on("shape.move.end",function(e){var t=e.context,n=t.delta,i=t.canExecute,r="attach"===i,o=t.shapes;if(!i)return!1;n.x=m(n.x),n.y=m(n.y),a.moveElements(o,n,t.target,r,{primaryShape:t.shape})}),e.on("element.mousedown",function(e){var t=f(e);if(!t)throw new Error("must supply DOM mousedown event");return n(t,e.element)}),this.start=n}r.$inject=["eventBus","dragging","modeling","selection","rules"],t.exports=r},{"../../util/Event":294,"lodash/collection/filter":358,"lodash/collection/groupBy":361,"lodash/object/assign":490}],232:[function(e,t,n){"use strict";var d=e("lodash/array/flatten"),h=e("lodash/collection/forEach"),r=e("lodash/collection/filter"),o=e("lodash/collection/find"),f=e("lodash/collection/size"),m=e("lodash/collection/groupBy"),i=e("lodash/collection/map"),v=e("../../util/Elements"),g=e("tiny-svg/lib/append"),y=e("tiny-svg/lib/attr"),b=e("tiny-svg/lib/clear"),x=e("tiny-svg/lib/create"),E=e("../../util/SvgTransformUtil").translate,w=500,$="djs-dragging",_="drop-ok",S="drop-not-ok",C="new-parent",A="attach-ok";function a(e,t,s,c,l){function u(e){var i,t=p(e);return r(i=t,function(e){if(e.waypoints){var t=o(i,e.source),n=o(i,e.target);return t&&n}return!0})}function p(e){var t=v.selfAndAllChildren(e,!0),n=i(t,function(e){return(e.incoming||[]).concat(e.outgoing||[])});return d(t.concat(n),!0)}function a(t,n){[A,_,S,C].forEach(function(e){e===n?s.addMarker(t,e):s.removeMarker(t,e)})}this.makeDraggable=function(e,t,n){l.addDragger(t,e.dragGroup),n&&s.addMarker(t,$),e.allDraggedElements?e.allDraggedElements.push(t):e.allDraggedElements=[t]},e.on("shape.move.start",w,function(e){var t=e.context,n=t.shapes,i=t.allDraggedElements,r=u(n);if(!t.dragGroup){var o=x("g");y(o,c.cls("djs-drag-group",["no-events"]));var a=s.getDefaultLayer();g(a,o),t.dragGroup=o}r.forEach(function(e){l.addDragger(e,t.dragGroup)}),i=i?d(i,p(n)):p(n),h(i,function(e){s.addMarker(e,$)}),t.allDraggedElements=i,t.differentParents=1!==f(m(n,function(e){return e.parent&&e.parent.id}))}),e.on("shape.move.move",w,function(e){var t=e.context,n=t.dragGroup,i=t.target,r=t.shape.parent,o=t.canExecute;i&&("attach"===o?a(i,A):t.canExecute&&i&&i.id!==r.id?a(i,C):a(i,t.canExecute?_:S)),E(n,e.dx,e.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(e){var t=e.context.target;t&&a(t,null)}),e.on("shape.move.cleanup",function(e){var t=e.context,n=t.allDraggedElements,i=t.dragGroup;h(n,function(e){s.removeMarker(e,$)}),i&&b(i)})}a.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"],t.exports=a},{"../../util/Elements":293,"../../util/SvgTransformUtil":306,"lodash/array/flatten":346,"lodash/collection/filter":358,"lodash/collection/find":359,"lodash/collection/forEach":360,"lodash/collection/groupBy":361,"lodash/collection/map":363,"lodash/collection/size":366,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/clear":538,"tiny-svg/lib/create":540}],233:[function(e,t,n){t.exports={__depends__:[e("../interaction-events"),e("../selection"),e("../outline"),e("../rules"),e("../dragging"),e("../preview-support")],__init__:["move","movePreview"],move:["type",e("./Move")],movePreview:["type",e("./MovePreview")]}},{"../dragging":189,"../interaction-events":197,"../outline":236,"../preview-support":244,"../rules":254,"../selection":260,"./Move":231,"./MovePreview":232}],234:[function(e,t,n){"use strict";var i=e("inherits"),r=e("../../command/CommandInterceptor");function o(e){r.call(this,e);var o=this;this.preExecute(["shape.create","connection.create"],function(e){var t=e.context,n=t.shape||t.connection,i=t.parent,r=o.getOrdering(n,i);r&&(void 0!==r.parent&&(t.parent=r.parent),t.parentIndex=r.index)}),this.preExecute(["shape.move","connection.move"],function(e){var t=e.context,n=t.shape||t.connection,i=t.newParent||n.parent,r=o.getOrdering(n,i);r&&(void 0!==r.parent&&(t.newParent=r.parent),t.newParentIndex=r.index)})}o.prototype.getOrdering=function(e,t){return null},i(o,r),t.exports=o},{"../../command/CommandInterceptor":146,inherits:343}],235:[function(e,t,n){"use strict";var i=e("../../util/Elements").getBBox,a=500,s=e("tiny-svg/lib/append"),c=e("tiny-svg/lib/attr"),l=e("tiny-svg/lib/create"),u=e("min-dom/lib/query"),p=e("lodash/object/assign");function r(e,t,n){this.offset=6;var i=t.cls("djs-outline",["no-fill"]),r=this;function o(e,t){var n=l("rect");return c(n,p({x:10,y:10,width:100,height:100},i)),s(e,n),n}e.on(["shape.added","shape.changed"],a,function(e){var t=e.element,n=e.gfx,i=u(".djs-outline",n);i||(i=o(n)),r.updateShapeOutline(i,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,i=u(".djs-outline",n);i||(i=o(n)),r.updateConnectionOutline(i,t)})}r.prototype.updateShapeOutline=function(e,t){c(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},r.prototype.updateConnectionOutline=function(e,t){var n=i(t);c(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},r.$inject=["eventBus","styles","elementRegistry"],t.exports=r},{"../../util/Elements":293,"lodash/object/assign":490,"min-dom/lib/query":512,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540}],236:[function(e,t,n){"use strict";t.exports={__init__:["outline"],outline:["type",e("./Outline")]}},{"./Outline":235}],237:[function(e,t,n){"use strict";var r=e("lodash/lang/isArray"),a=e("lodash/lang/isString"),o=e("lodash/lang/isObject"),s=e("lodash/object/assign"),c=e("lodash/collection/forEach"),i=e("lodash/collection/find"),l=e("lodash/collection/filter"),u=e("min-dom/lib/domify"),p=e("min-dom/lib/classes"),d=e("min-dom/lib/attr"),h=e("min-dom/lib/remove"),f=e("min-dom/lib/clear"),m=e("../../util/Elements").getBBox,v=new(e("../../util/IdGenerator"))("ov");function g(e,t,n){s(e.style,{left:t+"px",top:n+"px"})}function y(e,t){e.style.display=!1===t?"none":""}function b(t,n){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(e){t.style[e+"transform"]=n})}function x(e){return void 0!==e}function E(e,t,n,i){var r,o;this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=v,this._overlayDefaults=s({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(r=n.getContainer(),o=u('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />'),r.insertBefore(o,r.firstChild),o),this._init()}E.$inject=["config.overlays","eventBus","canvas","elementRegistry"],(t.exports=E).prototype.get=function(e){if(a(e)&&(e={id:e}),a(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?l(t.overlays,{type:e.type}):t.overlays.slice():[]}return e.type?l(this._overlays,{type:e.type}):e.id?this._overlays[e.id]:null},E.prototype.add=function(e,t,n){if(o(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=s({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},E.prototype.remove=function(e){var t=this.get(e)||[];r(t)||(t=[t]);var i=this;c(t,function(e){var t=i._getOverlayContainer(e.element,!0);if(e&&(h(e.html),h(e.htmlContainer),delete e.htmlContainer,delete e.element,delete i._overlays[e.id]),t){var n=t.overlays.indexOf(e);-1!==n&&t.overlays.splice(n,1)}})},E.prototype.show=function(){y(this._overlayRoot)},E.prototype.hide=function(){y(this._overlayRoot,!1)},E.prototype.clear=function(){this._overlays={},this._overlayContainers=[],f(this._overlayRoot)},E.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=m(t);i=o.x,r=o.y}g(n,i,r),d(e.html,"data-container-id",t.id)},E.prototype._updateOverlay=function(e){var t,n,i=e.position,r=e.htmlContainer,o=e.element,a=i.left,s=i.top;void 0!==i.right&&(t=o.waypoints?m(o).width:o.width,a=-1*i.right+t);void 0!==i.bottom&&(n=o.waypoints?m(o).height:o.height,s=-1*i.bottom+n);g(r,a||0,s||0)},E.prototype._createOverlayContainer=function(e){var t=u('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},E.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";b(this._overlayRoot,n)},E.prototype._getOverlayContainer=function(t,e){var n=i(this._overlayContainers,function(e){return e.element===t});return n||e?n:this._createOverlayContainer(t)},E.prototype._addOverlay=function(e){var t,n,i=e.id,r=e.element,o=e.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),a(o)&&(o=u(o)),n=this._getOverlayContainer(r),(t=u('<div class="djs-overlay" data-overlay-id="'+i+'" style="position: absolute">')).appendChild(o),e.type&&p(t).add("djs-overlay-"+e.type),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},E.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=n&&n.minZoom,r=n&&n.maxZoom,o=e.htmlContainer,a=!0;n&&((x(i)&&i>t.scale||x(r)&&r<t.scale)&&(a=!1),y(o,a)),this._updateOverlayScale(e,t)},E.prototype._updateOverlayScale=function(e,t){var n,i,r,o=e.scale,a=e.htmlContainer,s="";!0!==o&&(!1===o?i=n=1:(n=o.min,i=o.max),x(n)&&t.scale<n&&(r=(1/t.scale||1)*n),x(i)&&t.scale>i&&(r=(1/t.scale||1)*i)),x(r)&&(s="scale("+r+","+r+")"),b(a,s)},E.prototype._updateOverlaysVisibilty=function(t){var n=this;c(this._overlays,function(e){n._updateOverlayVisibilty(e,t)})},E.prototype._init=function(){var e=this._eventBus,o=this;e.on("canvas.viewbox.changing",function(e){o.hide()}),e.on("canvas.viewbox.changed",function(e){var t;t=e.viewbox,o._updateRoot(t),o._updateOverlaysVisibilty(t),o.show()}),e.on(["shape.remove","connection.remove"],function(e){var t=e.element,n=o.get({element:t});c(n,function(e){o.remove(e.id)});var i=o._getOverlayContainer(t);if(i){h(i.html);var r=o._overlayContainers.indexOf(i);-1!==r&&o._overlayContainers.splice(r,1)}}),e.on("element.changed",500,function(e){var t=e.element,n=o._getOverlayContainer(t,!0);n&&(c(n.overlays,function(e){o._updateOverlay(e)}),o._updateOverlayContainer(n))}),e.on("element.marker.update",function(e){var t=o._getOverlayContainer(e.element,!0);t&&p(t.html)[e.add?"add":"remove"](e.marker)}),e.on("diagram.clear",this.clear,this)}},{"../../util/Elements":293,"../../util/IdGenerator":297,"lodash/collection/filter":358,"lodash/collection/find":359,"lodash/collection/forEach":360,"lodash/lang/isArray":480,"lodash/lang/isObject":485,"lodash/lang/isString":487,"lodash/object/assign":490,"min-dom/lib/attr":504,"min-dom/lib/classes":505,"min-dom/lib/clear":506,"min-dom/lib/domify":509,"min-dom/lib/remove":513}],238:[function(e,t,n){t.exports={__init__:["overlays"],overlays:["type",e("./Overlays")]}},{"./Overlays":237}],239:[function(e,t,n){"use strict";var c=e("lodash/lang/isFunction"),u=e("lodash/lang/isArray"),i=e("lodash/collection/forEach"),p=e("min-dom/lib/domify"),d=e("min-dom/lib/query"),h=e("min-dom/lib/attr"),r=e("min-dom/lib/clear"),f=e("min-dom/lib/classes"),o=e("min-dom/lib/matches"),a=e("min-dom/lib/delegate"),s=e("min-dom/lib/event"),l=".djs-palette-toggle";function m(e,t,n){this._eventBus=e,this._canvas=t,this._dragging=n,this._providers=[];var i=this;e.on("tool-manager.update",function(e){var t=e.tool;i.updateToolHighlight(t)}),e.on("i18n.changed",function(){i._update()})}m.$inject=["eventBus","canvas","dragging"],(t.exports=m).prototype.registerProvider=function(e){this._providers.push(e),this._container||this._init(),this._update()},m.prototype.getEntries=function(){var n={};return i(this._providers,function(e){var t=e.getPaletteEntries();i(t,function(e,t){n[t]=e})}),n},m.prototype._init=function(){var e=this._canvas,t=this._eventBus,n=e.getContainer(),i=this._container=p(m.HTML_MARKUP),r=this;n.appendChild(i),a.bind(i,".djs-palette-toggle, .entry","click",function(e){var t=e.delegateTarget;if(o(t,l))return r.toggle();r.trigger("click",e)}),s.bind(i,"mousedown",function(e){e.stopPropagation()}),a.bind(i,".entry","dragstart",function(e){r.trigger("dragstart",e)}),t.fire("palette.create",{html:i}),t.on("canvas.resized",this.triggerTwoColumn,this)},m.prototype._update=function(){var l=d(".djs-palette-entries",this._container),e=this._entries=this.getEntries();r(l),i(e,function(e,t){var n=e.group||"default",i=d("[data-group="+n+"]",l);i||(i=p('<div class="group" data-group="'+n+'"></div>'),l.appendChild(i));var r,o,a,s=e.html||(e.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),c=p(s);i.appendChild(c),e.separator||(h(c,"data-action",t),e.title&&h(c,"title",e.title),e.className&&(r=c,o=e.className,a=f(r),(u(o)?o:o.split(/\s+/g)).forEach(function(e){a.add(e)})),e.imageUrl&&c.appendChild(p('<img src="'+e.imageUrl+'">')))}),this.open(!0)},m.prototype.trigger=function(e,t,n){var i,r,o,a=this._entries,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();(i=a[h(s,"data-action")])&&(r=i.action,o=t.originalEvent||t,c(r)?"click"===e&&r(o,n):r[e]&&r[e](o,n),t.preventDefault())},m.prototype.triggerTwoColumn=function(){var e=this._canvas.getContainer();e.clientHeight<650?f(e).add("two-column"):f(e).remove("two-column")},m.prototype.close=function(){var e=this._canvas.getContainer();f(this._container).remove("open"),f(e).remove("two-column")},m.prototype.open=function(){f(this._container).add("open"),this.triggerTwoColumn()},m.prototype.toggle=function(e){this.isOpen()?this.close():this.open()},m.prototype.isActiveTool=function(e){return e&&this._activeTool===e},m.prototype.updateToolHighlight=function(n){var e,t;this._toolsContainer||(e=d(".djs-palette-entries",this._container),this._toolsContainer=d("[data-group=tools]",e)),t=this._toolsContainer,i(t.children,function(e){var t=e.getAttribute("data-action");t&&(t=t.replace("-tool",""),e.classList.contains("entry")&&t===n?f(e).add("highlighted-entry"):f(e).remove("highlighted-entry"))})},m.prototype.isOpen=function(){return this._container&&f(this._container).has("open")},m.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>'},{"lodash/collection/forEach":360,"lodash/lang/isArray":480,"lodash/lang/isFunction":482,"min-dom/lib/attr":504,"min-dom/lib/classes":505,"min-dom/lib/clear":506,"min-dom/lib/delegate":508,"min-dom/lib/domify":509,"min-dom/lib/event":510,"min-dom/lib/matches":511,"min-dom/lib/query":512}],240:[function(e,t,n){"use strict";t.exports={__depends__:[e("../tool-manager")],__init__:["palette"],palette:["type",e("./Palette")]}},{"../tool-manager":269,"./Palette":239}],241:[function(e,t,n){"use strict";var r=e("lodash/collection/forEach"),d=e("lodash/object/assign"),i=e("lodash/collection/find"),o=e("min-dom/lib/delegate"),a=e("min-dom/lib/domify"),s=e("min-dom/lib/classes"),c=e("min-dom/lib/attr"),l=e("min-dom/lib/remove");function u(e,t){this._eventBus=e,this._canvas=t,this._providers={}}u.$inject=["eventBus","canvas"],u.prototype.registerProvider=function(e,t){this._providers[e]=t},u.prototype.create=function(e,t){var n=this._providers[e];if(!n)throw new Error("Provider is not registered: "+e);if(!t)throw new Error("Element is missing");var i=this._current={provider:n,className:e,element:t};return n.getHeaderEntries&&(i.headerEntries=n.getHeaderEntries(t)),i.entries=n.getEntries(t),this},u.prototype.isEmpty=function(){var e=this._current;return 0===e.entries.length&&e.headerEntries&&0===e.headerEntries.length},u.prototype.open=function(e){if(!e)throw new Error("the position argument is missing");this.isOpen()&&this.close();var t=this._current,n=this._canvas.getContainer();if(t.position=e,t.container=this._createContainer(),t.headerEntries){var i=this._createEntries(t.headerEntries,"djs-popup-header");t.container.appendChild(i)}if(t.entries){var r=this._createEntries(t.entries,"djs-popup-body");t.container.appendChild(r)}return this._attachContainer(t.container,n,e.cursor),this},u.prototype.close=function(){this.isOpen()&&(this._unbindHandlers(),l(this._current.container),this._current.container=null)},u.prototype.isOpen=function(){return!!this._current.container},u.prototype.trigger=function(e){e.preventDefault();var t=e.delegateTarget||e.target,n=c(t,"data-id"),i=this._getEntry(n);if(i.action)return i.action.call(null,e,i)},u.prototype._getEntry=function(e){var t={id:e},n=i(this._current.entries,t)||i(this._current.headerEntries,t);if(!n)throw new Error("entry not found");return n},u.prototype._createContainer=function(){var e=a('<div class="djs-popup">'),t=this._current.position,n=this._current.className;return d(e.style,{position:"absolute",left:t.x+"px",top:t.y+"px",visibility:"hidden"}),s(e).add(n),e},u.prototype._attachContainer=function(e,t,n){var i=this;o.bind(e,".entry","click",function(e){i.trigger(e)});var r=this._canvas.zoom();e.style.transformOrigin="top left",e.style.transform="scale("+r+")",t.appendChild(e),n&&this._assureIsInbounds(e,n),this._bindHandlers()},u.prototype._assureIsInbounds=function(e,t){var n,i,r=this._canvas._container.getBoundingClientRect(),o=e.offsetLeft,a=e.offsetTop,s=e.scrollWidth,c=e.scrollHeight,l={},u=t.x-r.left,p=t.y-r.top;o+s>r.width&&(l.x=!0),a+c>r.height&&(l.y=!0),l.x&&l.y?(n=u-s+"px",i=p-c+"px"):l.x?(n=u-s+"px",i=p+"px"):l.y&&p<c?(n=u+"px",i="10px"):l.y&&(n=u+"px",i=p-c+"px"),d(e.style,{left:n,top:i},{visibility:"visible","z-index":1e3})},u.prototype._createEntries=function(e,t){var n=a("<div>"),i=this;return s(n).add(t),r(e,function(e){var t=i._createEntry(e,n);n.appendChild(t)}),n},u.prototype._createEntry=function(e){if(!e.id)throw new Error("every entry must have the id property set");var t=a("<div>"),n=s(t);if(n.add("entry"),e.className&&n.add(e.className),c(t,"data-id",e.id),e.label){var i=a("<span>");i.textContent=e.label,t.appendChild(i)}return e.imageUrl&&t.appendChild(a('<img src="'+e.imageUrl+'" />')),!0===e.active&&n.add("active"),!0===e.disabled&&n.add("disabled"),e.title&&(t.title=e.title),t},u.prototype._bindHandlers=function(){var e=this._eventBus,t=this;function n(){t.close()}e.once("contextPad.close",n),e.once("canvas.viewbox.changing",n),e.once("commandStack.changed",n)},u.prototype._unbindHandlers=function(){var e=this._eventBus,t=this;function n(){t.close()}e.off("contextPad.close",n),e.off("canvas.viewbox.changed",n),e.off("commandStack.changed",n)},t.exports=u},{"lodash/collection/find":359,"lodash/collection/forEach":360,"lodash/object/assign":490,"min-dom/lib/attr":504,"min-dom/lib/classes":505,"min-dom/lib/delegate":508,"min-dom/lib/domify":509,"min-dom/lib/remove":513}],242:[function(e,t,n){"use strict";t.exports={__init__:["popupMenu"],popupMenu:["type",e("./PopupMenu")]}},{"./PopupMenu":241}],243:[function(e,t,n){"use strict";var o=e("lodash/collection/forEach"),a=e("tiny-svg/lib/append"),s=e("tiny-svg/lib/attr"),c=e("tiny-svg/lib/clone"),i=e("tiny-svg/lib/create");function r(e,t,n){this._elementRegistry=e,this._canvas=t,this._styles=n}(t.exports=r).$inject=["elementRegistry","canvas","styles"],r.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},r.prototype.addDragger=function(e,t){var n=this.getGfx(e),i=c(n),r=n.getBoundingClientRect();return e.waypoints&&function t(e){e.children&&o(e.children,function(e){t(e)});e.style.markerStart="";e.style.markerEnd=""}(i),s(i,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),a(t,i),i},r.prototype.addFrame=function(e,t){var n=i("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return a(t,n),n}},{"lodash/collection/forEach":360,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/clone":539,"tiny-svg/lib/create":540}],244:[function(e,t,n){"use strict";t.exports={__init__:["previewSupport"],previewSupport:["type",e("./PreviewSupport")]}},{"./PreviewSupport":243}],245:[function(e,t,n){"use strict";function i(e){this._modeling=e}(t.exports=i).$inject=["modeling"],i.prototype.replaceElement=function(e,t,n){var i=this._modeling,r=null;return e.waypoints||(t.x=Math.ceil(e.x+(t.width||e.width)/2),t.y=Math.ceil(e.y+(t.height||e.height)/2),r=i.replaceShape(e,t,n)),r}},{}],246:[function(e,t,n){"use strict";t.exports={__init__:["replace"],replace:["type",e("./Replace")]}},{"./Replace":245}],247:[function(e,t,n){"use strict";var i=e("lodash/object/pick"),a=e("lodash/object/assign"),c=e("./ResizeUtil"),r=e("../../layout/LayoutUtil").asTRBL,l=e("../../layout/LayoutUtil").roundBounds;function o(e,t,o,n){this._dragging=n,this._rules=t;var s=this;e.on("resize.start",function(e){var t=e.context,n=t.resizeConstraints,i=t.minBounds;void 0===n&&(void 0===i&&(i=s.computeMinResizeBox(t)),t.resizeConstraints={min:r(i)})}),e.on("resize.move",function(e){var t,n,i=e.context,r=i.shape,o=i.direction,a=i.resizeConstraints;t={x:e.dx,y:e.dy},i.delta=t,n=c.resizeBounds(r,o,t),i.newBounds=c.ensureConstraints(n,a),i.canExecute=s.canResize(i)}),e.on("resize.end",function(e){var t=e.context,n=t.shape,i=t.canExecute,r=t.newBounds;i&&(r=l(r),o.resizeShape(n,r))})}o.prototype.canResize=function(e){var t=this._rules,n=i(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},o.prototype.activate=function(e,t,n){var i,r,o=this._dragging;if("string"==typeof n&&(n={direction:n}),!(r=(i=a({shape:t},n)).direction))throw new Error("must provide a direction (nw|se|ne|sw)");o.init(e,"resize",{autoActivate:!0,cursor:"resize-"+(/nw|se/.test(r)?"nwse":"nesw"),data:{shape:t,context:i}})},o.prototype.computeMinResizeBox=function(e){var t,n,i=e.shape,r=e.direction;return t=e.minDimensions||{width:10,height:10},n=c.computeChildrenBBox(i,e.childrenBoxPadding),c.getMinResizeBounds(r,i,t,n)},o.$inject=["eventBus","rules","modeling","dragging"],t.exports=o},{"../../layout/LayoutUtil":279,"./ResizeUtil":250,"lodash/object/assign":490,"lodash/object/pick":498}],248:[function(e,t,n){"use strict";var o=e("lodash/collection/forEach"),l="djs-resizer",u=e("tiny-svg/lib/append"),p=e("tiny-svg/lib/attr"),d=e("tiny-svg/lib/classes"),i=e("tiny-svg/lib/clear"),h=e("tiny-svg/lib/create"),a=e("min-dom/lib/event"),s=e("../../util/Mouse").isPrimaryButton,r=e("../../layout/LayoutUtil").asTRBL,f=e("../../util/SvgTransformUtil").transform;function c(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",function(e){var t=e.newSelection;r.removeResizers(),1===t.length&&o(t,r.addResizer,r)}),e.on("shape.changed",function(e){var t=e.element;n.isSelected(t)&&(r.removeResizers(),r.addResizer(t))})}c.prototype.makeDraggable=function(t,e,n){var i=this._resize;function r(e){s(e)&&i.activate(e,t,n)}a.bind(e,"mousedown",r),a.bind(e,"touchstart",r)},c.prototype._createResizer=function(e,t,n,i,r){var o=this._getResizersParent(),a=h("g");d(a).add(l),d(a).add(l+"-"+e.id),d(a).add(l+"-"+r),u(o,a);var s=h("rect");p(s,{x:-7,y:-7,width:5,height:5}),d(s).add(l+"-visual"),u(a,s);var c=h("rect");return p(c,{x:-7,y:-7,width:20,height:20}),d(c).add(l+"-hit"),u(a,c),f(a,t,n,i),a},c.prototype.createResizer=function(e,t){var n,i=r(e);n="nw"===t?this._createResizer(e,i.left,i.top,0,t):"ne"===t?this._createResizer(e,i.right,i.top,90,t):"se"===t?this._createResizer(e,i.right,i.bottom,180,t):this._createResizer(e,i.left,i.bottom,270,t),this.makeDraggable(e,n,t)},c.prototype.addResizer=function(e){this._resize.canResize({shape:e})&&(this.createResizer(e,"nw"),this.createResizer(e,"ne"),this.createResizer(e,"se"),this.createResizer(e,"sw"))},c.prototype.removeResizers=function(){var e=this._getResizersParent();i(e)},c.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},c.$inject=["eventBus","canvas","selection","resize"],t.exports=c},{"../../layout/LayoutUtil":279,"../../util/Mouse":301,"../../util/SvgTransformUtil":306,"lodash/collection/forEach":360,"min-dom/lib/event":510,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/classes":537,"tiny-svg/lib/clear":538,"tiny-svg/lib/create":540}],249:[function(e,t,n){"use strict";var s="djs-resizing",c="resize-not-ok",i=500,l=e("tiny-svg/lib/attr"),r=e("tiny-svg/lib/remove"),u=e("tiny-svg/lib/classes");function o(e,t,o,n,a){e.on("resize.move",i,function(e){var t=e.context,n=t.shape,i=t.newBounds,r=t.frame;r||(r=t.frame=a.addFrame(n,o.getDefaultLayer()),o.addMarker(n,s)),5<i.width&&l(r,{x:i.x,width:i.width}),5<i.height&&l(r,{y:i.y,height:i.height}),t.canExecute?u(r).remove(c):u(r).add(c)}),e.on("resize.cleanup",function(e){var t=e.context,n=t.shape;t.frame&&r(t.frame),o.removeMarker(n,s)})}o.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"],t.exports=o},{"tiny-svg/lib/attr":536,"tiny-svg/lib/classes":537,"tiny-svg/lib/remove":543}],250:[function(e,t,n){"use strict";var i=e("lodash/collection/filter"),c=Math.max,l=Math.min,r=20,o=e("../../util/Elements").getBBox,u=e("../../layout/LayoutUtil").asTRBL,p=e("../../layout/LayoutUtil").asBounds;function a(e){return"number"==typeof e}function s(e,t,n){var i=t[e],r=n.min&&n.min[e],o=n.max&&n.max[e];return a(r)&&(i=(/top|left/.test(e)?l:c)(i,r)),a(o)&&(i=(/top|left/.test(e)?c:l)(i,o)),i}function d(e,t){return void 0!==e?e:r}function h(e,t){var n,i,r,o;return"object"==typeof t?(n=d(t.left),i=d(t.right),r=d(t.top),o=d(t.bottom)):n=i=r=o=d(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+o}}function f(e){return!e.waypoints&&"label"!==e.type}t.exports.substractTRBL=function(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}},t.exports.resizeBounds=function(e,t,n){var i=n.x,r=n.y;switch(t){case"nw":return{x:e.x+i,y:e.y+r,width:e.width-i,height:e.height-r};case"sw":return{x:e.x+i,y:e.y,width:e.width-i,height:e.height+r};case"ne":return{x:e.x,y:e.y+r,width:e.width+i,height:e.height-r};case"se":return{x:e.x,y:e.y,width:e.width+i,height:e.height+r};default:throw new Error("unrecognized direction: "+t)}},t.exports.resizeTRBL=function(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}},t.exports.reattachPoint=function(e,t,n){var i=e.width/t.width,r=e.height/t.height;return{x:Math.round(t.x+t.width/2)-Math.floor((e.x+e.width/2-n.x)/i),y:Math.round(t.y+t.height/2)-Math.floor((e.y+e.height/2-n.y)/r)}},t.exports.ensureConstraints=function(e,t){if(!t)return e;var n=u(e);return p({top:s("top",n,t),right:s("right",n,t),bottom:s("bottom",n,t),left:s("left",n,t)})},t.exports.getMinResizeBounds=function(e,t,n,i){var r=u(t),o={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},a=i?u(i):o,s={top:l(o.top,a.top),left:l(o.left,a.left),bottom:c(o.bottom,a.bottom),right:c(o.right,a.right)};return p(s)},t.exports.addPadding=h,t.exports.computeChildrenBBox=function(e,t){var n;if((n=void 0===e.length?i(e.children,f):e).length)return h(o(n),t)}},{"../../layout/LayoutUtil":279,"../../util/Elements":293,"lodash/collection/filter":358}],251:[function(e,t,n){t.exports={__depends__:[e("../rules"),e("../dragging"),e("../preview-support")],__init__:["resize","resizePreview","resizeHandles"],resize:["type",e("./Resize")],resizePreview:["type",e("./ResizePreview")],resizeHandles:["type",e("./ResizeHandles")]}},{"../dragging":189,"../preview-support":244,"../rules":254,"./Resize":247,"./ResizeHandles":248,"./ResizePreview":249}],252:[function(e,t,n){"use strict";var i=e("inherits"),r=e("../../command/CommandInterceptor");function o(e){r.call(this,e),this.init()}o.$inject=["eventBus"],i(o,r),(t.exports=o).prototype.addRule=function(e,t,i){var n=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){n.canExecute(e,t,function(e,t,n){return i(e)},!0)})},o.prototype.init=function(){}},{"../../command/CommandInterceptor":146,inherits:343}],253:[function(e,t,n){"use strict";function i(e){this._commandStack=e.get("commandStack",!1)}i.$inject=["injector"],(t.exports=i).prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),void 0===n||n}},{}],254:[function(e,t,n){t.exports={__init__:["rules"],rules:["type",e("./Rules")]}},{"./Rules":253}],255:[function(e,t,n){"use strict";var i=e("min-dom/lib/clear"),o=e("min-dom/lib/delegate"),r=e("min-dom/lib/query"),a=e("min-dom/lib/classes"),s=e("min-dom/lib/attr"),c=e("min-dom/lib/domify"),l=e("../../util/Elements").getBBox;function u(e,t,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=e,this._eventBus=t,this._overlays=n,this._selection=i,this._container=c(u.BOX_HTML),this._searchInput=r(u.INPUT_SELECTOR,this._container),this._resultsContainer=r(u.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy"],this.close,this)}function p(e,t,n){var i,r=(i="",t.forEach(function(e){e.matched?i+='<strong class="'+u.RESULT_HIGHLIGHT_CLASS+'">'+e.matched+"</strong>":i+=e.normal}),""!==i?i:null),o=c(n);o.innerHTML=r,e.appendChild(o)}u.$inject=["canvas","eventBus","overlays","selection"],u.prototype._bindEvents=function(){var r=this;function e(e,t,n,i){r._eventMaps.push({el:e,type:n,listener:o.bind(e,t,n,i)})}e(document,"html","click",function(e){r.close()}),e(this._container,u.INPUT_SELECTOR,"click",function(e){e.stopPropagation(),e.delegateTarget.focus()}),e(this._container,u.RESULT_SELECTOR,"mouseover",function(e){e.stopPropagation(),r._scrollToNode(e.delegateTarget),r._preselect(e.delegateTarget)}),e(this._container,u.RESULT_SELECTOR,"click",function(e){e.stopPropagation(),r._select(e.delegateTarget)}),e(this._container,u.INPUT_SELECTOR,"keydown",function(e){38===e.keyCode&&e.preventDefault(),40===e.keyCode&&e.preventDefault()}),e(this._container,u.INPUT_SELECTOR,"keyup",function(e){if(27===e.keyCode)return r.close();if(13===e.keyCode){var t=r._getCurrentResult();return t?r._select(t):r.close()}return 38===e.keyCode?r._scrollToDirection(!0):40===e.keyCode?r._scrollToDirection():void(37!==e.keyCode&&39!==e.keyCode&&r._search(e.delegateTarget.value))})},u.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){o.unbind(e.el,e.type,e.listener)})},u.prototype._search=function(e){var i=this;if(this._clearResults(),e&&""!==e){var t=this._searchProvider.find(e);if(t.length){t.forEach(function(e){var t=e.element.id,n=i._createResultNode(e,t);i._results[t]={element:e.element,node:n}});var n=r(u.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(n),this._preselect(n)}}},u.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},u.prototype._scrollToNode=function(e){if(e&&e!==this._getCurrentResult()){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}},u.prototype._clearResults=function(){i(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},u.prototype._getCurrentResult=function(){return r(u.RESULT_SELECTED_SELECTOR,this._resultsContainer)},u.prototype._createResultNode=function(e,t){var n=c(u.RESULT_HTML);return 0<e.primaryTokens.length&&p(n,e.primaryTokens,u.RESULT_PRIMARY_HTML),p(n,e.secondaryTokens,u.RESULT_SECONDARY_HTML),s(n,u.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n},u.prototype.registerProvider=function(e){this._searchProvider=e},u.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,a(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},u.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,a(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},u.prototype.toggle=function(){this.isOpen()?this.close():this.open()},u.prototype.isOpen=function(){return this._open},u.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&a(t).remove(u.RESULT_SELECTED_CLASS);var n=s(e,u.RESULT_ID_ATTRIBUTE),i=this._results[n].element;a(e).add(u.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._centerViewbox(i),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}},u.prototype._select=function(e){var t=s(e,u.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this.close(),this._resetOverlay(),this._centerViewbox(n),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},u.prototype._centerViewbox=function(e){var t=this._canvas.viewbox(),n=l(e),i={x:n.x+n.width/2-t.outer.width/2,y:n.y+n.height/2-t.outer.height/2,width:t.outer.width,height:t.outer.height};this._canvas.viewbox(i),this._canvas.zoom(t.scale)},u.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var t=l(e),n=(r=(i=t).width+12,o=i.height+12,a=["width: "+r+"px","height: "+o+"px"].join("; "),{position:{bottom:o-6,right:r-6},show:!0,html:'<div style="'+a+'" class="'+u.OVERLAY_CLASS+'"></div>'});this._overlayId=this._overlays.add(e,n)}var i,r,o,a},(t.exports=u).CONTAINER_SELECTOR=".djs-search-container",u.INPUT_SELECTOR=".djs-search-input input",u.RESULTS_CONTAINER_SELECTOR=".djs-search-results",u.RESULT_SELECTOR=".djs-search-result",u.RESULT_SELECTED_SELECTOR="."+(u.RESULT_SELECTED_CLASS="djs-search-result-selected"),u.RESULT_ID_ATTRIBUTE="data-result-id",u.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",u.OVERLAY_CLASS="djs-search-overlay",u.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',u.RESULT_HTML='<div class="djs-search-result"></div>',u.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',u.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>'},{"../../util/Elements":293,"min-dom/lib/attr":504,"min-dom/lib/classes":505,"min-dom/lib/clear":506,"min-dom/lib/delegate":508,"min-dom/lib/domify":509,"min-dom/lib/query":512}],256:[function(e,t,n){t.exports={__depends__:[e("../overlays"),e("../selection")],searchPad:["type",e("./SearchPad")]}},{"../overlays":238,"../selection":260,"./SearchPad":255}],257:[function(e,t,n){"use strict";var r=e("lodash/lang/isArray"),o=e("lodash/collection/forEach");function i(e){this._eventBus=e,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){var t=e.element;n.deselect(t)}),e.on(["diagram.clear"],function(e){n.select(null)})}i.$inject=["eventBus"],(t.exports=i).prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}},i.prototype.get=function(){return this._selectedElements},i.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},i.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();r(e)||(e=e?[e]:[]),t?o(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})}},{"lodash/collection/forEach":360,"lodash/lang/isArray":480}],258:[function(e,t,n){"use strict";var s=e("../../util/Mouse").hasPrimaryModifier,r=e("lodash/collection/find");function i(e,o,a,i){e.on("create.end",500,function(e){e.context.canExecute&&o.select(e.context.shape)}),e.on("connect.end",500,function(e){e.context.canExecute&&e.context.target&&o.select(e.context.target)}),e.on("shape.move.end",500,function(e){var t=e.previousSelection||[],n=i.get(e.context.shape.id);r(t,function(e){return n.id===e.id})||o.select(n)}),e.on("element.click",function(e){var t=e.element;t===a.getRootElement()&&(t=null);var n=o.isSelected(t),i=1<o.get().length,r=s(e);if(n&&i)return r?o.deselect(t):o.select(t);n?o.deselect(t):o.select(t,r)})}i.$inject=["eventBus","selection","canvas","elementRegistry"],t.exports=i},{"../../util/Mouse":301,"lodash/collection/find":359}],259:[function(e,t,n){"use strict";var a=e("lodash/collection/forEach"),s="hover",c="selected";function i(e,n,t,i){function r(e,t){n.addMarker(e,t)}function o(e,t){n.removeMarker(e,t)}this._multiSelectionBox=null,e.on("element.hover",function(e){r(e.element,s)}),e.on("element.out",function(e){o(e.element,s)}),e.on("selection.changed",function(e){var t=e.oldSelection,n=e.newSelection;a(t,function(e){-1===n.indexOf(e)&&o(e,c)}),a(n,function(e){-1===t.indexOf(e)&&r(e,c)})})}i.$inject=["eventBus","canvas","selection","styles"],t.exports=i},{"lodash/collection/forEach":360}],260:[function(e,t,n){t.exports={__init__:["selectionVisuals","selectionBehavior"],__depends__:[e("../interaction-events"),e("../outline")],selection:["type",e("./Selection")],selectionVisuals:["type",e("./SelectionVisuals")],selectionBehavior:["type",e("./SelectionBehavior")]}},{"../interaction-events":197,"../outline":236,"./Selection":257,"./SelectionBehavior":258,"./SelectionVisuals":259}],261:[function(e,t,n){"use strict";var i=e("lodash/collection/forEach"),o=e("./SnapUtil").snapTo;function r(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function a(e){this._snapValues={}}r.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]},r.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,-1===this._snapLocations.indexOf(e)&&this._snapLocations.push(e)},r.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)},r.prototype.getSnapLocations=function(){return this._snapLocations},r.prototype.setSnapLocations=function(e){this._snapLocations=e},r.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new a).initDefaults(this._defaultSnaps),n},t.exports=r,a.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),-1===n.x.indexOf(t.x)&&n.x.push(t.x),-1===n.y.indexOf(t.y)&&n.y.push(t.y)},a.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&o(e[n],r[n],i)},a.prototype.initDefaults=function(e){var n=this;i(e||{},function(e,t){i(e,function(e){n.add(t,e)})})}},{"./SnapUtil":262,"lodash/collection/forEach":360}],262:[function(e,t,n){"use strict";var o=Math.abs,i=Math.round;t.exports.snapTo=function(e,t,n){var i,r;for(n=void 0===n?10:n,i=0;i<t.length;i++)if(r=t[i],o(r-e)<=n)return r},t.exports.topLeft=function(e){return{x:e.x,y:e.y}},t.exports.mid=function(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:i(e.x+e.width/2),y:i(e.y+e.height/2)}},t.exports.bottomRight=function(e){return{x:e.x+e.width,y:e.y+e.height}},t.exports.isSnapped=function(e,t){var n=e.snapped;return!!n&&("string"==typeof t?n[t]:n.x&&n.y)},t.exports.setSnapped=function(e,t,n){if("string"!=typeof t)throw new Error("axis must be in [x, y]");if("number"!=typeof n&&!1!==n)throw new Error("value must be Number or false");var i,r=e[t],o=e.snapped=e.snapped||{};return!1===n?o[t]=!1:(o[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}},{}],263:[function(e,t,n){"use strict";var i=e("lodash/collection/filter"),c=e("lodash/collection/forEach"),r=e("lodash/function/debounce"),o=e("./SnapUtil").mid,a=e("./SnapContext"),s=e("./SnapUtil"),l=1250,u=s.isSnapped,p=s.setSnapped,d=e("tiny-svg/lib/append"),h=e("tiny-svg/lib/attr"),f=e("tiny-svg/lib/classes"),m=e("tiny-svg/lib/create");function v(e,t){this._canvas=t;var n=this;e.on(["shape.move.start","create.start"],function(e){n.initSnap(e)}),e.on(["shape.move.move","shape.move.end","create.move","create.end"],l,function(e){e.originalEvent&&e.originalEvent.ctrlKey||u(e)||n.snap(e)}),e.on(["shape.move.cleanup","create.cleanup"],function(e){n.hide()}),this._asyncHide=r(this.hide,1e3)}v.$inject=["eventBus","canvas"],(t.exports=v).prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.snapContext;i||(i=t.snapContext=new a);var r=o(n,e);return i.setSnapOrigin("mid",{x:r.x-e.x,y:r.y-e.y}),i},v.prototype.snap=function(o){var e=o.context,t=e.snapContext,n=e.shape,i=e.target,r=t.getSnapLocations();if(i){var a=t.pointsForTarget(i);a.initialized||(this.addTargetSnaps(a,n,i),a.initialized=!0);var s={x:u(o,"x"),y:u(o,"y")};c(r,function(n){var i=t.getSnapOrigin(n),r={x:o.x+i.x,y:o.y+i.y};if(c(["x","y"],function(e){var t;s[e]||void 0!==(t=a.snap(r,n,e,7))&&(s[e]={value:t,originValue:t-i[e]})}),s.x&&s.y)return!1}),this.showSnapLine("vertical",s.x&&s.x.value),this.showSnapLine("horizontal",s.y&&s.y.value),c(["x","y"],function(e){var t=s[e];"object"==typeof t&&p(o,e,t.originValue)})}},v.prototype._createLine=function(t){var e=this._canvas.getLayer("snap"),n=m("path");return h(n,{d:"M0,0 L0,0"}),f(n).add("djs-snap-line"),d(e,n),{update:function(e){h(n,"number"!=typeof e?{display:"none"}:"horizontal"===t?{d:"M-100000,"+e+" L+100000,"+e,display:""}:{d:"M "+e+",-100000 L "+e+", +100000",display:""})}}},v.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},v.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()},v.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]},v.prototype.hide=function(){c(this._snapLines,function(e){e.update()})},v.prototype.addTargetSnaps=function(t,e,n){var i=this.getSiblings(e,n);c(i,function(e){t.add("mid",o(e))})},v.prototype.getSiblings=function(t,e){return e&&i(e.children,function(e){return!e.hidden&&!e.labelTarget&&e.host!==t&&e!==t})}},{"./SnapContext":261,"./SnapUtil":262,"lodash/collection/filter":358,"lodash/collection/forEach":360,"lodash/function/debounce":371,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/classes":537,"tiny-svg/lib/create":540}],264:[function(e,t,n){"use strict";var c=e("./SpaceUtil"),l=e("../../util/Cursor"),u=e("../../util/Mouse").hasPrimaryModifier,p=Math.abs,d=Math.round,o=1500,h={x:"width",y:"height"},f={x:"y",y:"x"},m=e("../../util/Elements").selfAndAllChildren,v=e("lodash/object/assign"),g=e("lodash/collection/forEach");function i(c,e,t,n,i,r){this._canvas=t,this._dragging=e,this._modeling=n,this._rules=i,this._toolManager=r;var l=this;r.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),c.on("spaceTool.selection.end",function(e){var t=e.originalEvent.target;(e.hover||t instanceof SVGElement)&&c.once("spaceTool.selection.ended",function(){l.activateMakeSpace(e.originalEvent)})}),c.on("spaceTool.move",o,function(e){var t=e.context;t.initialized||(t.initialized=l.initializeMakeSpace(e,t))}),c.on("spaceTool.end",function(t){var e=t.context,n=e.axis,i=e.direction,r=e.movingShapes,o=e.resizingShapes;if(e.initialized){var a={x:d(t.dx),y:d(t.dy)},s=!(a[f[n]]=0);g(o,function(e){("w"===i&&t.x>e.x+e.width||"e"===i&&t.x<e.x||"n"===i&&t.y>e.y+e.height||"s"===i&&t.y<e.y)&&(s=!1)}),s&&l.makeSpace(r,o,a,i),c.once("spaceTool.ended",function(e){l.activateSelection(e.originalEvent,!0,!0)})}})}i.$inject=["eventBus","dragging","canvas","modeling","rules","toolManager"],(t.exports=i).prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{trapClick:!1,cursor:"crosshair",autoActivate:t,data:{context:{reactivate:n}}})},i.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:"crosshair",data:{context:{}}})},i.prototype.makeSpace=function(e,t,n,i){return this._modeling.createSpace(e,t,n,i)},i.prototype.initializeMakeSpace=function(e,t){var n=p(e.dx)>p(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(p(i)<5)return!1;i<0&&(i*=-1),u(e)&&(i*=-1);var o=this._canvas.getRootElement(),a=m(o,!0),s=this.calculateAdjustments(a,n,i,r);return v(t,s,{axis:n,direction:c.getDirection(n,i)}),l.set("resize-"+("x"===n?"ew":"ns")),!0},i.prototype.calculateAdjustments=function(e,i,r,o){var a=[],s=[],c=this._rules;return e.forEach(function(e){var t=e[i],n=t+e[h[i]];if(e.parent&&!e.waypoints)return 0<r&&o<t?a.push(e):r<0&&n<o?a.push(e):t<o&&o<n&&c.allowed("shape.resize",{shape:e})?s.push(e):void 0}),{movingShapes:a,resizingShapes:s}},i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},i.prototype.isActive=function(){var e=this._dragging.context();return e&&/^spaceTool/.test(e.prefix)}},{"../../util/Cursor":292,"../../util/Elements":293,"../../util/Mouse":301,"./SpaceUtil":266,"lodash/collection/forEach":360,"lodash/object/assign":490}],265:[function(e,t,n){"use strict";var g=e("lodash/collection/forEach"),c="djs-dragging",y="djs-resizing",i=250,b=e("tiny-svg/lib/append"),x=e("tiny-svg/lib/attr"),E=e("tiny-svg/lib/classes"),w=e("tiny-svg/lib/create"),l=e("tiny-svg/lib/remove"),$=e("../../util/SvgTransformUtil").translate;function r(e,d,h,f,m){function v(e,t){g(e,function(e){m.addDragger(e,t),h.addMarker(e,c)})}e.on("spaceTool.selection.start",function(e){var t=h.getLayer("space"),n=e.context,i="M 0,-10000 L 0,10000",r="M -10000,0 L 10000,0",o=w("g");x(o,f.cls("djs-crosshair-group",["no-events"])),b(t,o);var a=w("path");x(a,"d",i),E(a).add("djs-crosshair"),b(o,a);var s=w("path");x(s,"d",r),E(s).add("djs-crosshair"),b(o,s),n.crosshairGroup=o}),e.on("spaceTool.selection.move",function(e){var t=e.context.crosshairGroup;$(t,e.x,e.y)}),e.on("spaceTool.selection.cleanup",function(e){var t=e.context.crosshairGroup;t&&l(t)}),e.on("spaceTool.move",i,function(e){var t=e.context,n=t.line,i=t.axis,a=t.movingShapes,s=t.resizingShapes;if(t.initialized){if(!t.dragGroup){var r=h.getLayer("space");n=w("path"),x(n,"d","M0,0 L0,0"),E(n).add("djs-crosshair"),b(r,n),t.line=n;var o=w("g");x(o,f.cls("djs-drag-group",["no-events"])),b(h.getDefaultLayer(),o),v(a,o),v(t.movingConnections=d.filter(function(t){var n=!1;g(a,function(e){g(e.outgoing,function(e){t===e&&(n=!0)})});var i=!1;g(a,function(e){g(e.incoming,function(e){t===e&&(i=!0)})});var r=!1;g(s,function(e){g(e.outgoing,function(e){t===e&&(r=!0)})});var o=!1;return g(s,function(e){g(e.incoming,function(e){t===e&&(o=!0)})}),t.waypoints&&(n||r)&&(i||o)}),o),t.dragGroup=o}if(!t.frameGroup){var c=w("g");x(c,f.cls("djs-frame-group",["no-events"])),b(h.getDefaultLayer(),c);var l=[];g(s,function(e){var t=m.addFrame(e,c);l.push({element:t,initialWidth:t.getBBox().width,initialHeight:t.getBBox().height}),h.addMarker(e,y)}),t.frameGroup=c,t.frames=l}var u={x:"M"+e.x+", -10000 L"+e.x+", 10000",y:"M -10000, "+e.y+" L 10000, "+e.y};x(n,{path:u[i],display:""});var p={x:e.dx,y:e.dy};p[{x:"y",y:"x"}[t.axis]]=0,$(t.dragGroup,p.x,p.y),g(t.frames,function(e){5<e.initialWidth+p.x&&x(e.element,{width:e.initialWidth+p.x}),5<e.initialHeight+p.y&&x(e.element,{height:e.initialHeight+p.y})})}}),e.on("spaceTool.cleanup",function(e){var t=e.context,n=t.movingShapes,i=t.movingConnections,r=t.resizingShapes,o=t.line,a=t.dragGroup,s=t.frameGroup;g(n,function(e){h.removeMarker(e,c)}),g(i,function(e){h.removeMarker(e,c)}),a&&(l(o),l(a)),g(r,function(e){h.removeMarker(e,y)}),s&&l(s)})}r.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"],t.exports=r},{"../../util/SvgTransformUtil":306,"lodash/collection/forEach":360,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/classes":537,"tiny-svg/lib/create":540,"tiny-svg/lib/remove":543}],266:[function(e,t,n){"use strict";t.exports.getDirection=function(e,t){if("x"===e){if(0<t)return"e";if(t<0)return"w"}if("y"===e){if(0<t)return"s";if(t<0)return"n"}return null},t.exports.resizeBounds=function(e,t,n){var i=n.x,r=n.y;switch(t){case"n":return{x:e.x,y:e.y+r,width:e.width,height:e.height-r};case"s":return{x:e.x,y:e.y,width:e.width,height:e.height+r};case"w":return{x:e.x+i,y:e.y,width:e.width-i,height:e.height};case"e":return{x:e.x,y:e.y,width:e.width+i,height:e.height};default:throw new Error("unrecognized direction: "+t)}}},{}],267:[function(e,t,n){"use strict";t.exports={__init__:["spaceToolPreview"],__depends__:[e("../dragging"),e("../rules"),e("../tool-manager"),e("../preview-support")],spaceTool:["type",e("./SpaceTool")],spaceToolPreview:["type",e("./SpaceToolPreview")]}},{"../dragging":189,"../preview-support":244,"../rules":254,"../tool-manager":269,"./SpaceTool":264,"./SpaceToolPreview":265}],268:[function(e,t,n){"use strict";var o=e("lodash/collection/forEach");function i(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}i.$inject=["eventBus","dragging"],(t.exports=i).prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},i.prototype.isActive=function(e){return e&&this._active===e},i.prototype.length=function(e){return this._tools.length},i.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},i.prototype.bindEvents=function(t,e){var n=this._eventBus,i=this._dragging,r=[];n.on(e.tool+".init",function(e){if(!e.context.reactivate&&this.isActive(t))return this.setActive(null),void i.cancel();this.setActive(t)},this),o(e,function(e){r.push(e+".ended"),r.push(e+".canceled")}),n.on(r,250,function(e){var t=e.originalEvent;!this._active||t&&"tools"===t.target.parentNode.getAttribute("data-group")||this.setActive(null)},this)}},{"lodash/collection/forEach":360}],269:[function(e,t,n){"use strict";t.exports={__depends__:[e("../dragging")],__init__:["toolManager"],toolManager:["type",e("./ToolManager")]}},{"../dragging":189,"./ToolManager":268}],270:[function(e,t,n){"use strict";var o=e("lodash/lang/isString"),a=e("lodash/object/assign"),i=e("lodash/collection/forEach"),s=e("min-dom/lib/domify"),r=e("min-dom/lib/attr"),c=e("min-dom/lib/classes"),l=e("min-dom/lib/remove"),u=e("min-dom/lib/delegate"),p=new(e("../../util/IdGenerator"))("tt");function d(e,t){e.style.display=!1===t?"none":""}var h="djs-tooltip",f="."+h;function m(e,t){var n,i;this._eventBus=e,this._canvas=t,this._ids=p,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=(n=t.getContainer(),i=s('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />'),n.insertBefore(i,n.firstChild),i);var r=this;u.bind(this._tooltipRoot,f,"mousedown",function(e){e.stopPropagation()}),u.bind(this._tooltipRoot,f,"mouseover",function(e){r.trigger("mouseover",e)}),u.bind(this._tooltipRoot,f,"mouseout",function(e){r.trigger("mouseout",e)}),this._init()}m.$inject=["eventBus","canvas"],(t.exports=m).prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=a({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t},m.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(r(n,"data-tooltip-id"));i&&("mouseover"===e&&i.timeout&&this.clearTimeout(i),"mouseout"===e&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},m.prototype.get=function(e){return"string"!=typeof e&&(e=e.id),this._tooltips[e]},m.prototype.clearTimeout=function(e){if(e=this.get(e)){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}},m.prototype.setTimeout=function(e){if(e=this.get(e)){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}},m.prototype.remove=function(e){var t=this.get(e);t&&(l(t.html),l(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])},m.prototype.show=function(){d(this._tooltipRoot)},m.prototype.hide=function(){d(this._tooltipRoot,!1)},m.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},m.prototype._addTooltip=function(e){var t,n=e.id,i=e.html,r=this._tooltipRoot;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),o(i)&&(i=s(i)),(t=s('<div data-tooltip-id="'+n+'" class="'+h+'" style="position: absolute">')).appendChild(i),e.type&&c(t).add("djs-tooltip-"+e.type),e.className&&c(t).add(e.className),e.htmlContainer=t,r.appendChild(t),this._tooltips[n]=e,this._updateTooltip(e)},m.prototype._updateTooltip=function(e){var t,n,i,r=e.position,o=e.htmlContainer;t=o,n=r.x,i=r.y,a(t.style,{left:n+"px",top:i+"px"})},m.prototype._updateTooltipVisibilty=function(r){i(this._tooltips,function(e){var t=e.show,n=e.htmlContainer,i=!0;t&&((t.minZoom>r.scale||t.maxZoom<r.scale)&&(i=!1),d(n,i))})},m.prototype._init=function(){var n=this;this._eventBus.on("canvas.viewbox.changing",function(e){n.hide()}),this._eventBus.on("canvas.viewbox.changed",function(e){var t;t=e.viewbox,n._updateRoot(t),n._updateTooltipVisibilty(t),n.show()})}},{"../../util/IdGenerator":297,"lodash/collection/forEach":360,"lodash/lang/isString":487,"lodash/object/assign":490,"min-dom/lib/attr":504,"min-dom/lib/classes":505,"min-dom/lib/delegate":508,"min-dom/lib/domify":509,"min-dom/lib/remove":513}],271:[function(e,t,n){t.exports={__init__:["tooltips"],tooltips:["type",e("./Tooltips")]}},{"./Tooltips":270}],272:[function(e,t,n){"use strict";var r=e("tiny-svg/lib/append"),o=e("tiny-svg/lib/attr"),a=e("tiny-svg/lib/create");function i(e,t){var n=this;t.on("canvas.init",function(e){n.addBBoxMarker(e.svg)})}i.$inject=["canvas","eventBus"],(t.exports=i).prototype.addBBoxMarker=function(e){var t={fill:"none",class:"outer-bound-marker"},n=a("rect");o(n,{x:-1e4,y:1e4,width:10,height:10}),o(n,t),r(e,n);var i=a("rect");o(i,{x:1e4,y:1e4,width:10,height:10}),o(i,t),r(e,i)}},{"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540}],273:[function(e,t,n){"use strict";var c=e("lodash/collection/forEach"),l=e("min-dom/lib/event"),h=e("min-dom/lib/closest"),u=e("hammerjs"),f=e("../../util/Event"),m=.2,v=4,p=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function g(e,t){return t.get(e,!1)}function y(e){e.preventDefault(),e.stopPropagation(),"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation()}function b(t){function e(e){setTimeout(function(){c(p,function(e){l.unbind(t,e,y,!0)})},500)}l.bind(t,"touchstart",function(e){c(p,function(e){l.bind(t,e,y,!0)})},!0),l.bind(t,"touchend",e,!0),l.bind(t,"touchcancel",e,!0);var r=new u.Manager(t,{inputClass:u.TouchInput,recognizers:[]}),n=new u.Tap,i=new u.Pan({threshold:10}),o=new u.Press,a=new u.Pinch,s=new u.Tap({event:"doubletap",taps:2});return a.requireFailure(i),a.requireFailure(o),r.add([i,o,a,s,n]),r.reset=function(e){var n=this.recognizers,i=this.session;i.stopped||(r.stop(e),setTimeout(function(){var e,t;for(e=0;t=n[e];e++)t.reset(),t.state=8;i.curRecognizer=null},0))},r.on("hammer.input",function(e){e.srcEvent.defaultPrevented&&r.reset(!0)}),r}function i(e,o,t,a,n){var s,c=g("dragging",e),i=g("move",e),r=g("contextPad",e),l=g("palette",e);function u(t){return function(e){n.fire(t,e)}}function p(e){return h(e,"svg, .djs-element",!0)}function d(e){function t(e){var t=p(e.target),n=t&&a.get(t);if(i&&o.getRootElement()!==n)return i.start(e,n,!0);!function(e){var i=0,r=0;function t(e){var t=e.deltaX-i,n=e.deltaY-r;o.scroll({dx:t,dy:n}),i=e.deltaX,r=e.deltaY}function n(e){s.off("panmove",t),s.off("panend",n),s.off("pancancel",n)}s.on("panmove",t),s.on("panend",n),s.on("pancancel",n)}()}(s=b(e)).on("doubletap",u("element.dblclick")),s.on("tap",u("element.click")),s.on("panstart",t),s.on("press",t),s.on("pinchstart",function(e){var i=o.zoom(),r=e.center;function t(e){var t=1-(1-e.scale)/1.5,n=Math.max(m,Math.min(v,t*i));o.zoom(n,r),y(e)}function n(e){s.off("pinchmove",t),s.off("pinchend",n),s.off("pinchcancel",n),s.reset(!0)}s.on("pinchmove",t),s.on("pinchend",n),s.on("pinchcancel",n)})}c&&t.on("drag.move",function(e){var t=e.originalEvent;if(t&&!(t instanceof MouseEvent)){var n=f.toPoint(t),i=p(document.elementFromPoint(n.x,n.y)),r=i&&a.get(i);r!==e.hover&&(e.hover&&c.out(e),r&&(c.hover({element:r,gfx:i}),e.hover=r,e.hoverGfx=i))}}),r&&t.on("contextPad.create",function(e){var t=b(e.pad.html);t.on("panstart",function(e){r.trigger("dragstart",e,!0)}),t.on("press",function(e){r.trigger("dragstart",e,!0)}),t.on("tap",function(e){r.trigger("click",e)})}),l&&t.on("palette.create",function(e){var t=b(e.html);t.on("panstart",function(e){l.trigger("dragstart",e,!0)}),t.on("press",function(e){l.trigger("dragstart",e,!0)}),t.on("tap",function(e){l.trigger("click",e)})}),t.on("canvas.init",function(e){d(e.svg)})}i.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"],t.exports=i},{"../../util/Event":294,hammerjs:340,"lodash/collection/forEach":360,"min-dom/lib/closest":507,"min-dom/lib/event":510}],274:[function(e,t,n){t.exports={__depends__:[e("../interaction-events")],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",e("./TouchInteractionEvents")],touchFix:["type",e("./TouchFix")]}},{"../interaction-events":197,"./TouchFix":272,"./TouchInteractionEvents":273}],275:[function(e,t,n){t.exports={translate:["value",e("./translate")]}},{"./translate":276}],276:[function(e,t,n){"use strict";t.exports=function(e,n){return n=n||{},e.replace(/{([^}]+)}/g,function(e,t){return n[t]||"{"+t+"}"})}},{}],277:[function(e,t,n){"use strict";var i=e("./LayoutUtil").getMid;function r(){}(t.exports=r).prototype.layoutConnection=function(e,t){return[(t=t||{}).connectionStart||i(e.source),t.connectionEnd||i(e.target)]}},{"./LayoutUtil":279}],278:[function(e,t,n){"use strict";var i=e("lodash/object/assign"),o=e("./LayoutUtil");function a(e){return i({original:e.point.original||e.point},e.actual)}function r(e,t){this._elementRegistry=e,this._graphicsFactory=t}r.$inject=["elementRegistry","graphicsFactory"],(t.exports=r).prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),o=e.waypoints.slice(i.idx+1,r.idx);return o.unshift(a(i)),o.push(a(r)),o},r.prototype.getDockingPoint=function(e,t,n){var i,r,o=e.waypoints;return{point:r=o[i=n?0:o.length-1],actual:this._getIntersection(t,e,n)||r,idx:i}},r.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return o.getElementLineIntersection(i,r,n)},r.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},r.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},r.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)}},{"./LayoutUtil":279,"lodash/object/assign":490}],279:[function(e,t,n){"use strict";var u=e("lodash/lang/isObject"),r=e("lodash/collection/sortBy"),o=e("../util/Geometry").pointDistance,i=e("../util/Intersection").intersection;function a(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function p(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function s(e,t){return i(e,t)}t.exports.roundBounds=function(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}},t.exports.roundPoint=a,t.exports.asTRBL=p,t.exports.asBounds=function(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}},t.exports.getMid=function(e){return a({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})},t.exports.getOrientation=function(e,t,n){u(n=n||0)||(n={x:n,y:n});var i=p(e),r=p(t),o=i.bottom+n.y<=r.top,a=i.left-n.x>=r.right,s=i.top-n.y>=r.bottom,c=o?"top":s?"bottom":null,l=i.right+n.x<=r.left?"left":a?"right":null;return l&&c?c+"-"+l:l||c||"intersect"},t.exports.getElementLineIntersection=function(e,t,n){var i=s(e,t);return 1===i.length?a(i[0]):2===i.length&&o(i[0],i[1])<1?a(i[0]):1<i.length?a((i=r(i,function(e){var t=Math.floor(100*e.t2)||1;return t=((t=100-t)<10?"0":"")+t,e.segment2+"#"+t}))[n?0:i.length-1]):null},t.exports.getIntersections=s},{"../util/Geometry":295,"../util/Intersection":298,"lodash/collection/sortBy":368,"lodash/lang/isObject":485}],280:[function(e,t,n){"use strict";var s=e("lodash/lang/isArray"),c=e("lodash/collection/find"),u=e("lodash/array/without"),l=e("lodash/object/assign"),i=e("./LayoutUtil"),r=e("../util/Geometry"),p=i.getOrientation,d=i.getMid,h=r.pointsAligned,f=r.pointInRect,m=r.pointDistance,v=20,g={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function o(e,t,n){var i,r;if("h:v"===(n=n||"h:h"))return[{x:t.x,y:e.y}];if("v:h"===n)return[{x:e.x,y:t.y}];if("h:h"===n)return[{x:i=Math.round((t.x-e.x)/2+e.x),y:e.y},{x:i,y:t.y}];if("v:v"===n)return r=Math.round((t.y-e.y)/2+e.y),[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("unknown directions: <"+n+">: directions must be specified as {a direction}:{b direction} (direction in h|v)")}function y(e,t,n){var i=[];return h(e,t)||(i=o(e,t,n)),i.unshift(e),i.push(t),i}function b(e,t,n,i,r){var o=r&&r.preferredLayouts||[],a=u(o,"straight")[0]||"h:h",s=g[a]||0,c=p(e,t,s),l=function(e,t){switch(e){case"intersect":return null;case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}(c,a);if(n=n||d(e),i=i||d(t),l){if("h:h"===l)switch(c){case"top-right":case"right":case"bottom-right":n={original:n,x:e.x,y:n.y},i={original:i,x:t.x+t.width,y:i.y};break;case"top-left":case"left":case"bottom-left":n={original:n,x:e.x+e.width,y:n.y},i={original:i,x:t.x,y:i.y}}if("v:v"===l)switch(c){case"top-left":case"top":case"top-right":n={original:n,x:n.x,y:e.y+e.height},i={original:i,x:i.x,y:t.y};break;case"bottom-left":case"bottom":case"bottom-right":n={original:n,x:n.x,y:e.y},i={original:i,x:i.x,y:t.y+t.height}}return y(n,i,l)}}function x(e,t,n){var i,r,o;return i=t[e],r=n[e],o=n[e]+n[{x:"width",y:"height"}[e]],r<=i&&i<=o}function E(e,t,n,i,r){var o,a,s={};return a=p(e,t),/^(top|bottom|left|right)$/.test(a)?(/top|bottom/.test(a)&&(o="x"),/left|right/.test(a)&&(o="y"),"target"===r.preserveDocking?x(o,i,e)?(s[o]=i[o],[{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y,original:{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y}},{x:i.x,y:i.y}]):null:x(o,n,t)?(s[o]=n[o],[{x:n.x,y:n.y},{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y,original:{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y}}]):null):null}function w(e,t,n,i){if((r=i).length<3||!(4<r.length)&&c(r,function(e,t){var n=r[t-1];return n&&m(e,n)<3}))return null;var r,o,a=i[0],s=i.slice();return s[0]=n,s[1]=function(e,t,n){switch(h(t,e)){case"v":return{x:e.x,y:n.y};case"h":return{x:n.x,y:e.y}}return{x:e.x,y:e.y}}(s[1],a,n),(o=function(e,t,n){var i;for(i=e.length-2;0!==i;i--)if(f(e[i],t,v)||f(e[i],n,v))return e.slice(i);return e}(s,e,t))!==s?w(e,t,n,o):s}t.exports.getBendpoints=o,t.exports.connectPoints=y,t.exports.connectRectangles=b,t.exports.repairConnection=function(e,t,n,i,r,o){var a;return s(n)&&(r=n,o=i,n=d(e),i=d(t)),r=r||[],-1!==(o=l({preferredLayouts:[]},o)).preferredLayouts.indexOf("straight")&&(a=E(e,t,n,i,o)),a||(o.connectionEnd?a=(a=w(t,e,i,r.slice().reverse()))&&a.reverse():o.connectionStart?a=w(e,t,n,r):r&&r.length&&(a=r)),a||(a=b(e,t,n,i,o)),a},t.exports.layoutStraight=E,t.exports._repairConnectionSide=w},{"../util/Geometry":295,"./LayoutUtil":279,"lodash/array/without":353,"lodash/collection/find":359,"lodash/lang/isArray":480,"lodash/object/assign":490}],281:[function(e,t,n){"use strict";var i=e("lodash/object/assign"),r=e("inherits"),o=e("object-refs"),a=new o({name:"children",enumerable:!0,collection:!0},{name:"parent"}),s=new o({name:"label",enumerable:!0},{name:"labelTarget"}),c=new o({name:"attachers",collection:!0},{name:"host"}),l=new o({name:"outgoing",collection:!0},{name:"source"}),u=new o({name:"incoming",collection:!0},{name:"target"});function p(){Object.defineProperty(this,"businessObject",{writable:!0}),a.bind(this,"parent"),s.bind(this,"label"),l.bind(this,"outgoing"),u.bind(this,"incoming")}function d(){p.call(this),a.bind(this,"children"),c.bind(this,"host"),c.bind(this,"attachers")}function h(){d.call(this)}function f(){d.call(this),s.bind(this,"labelTarget")}function m(){p.call(this),l.bind(this,"source"),u.bind(this,"target")}r(d,p),r(h,d),r(f,d),r(m,p);var v={connection:m,shape:d,label:f,root:h};t.exports.create=function(e,t){var n=v[e];if(!n)throw new Error("unknown type: <"+e+">");return i(new n,t)},t.exports.Base=p,t.exports.Root=h,t.exports.Shape=d,t.exports.Connection=m,t.exports.Label=f},{inherits:343,"lodash/object/assign":490,"object-refs":526}],282:[function(e,t,n){"use strict";var l=e("../../util/Cursor"),u=e("../../util/ClickTrap"),p=e("../../util/Math").substract,i=e("min-dom/lib/event"),r=e("min-dom/lib/closest"),d=e("../../util/Event");var h=15;function o(a,s){var c;function t(e){var t,n=c.start,i=d.toPoint(e),r=p(i,n);if(!c.dragging&&(t=r,Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))>h)&&(c.dragging=!0,u.install(a),l.set("grab")),c.dragging){var o=c.last||c.start;r=p(i,o),s.scroll({dx:r.x,dy:r.y}),c.last=i}e.preventDefault()}function n(e){i.unbind(document,"mousemove",t),i.unbind(document,"mouseup",n),c=null,l.unset()}a.on("element.mousedown",500,function(e){return function(e){if(!r(e.target,".djs-draggable")&&!(e.button||e.ctrlKey||e.shiftKey||e.altKey))return c={start:d.toPoint(e)},i.bind(document,"mousemove",t),i.bind(document,"mouseup",n),!0}(e.originalEvent)})}o.$inject=["eventBus","canvas"],t.exports=o},{"../../util/ClickTrap":289,"../../util/Cursor":292,"../../util/Event":294,"../../util/Math":300,"min-dom/lib/closest":507,"min-dom/lib/event":510}],283:[function(e,t,n){t.exports={__init__:["moveCanvas"],moveCanvas:["type",e("./MoveCanvas")]}},{"./MoveCanvas":282}],284:[function(e,t,n){t.exports={__depends__:[e("../../features/touch")]}},{"../../features/touch":274}],285:[function(e,t,n){"use strict";var r=e("min-dom/lib/event"),c=e("min-dom/lib/closest"),l=e("../../util/Mouse").hasPrimaryModifier,u=e("../../util/Mouse").hasSecondaryModifier,p=e("../../util/Platform").isMac,i=e("./ZoomUtil").getStepSize,d=e("./ZoomUtil").cap,h=e("../../util/Math").log10,o=e("lodash/function/bind"),f={min:.2,max:4};function a(e,t,n){this._enabled=!1,this._canvas=t,this._container=t._container,this._handleWheel=o(this._handleWheel,this);var i=!n||!1!==n.enabled;this.totalDelta=0;var r=this;e.on("canvas.init",function(e){r._init(i)})}a.$inject=["eventBus","canvas","config.zoomScroll"],(t.exports=a).prototype.scroll=function(e){this._canvas.scroll(e)},a.prototype.reset=function(){this._canvas.zoom("fit-viewport")},a.prototype.zoom=function(e,t){var n=i(f,20);this.totalDelta+=e,.1<Math.abs(this.totalDelta)&&(this._zoom(e,t,n),this.totalDelta=0)},a.prototype._handleWheel=function(e){if(!c(e.target,".djs-scrollable",!0)){var t=this._container;e.preventDefault();var n,i=l(e),r=u(e);if(i||r){n=p?0===e.deltaMode?1.25:50:0===e.deltaMode?.025:.5;var o={};r?o.dx=n*(e.deltaX||e.deltaY):o.dy=n*e.deltaY,this.scroll(o)}else{n=0===e.deltaMode?.025:.5;var a=t.getBoundingClientRect(),s={x:e.clientX-a.left,y:e.clientY-a.top};this.zoom(e.deltaY*n/-5,s)}}},a.prototype.stepZoom=function(e,t){var n=i(f,10);this._zoom(e,t,n)},a.prototype._zoom=function(e,t,n){var i=this._canvas,r=0<e?1:-1,o=h(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var s=Math.pow(10,a);i.zoom(d(f,s),t)},a.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,i=this._enabled;return void 0===e&&(e=!i),i!==e&&r[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e},a.prototype._init=function(e){this.toggle(e)}},{"../../util/Math":300,"../../util/Mouse":301,"../../util/Platform":302,"./ZoomUtil":286,"lodash/function/bind":370,"min-dom/lib/closest":507,"min-dom/lib/event":510}],286:[function(e,t,n){"use strict";var r=e("../../util/Math").log10;t.exports.getStepSize=function(e,t){var n=r(e.min),i=r(e.max);return(Math.abs(n)+Math.abs(i))/t},t.exports.cap=function(e,t){return Math.max(e.min,Math.min(e.max,t))}},{"../../util/Math":300}],287:[function(e,t,n){t.exports={__init__:["zoomScroll"],zoomScroll:["type",e("./ZoomScroll")]}},{"./ZoomScroll":285}],288:[function(e,t,n){"use strict";var d=e("../layout/LayoutUtil").roundPoint,h=e("./PositionUtil").center,f=e("./PositionUtil").delta;t.exports.getNewAttachPoint=function(e,t,n){var i=h(t),r=h(n),o=f(e,i),a=o.x*(n.width/t.width),s=o.y*(n.height/t.height);return d({x:r.x+a,y:r.y+s})},t.exports.getNewAttachShapeDelta=function(e,t,n){var i=h(e),r=h(t),o=h(n),a=f(e,i),s=f(i,r),c=s.x*(n.width/t.width),l=s.y*(n.height/t.height),u=o.x+c,p=o.y+l;return d({x:u+a.x-e.x,y:p+a.y-e.y})}},{"../layout/LayoutUtil":279,"./PositionUtil":303}],289:[function(e,t,n){"use strict";var i=5e3;t.exports.install=function(e,t){function n(){return!1}return t=t||"element.click",e.once(t,i,n),function(){e.off(t,n)}}},{}],290:[function(e,t,n){"use strict";t.exports.remove=function(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n},t.exports.add=function(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n)return;if(-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)}},t.exports.indexOf=function(e,t){return e&&t?e.indexOf(t):-1}},{}],291:[function(e,t,n){"use strict";var o=e("lodash/collection/forEach");t.exports.getTopLevel=function(e){var n={},i=[],t=[],r=[];return o(e,function(e){var t=e.parent;n[t.id]||(n[t.id]=[]),-1===i.indexOf(t.id)&&i.push(t.id),n[t.id].push(e)}),o(i,function(e){o(n[e],function(e){n[e.id]&&r.push(e.id)})}),o(i,function(e){-1===r.indexOf(e)&&(t=t.concat(n[e]))}),t}},{"lodash/collection/forEach":360}],292:[function(e,t,n){"use strict";var i=e("min-dom/lib/classes"),r=/^djs-cursor-.*$/;t.exports.set=function(e){var t=i(document.body);t.removeMatching(r),e&&t.add("djs-cursor-"+e)},t.exports.unset=function(){this.set(null)},t.exports.has=function(e){return i(document.body).has("djs-cursor-"+e)}},{"min-dom/lib/classes":505}],293:[function(e,t,n){"use strict";var o=e("lodash/lang/isArray"),r=e("lodash/lang/isNumber"),s=e("lodash/collection/groupBy"),p=e("lodash/collection/forEach");function c(e,t,n){var i=!n||-1===e.indexOf(t);return i&&e.push(t),i}function l(e,i,r){r=r||0,o(e)||(e=[e]),p(e,function(e,t){var n=i(e,t,r);o(n)&&n.length&&l(n,i,r+1)})}function i(e,r,o){var a=[],s=[];return l(e,function(e,t,n){c(a,e,r);var i=e.children;if((-1===o||n<o)&&i&&c(s,i,r))return i}),a}function d(e,a){var s,c,l,u;return a=!!a,o(e)||(e=[e]),p(e,function(e){var t=e;e.waypoints&&!a&&(t=d(e.waypoints,!0));var n=t.x,i=t.y,r=t.height||0,o=t.width||0;(n<s||void 0===s)&&(s=n),(i<c||void 0===c)&&(c=i),(l<n+o||void 0===l)&&(l=n+o),(u<i+r||void 0===u)&&(u=i+r)}),{x:s,y:c,height:u-c,width:l-s}}t.exports.add=c,t.exports.eachElement=l,t.exports.selfAndDirectChildren=function(e,t){return i(e,!t,1)},t.exports.selfAndAllChildren=function(e,t){return i(e,!t,-1)},t.exports.getBBox=d,t.exports.getEnclosedElements=function(e,n){var i={};return p(e,function(e){var t=e;t.waypoints&&(t=d(t)),!r(n.y)&&t.x>n.x&&(i[e.id]=e),!r(n.x)&&t.y>n.y&&(i[e.id]=e),t.x>n.x&&t.y>n.y&&(r(n.width)&&r(n.height)&&t.width+t.x<n.width+n.x&&t.height+t.y<n.height+n.y?i[e.id]=e:r(n.width)&&r(n.height)||(i[e.id]=e))}),i},t.exports.getClosure=function(e){var t=s(e,function(e){return e.id}),n={},i={},r={},o={};function a(e){t[e.source.id]&&t[e.target.id]&&(t[e.id]=[e]),n[e.source.id]&&n[e.target.id]&&(o[e.id]=r[e.id]=e),i[e.id]=e}return l(e,function(e){if(!(r[e.id]=e).waypoints)return n[e.id]=e,p(e.incoming,a),p(e.outgoing,a),e.children;o[e.id]=i[e.id]=e}),{allShapes:n,allConnections:i,topLevel:t,enclosedConnections:o,enclosedElements:r}},t.exports.getType=function(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}},{"lodash/collection/forEach":360,"lodash/collection/groupBy":361,"lodash/lang/isArray":480,"lodash/lang/isNumber":484}],294:[function(e,t,n){"use strict";function i(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()}function r(e){return e.originalEvent||e.srcEvent}t.exports.getOriginal=r,t.exports.stopPropagation=function(e,t){i(e),i(r(e))},t.exports.toPoint=function(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}},{}],295:[function(e,t,n){"use strict";function o(e,t){return e&&t?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):-1}t.exports.pointDistance=o,t.exports.pointsOnLine=function(e,t,n){if(!e||!t||!n)return!1;var i=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),r=o(e,t);return Math.abs(i/r)<5};var i=2;t.exports.pointsAligned=function(e,t){return Math.abs(e.x-t.x)<=i?"h":Math.abs(e.y-t.y)<=i&&"v"},t.exports.pointInRect=function(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n},t.exports.getMidPoint=function(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}},{}],296:[function(e,t,n){"use strict";var i=e("min-dom/lib/query");t.exports.getVisual=function(e){return i(".djs-visual",e)},t.exports.getChildren=function(e){return e.parentNode.childNodes[1]}},{"min-dom/lib/query":512}],297:[function(e,t,n){"use strict";function i(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}(t.exports=i).prototype.next=function(){return this._prefix+ ++this._counter}},{}],298:[function(e,t,n){"use strict";var c="hasOwnProperty",i=/,?([a-z]),?/gi,x=parseFloat,z=Math,q=z.PI,w=z.min,$=z.max,y=z.pow,W=z.abs,r=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,s=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/gi;function b(e,t){return"finite"==(t=String.prototype.toLowerCase.call(t))?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||Object.prototype.toString.call(e).slice(8,-1).toLowerCase()==t)}function v(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[c](n)&&(t[n]=v(e[n]));return t}function G(o,a,s){return function e(){var t=Array.prototype.slice.call(arguments,0),n=t.join("␀"),i=e.cache=e.cache||{},r=e.count=e.count||[];return i[c](n)?function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(r,n):(1e3<=r.length&&delete i[r.shift()],r.push(n),i[n]=o.apply(a,t)),s?s(i[n]):i[n]}}function E(e){if(!e)return null;var t=_(e);if(t.arr)return v(t.arr);var o={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},a=[];return b(e,"array")&&b(e[0],"array")&&(a=v(e)),a.length||String(e).replace(r,function(e,t,n){var i=[],r=t.toLowerCase();if(n.replace(s,function(e,t){t&&i.push(+t)}),"m"==r&&2<i.length&&(a.push([t].concat(i.splice(0,2))),r="l",t="m"==t?"l":"L"),"o"==r&&1==i.length&&a.push([t,i[0]]),"r"==r)a.push([t].concat(i));else for(;i.length>=o[r]&&(a.push([t].concat(i.splice(0,o[r]))),o[r]););}),a.toString=_.toString,t.arr=v(a),a}function _(t){var n=_.ps=_.ps||{};return n[t]?n[t].sleep=100:n[t]={sleep:100},setTimeout(function(){for(var e in n)n[c](e)&&e!=t&&(n[e].sleep--,!n[e].sleep&&delete n[e])}),n[t]}function h(e,t,n,i){return null==e&&(e=t=n=i=0),null==t&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:i,h:i,x2:e+n,y2:t+i,cx:e+n/2,cy:t+i/2,r1:z.min(n,i)/2,r2:z.max(n,i)/2,r0:z.sqrt(n*n+i*i)/2,path:function(e,t,n,i,r){if(r)return[["M",+e+ +r,t],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]];var o=[["M",e,t],["l",n,0],["l",0,i],["l",-n,0],["z"]];return o.toString=S,o}(e,t,n,i),vb:[e,t,n,i].join(" ")}}function S(){return this.join(",").replace(i,"$1")}function C(e){var t=v(e);return t.toString=S,t}function g(e,t,n,i,r,o,a,s,c){return null==c?M(e,t,n,i,r,o,a,s):A(e,t,n,i,r,o,a,s,function(e,t,n,i,r,o,a,s,c){if(c<0||M(e,t,n,i,r,o,a,s)<c)return;var l,u=.5,p=1-u;l=M(e,t,n,i,r,o,a,s,p);for(;.01<W(l-c);)l=M(e,t,n,i,r,o,a,s,p+=(l<c?1:-1)*(u/=2));return p}(e,t,n,i,r,o,a,s,c))}function o(h,f){function m(e){return+(+e).toFixed(3)}return G(function(e,t,n){e instanceof Element&&(e=e.attr("d"));for(var i,r,o,a,s,c="",l={},u=0,p=0,d=(e=L(e)).length;p<d;p++){if("M"==(o=e[p])[0])i=+o[1],r=+o[2];else{if(t<u+(a=g(i,r,o[1],o[2],o[3],o[4],o[5],o[6]))){if(f&&!l.start){if(c+=["C"+m((s=g(i,r,o[1],o[2],o[3],o[4],o[5],o[6],t-u)).start.x),m(s.start.y),m(s.m.x),m(s.m.y),m(s.x),m(s.y)],n)return c;l.start=c,c=["M"+m(s.x),m(s.y)+"C"+m(s.n.x),m(s.n.y),m(s.end.x),m(s.end.y),m(o[5]),m(o[6])].join(),u+=a,i=+o[5],r=+o[6];continue}if(!h&&!f)return s=g(i,r,o[1],o[2],o[3],o[4],o[5],o[6],t-u)}u+=a,i=+o[5],r=+o[6]}c+=o.shift()+o}return l.end=c,s=h?u:f?l:A(i,r,o[0],o[1],o[2],o[3],o[4],o[5],1)},null,v)}var a=o(1),l=o();function A(e,t,n,i,r,o,a,s,c){var l=1-c,u=y(l,3),p=y(l,2),d=c*c,h=d*c,f=e+2*c*(n-e)+d*(r-2*n+e),m=t+2*c*(i-t)+d*(o-2*i+t),v=n+2*c*(r-n)+d*(a-2*r+n),g=i+2*c*(o-i)+d*(s-2*o+i);return{x:u*e+3*p*c*n+3*l*c*c*r+h*a,y:u*t+3*p*c*i+3*l*c*c*o+h*s,m:{x:f,y:m},n:{x:v,y:g},start:{x:l*e+c*n,y:l*t+c*i},end:{x:l*r+c*a,y:l*o+c*s},alpha:90-180*z.atan2(f-v,m-g)/q}}function T(e,t,n,i,r,o,a,s){b(e,"array")||(e=[e,t,n,i,r,o,a,s]);var c=m.apply(null,e);return h(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)}function u(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function j(e,t){return e=h(e),u(t=h(t),e.x,e.y)||u(t,e.x2,e.y)||u(t,e.x,e.y2)||u(t,e.x2,e.y2)||u(e,t.x,t.y)||u(e,t.x2,t.y)||u(e,t.x,t.y2)||u(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function k(e,t,n,i,r){return e*(e*(-3*t+9*n-9*i+3*r)+6*t-12*n+6*i)-3*t+3*n}function M(e,t,n,i,r,o,a,s,c){null==c&&(c=1);for(var l=(c=1<c?1:c<0?0:c)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,h=0;h<12;h++){var f=l*u[h]+l,m=k(f,e,n,r,a),v=k(f,t,i,o,s),g=m*m+v*v;d+=p[h]*z.sqrt(g)}return l*d}function P(e,t,n,i,r,o,a,s){if(!($(e,n)<w(r,a)||w(e,n)>$(r,a)||$(t,i)<w(o,s)||w(t,i)>$(o,s))){var c=(e-n)*(o-s)-(t-i)*(r-a);if(c){var l=((e*i-t*n)*(r-a)-(e-n)*(r*s-o*a))/c,u=((e*i-t*n)*(o-s)-(t-i)*(r*s-o*a))/c,p=+l.toFixed(2),d=+u.toFixed(2);if(!(p<+w(e,n).toFixed(2)||p>+$(e,n).toFixed(2)||p<+w(r,a).toFixed(2)||p>+$(r,a).toFixed(2)||d<+w(t,i).toFixed(2)||d>+$(t,i).toFixed(2)||d<+w(o,s).toFixed(2)||d>+$(o,s).toFixed(2)))return{x:l,y:u}}}}function R(e,t,n){if(!j(T(e),T(t)))return n?0:[];for(var i=~~(M.apply(0,e)/8),r=~~(M.apply(0,t)/8),o=[],a=[],s={},c=n?0:[],l=0;l<i+1;l++){var u=A.apply(0,e.concat(l/i));o.push({x:u.x,y:u.y,t:l/i})}for(l=0;l<r+1;l++)u=A.apply(0,t.concat(l/r)),a.push({x:u.x,y:u.y,t:l/r});for(l=0;l<i;l++)for(var p=0;p<r;p++){var d=o[l],h=o[l+1],f=a[p],m=a[p+1],v=W(h.x-d.x)<.001?"y":"x",g=W(m.x-f.x)<.001?"y":"x",y=P(d.x,d.y,h.x,h.y,f.x,f.y,m.x,m.y);if(y){if(s[y.x.toFixed(4)]==y.y.toFixed(4))continue;s[y.x.toFixed(4)]=y.y.toFixed(4);var b=d.t+W((y[v]-d[v])/(h[v]-d[v]))*(h.t-d.t),x=f.t+W((y[g]-f[g])/(m[g]-f[g]))*(m.t-f.t);0<=b&&b<=1&&0<=x&&x<=1&&(n?c++:c.push({x:y.x,y:y.y,t1:b,t2:x}))}}return c}function p(e,t){return d(e,t)}function d(e,t,n){e=L(e),t=L(t);for(var i,r,o,a,s,c,l,u,p,d,h=n?0:[],f=0,m=e.length;f<m;f++){var v=e[f];if("M"==v[0])i=s=v[1],r=c=v[2];else{"C"==v[0]?(i=(p=[i,r].concat(v.slice(1)))[6],r=p[7]):(p=[i,r,i,r,s,c,s,c],i=s,r=c);for(var g=0,y=t.length;g<y;g++){var b=t[g];if("M"==b[0])o=l=b[1],a=u=b[2];else{"C"==b[0]?(o=(d=[o,a].concat(b.slice(1)))[6],a=d[7]):(d=[o,a,o,a,l,u,l,u],o=l,a=u);var x=R(p,d,n);if(n)h+=x;else{for(var E=0,w=x.length;E<w;E++)x[E].segment1=f,x[E].segment2=g,x[E].bez1=p,x[E].bez2=d;h=h.concat(x)}}}}}return h}function f(e){var t=_(e);if(t.bbox)return v(t.bbox);if(!e)return h();for(var n,i=0,r=0,o=[],a=[],s=0,c=(e=L(e)).length;s<c;s++)if("M"==(n=e[s])[0])i=n[1],r=n[2],o.push(i),a.push(r);else{var l=m(i,r,n[1],n[2],n[3],n[4],n[5],n[6]);o=o.concat(l.min.x,l.max.x),a=a.concat(l.min.y,l.max.y),i=n[5],r=n[6]}var u=w.apply(0,o),p=w.apply(0,a),d=h(u,p,$.apply(0,o)-u,$.apply(0,a)-p);return t.bbox=v(d),d}function D(e,t,n,i,r){if(null==r&&null==i&&(i=n),e=+e,t=+t,n=+n,i=+i,null!=r)var o=Math.PI/180,a=e+n*Math.cos(-i*o),s=e+n*Math.cos(-r*o),c=[["M",a,t+n*Math.sin(-i*o)],["A",n,n,0,+(180<r-i),0,s,t+n*Math.sin(-r*o)]];else c=[["M",e,t],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return c.toString=S,c}function O(e){var t=_(e);if(t.abs)return C(t.abs);if(b(e,"array")&&b(e&&e[0],"array")||(e=E(e)),!e||!e.length)return[["M",0,0]];var n,i=[],r=0,o=0,a=0,s=0,c=0;"M"==e[0][0]&&(a=r=+e[0][1],s=o=+e[0][2],c++,i[0]=["M",r,o]);for(var l,u,p=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),d=c,h=e.length;d<h;d++){if(i.push(l=[]),(n=(u=e[d])[0])!=n.toUpperCase())switch(l[0]=n.toUpperCase(),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+u[6]+r,l[7]=+u[7]+o;break;case"V":l[1]=+u[1]+o;break;case"H":l[1]=+u[1]+r;break;case"R":for(var f=[r,o].concat(u.slice(1)),m=2,v=f.length;m<v;m++)f[m]=+f[m]+r,f[++m]=+f[m]+o;i.pop(),i=i.concat(I(f,p));break;case"O":i.pop(),(f=D(r,o,u[1],u[2])).push(f[0]),i=i.concat(f);break;case"U":i.pop(),i=i.concat(D(r,o,u[1],u[2],u[3])),l=["U"].concat(i[i.length-1].slice(-2));break;case"M":a=+u[1]+r,s=+u[2]+o;default:for(m=1,v=u.length;m<v;m++)l[m]=+u[m]+(m%2?r:o)}else if("R"==n)f=[r,o].concat(u.slice(1)),i.pop(),i=i.concat(I(f,p)),l=["R"].concat(u.slice(-2));else if("O"==n)i.pop(),(f=D(r,o,u[1],u[2])).push(f[0]),i=i.concat(f);else if("U"==n)i.pop(),i=i.concat(D(r,o,u[1],u[2],u[3])),l=["U"].concat(i[i.length-1].slice(-2));else for(var g=0,y=u.length;g<y;g++)l[g]=u[g];if("O"!=(n=n.toUpperCase()))switch(l[0]){case"Z":r=+a,o=+s;break;case"H":r=l[1];break;case"V":o=l[1];break;case"M":a=l[l.length-2],s=l[l.length-1];default:r=l[l.length-2],o=l[l.length-1]}}return i.toString=S,t.abs=C(i),i}function N(e,t,n,i){return[e,t,n,i,n,i]}function B(e,t,n,i,r,o){return[1/3*e+2/3*n,1/3*t+2/3*i,1/3*r+2/3*n,1/3*o+2/3*i,r,o]}function m(e,t,n,i,r,o,a,s){for(var c,l,u,p,d,h,f,m,v=[],g=[[],[]],y=0;y<2;++y)if(0==y?(l=6*e-12*n+6*r,c=-3*e+9*n-9*r+3*a,u=3*n-3*e):(l=6*t-12*i+6*o,c=-3*t+9*i-9*o+3*s,u=3*i-3*t),W(c)<1e-12){if(W(l)<1e-12)continue;0<(p=-u/l)&&p<1&&v.push(p)}else f=l*l-4*u*c,m=z.sqrt(f),f<0||(0<(d=(-l+m)/(2*c))&&d<1&&v.push(d),0<(h=(-l-m)/(2*c))&&h<1&&v.push(h));for(var b,x=v.length,E=x;x--;)b=1-(p=v[x]),g[0][x]=b*b*b*e+3*b*b*p*n+3*b*p*p*r+p*p*p*a,g[1][x]=b*b*b*t+3*b*b*p*i+3*b*p*p*o+p*p*p*s;return g[0][E]=e,g[1][E]=t,g[0][E+1]=a,g[1][E+1]=s,g[0].length=g[1].length=E+2,{min:{x:w.apply(0,g[0]),y:w.apply(0,g[1])},max:{x:$.apply(0,g[0]),y:$.apply(0,g[1])}}}function L(e,t){var n=!t&&_(e);if(!t&&n.curve)return C(n.curve);for(var o=O(e),a=t&&O(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(e,t,n){var i,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(function e(t,n,i,r,o,a,s,c,l,u){var p,d=120*q/180,h=q/180*(+o||0),f=[],m=G(function(e,t,n){return{x:e*z.cos(n)-t*z.sin(n),y:e*z.sin(n)+t*z.cos(n)}});if(u)_=u[0],S=u[1],w=u[2],$=u[3];else{t=(p=m(t,n,-h)).x,n=p.y;var v=(t-(c=(p=m(c,l,-h)).x))/2,g=(n-(l=p.y))/2,y=v*v/(i*i)+g*g/(r*r);1<y&&(i*=y=z.sqrt(y),r*=y);var b=i*i,x=r*r,E=(a==s?-1:1)*z.sqrt(W((b*x-b*g*g-x*v*v)/(b*g*g+x*v*v))),w=E*i*g/r+(t+c)/2,$=E*-r*v/i+(n+l)/2,_=z.asin(((n-$)/r).toFixed(9)),S=z.asin(((l-$)/r).toFixed(9));(_=t<w?q-_:_)<0&&(_=2*q+_),(S=c<w?q-S:S)<0&&(S=2*q+S),s&&S<_&&(_-=2*q),!s&&_<S&&(S-=2*q)}var C=S-_;if(W(C)>d){var A=S,T=c,j=l;S=_+d*(s&&_<S?1:-1),f=e(c=w+i*z.cos(S),l=$+r*z.sin(S),i,r,o,0,s,T,j,[S,A,w,$])}C=S-_;var k=z.cos(_),M=z.sin(_),P=z.cos(S),R=z.sin(S),D=z.tan(C/4),O=4/3*i*D,N=4/3*r*D,B=[t,n],L=[t+O*M,n-N*k],I=[c+O*R,l-N*P],F=[c,l];if(L[0]=2*B[0]-L[0],L[1]=2*B[1]-L[1],u)return[L,I,F].concat(f);for(var U=[],H=0,V=(f=[L,I,F].concat(f).join().split(",")).length;H<V;H++)U[H]=H%2?m(f[H-1],f[H],h).y:m(f[H],f[H+1],h).x;return U}.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*t.x-t.bx,r=2*t.y-t.by):(i=t.x,r=t.y),e=["C",i,r].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(B(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(B(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(N(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(N(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(N(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(N(t.x,t.y,t.X,t.Y))}return e},c=function(e,t){if(7<e[t].length){e[t].shift();for(var n=e[t];n.length;)u[t]="A",a&&(p[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),m=$(o.length,a&&a.length||0)}},l=function(e,t,n,i,r){e&&t&&"M"==e[r][0]&&"M"!=t[r][0]&&(t.splice(r,0,["M",i.x,i.y]),n.bx=0,n.by=0,n.x=e[r][1],n.y=e[r][2],m=$(o.length,a&&a.length||0))},u=[],p=[],d="",h="",f=0,m=$(o.length,a&&a.length||0);f<m;f++){o[f]&&(d=o[f][0]),"C"!=d&&(u[f]=d,f&&(h=u[f-1])),o[f]=s(o[f],i,h),"A"!=u[f]&&"C"==d&&(u[f]="C"),c(o,f),a&&(a[f]&&(d=a[f][0]),"C"!=d&&(p[f]=d,f&&(h=p[f-1])),a[f]=s(a[f],r,h),"A"!=p[f]&&"C"==d&&(p[f]="C"),c(a,f)),l(o,a,i,r,f),l(a,o,r,i,f);var v=o[f],g=a&&a[f],y=v.length,b=a&&g.length;i.x=v[y-2],i.y=v[y-1],i.bx=x(v[y-4])||i.x,i.by=x(v[y-3])||i.y,r.bx=a&&(x(g[b-4])||r.x),r.by=a&&(x(g[b-3])||r.y),r.x=a&&g[b-2],r.y=a&&g[b-1]}return a||(n.curve=C(o)),a?[o,a]:o}function I(e,t){for(var n=[],i=0,r=e.length;i<r-2*!t;i+=2){var o=[{x:+e[i-2],y:+e[i-1]},{x:+e[i],y:+e[i+1]},{x:+e[i+2],y:+e[i+3]},{x:+e[i+4],y:+e[i+5]}];t?i?r-4==i?o[3]={x:+e[0],y:+e[1]}:r-2==i&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[r-2],y:+e[r-1]}:r-4==i?o[3]=o[2]:i||(o[0]={x:+e[i],y:+e[i+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}_.getTotalLength=a,_.getPointAtLength=l,_.findDotsAtSegment=A,_.bezierBBox=T,_.isPointInsideBBox=u,_.isBBoxIntersect=j,_.intersection=p,_.intersectionNumber=function(e,t){return d(e,t,1)},_.isPointInside=function(e,t,n){var i=f(e);return u(i,t,n)&&d(e,[["M",t,n],["H",i.x2+10]],1)%2==1},_.getBBox=f,_.toRelative=function(e){var t=_(e),n=String.prototype.toLowerCase;if(t.rel)return C(t.rel);b(e,"array")&&b(e&&e[0],"array")||(e=E(e));var i=[],r=0,o=0,a=0,s=0,c=0;"M"==e[0][0]&&(a=r=e[0][1],s=o=e[0][2],c++,i.push(["M",r,o]));for(var l=c,u=e.length;l<u;l++){var p=i[l]=[],d=e[l];if(d[0]!=n.call(d[0]))switch(p[0]=n.call(d[0]),p[0]){case"a":p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=+(d[6]-r).toFixed(3),p[7]=+(d[7]-o).toFixed(3);break;case"v":p[1]=+(d[1]-o).toFixed(3);break;case"m":a=d[1],s=d[2];default:for(var h=1,f=d.length;h<f;h++)p[h]=+(d[h]-(h%2?r:o)).toFixed(3)}else{p=i[l]=[],"m"==d[0]&&(a=d[1]+r,s=d[2]+o);for(var m=0,v=d.length;m<v;m++)i[l][m]=d[m]}var g=i[l].length;switch(i[l][0]){case"z":r=a,o=s;break;case"h":r+=+i[l][g-1];break;case"v":o+=+i[l][g-1];break;default:r+=+i[l][g-2],o+=+i[l][g-1]}}return i.toString=S,t.rel=C(i),i},_.toAbsolute=O,_.toCubic=L,_.map=function(e,t){if(!t)return e;var n,i,r,o,a,s,c;for(r=0,a=(e=L(e)).length;r<a;r++)for(o=1,s=(c=e[r]).length;o<s;o+=2)n=t.x(c[o],c[o+1]),i=t.y(c[o],c[o+1]),c[o]=n,c[o+1]=i;return e},_.toString=S,_.clone=C,t.exports.intersection=p},{}],299:[function(e,t,n){"use strict";var u=e("./Geometry").pointDistance,p=e("./Intersection").intersection,d=Math.round,h=Math.max;var f=10;t.exports.getApproxIntersection=function(e,t){return function(e,t){var n,i;for(n=0;i=e[n];n++)if(u(i,t)<=f)return{point:e[n],bendpoint:!0,index:n};return null}(e,t)||(n=e,s=p((o=f,[["M",(r=t).x,r.y],["m",0,-o],["a",o,o,0,1,1,0,2*o],["a",o,o,0,1,1,0,-2*o],["z"]]),(i=[],n.forEach(function(e,t){i.push([0===t?"M":"L",e.x,e.y])}),i)),c=s[0],l=s[s.length-1],c?c!==l?c.segment2!==l.segment2?{point:n[a=h(c.segment2,l.segment2)-1],bendpoint:!0,index:a}:{point:{x:d(c.x+l.x)/2,y:d(c.y+l.y)/2},index:c.segment2}:{point:{x:d(c.x),y:d(c.y)},index:c.segment2}:null);var n,i,r,o,a,s,c,l}},{"./Geometry":295,"./Intersection":298}],300:[function(e,t,n){"use strict";t.exports.log10=function(e){return Math.log(e)/Math.log(10)},t.exports.substract=function(e,t){return{x:e.x-t.x,y:e.y-t.y}}},{}],301:[function(e,t,n){"use strict";var i=e("./Event").getOriginal,r=e("./Platform").isMac;function o(e){return!(i(e)||e).button}t.exports.isPrimaryButton=o,t.exports.isMac=r,t.exports.hasPrimaryModifier=function(e){var t=i(e)||e;return!!o(e)&&(r()?t.metaKey:t.ctrlKey)},t.exports.hasSecondaryModifier=function(e){var t=i(e)||e;return o(e)&&t.shiftKey}},{"./Event":294,"./Platform":302}],302:[function(e,t,n){"use strict";t.exports.isMac=function(){return/mac/i.test(navigator.platform)}},{}],303:[function(e,t,n){"use strict";t.exports.center=function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},t.exports.delta=function(e,t){return{x:e.x-t.x,y:e.y-t.y}}},{}],304:[function(e,t,n){"use strict";t.exports.saveClear=function(e,t){if("function"!=typeof t)throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}},{}],305:[function(e,t,n){"use strict";var i=e("tiny-svg/lib/attr"),r=e("tiny-svg/lib/create");function o(e){for(var t,n="",i=0;t=e[i];i++)n+=t.x+","+t.y+" ";return n}t.exports.componentsToPath=function(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")},t.exports.toSVGPoints=o,t.exports.createLine=function(e,t){var n=r("polyline");return i(n,{points:o(e)}),t&&i(n,t),n},t.exports.updateLine=function(e,t){return i(e,{points:o(t)}),e}},{"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540}],306:[function(e,t,n){"use strict";var c=e("tiny-svg/lib/transform"),l=e("tiny-svg/lib/geometry").createTransform;t.exports.transform=function(e,t,n,i,r){var o=l();o.setTranslate(t,n);var a=l();a.setRotate(i,0,0);var s=l();s.setScale(r||1,r||1),c(e,[o,a,s])},t.exports.translate=function(e,t,n){var i=l();i.setTranslate(t,n),c(e,i)},t.exports.rotate=function(e,t){var n=l();n.setRotate(t,0,0),c(e,n)},t.exports.scale=function(e,t){var n=l();n.setScale(t,t),c(e,n)}},{"tiny-svg/lib/geometry":541,"tiny-svg/lib/transform":544}],307:[function(e,t,n){"use strict";var E=e("lodash/lang/isObject"),w=e("lodash/object/assign"),r=e("lodash/object/pick"),$=e("lodash/collection/forEach"),_=e("lodash/collection/reduce"),S=e("lodash/object/merge"),C=e("tiny-svg/lib/append"),A=e("tiny-svg/lib/attr"),T=e("tiny-svg/lib/create"),j=e("tiny-svg/lib/remove"),i=0,o={width:150,height:50};function a(e,t){t.textContent=e;try{var n,i=""===e;return t.textContent=i?"dummy":e,n=r(t.getBBox(),["width","height"]),i&&(n.width=0),n}catch(e){return{width:0,height:0}}}function k(e,t,n){for(var i,r=e.shift(),o=r;;){if((i=a(o,n)).width=o?i.width:0," "===o||""===o||i.width<Math.round(t)||o.length<2)return s(e,o,r,i);o=c(o,i.width,t)}}function s(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}function c(e,t,n){var i=Math.max(e.length*(n/t),1),r=function(e,t){var n,i=e.split(/(\s|-)/g),r=[],o=0;if(1<i.length)for(;n=i.shift();){if(!(n.length+o<t)){"-"===n&&r.pop();break}r.push(n),o+=n.length}return r.join("")}(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function l(e){this._config=w({},{size:o,padding:i,style:{},align:"center-top"},e||{})}l.prototype.createText=function(e,t){return this.layoutText(e,t).element},l.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},l.prototype.layoutText=function(e,t){var n,i,r,o=S({},this._config.size,t.box||{}),a=S({},this._config.style,t.style||{}),s=(i=t.align||this._config.align,{horizontal:(r=i.split("-"))[0]||"center",vertical:r[1]||"top"}),c=(n=void 0!==t.padding?t.padding:this._config.padding,E(n)?w({top:0,left:0,right:0,bottom:0},n):{top:n,left:n,right:n,bottom:n}),l=t.fitBox||!1,u=e.split(/\r?\n/g),p=[],d=o.width-c.left-c.right,h=T("text");A(h,{x:0,y:0}),A(h,a);var f,m=((f=document.getElementById("helper-svg"))||(f=T("svg"),A(f,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(f)),f);for(C(m,h);u.length;)p.push(k(u,d,h));var v,g,y=_(p,function(e,t,n){return e+t.height},0),b=_(p,function(e,t,n){return t.width>e?t.width:e},0);switch(s.vertical){case"middle":v=(o.height-y)/2-p[0].height/4;break;default:v=c.top}var x=T("text");return A(x,a),$(p,function(e){switch(v+=e.height,s.horizontal){case"left":g=c.left;break;case"right":g=(l?b:d)-c.right-e.width;break;default:g=Math.max(((l?b:d)-e.width)/2+c.left,0)}var t=T("tspan");A(t,{x:g,y:v}),t.textContent=e.text,C(x,t)}),j(h),{dimensions:{width:b,height:y},element:x}},t.exports=l},{"lodash/collection/forEach":360,"lodash/collection/reduce":364,"lodash/lang/isObject":485,"lodash/object/assign":490,"lodash/object/merge":495,"lodash/object/pick":498,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540,"tiny-svg/lib/remove":543}],308:[function(e,t,n){t.exports=e("./lib/simple")},{"./lib/simple":310}],309:[function(e,t,n){"use strict";var a=e("lodash/lang/isString"),s=e("lodash/lang/isFunction"),c=e("lodash/object/assign"),i=e("moddle"),l=e("moddle-xml/lib/reader"),r=e("moddle-xml/lib/writer");function o(e,t){i.call(this,e,t)}o.prototype=Object.create(i.prototype),(t.exports=o).prototype.fromXML=function(e,t,n,i){a(t)||(i=n,n=t,t="bpmn:Definitions"),s(n)&&(i=n,n={});var r=new l(c({model:this,lax:!0},n)),o=r.handler(t);r.fromXML(e,o,i)},o.prototype.toXML=function(e,t,n){s(t)&&(n=t,t={});var i=new r(t);try{n(null,i.toXML(e))}catch(e){n(e)}}},{"lodash/lang/isFunction":482,"lodash/lang/isString":487,"lodash/object/assign":490,moddle:517,"moddle-xml/lib/reader":515,"moddle-xml/lib/writer":516}],310:[function(e,t,n){"use strict";var i=e("lodash/object/assign"),r=e("./bpmn-moddle"),o={bpmn:e("../resources/bpmn/json/bpmn.json"),bpmndi:e("../resources/bpmn/json/bpmndi.json"),dc:e("../resources/bpmn/json/dc.json"),di:e("../resources/bpmn/json/di.json"),bioc:e("../resources/bpmn-io/json/bioc.json")};t.exports=function(e,t){return new r(i({},o,e),t)}},{"../resources/bpmn-io/json/bioc.json":311,"../resources/bpmn/json/bpmn.json":312,"../resources/bpmn/json/bpmndi.json":313,"../resources/bpmn/json/dc.json":314,"../resources/bpmn/json/di.json":315,"./bpmn-moddle":309,"lodash/object/assign":490}],311:[function(e,t,n){t.exports={name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}},{}],312:[function(e,t,n){t.exports={name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",type:"LaneSet",isMany:!0,replaces:"FlowElementsContainer#laneSets"},{name:"flowElements",type:"FlowElement",isMany:!0,replaces:"FlowElementsContainer#flowElements"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"assignment",type:"Assignment",isMany:!0},{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRefs",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",type:"String",isBody:!0}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",type:"String",isAttr:!0},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRefs",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["FlowElementsContainer","Collaboration"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isVirtual:!0,isMany:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"CallActivity",superClass:["Activity"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],prefix:"bpmn",xml:{tagAlias:"lowerCase",typePrefix:"t"}}},{}],313:[function(e,t,n){t.exports={name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[],prefix:"bpmndi"}},{}],314:[function(e,t,n){t.exports={name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]}},{}],315:[function(e,t,n){t.exports={name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Extension",properties:[{name:"values",type:"Element",isMany:!0}]}],associations:[],prefix:"di",xml:{tagAlias:"lowerCase"}}},{}],316:[function(t,e,n){try{var i=t("indexof")}catch(e){i=t("component-indexof")}var r=/\s+/,o=Object.prototype.toString;function a(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}e.exports=function(e){return new a(e)},a.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~i(t,e)||t.push(e),this.el.className=t.join(" "),this},a.prototype.remove=function(e){if("[object RegExp]"==o.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=i(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},a.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},a.prototype.toggle=function(e,t){return this.list?void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e):void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},a.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(r);return""===e[0]&&e.shift(),e},a.prototype.has=a.prototype.contains=function(e){return this.list?this.list.contains(e):!!~i(this.array(),e)}},{"component-indexof":320,indexof:320}],317:[function(e,t,n){var r=e("matches-selector");t.exports=function(e,t,n,i){for(e=n?{parentNode:e}:e,i=i||document;(e=e.parentNode)&&e!==document;){if(r(e,t))return e;if(e===i)return}}},{"matches-selector":321}],318:[function(t,e,n){try{var o=t("closest")}catch(e){o=t("component-closest")}try{var a=t("event")}catch(e){a=t("component-event")}n.bind=function(n,i,e,r,t){return a.bind(n,e,function(e){var t=e.target||e.srcElement;e.delegateTarget=o(t,i,!0,n),e.delegateTarget&&r.call(n,e)},t)},n.unbind=function(e,t,n,i){a.unbind(e,t,n,i)}},{closest:317,"component-closest":317,"component-event":319,event:319}],319:[function(e,t,n){var r=window.addEventListener?"addEventListener":"attachEvent",o=window.removeEventListener?"removeEventListener":"detachEvent",a="addEventListener"!==r?"on":"";n.bind=function(e,t,n,i){return e[r](a+t,n,i||!1),n},n.unbind=function(e,t,n,i){return e[o](a+t,n,i||!1),n}},{}],320:[function(e,t,n){t.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],321:[function(t,e,n){try{var r=t("query")}catch(e){r=t("component-query")}var i=Element.prototype,o=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=function(e,t){if(!e||1!==e.nodeType)return!1;if(o)return o.call(e,t);for(var n=r.all(t,e.parentNode),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1}},{"component-query":322,query:322}],322:[function(e,t,n){function i(e,t){return t.querySelector(e)}(n=t.exports=function(e,t){return i(e,t=t||document)}).all=function(e,t){return(t=t||document).querySelectorAll(e)},n.engine=function(e){if(!e.one)throw new Error(".one callback required");if(!e.all)throw new Error(".all callback required");return i=e.one,n.all=e.all,n}},{}],323:[function(e,t,n){t.exports={__depends__:[e("diagram-js/lib/features/interaction-events")],__init__:["directEditing"],directEditing:["type",e("./lib/DirectEditing")]}},{"./lib/DirectEditing":324,"diagram-js/lib/features/interaction-events":327}],324:[function(e,t,n){"use strict";var i=e("lodash/function/bind"),r=e("lodash/collection/find"),o=e("./TextBox");function a(e,t){this._eventBus=e,this._providers=[],this._textbox=new o({container:t.getContainer(),keyHandler:i(this._handleKey,this),resizeHandler:i(this._handleResize,this)})}a.$inject=["eventBus","canvas"],a.prototype.registerProvider=function(e){this._providers.push(e)},a.prototype.isActive=function(){return!!this._active},a.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},a.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},a.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},a.prototype.complete=function(){var e=this._active;if(e){var t=this.getValue(),n=this.$textbox.getBoundingClientRect();(t!==e.context.text||this.resizable)&&e.provider.update(e.element,t,e.context.text,{x:n.top,y:n.left,width:n.width,height:n.height}),this._fire("complete"),this.close()}},a.prototype.getValue=function(){return this._textbox.getValue()},a.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},a.prototype._handleResize=function(e){this._fire("resize",e)},a.prototype.activate=function(t){var n;this.isActive()&&this.cancel();var e=r(this._providers,function(e){return(n=e.activate(t))?e:null});return n&&(this.$textbox=this._textbox.create(n.bounds,n.style,n.text,n.options),this._active={element:t,context:n,provider:e},n.options&&n.options.resizable&&(this.resizable=!0),this._fire("activate")),!!n},t.exports=a},{"./TextBox":325,"lodash/collection/find":359,"lodash/function/bind":370}],325:[function(e,t,n){"use strict";var f=e("lodash/object/assign"),i=e("lodash/function/bind"),l=e("lodash/object/pick"),r=e("min-dom/lib/attr"),m=e("min-dom/lib/classes"),v=e("min-dom/lib/event"),x=e("min-dom/lib/remove"),g=Math.min,y=Math.max;function b(e){e.preventDefault()}function E(e){e.stopPropagation()}function o(e){this.container=e.container,this.parent=document.createElement("div"),this.content=document.createElement("div"),this.parent.appendChild(this.content),r(this.content,"contentEditable","true"),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=i(this.autoResize,this),this.handlePaste=i(this.handlePaste,this)}(t.exports=o).prototype.create=function(e,t,n,i){var r=this.parent,o=this.content,a=this.container;i=this.options=i||{},t=this.style=t||{};var s=l(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);f(r.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",wordWrap:"normal",textAlign:"center",outline:"none"},s);var c=l(t,["fontSize","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return f(o.style,{boxSizing:"border-box",width:"100%",outline:"none"},c),i.centerVertically&&f(o.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},c),o.innerText=n,v.bind(o,"keydown",this.keyHandler),v.bind(o,"mousedown",E),v.bind(o,"paste",this.handlePaste),i.autoResize&&v.bind(o,"input",this.autoResize),i.resizable&&this.resizable(t),a.appendChild(r),this.setSelection(o.lastChild,o.lastChild&&o.lastChild.length),r},o.prototype.handlePaste=function(e){var n,t,i=this,r=this.options,o=this.style;if(e.preventDefault(),n=e.clipboardData?e.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),!document.execCommand("insertHTML",!1,n)){var a,s,c=this.getSelection(),l=c.startContainer,u=c.endContainer,p=c.startOffset,d=c.endOffset,h=c.commonAncestorContainer,f=(t=h.childNodes,[].slice.call(t));if(h.nodeType===Node.TEXT_NODE){var m=l.textContent;l.textContent=m.substring(0,p)+n+m.substring(d),a=l,s=p+n.length}else if(l===this.content&&u===this.content){var v=document.createTextNode(n);this.content.insertBefore(v,f[p]),s=(a=v).textContent.length}else{var g=f.indexOf(l),y=f.indexOf(u);f.forEach(function(e,t){t===g?e.textContent=l.textContent.substring(0,p)+n+u.textContent.substring(d):g<t&&t<=y&&x(e)}),a=l,s=p+n.length}a&&void 0!==s&&setTimeout(function(){i.setSelection(a,s)})}if(r.autoResize){var b=this.autoResize(o);b&&this.resizeHandler(b)}},o.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}},o.prototype.resizable=function(){var i=this,r=this.parent,e=this.resizeHandle,o=parseInt(this.style.minWidth)||0,a=parseInt(this.style.minHeight)||0,s=parseInt(this.style.maxWidth)||1/0,c=parseInt(this.style.maxHeight)||1/0;if(!e){var l,u,p,d;e=this.resizeHandle=document.createElement("div"),m(e).add("djs-direct-editing-resize-handle");var n=function(e){b(e),E(e);var t=g(y(p+e.clientX-l,o),s),n=g(y(d+e.clientY-u,a),c);r.style.width=t+"px",r.style.height=n+"px",i.resizeHandler({width:p,height:d,dx:e.clientX-l,dy:e.clientY-u})},h=function(e){b(e),E(e),v.unbind(document,"mousemove",n,!1),v.unbind(document,"mouseup",h,!1)};v.bind(e,"mousedown",function(e){b(e),E(e),l=e.clientX,u=e.clientY;var t=r.getBoundingClientRect();p=t.width,d=t.height,v.bind(document,"mousemove",n),v.bind(document,"mouseup",h)})}f(e.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),r.appendChild(e)},o.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),v.unbind(t,"keydown",this.keyHandler),v.unbind(t,"mousedown",E),v.unbind(t,"input",this.autoResize),v.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),x(n)),x(e)},o.prototype.getValue=function(){return this.content.innerText},o.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},o.prototype.setSelection=function(e,t){var n=document.createRange();null===e?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)}},{"lodash/function/bind":370,"lodash/object/assign":490,"lodash/object/pick":498,"min-dom/lib/attr":504,"min-dom/lib/classes":505,"min-dom/lib/event":510,"min-dom/lib/remove":513}],326:[function(e,t,n){arguments[4][196][0].apply(n,arguments)},{"../../util/Mouse":331,"../../util/RenderUtil":333,dup:196,"lodash/collection/forEach":360,"min-dom/lib/delegate":508,"min-dom/lib/query":512,"tiny-svg/lib/append":534,"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540}],327:[function(e,t,n){arguments[4][197][0].apply(n,arguments)},{"./InteractionEvents":326,dup:197}],328:[function(e,t,n){arguments[4][275][0].apply(n,arguments)},{"./translate":329,dup:275}],329:[function(e,t,n){arguments[4][276][0].apply(n,arguments)},{dup:276}],330:[function(e,t,n){"use strict";function i(e){return e&&e.preventDefault()}function r(e,t){e&&(e.stopPropagation&&e.stopPropagation(),t&&e.stopImmediatePropagation&&e.stopImmediatePropagation())}function o(e){return e.originalEvent||e.srcEvent}function a(e){i(e),i(o(e))}function s(e,t){r(e,t),r(o(e),t)}t.exports.getOriginal=o,t.exports.stopEvent=function(e,t){s(e,t),a(e)},t.exports.preventDefault=a,t.exports.stopPropagation=s,t.exports.toPoint=function(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}},{}],331:[function(e,t,n){arguments[4][301][0].apply(n,arguments)},{"./Event":330,"./Platform":332,dup:301}],332:[function(e,t,n){arguments[4][302][0].apply(n,arguments)},{dup:302}],333:[function(e,t,n){arguments[4][305][0].apply(n,arguments)},{dup:305,"tiny-svg/lib/attr":536,"tiny-svg/lib/create":540}],334:[function(e,t,n){var i=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,o=/\/\*([^\*]*)\*\//m;n.annotate=function(){var e=Array.prototype.slice.call(arguments);1===e.length&&i(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t},n.parse=function(e){if("function"!=typeof e)throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(r);return t[1]&&t[1].split(",").map(function(e){return(t=e.match(o))?t[1].trim():e.trim()})||[]},n.isArray=i},{}],335:[function(e,t,n){t.exports={annotate:e("./annotation").annotate,Module:e("./module"),Injector:e("./injector")}},{"./annotation":334,"./injector":336,"./module":337}],336:[function(e,t,n){var u=e("./module"),p=e("./annotation").parse,m=e("./annotation").annotate,v=e("./annotation").isArray,g=function(e,r){r=r||{get:function(e,t){if(o.push(e),!1===t)return null;throw s('No provider for "'+e+'"!')}};var o=[],d=this._providers=Object.create(r._providers||null),a=this._instances=Object.create(null),h=a.injector=this,s=function(e){var t=o.join(" -> ");return o.length=0,new Error(t?e+" (Resolving: "+t+")":e)},c=function(e,t){if(!d[e]&&-1!==e.indexOf(".")){for(var n=e.split("."),i=c(n.shift());n.length;)i=i[n.shift()];return i}if(Object.hasOwnProperty.call(a,e))return a[e];if(Object.hasOwnProperty.call(d,e)){if(-1!==o.indexOf(e))throw o.push(e),s("Cannot resolve circular dependency!");return o.push(e),a[e]=d[e][0](d[e][1]),o.pop(),a[e]}return r.get(e,t)},t=function(e){var t=Object.create(e.prototype),n=i(e,t);return"object"==typeof n?n:t},i=function(e,t){if("function"!=typeof e){if(!v(e))throw new Error('Cannot invoke "'+e+'". Expected a function!');e=m(e.slice())}var n=(e.$inject&&e.$inject||p(e)).map(function(e){return c(e)});return e.apply(t,n)},f=function(t){return m(function(e){return t.get(e)})},l={factory:i,type:t,value:function(e){return e}};e.forEach(function(i){function r(e,t){return"value"!==e&&v(t)&&(t=m(t.slice())),t}if(i instanceof u)i.forEach(function(e){var t=e[0],n=e[1],i=e[2];d[t]=[l[n],r(n,i),n]});else if("object"==typeof i)if(i.__exports__){var e=Object.keys(i).reduce(function(e,t){return"__"!==t.substring(0,2)&&(e[t]=i[t]),e},Object.create(null)),t=new g((i.__modules__||[]).concat([e]),h),n=m(function(e){return t.get(e)});i.__exports__.forEach(function(e){d[e]=[n,e,"private",t]})}else Object.keys(i).forEach(function(e){if("private"!==i[e][2]){var t=i[e][0],n=i[e][1];d[e]=[l[t],r(t,n),t]}else d[e]=i[e]})}),this.get=c,this.invoke=i,this.instantiate=t,this.createChild=function(e,t){if(t&&t.length){var n,i,r,o,a=Object.create(null),s=Object.create(null),c=[],l=[],u=[];for(var p in d)n=d[p],-1!==t.indexOf(p)&&("private"===n[2]?-1===(i=c.indexOf(n[3]))?(r=n[3].createChild([],t),o=f(r),c.push(n[3]),l.push(r),u.push(o),a[p]=[o,p,"private",r]):a[p]=[u[i],p,"private",l[i]]:a[p]=[n[2],n[1]],s[p]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||t.forEach(function(e){-1!==n[1].$scope.indexOf(e)&&(a[p]=[n[2],n[1]],s[e]=!0)});t.forEach(function(e){if(!s[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(a)}return new g(e,h)}};t.exports=g},{"./annotation":334,"./module":337}],337:[function(e,t,n){t.exports=function(){var n=[];this.factory=function(e,t){return n.push([e,"factory",t]),this},this.value=function(e,t){return n.push([e,"value",t]),this},this.type=function(e,t){return n.push([e,"type",t]),this},this.forEach=function(e){n.forEach(e)}}},{}],338:[function(e,t,n){t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){var r=t.createElement("html");return r.innerHTML=e,r.removeChild(r.lastChild)}var o=u[i]||u._default,a=o[0],s=o[1],c=o[2];(r=t.createElement("div")).innerHTML=s+e+c;for(;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);var l=t.createDocumentFragment();for(;r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l};var i,r=!1;"undefined"!=typeof document&&((i=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',r=!i.getElementsByTagName("link").length,i=void 0);var u={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:r?[1,"X<div>","</div>"]:[0,"",""]};u.td=u.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],u.option=u.optgroup=[1,'<select multiple="multiple">',"</select>"],u.thead=u.tbody=u.colgroup=u.caption=u.tfoot=[1,"<table>","</table>"],u.polyline=u.ellipse=u.polygon=u.circle=u.text=u.line=u.path=u.rect=u.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],339:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,r,o,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(u(n=this._events[e]))return!1;if(c(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(l(n))for(r=Array.prototype.slice.call(arguments,1),i=(a=n.slice()).length,o=0;o<i;o++)a[o].apply(this,r);return!0},i.prototype.on=i.prototype.addListener=function(e,t){var n;if(!c(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,c(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned&&(n=u(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.once=function(e,t){if(!c(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},i.prototype.removeListener=function(e,t){var n,i,r,o;if(!c(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(n=this._events[e]).length,i=-1,n===t||c(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(n)){for(o=r;0<o--;)if(n[o]===t||n[o].listener&&n[o].listener===t){i=o;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(c(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?c(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(c(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],340:[function(e,et,t){!function(o,s,e,m){"use strict";var a,c=["","webkit","Moz","MS","ms","o"],t=s.createElement("div"),n="function",l=Math.round,v=Math.abs,g=Date.now;function u(e,t,n){return setTimeout(y(e,n),t)}function i(e,t,n){return!!Array.isArray(e)&&(p(e,n[t],n),!0)}function p(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==m)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function r(i,e,t){var r="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=o.console&&(o.console.warn||o.console.log);return n&&n.call(o.console,r,t),i.apply(this,arguments)}}a="function"!=typeof Object.assign?function(e){if(e===m||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==m&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var d=r(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===m)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),h=r(function(e,t){return d(e,t,!0)},"merge","Use `assign`.");function f(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&a(i,n)}function y(e,t){return function(){return e.apply(t,arguments)}}function b(e,t){return typeof e==n?e.apply(t&&t[0]||m,t):e}function x(e,t){return e===m?t:e}function E(t,e,n){p(S(e),function(e){t.addEventListener(e,n,!1)})}function w(t,e,n){p(S(e),function(e){t.removeEventListener(e,n,!1)})}function $(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function _(e,t){return-1<e.indexOf(t)}function S(e){return e.trim().split(/\s+/g)}function C(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function A(e){return Array.prototype.slice.call(e,0)}function T(e,n,t){for(var i=[],r=[],o=0;o<e.length;){var a=n?e[o][n]:e[o];C(r,a)<0&&i.push(e[o]),r[o]=a,o++}return t&&(i=n?i.sort(function(e,t){return e[n]>t[n]}):i.sort()),i}function j(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<c.length;){if((i=(n=c[o])?n+r:t)in e)return i;o++}return m}var k=1;function M(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}var P="ontouchstart"in o,R=j(o,"PointerEvent")!==m,D=P&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),O="touch",N=25,B=1,L=2,I=4,F=8,U=1,H=2,V=4,z=8,q=16,W=H|V,G=z|q,Y=W|G,K=["x","y"],X=["clientX","clientY"];function Z(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&n.handler(e)},this.init()}function J(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&B&&i-r==0,a=t&(I|F)&&i-r==0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=Q(t));1<r&&!n.firstMultiple?n.firstMultiple=Q(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,c=t.center=ee(i);t.timeStamp=g(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=re(s,c),t.distance=ie(s,c),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==B&&o.eventType!==I||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y});t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=ne(t.deltaX,t.deltaY);var l=te(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=v(l.x)>v(l.y)?l.x:l.y,t.scale=a?(d=a.pointers,h=i,ie(h[0],h[1],X)/ie(d[0],d[1],X)):1,t.rotation=a?(u=a.pointers,p=i,re(p[1],p[0],X)+re(u[1],u[0],X)):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,r,o,a=e.lastInterval||t,s=t.timeStamp-a.timeStamp;if(t.eventType!=F&&(N<s||a.velocity===m)){var c=t.deltaX-a.deltaX,l=t.deltaY-a.deltaY,u=te(s,c,l);i=u.x,r=u.y,n=v(u.x)>v(u.y)?u.x:u.y,o=ne(c,l),e.lastInterval=t}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}(n,t);var u,p;var d,h;var f=e.element;$(t.srcEvent.target,f)&&(f=t.srcEvent.target);t.target=f}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function Q(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:l(e.pointers[n].clientX),clientY:l(e.pointers[n].clientY)},n++;return{timeStamp:g(),pointers:t,center:ee(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ee(e){var t=e.length;if(1===t)return{x:l(e[0].clientX),y:l(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:l(n/t),y:l(i/t)}}function te(e,t,n){return{x:t/e||0,y:n/e||0}}function ne(e,t){return e===t?U:v(e)>=v(t)?e<0?H:V:t<0?z:q}function ie(e,t,n){n||(n=K);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function re(e,t,n){n||(n=K);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}Z.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(M(this.element),this.evWin,this.domHandler)}};var oe={mousedown:B,mousemove:L,mouseup:I},ae="mousedown",se="mousemove mouseup";function ce(){this.evEl=ae,this.evWin=se,this.pressed=!1,Z.apply(this,arguments)}f(ce,Z,{handler:function(e){var t=oe[e.type];t&B&&0===e.button&&(this.pressed=!0),t&L&&1!==e.which&&(t=I),this.pressed&&(t&I&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var le={pointerdown:B,pointermove:L,pointerup:I,pointercancel:F,pointerout:F},ue={2:O,3:"pen",4:"mouse",5:"kinect"},pe="pointerdown",de="pointermove pointerup pointercancel";function he(){this.evEl=pe,this.evWin=de,Z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(pe="MSPointerDown",de="MSPointerMove MSPointerUp MSPointerCancel"),f(he,Z,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=le[i],o=ue[e.pointerType]||e.pointerType,a=o==O,s=C(t,e.pointerId,"pointerId");r&B&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):r&(I|F)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var fe={touchstart:B,touchmove:L,touchend:I,touchcancel:F},me="touchstart",ve="touchstart touchmove touchend touchcancel";function ge(){this.evTarget=me,this.evWin=ve,this.started=!1,Z.apply(this,arguments)}f(ge,Z,{handler:function(e){var t=fe[e.type];if(t===B&&(this.started=!0),this.started){var n=function(e,t){var n=A(e.touches),i=A(e.changedTouches);t&(I|F)&&(n=T(n.concat(i),"identifier",!0));return[n,i]}.call(this,e,t);t&(I|F)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:O,srcEvent:e})}}});var ye={touchstart:B,touchmove:L,touchend:I,touchcancel:F},be="touchstart touchmove touchend touchcancel";function xe(){this.evTarget=be,this.targetIds={},Z.apply(this,arguments)}f(xe,Z,{handler:function(e){var t=ye[e.type],n=function(e,t){var n=A(e.touches),i=this.targetIds;if(t&(B|L)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=A(e.changedTouches),s=[],c=this.target;if(o=n.filter(function(e){return $(e.target,c)}),t===B)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;r=0;for(;r<a.length;)i[a[r].identifier]&&s.push(a[r]),t&(I|F)&&delete i[a[r].identifier],r++;if(!s.length)return;return[T(o.concat(s),"identifier",!0),s]}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:O,srcEvent:e})}});var Ee=2500,we=25;function $e(){Z.apply(this,arguments);var e=y(this.handler,this);this.touch=new xe(this.manager,e),this.mouse=new ce(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function _e(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var e=i.indexOf(n);-1<e&&i.splice(e,1)},Ee)}}f($e,Z,{handler:function(e,t,n){var i=n.pointerType==O,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)(function(e,t){e&B?(this.primaryTouch=t.changedPointers[0].identifier,_e.call(this,t)):e&(I|F)&&_e.call(this,t)}).call(this,t,n);else if(r&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),a=Math.abs(n-r.y);if(o<=we&&a<=we)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Se=j(t.style,"touchAction"),Ce=Se!==m,Ae="auto",Te="manipulation",je="none",ke="pan-x",Me="pan-y",Pe=function(){if(!Ce)return!1;var t={},n=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!n||o.CSS.supports("touch-action",e)}),t}();function Re(e,t){this.manager=e,this.set(t)}Re.prototype={set:function(e){"compute"==e&&(e=this.compute()),Ce&&this.manager.element.style&&Pe[e]&&(this.manager.element.style[Se]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(_(e,je))return je;var t=_(e,ke),n=_(e,Me);if(t&&n)return je;if(t||n)return t?ke:Me;if(_(e,Te))return Te;return Ae}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,r=_(i,je)&&!Pe[je],o=_(i,Me)&&!Pe[Me],a=_(i,ke)&&!Pe[ke];if(r){var s=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(s&&c&&l)return}if(!a||!o)return r||o&&n&W||a&&n&G?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var De=1,Oe=2,Ne=4,Be=8,Le=Be,Ie=16;function Fe(e){this.options=a({},this.defaults,e||{}),this.id=k++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=De,this.simultaneous={},this.requireFail=[]}function Ue(e){return e&Ie?"cancel":e&Be?"end":e&Ne?"move":e&Oe?"start":""}function He(e){return e==q?"down":e==z?"up":e==H?"left":e==V?"right":""}function Ve(e,t){var n=t.manager;return n?n.get(e):e}function ze(){Fe.apply(this,arguments)}function qe(){ze.apply(this,arguments),this.pX=null,this.pY=null}function We(){ze.apply(this,arguments)}function Ge(){Fe.apply(this,arguments),this._timer=null,this._input=null}function Ye(){ze.apply(this,arguments)}function Ke(){ze.apply(this,arguments)}function Xe(){Fe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ze(e,t){return(t=t||{}).recognizers=x(t.recognizers,Ze.defaults.preset),new Je(e,t)}Fe.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(i(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ve(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return i(e,"dropRecognizeWith",this)||(e=Ve(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(i(e,"requireFailure",this))return this;var t=this.requireFail;return-1===C(t,e=Ve(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(i(e,"dropRequireFailure",this))return this;e=Ve(e,this);var t=C(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var n=this,e=this.state;function i(e){n.manager.emit(e,t)}e<Be&&i(n.options.event+Ue(e)),i(n.options.event),t.additionalEvent&&i(t.additionalEvent),Be<=e&&i(n.options.event+Ue(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|De)))return!1;e++}return!0},recognize:function(e){var t=a({},e);if(!b(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(Le|Ie|32)&&(this.state=De),this.state=this.process(t),this.state&(Oe|Ne|Be|Ie)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},f(ze,Fe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(Oe|Ne),r=this.attrTest(e);return i&&(n&F||!r)?t|Ie:i||r?n&I?t|Be:t&Oe?t|Ne:Oe:32}}),f(qe,ze,{defaults:{event:"pan",threshold:10,pointers:1,direction:Y},getTouchAction:function(){var e=this.options.direction,t=[];return e&W&&t.push(Me),e&G&&t.push(ke),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,a=e.deltaY;return r&t.direction||(t.direction&W?(r=0===o?U:o<0?H:V,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===a?U:a<0?z:q,n=a!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return ze.prototype.attrTest.call(this,e)&&(this.state&Oe||!(this.state&Oe)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=He(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),f(We,ze,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[je]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Oe)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),f(Ge,Fe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ae]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(I|F)&&!r)this.reset();else if(e.eventType&B)this.reset(),this._timer=u(function(){this.state=Le,this.tryEmit()},t.time,this);else if(e.eventType&I)return Le;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Le&&(e&&e.eventType&I?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=g(),this.manager.emit(this.options.event,this._input)))}}),f(Ye,ze,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[je]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Oe)}}),f(Ke,ze,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:W|G,pointers:1},getTouchAction:function(){return qe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(W|G)?t=e.overallVelocity:n&W?t=e.overallVelocityX:n&G&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&v(t)>this.options.velocity&&e.eventType&I},emit:function(e){var t=He(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),f(Xe,Fe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Te]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&B&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=I)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||ie(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=Le,this.tryEmit()},t.interval,this),Oe):Le}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Le&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ze.VERSION="2.0.7",Ze.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Ye,{enable:!1}],[We,{enable:!1},["rotate"]],[Ke,{direction:W}],[qe,{direction:W},["swipe"]],[Xe],[Xe,{event:"doubletap",taps:2},["tap"]],[Ge]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Je(e,t){var n;this.options=a({},Ze.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(R?he:D?xe:P?$e:ce))(n,J),this.touchAction=new Re(this,this.options.touchAction),Qe(this,!0),p(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Qe(n,i){var r,o=n.element;o.style&&(p(n.options.cssProps,function(e,t){r=j(o.style,t),i?(n.oldCssProps[r]=o.style[r],o.style[r]=e):o.style[r]=n.oldCssProps[r]||""}),i||(n.oldCssProps={}))}Je.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&Le)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(Oe|Ne|Be)&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Fe)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(i(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(i(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=C(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==m&&t!==m){var n=this.handlers;return p(S(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==m){var n=this.handlers;return p(S(e),function(e){t?n[e]&&n[e].splice(C(n[e],t),1):delete n[e]}),this}},emit:function(e,t){var n,i,r;this.options.domEvents&&(n=e,i=t,(r=s.createEvent("Event")).initEvent(n,!0,!0),(r.gesture=i).target.dispatchEvent(r));var o=this.handlers[e]&&this.handlers[e].slice();if(o&&o.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var a=0;a<o.length;)o[a](t),a++}},destroy:function(){this.element&&Qe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(Ze,{INPUT_START:B,INPUT_MOVE:L,INPUT_END:I,INPUT_CANCEL:F,STATE_POSSIBLE:De,STATE_BEGAN:Oe,STATE_CHANGED:Ne,STATE_ENDED:Be,STATE_RECOGNIZED:Le,STATE_CANCELLED:Ie,STATE_FAILED:32,DIRECTION_NONE:U,DIRECTION_LEFT:H,DIRECTION_RIGHT:V,DIRECTION_UP:z,DIRECTION_DOWN:q,DIRECTION_HORIZONTAL:W,DIRECTION_VERTICAL:G,DIRECTION_ALL:Y,Manager:Je,Input:Z,TouchAction:Re,TouchInput:xe,MouseInput:ce,PointerEventInput:he,TouchMouseInput:$e,SingleTouchInput:ge,Recognizer:Fe,AttrRecognizer:ze,Tap:Xe,Pan:qe,Swipe:Ke,Pinch:We,Rotate:Ye,Press:Ge,on:E,off:w,each:p,merge:h,extend:d,assign:a,inherit:f,bindFn:y,prefixed:j}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=Ze,"function"==typeof define&&define.amd?define(function(){return Ze}):void 0!==et&&et.exports?et.exports=Ze:o.Hammer=Ze}(window,document)},{}],341:[function(e,t,n){var c=t.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;var r=n-Math.floor(n),o="";for(i=0;i<Math.floor(n);i++){o=Math.floor(Math.random()*t).toString(t)+o}if(r){var a=Math.pow(t,r);o=Math.floor(Math.random()*a).toString(t)+o}var s=parseInt(o,t);return s!==1/0&&s>=Math.pow(2,e)?c(e,t):o};c.rack=function(i,r,o){var n=function(e){var t=0;do{if(10<t++){if(!o)throw new Error("too many ID collisions, use more bits");i+=o}var n=c(i,r)}while(Object.hasOwnProperty.call(a,n));return a[n]=e,n},a=n.hats={};return n.get=function(e){return n.hats[e]},n.set=function(e,t){return n.hats[e]=t,n},n.bits=i||128,n.base=r||16,n}},{}],342:[function(e,t,n){"use strict";var i=e("hat");function r(e){if(!(this instanceof r))return new r(e);e=e||[128,36,1],this._seed=e.length?i.rack(e[0],e[1],e[2]):e}(t.exports=r).prototype.next=function(e){return this._seed(e||!0)},r.prototype.nextPrefixed=function(e,t){for(var n;n=e+this.next(!0),this.assigned(n););return this.claim(n,t),n},r.prototype.claim=function(e,t){this._seed.set(e,t||!0)},r.prototype.assigned=function(e){return this._seed.get(e)||!1},r.prototype.unclaim=function(e){delete this._seed.hats[e]},r.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)}},{hat:341}],343:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],344:[function(e,t,n){var i,r;i="undefined"!=typeof window?window:this,r=function($,e){var t=[],_=$.document,u=t.slice,m=t.concat,s=t.push,r=t.indexOf,n={},i=n.toString,f=n.hasOwnProperty,v={},S=function(e,t){return new S.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,a=/^-ms-/,c=/-([\da-z])/gi,l=function(e,t){return t.toUpperCase()};function p(e){var t=!!e&&"length"in e&&e.length,n=S.type(e);return"function"!==n&&!S.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:"2.2.4",constructor:S,selector:"",length:0,toArray:function(){return u.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:u.call(this)},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||S.isFunction(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(i=e[t])&&(l&&i&&(S.isPlainObject(i)||(r=S.isArray(i)))?(r?(r=!1,o=n&&S.isArray(n)?n:[]):o=n&&S.isPlainObject(n)?n:{},a[t]=S.extend(l,o,i)):void 0!==i&&(a[t]=i));return a},S.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===S.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!S.isArray(e)&&0<=t-parseFloat(t)+1},isPlainObject:function(e){var t;if("object"!==S.type(e)||e.nodeType||S.isWindow(e))return!1;if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||f.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=S.trim(e))&&(1===e.indexOf("use strict")?((t=_.createElement("script")).text=e,_.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(a,"ms-").replace(c,l)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(p(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:r.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,a=[];if(p(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&a.push(r);return m.apply([],a)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),S.isFunction(e))return i=u.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(u.call(arguments)))}).guid=e.guid=e.guid||S.guid++,r},now:Date.now,support:v}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,f,x,o,r,m,p,v,E,c,l,w,$,a,_,g,s,u,y,S="sizzle"+1*new Date,b=n.document,C=0,i=0,d=oe(),h=oe(),A=oe(),T=function(e,t){return e===t&&(l=!0),0},j=1<<31,k={}.hasOwnProperty,t=[],M=t.pop,P=t.push,R=t.push,D=t.slice,O=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I="\\["+B+"*("+L+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+B+"*\\]",F=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",U=new RegExp(B+"+","g"),H=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),V=new RegExp("^"+B+"*,"+B+"*"),z=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),q=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),W=new RegExp(F),G=new RegExp("^"+L+"$"),Y={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=function(){w()};try{R.apply(t=D.call(b.childNodes),b.childNodes),t[b.childNodes.length].nodeType}catch(e){R={apply:t.length?function(e,t){P.apply(e,D.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function re(e,t,n,i){var r,o,a,s,c,l,u,p,d=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!i&&((t?t.ownerDocument||t:b)!==$&&w(t),t=t||$,_)){if(11!==h&&(l=J.exec(e)))if(r=l[1]){if(9===h){if(!(a=t.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(d&&(a=d.getElementById(r))&&y(t,a)&&a.id===r)return n.push(a),n}else{if(l[2])return R.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&f.getElementsByClassName&&t.getElementsByClassName)return R.apply(n,t.getElementsByClassName(r)),n}if(f.qsa&&!A[e+" "]&&(!g||!g.test(e))){if(1!==h)d=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ee,"\\$&"):t.setAttribute("id",s=S),o=(u=m(e)).length,c=G.test(s)?"#"+s:"[id='"+s+"']";o--;)u[o]=c+" "+me(u[o]);p=u.join(","),d=Q.test(e)&&he(t.parentNode)||t}if(p)try{return R.apply(n,d.querySelectorAll(p)),n}catch(e){}finally{s===S&&t.removeAttribute("id")}}}return v(e.replace(H,"$1"),t,n,i)}function oe(){var i=[];return function e(t,n){return i.push(t+" ")>x.cacheLength&&delete e[i.shift()],e[t+" "]=n}}function ae(e){return e[S]=!0,e}function se(e){var t=$.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=t}function le(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ue(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pe(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function de(a){return ae(function(o){return o=+o,ae(function(e,t){for(var n,i=a([],e.length,o),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function he(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=re.support={},r=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},w=re.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:b;return i!==$&&9===i.nodeType&&i.documentElement&&(a=($=i).documentElement,_=!r($),(n=$.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ie,!1):n.attachEvent&&n.attachEvent("onunload",ie)),f.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=se(function(e){return e.appendChild($.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=Z.test($.getElementsByClassName),f.getById=se(function(e){return a.appendChild(e).id=S,!$.getElementsByName||!$.getElementsByName(S).length}),f.getById?(x.find.ID=function(e,t){if(void 0!==t.getElementById&&_){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),x.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=f.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&_)return t.getElementsByClassName(e)},s=[],g=[],(f.qsa=Z.test($.querySelectorAll))&&(se(function(e){a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+B+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+S+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||g.push(".#.+[+~]")}),se(function(e){var t=$.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+B+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(f.matchesSelector=Z.test(u=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&se(function(e){f.disconnectedMatch=u.call(e,"div"),u.call(e,"[s!='']:x"),s.push("!=",F)}),g=g.length&&new RegExp(g.join("|")),s=s.length&&new RegExp(s.join("|")),t=Z.test(a.compareDocumentPosition),y=t||Z.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e===$||e.ownerDocument===b&&y(b,e)?-1:t===$||t.ownerDocument===b&&y(b,t)?1:c?O(c,e)-O(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===$?-1:t===$?1:r?-1:o?1:c?O(c,e)-O(c,t):0;if(r===o)return le(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?le(a[i],s[i]):a[i]===b?-1:s[i]===b?1:0}),$},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==$&&w(e),t=t.replace(q,"='$1']"),f.matchesSelector&&_&&!A[t+" "]&&(!s||!s.test(t))&&(!g||!g.test(t)))try{var n=u.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<re(t,$,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==$&&w(e),y(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==$&&w(e);var n=x.attrHandle[t.toLowerCase()],i=n&&k.call(x.attrHandle,t.toLowerCase())?n(e,t,!_):void 0;return void 0!==i?i:f.attributes||!_?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],i=0,r=0;if(l=!f.detectDuplicates,c=!f.sortStable&&e.slice(0),e.sort(T),l){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return c=null,e},o=re.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(x=re.selectors={cacheLength:50,createPseudo:ae,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=m(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=d[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&d(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(e){var t=re.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===r:"!="===i?t!==r:"^="===i?r&&0===t.indexOf(r):"*="===i?r&&-1<t.indexOf(r):"$="===i?r&&t.slice(-r.length)===r:"~="===i?-1<(" "+t.replace(U," ")+" ").indexOf(r):"|="===i&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(f,e,t,m,v){var g="nth"!==f.slice(0,3),y="last"!==f.slice(-4),b="of-type"===e;return 1===m&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var i,r,o,a,s,c,l=g!==y?"nextSibling":"previousSibling",u=e.parentNode,p=b&&e.nodeName.toLowerCase(),d=!n&&!b,h=!1;if(u){if(g){for(;l;){for(a=e;a=a[l];)if(b?a.nodeName.toLowerCase()===p:1===a.nodeType)return!1;c=l="only"===f&&!c&&"nextSibling"}return!0}if(c=[y?u.firstChild:u.lastChild],y&&d){for(h=(s=(i=(r=(o=(a=u)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===C&&i[1])&&i[2],a=s&&u.childNodes[s];a=++s&&a&&a[l]||(h=s=0)||c.pop();)if(1===a.nodeType&&++h&&a===e){r[f]=[C,s,h];break}}else if(d&&(h=s=(i=(r=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===C&&i[1]),!1===h)for(;(a=++s&&a&&a[l]||(h=s=0)||c.pop())&&((b?a.nodeName.toLowerCase()!==p:1!==a.nodeType)||!++h||(d&&((r=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]=[C,h]),a!==e)););return(h-=v)===m||h%m==0&&0<=h/m}}},PSEUDO:function(e,o){var t,a=x.pseudos[e]||x.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],x.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,t){for(var n,i=a(e,o),r=i.length;r--;)e[n=O(e,i[r])]=!(t[n]=i[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:ae(function(e){var i=[],r=[],s=p(e.replace(H,"$1"));return s[S]?ae(function(e,t,n,i){for(var r,o=s(e,null,i,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,t,n){return i[0]=e,s(i,null,n,r),i[0]=null,!r.pop()}}),has:ae(function(t){return function(e){return 0<re(t,e).length}}),contains:ae(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:ae(function(n){return G.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=_?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:de(function(){return[0]}),last:de(function(e,t){return[t-1]}),eq:de(function(e,t,n){return[n<0?n+t:n]}),even:de(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:de(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:de(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:de(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[e]=ue(e);for(e in{submit:!0,reset:!0})x.pseudos[e]=pe(e);function fe(){}function me(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ve(s,e,t){var c=e.dir,l=t&&"parentNode"===c,u=i++;return e.first?function(e,t,n){for(;e=e[c];)if(1===e.nodeType||l)return s(e,t,n)}:function(e,t,n){var i,r,o,a=[C,u];if(n){for(;e=e[c];)if((1===e.nodeType||l)&&s(e,t,n))return!0}else for(;e=e[c];)if(1===e.nodeType||l){if((i=(r=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}))[c])&&i[0]===C&&i[1]===u)return a[2]=i[2];if((r[c]=a)[2]=s(e,t,n))return!0}}}function ge(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function ye(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,l=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),l&&t.push(s)));return a}function be(h,f,m,v,g,e){return v&&!v[S]&&(v=be(v)),g&&!g[S]&&(g=be(g,e)),ae(function(e,t,n,i){var r,o,a,s=[],c=[],l=t.length,u=e||function(e,t,n){for(var i=0,r=t.length;i<r;i++)re(e,t[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),p=!h||!e&&f?u:ye(u,s,h,n,i),d=m?g||(e?h:l||v)?[]:t:p;if(m&&m(p,d,n,i),v)for(r=ye(d,c),v(r,[],n,i),o=r.length;o--;)(a=r[o])&&(d[c[o]]=!(p[c[o]]=a));if(e){if(g||h){if(g){for(r=[],o=d.length;o--;)(a=d[o])&&r.push(p[o]=a);g(null,d=[],r,i)}for(o=d.length;o--;)(a=d[o])&&-1<(r=g?O(e,a):s[o])&&(e[r]=!(t[r]=a))}}else d=ye(d===t?d.splice(l,d.length):d),g?g(null,t,d,i):R.apply(t,d)})}function xe(e){for(var r,t,n,i=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],s=o?1:0,c=ve(function(e){return e===r},a,!0),l=ve(function(e){return-1<O(r,e)},a,!0),u=[function(e,t,n){var i=!o&&(n||t!==E)||((r=t).nodeType?c(e,t,n):l(e,t,n));return r=null,i}];s<i;s++)if(t=x.relative[e[s].type])u=[ve(ge(u),t)];else{if((t=x.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<i&&!x.relative[e[n].type];n++);return be(1<s&&ge(u),1<s&&me(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(H,"$1"),t,s<n&&xe(e.slice(s,n)),n<i&&xe(e=e.slice(n)),n<i&&me(e))}u.push(t)}return ge(u)}return fe.prototype=x.filters=x.pseudos,x.setFilters=new fe,m=re.tokenize=function(e,t){var n,i,r,o,a,s,c,l=h[e+" "];if(l)return t?0:l.slice(0);for(a=e,s=[],c=x.preFilter;a;){for(o in n&&!(i=V.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(r=[])),n=!1,(i=z.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(H," ")}),a=a.slice(n.length)),x.filter)!(i=Y[o].exec(a))||c[o]&&!(i=c[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?re.error(e):h(e,s).slice(0)},p=re.compile=function(e,t){var n,v,g,y,b,i,r=[],o=[],a=A[e+" "];if(!a){for(t||(t=m(e)),n=t.length;n--;)(a=xe(t[n]))[S]?r.push(a):o.push(a);(a=A(e,(v=o,y=0<(g=r).length,b=0<v.length,i=function(e,t,n,i,r){var o,a,s,c=0,l="0",u=e&&[],p=[],d=E,h=e||b&&x.find.TAG("*",r),f=C+=null==d?1:Math.random()||.1,m=h.length;for(r&&(E=t===$||t||r);l!==m&&null!=(o=h[l]);l++){if(b&&o){for(a=0,t||o.ownerDocument===$||(w(o),n=!_);s=v[a++];)if(s(o,t||$,n)){i.push(o);break}r&&(C=f)}y&&((o=!s&&o)&&c--,e&&u.push(o))}if(c+=l,y&&l!==c){for(a=0;s=g[a++];)s(u,p,t,n);if(e){if(0<c)for(;l--;)u[l]||p[l]||(p[l]=M.call(i));p=ye(p)}R.apply(i,p),r&&!e&&0<p.length&&1<c+g.length&&re.uniqueSort(i)}return r&&(C=f,E=d),u},y?ae(i):i))).selector=e}return a},v=re.select=function(e,t,n,i){var r,o,a,s,c,l="function"==typeof e&&e,u=!i&&m(e=l.selector||e);if(n=n||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(a=o[0]).type&&f.getById&&9===t.nodeType&&_&&x.relative[o[1].type]){if(!(t=(x.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=Y.needsContext.test(e)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((c=x.find[s])&&(i=c(a.matches[0].replace(te,ne),Q.test(o[0].type)&&he(t.parentNode)||t))){if(o.splice(r,1),!(e=i.length&&me(o)))return R.apply(n,i),n;break}}return(l||p(e,u))(i,t,!_,n,!t||Q.test(e)&&he(t.parentNode)||t),n},f.sortStable=S.split("").sort(T).join("")===S,f.detectDuplicates=!!l,w(),f.sortDetached=se(function(e){return 1&e.compareDocumentPosition($.createElement("div"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||ce(N,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),re}($);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains;var h=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&S(e).is(n))break;i.push(e)}return i},g=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},y=S.expr.match.needsContext,b=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,x=/^.[^:#\[\.,]*$/;function E(e,n,i){if(S.isFunction(n))return S.grep(e,function(e,t){return!!n.call(e,t,e)!==i});if(n.nodeType)return S.grep(e,function(e){return e===n!==i});if("string"==typeof n){if(x.test(n))return S.filter(n,e,i);n=S.filter(n,e)}return S.grep(e,function(e){return-1<r.call(n,e)!==i})}S.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?S.find.matchesSelector(i,e)?[i]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<n;t++)if(S.contains(r[t],this))return!0}));for(t=0;t<n;t++)S.find(e,r[t],i);return(i=this.pushStack(1<n?S.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(E(this,e||[],!1))},not:function(e){return this.pushStack(E(this,e||[],!0))},is:function(e){return!!E(this,"string"==typeof e&&y.test(e)?S(e):e||[],!1).length}});var w,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(S.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||w,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:C.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:_,!0)),b.test(i[1])&&S.isPlainObject(t))for(i in t)S.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=_.getElementById(i[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=_,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):S.isFunction(e)?void 0!==n.ready?n.ready(e):e(S):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),S.makeArray(e,this))}).prototype=S.fn,w=S(_);var A=/^(?:parents|prev(?:Until|All))/,T={children:!0,contents:!0,next:!0,prev:!0};function j(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=y.test(e)||"string"!=typeof e?S(e,t||this.context):0;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?r.call(S(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return j(e,"nextSibling")},prev:function(e){return j(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return g((e.parentNode||{}).firstChild,e)},children:function(e){return g(e.firstChild)},contents:function(e){return e.contentDocument||S.merge([],e.childNodes)}},function(i,r){S.fn[i]=function(e,t){var n=S.map(this,r,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(T[i]||S.uniqueSort(n),A.test(i)&&n.reverse()),this.pushStack(n)}});var k,M=/\S+/g;function P(){_.removeEventListener("DOMContentLoaded",P),$.removeEventListener("load",P),S.ready()}S.Callbacks=function(i){var e,n;i="string"==typeof i?(e=i,n={},S.each(e.match(M)||[],function(e,t){n[t]=!0}),n):S.extend({},i);var r,t,o,a,s=[],c=[],l=-1,u=function(){for(a=i.once,o=r=!0;c.length;l=-1)for(t=c.shift();++l<s.length;)!1===s[l].apply(t[0],t[1])&&i.stopOnFalse&&(l=s.length,t=!1);i.memory||(t=!1),r=!1,a&&(s=t?[]:"")},p={add:function(){return s&&(t&&!r&&(l=s.length-1,c.push(t)),function n(e){S.each(e,function(e,t){S.isFunction(t)?i.unique&&p.has(t)||s.push(t):t&&t.length&&"string"!==S.type(t)&&n(t)})}(arguments),t&&!r&&u()),this},remove:function(){return S.each(arguments,function(e,t){for(var n;-1<(n=S.inArray(t,s,n));)s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=c=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=c=[],t||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),r||u()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!o}};return p},S.extend({Deferred:function(e){var o=[["resolve","done",S.Callbacks("once memory"),"resolved"],["reject","fail",S.Callbacks("once memory"),"rejected"],["notify","progress",S.Callbacks("memory")]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var r=arguments;return S.Deferred(function(i){S.each(o,function(e,t){var n=S.isFunction(r[e])&&r[e];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&S.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this===a?i.promise():this,n?[e]:arguments)})}),r=null}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return a.pipe=a.then,S.each(o,function(e,t){var n=t[2],i=t[3];a[t[1]]=n.add,i&&n.add(function(){r=i},o[1^e][2].disable,o[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?a:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var r,t,n,i=0,o=u.call(arguments),a=o.length,s=1!==a||e&&S.isFunction(e.promise)?a:0,c=1===s?e:S.Deferred(),l=function(t,n,i){return function(e){n[t]=this,i[t]=1<arguments.length?u.call(arguments):e,i===r?c.notifyWith(n,i):--s||c.resolveWith(n,i)}};if(1<a)for(r=new Array(a),t=new Array(a),n=new Array(a);i<a;i++)o[i]&&S.isFunction(o[i].promise)?o[i].promise().progress(l(i,t,r)).done(l(i,n,o)).fail(c.reject):--s;return s||c.resolveWith(n,o),c.promise()}}),S.fn.ready=function(e){return S.ready.promise().done(e),this},S.extend({isReady:!1,readyWait:1,holdReady:function(e){e?S.readyWait++:S.ready(!0)},ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||(k.resolveWith(_,[S]),S.fn.triggerHandler&&(S(_).triggerHandler("ready"),S(_).off("ready")))}}),S.ready.promise=function(e){return k||(k=S.Deferred(),"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?$.setTimeout(S.ready):(_.addEventListener("DOMContentLoaded",P),$.addEventListener("load",P))),k.promise(e)},S.ready.promise();var R=function(e,t,n,i,r,o,a){var s=0,c=e.length,l=null==n;if("object"===S.type(n))for(s in r=!0,n)R(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,S.isFunction(i)||(a=!0),l&&(a?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<c;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:l?t.call(e):c?t(e[0],n):o},D=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function O(){this.expando=S.expando+O.uid++}O.uid=1,O.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!D(e))return{};var t=e[this.expando];return t||(t={},D(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[t]=n;else for(i in t)r[i]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(i=this.get(e,t))?i:this.get(e,S.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{S.isArray(t)?i=t.concat(t.map(S.camelCase)):(r=S.camelCase(t),i=t in o?[t,r]:(i=r)in o?[i]:i.match(M)||[]),n=i.length;for(;n--;)delete o[i[n]]}(void 0===t||S.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var N=new O,B=new O,L=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,I=/[A-Z]/g;function F(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(I,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:L.test(n)?S.parseJSON(n):n)}catch(e){}B.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return B.hasData(e)||N.hasData(e)},data:function(e,t,n){return B.access(e,t,n)},removeData:function(e,t){B.remove(e,t)},_data:function(e,t,n){return N.access(e,t,n)},_removeData:function(e,t){N.remove(e,t)}}),S.fn.extend({data:function(i,e){var t,n,r,o=this[0],a=o&&o.attributes;if(void 0===i){if(this.length&&(r=B.get(o),1===o.nodeType&&!N.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&0===(n=a[t].name).indexOf("data-")&&(n=S.camelCase(n.slice(5)),F(o,n,r[n]));N.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof i?this.each(function(){B.set(this,i)}):R(this,function(t){var e,n;if(o&&void 0===t)return void 0!==(e=B.get(o,i)||B.get(o,i.replace(I,"-$&").toLowerCase()))?e:(n=S.camelCase(i),void 0!==(e=B.get(o,n))?e:void 0!==(e=F(o,n,void 0))?e:void 0);n=S.camelCase(i),this.each(function(){var e=B.get(this,n);B.set(this,n,t),-1<i.indexOf("-")&&void 0!==e&&B.set(this,i,t)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){B.remove(this,e)})}}),S.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=N.get(e,t),n&&(!i||S.isArray(n)?i=N.access(e,t,S.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),i=n.length,r=n.shift(),o=S._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){S.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return N.get(e,n)||N.access(e,n,{empty:S.Callbacks("once memory").add(function(){N.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=S.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=N.get(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var U=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,H=new RegExp("^(?:([+-])=|)("+U+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],z=function(e,t){return e=t||e,"none"===S.css(e,"display")||!S.contains(e.ownerDocument,e)};function q(e,t,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return S.css(e,t,"")},c=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),u=(S.cssNumber[t]||"px"!==l&&+c)&&H.exec(S.css(e,t));if(u&&u[3]!==l)for(l=l||u[3],n=n||[],u=+c||1;u/=o=o||".5",S.style(e,t,u+l),o!==(o=s()/c)&&1!==o&&--a;);return n&&(u=+u||+c||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=u,i.end=r)),r}var W=/^(?:checkbox|radio)$/i,G=/<([\w:-]+)/,Y=/^$|\/(?:java|ecma)script/i,K={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function X(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&S.nodeName(e,t)?S.merge([e],n):n}function Z(e,t){for(var n=0,i=e.length;n<i;n++)N.set(e[n],"globalEval",!t||N.get(t[n],"globalEval"))}K.optgroup=K.option,K.tbody=K.tfoot=K.colgroup=K.caption=K.thead,K.th=K.td;var J,Q,ee=/<|&#?\w+;/;function te(e,t,n,i,r){for(var o,a,s,c,l,u,p=t.createDocumentFragment(),d=[],h=0,f=e.length;h<f;h++)if((o=e[h])||0===o)if("object"===S.type(o))S.merge(d,o.nodeType?[o]:o);else if(ee.test(o)){for(a=a||p.appendChild(t.createElement("div")),s=(G.exec(o)||["",""])[1].toLowerCase(),c=K[s]||K._default,a.innerHTML=c[1]+S.htmlPrefilter(o)+c[2],u=c[0];u--;)a=a.lastChild;S.merge(d,a.childNodes),(a=p.firstChild).textContent=""}else d.push(t.createTextNode(o));for(p.textContent="",h=0;o=d[h++];)if(i&&-1<S.inArray(o,i))r&&r.push(o);else if(l=S.contains(o.ownerDocument,o),a=X(p.appendChild(o),"script"),l&&Z(a),n)for(u=0;o=a[u++];)Y.test(o.type||"")&&n.push(o);return p}J=_.createDocumentFragment().appendChild(_.createElement("div")),(Q=_.createElement("input")).setAttribute("type","radio"),Q.setAttribute("checked","checked"),Q.setAttribute("name","t"),J.appendChild(Q),v.checkClone=J.cloneNode(!0).cloneNode(!0).lastChild.checked,J.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!J.cloneNode(!0).lastChild.defaultValue;var ne=/^key/,ie=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,re=/^([^.]*)(?:\.(.+)|)/;function oe(){return!0}function ae(){return!1}function se(){try{return _.activeElement}catch(e){}}function ce(e,t,n,i,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)ce(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=ae;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,r,i,n)})}S.event={global:{},add:function(t,e,n,i,r){var o,a,s,c,l,u,p,d,h,f,m,v=N.get(t);if(v)for(n.handler&&(n=(o=n).handler,r=o.selector),n.guid||(n.guid=S.guid++),(c=v.events)||(c=v.events={}),(a=v.handle)||(a=v.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(M)||[""]).length;l--;)h=m=(s=re.exec(e[l])||[])[1],f=(s[2]||"").split(".").sort(),h&&(p=S.event.special[h]||{},h=(r?p.delegateType:p.bindType)||h,p=S.event.special[h]||{},u=S.extend({type:h,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&S.expr.match.needsContext.test(r),namespace:f.join(".")},o),(d=c[h])||((d=c[h]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(t,i,f,a)||t.addEventListener&&t.addEventListener(h,a)),p.add&&(p.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),S.event.global[h]=!0)},remove:function(e,t,n,i,r){var o,a,s,c,l,u,p,d,h,f,m,v=N.hasData(e)&&N.get(e);if(v&&(c=v.events)){for(l=(t=(t||"").match(M)||[""]).length;l--;)if(h=m=(s=re.exec(t[l])||[])[1],f=(s[2]||"").split(".").sort(),h){for(p=S.event.special[h]||{},d=c[h=(i?p.delegateType:p.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)u=d[o],!r&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,p.remove&&p.remove.call(e,u));a&&!d.length&&(p.teardown&&!1!==p.teardown.call(e,f,v.handle)||S.removeEvent(e,h,v.handle),delete c[h])}else for(h in c)S.event.remove(e,h+t[l],n,i,!0);S.isEmptyObject(c)&&N.remove(e,"handle events")}},dispatch:function(e){e=S.event.fix(e);var t,n,i,r,o,a,s=u.call(arguments),c=(N.get(this,"events")||{})[e.type]||[],l=S.event.special[e.type]||{};if((s[0]=e).delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(a=S.event.handlers.call(this,e,c),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(i=((S.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&(!0!==c.disabled||"click"!==e.type)){for(i=[],n=0;n<s;n++)void 0===i[r=(o=t[n]).selector+" "]&&(i[r]=o.needsContext?-1<S(r,this).index(c):S.find(r,this,null,[c]).length),i[r]&&i.push(o);i.length&&a.push({elem:c,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(i=(n=e.target.ownerDocument||_).documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[S.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=ie.test(r)?this.mouseHooks:ne.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new S.Event(o),t=i.length;t--;)e[n=i[t]]=o[n];return e.target||(e.target=_),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==se()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===se()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&S.nodeName(this,"input"))return this.click(),!1},_default:function(e){return S.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?oe:ae):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||S.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:ae,isPropagationStopped:ae,isImmediatePropagationStopped:ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){S.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=r),t}}}),S.fn.extend({on:function(e,t,n,i){return ce(this,e,t,n,i)},one:function(e,t,n,i){return ce(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,S(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ae),this.each(function(){S.event.remove(this,e,n,t)})}});var le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ue=/<script|<style|<link/i,pe=/checked\s*(?:[^=]|=\s*.checked.)/i,de=/^true\/(.*)/,he=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function fe(e,t){return S.nodeName(e,"table")&&S.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ve(e){var t=de.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ge(e,t){var n,i,r,o,a,s,c,l;if(1===t.nodeType){if(N.hasData(e)&&(o=N.access(e),a=N.set(t,o),l=o.events))for(r in delete a.handle,a.events={},l)for(n=0,i=l[r].length;n<i;n++)S.event.add(t,r,l[r][n]);B.hasData(e)&&(s=B.access(e),c=S.extend({},s),B.set(t,c))}}function ye(n,i,r,o){i=m.apply([],i);var e,t,a,s,c,l,u=0,p=n.length,d=p-1,h=i[0],f=S.isFunction(h);if(f||1<p&&"string"==typeof h&&!v.checkClone&&pe.test(h))return n.each(function(e){var t=n.eq(e);f&&(i[0]=h.call(this,e,t.html())),ye(t,i,r,o)});if(p&&(t=(e=te(i,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(X(e,"script"),me)).length;u<p;u++)c=e,u!==d&&(c=S.clone(c,!0,!0),s&&S.merge(a,X(c,"script"))),r.call(n[u],c,u);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,ve),u=0;u<s;u++)c=a[u],Y.test(c.type||"")&&!N.access(c,"globalEval")&&S.contains(l,c)&&(c.src?S._evalUrl&&S._evalUrl(c.src):S.globalEval(c.textContent.replace(he,"")))}return n}function be(e,t,n){for(var i,r=t?S.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||S.cleanData(X(i)),i.parentNode&&(n&&S.contains(i.ownerDocument,i)&&Z(X(i,"script")),i.parentNode.removeChild(i));return e}S.extend({htmlPrefilter:function(e){return e.replace(le,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s,c,l,u=e.cloneNode(!0),p=S.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=X(u),i=0,r=(o=X(e)).length;i<r;i++)s=o[i],c=a[i],void 0,"input"===(l=c.nodeName.toLowerCase())&&W.test(s.type)?c.checked=s.checked:"input"!==l&&"textarea"!==l||(c.defaultValue=s.defaultValue);if(t)if(n)for(o=o||X(e),a=a||X(u),i=0,r=o.length;i<r;i++)ge(o[i],a[i]);else ge(e,u);return 0<(a=X(u,"script")).length&&Z(a,!p&&X(e,"script")),u},cleanData:function(e){for(var t,n,i,r=S.event.special,o=0;void 0!==(n=e[o]);o++)if(D(n)){if(t=n[N.expando]){if(t.events)for(i in t.events)r[i]?S.event.remove(n,i):S.removeEvent(n,i,t.handle);n[N.expando]=void 0}n[B.expando]&&(n[B.expando]=void 0)}}}),S.fn.extend({domManip:ye,detach:function(e){return be(this,e,!0)},remove:function(e){return be(this,e)},text:function(e){return R(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return ye(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||fe(this,e).appendChild(e)})},prepend:function(){return ye(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=fe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return ye(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return ye(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(X(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return R(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ue.test(e)&&!K[(G.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(X(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return ye(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(X(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],i=S(e),r=i.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),S(i[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var xe,Ee={HTML:"block",BODY:"block"};function we(e,t){var n=S(t.createElement(e)).appendTo(t.body),i=S.css(n[0],"display");return n.detach(),i}function $e(e){var t=_,n=Ee[e];return n||("none"!==(n=we(e,t))&&n||((t=(xe=(xe||S("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=we(e,t),xe.detach()),Ee[e]=n),n}var _e=/^margin/,Se=new RegExp("^("+U+")(?!px)[a-z%]+$","i"),Ce=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=$),t.getComputedStyle(e)},Ae=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=n.apply(e,i||[]),t)e.style[o]=a[o];return r},Te=_.documentElement;function je(e,t,n){var i,r,o,a,s=e.style;return""!==(a=(n=n||Ce(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==a||S.contains(e.ownerDocument,e)||(a=S.style(e,t)),n&&!v.pixelMarginRight()&&Se.test(a)&&_e.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o),void 0!==a?a+"":a}function ke(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var t,n,i,r,o=_.createElement("div"),a=_.createElement("div");function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Te.appendChild(o);var e=$.getComputedStyle(a);t="1%"!==e.top,r="2px"===e.marginLeft,n="4px"===e.width,a.style.marginRight="50%",i="4px"===e.marginRight,Te.removeChild(o)}a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),S.extend(v,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return null==n&&e(),n},pixelMarginRight:function(){return null==n&&e(),i},reliableMarginLeft:function(){return null==n&&e(),r},reliableMarginRight:function(){var e,t=a.appendChild(_.createElement("div"));return t.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",a.style.width="1px",Te.appendChild(o),e=!parseFloat($.getComputedStyle(t).marginRight),Te.removeChild(o),a.removeChild(t),e}}))}();var Me=/^(none|table(?!-c[ea]).+)/,Pe={position:"absolute",visibility:"hidden",display:"block"},Re={letterSpacing:"0",fontWeight:"400"},De=["Webkit","O","Moz","ms"],Oe=_.createElement("div").style;function Ne(e){if(e in Oe)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=De.length;n--;)if((e=De[n]+t)in Oe)return e}function Be(e,t,n){var i=H.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Le(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=S.css(e,n+V[o],!0,r)),i?("content"===n&&(a-=S.css(e,"padding"+V[o],!0,r)),"margin"!==n&&(a-=S.css(e,"border"+V[o]+"Width",!0,r))):(a+=S.css(e,"padding"+V[o],!0,r),"padding"!==n&&(a+=S.css(e,"border"+V[o]+"Width",!0,r)));return a}function Ie(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Ce(e),a="border-box"===S.css(e,"boxSizing",!1,o);if(r<=0||null==r){if(((r=je(e,t,o))<0||null==r)&&(r=e.style[t]),Se.test(r))return r;i=a&&(v.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+Le(e,t,n||(a?"border":"content"),i,o)+"px"}function Fe(e,t){for(var n,i,r,o=[],a=0,s=e.length;a<s;a++)(i=e[a]).style&&(o[a]=N.get(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&z(i)&&(o[a]=N.access(i,"olddisplay",$e(i.nodeName)))):(r=z(i),"none"===n&&r||N.set(i,"olddisplay",r?n:S.css(i,"display"))));for(a=0;a<s;a++)(i=e[a]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function Ue(e,t,n,i,r){return new Ue.prototype.init(e,t,n,i,r)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=je(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=S.camelCase(t),c=e.style;if(t=S.cssProps[s]||(S.cssProps[s]=Ne(s)||s),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];"string"===(o=typeof n)&&(r=H.exec(n))&&r[1]&&(n=q(e,t,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(S.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(c[t]=n))}},css:function(e,t,n,i){var r,o,a,s=S.camelCase(t);return t=S.cssProps[s]||(S.cssProps[s]=Ne(s)||s),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=je(e,t,i)),"normal"===r&&t in Re&&(r=Re[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),S.each(["height","width"],function(e,a){S.cssHooks[a]={get:function(e,t,n){if(t)return Me.test(S.css(e,"display"))&&0===e.offsetWidth?Ae(e,Pe,function(){return Ie(e,a,n)}):Ie(e,a,n)},set:function(e,t,n){var i,r=n&&Ce(e),o=n&&Le(e,a,n,"border-box"===S.css(e,"boxSizing",!1,r),r);return o&&(i=H.exec(t))&&"px"!==(i[3]||"px")&&(e.style[a]=t,t=S.css(e,a)),Be(0,t,o)}}}),S.cssHooks.marginLeft=ke(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(je(e,"marginLeft"))||e.getBoundingClientRect().left-Ae(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.cssHooks.marginRight=ke(v.reliableMarginRight,function(e,t){if(t)return Ae(e,{display:"inline-block"},je,[e,"marginRight"])}),S.each({margin:"",padding:"",border:"Width"},function(r,o){S.cssHooks[r+o]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+V[t]+o]=i[t]||i[t-2]||i[0];return n}},_e.test(r)||(S.cssHooks[r+o].set=Be)}),S.fn.extend({css:function(e,t){return R(this,function(e,t,n){var i,r,o={},a=0;if(S.isArray(t)){for(i=Ce(e),r=t.length;a<r;a++)o[t[a]]=S.css(e,t[a],!1,i);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)},show:function(){return Fe(this,!0)},hide:function(){return Fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){z(this)?S(this).show():S(this).hide()})}}),((S.Tween=Ue).prototype={constructor:Ue,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ue.propHooks[this.prop];return e&&e.get?e.get(this):Ue.propHooks._default.get(this)},run:function(e){var t,n=Ue.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ue.propHooks._default.set(this),this}}).init.prototype=Ue.prototype,(Ue.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[S.cssProps[e.prop]]&&!S.cssHooks[e.prop]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ue.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ue.prototype.init,S.fx.step={};var He,Ve,ze,qe,We,Ge=/^(?:toggle|show|hide)$/,Ye=/queueHooks$/;function Ke(){return $.setTimeout(function(){He=void 0}),He=S.now()}function Xe(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=V[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function Ze(e,t,n){for(var i,r=(Je.tweeners[t]||[]).concat(Je.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function Je(o,e,t){var n,a,i=0,r=Je.prefilters.length,s=S.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var e=He||Ke(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),i=0,r=l.tweens.length;i<r;i++)l.tweens[i].run(n);return s.notifyWith(o,[l,n,t]),n<1&&r?t:(s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:He||Ke(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),u=l.props;for(!function(e,t){var n,i,r,o,a;for(n in e)if(r=t[i=S.camelCase(n)],o=e[n],S.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=S.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(u,l.opts.specialEasing);i<r;i++)if(n=Je.prefilters[i].call(l,o,u,l.opts))return S.isFunction(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=S.proxy(n.stop,n)),n;return S.map(u,Ze,l),S.isFunction(l.opts.start)&&l.opts.start.call(o,l),S.fx.timer(S.extend(c,{elem:o,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}S.Animation=S.extend(Je,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return q(n.elem,e,H.exec(t),n),n}]},tweener:function(e,t){S.isFunction(e)?(t=e,e=["*"]):e=e.match(M);for(var n,i=0,r=e.length;i<r;i++)n=e[i],Je.tweeners[n]=Je.tweeners[n]||[],Je.tweeners[n].unshift(t)},prefilters:[function(t,e,n){var i,r,o,a,s,c,l,u=this,p={},d=t.style,h=t.nodeType&&z(t),f=N.get(t,"fxshow");for(i in n.queue||(null==(s=S._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,S.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===("none"===(l=S.css(t,"display"))?N.get(t,"olddisplay")||$e(t.nodeName):l)&&"none"===S.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),e)if(r=e[i],Ge.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!f||void 0===f[i])continue;h=!0}p[i]=f&&f[i]||S.style(t,i)}else l=void 0;if(S.isEmptyObject(p))"inline"===("none"===l?$e(t.nodeName):l)&&(d.display=l);else for(i in f?"hidden"in f&&(h=f.hidden):f=N.access(t,"fxshow",{}),o&&(f.hidden=!h),h?S(t).show():u.done(function(){S(t).hide()}),u.done(function(){var e;for(e in N.remove(t,"fxshow"),p)S.style(t,e,p[e])}),p)a=Ze(h?f[i]:0,i,u),i in f||(f[i]=a.start,h&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}],prefilter:function(e,t){t?Je.prefilters.unshift(e):Je.prefilters.push(e)}}),S.speed=function(e,t,n){var i=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||S.isFunction(e)&&e,duration:e,easing:n&&t||t&&!S.isFunction(t)&&t};return i.duration=S.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in S.fx.speeds?S.fx.speeds[i.duration]:S.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){S.isFunction(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(e,t,n,i){return this.filter(z).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){var r=S.isEmptyObject(t),o=S.speed(e,n,i),a=function(){var e=Je(this,S.extend({},t),o);(r||N.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",n=S.timers,i=N.get(this);if(t)i[t]&&i[t].stop&&a(i[t]);else for(t in i)i[t]&&i[t].stop&&Ye.test(t)&&a(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=r&&n[t].queue!==r||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=N.get(this),n=t[a+"queue"],i=t[a+"queueHooks"],r=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,i){var r=S.fn[i];S.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Xe(i,!0),e,t,n)}}),S.each({slideDown:Xe("show"),slideUp:Xe("hide"),slideToggle:Xe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){S.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(He=S.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),He=void 0},S.fx.timer=function(e){S.timers.push(e),e()?S.fx.start():S.timers.pop()},S.fx.interval=13,S.fx.start=function(){Ve||(Ve=$.setInterval(S.fx.tick,S.fx.interval))},S.fx.stop=function(){$.clearInterval(Ve),Ve=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(i,e){return i=S.fx&&S.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=$.setTimeout(e,i);t.stop=function(){$.clearTimeout(n)}})},ze=_.createElement("input"),qe=_.createElement("select"),We=qe.appendChild(_.createElement("option")),ze.type="checkbox",v.checkOn=""!==ze.value,v.optSelected=We.selected,qe.disabled=!0,v.optDisabled=!We.disabled,(ze=_.createElement("input")).value="t",ze.type="radio",v.radioValue="t"===ze.value;var Qe,et=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return R(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(t=t.toLowerCase(),r=S.attrHooks[t]||(S.expr.match.bool.test(t)?Qe:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=S.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&S.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(M);if(o&&1===e.nodeType)for(;n=o[r++];)i=S.propFix[n]||n,S.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),Qe={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var o=et[t]||S.find.attr;et[t]=function(e,t,n){var i,r;return n||(r=et[t],et[t]=i,i=null!=o(e,t,n)?t.toLowerCase():null,et[t]=r),i}});var tt=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;S.fn.extend({prop:function(e,t){return R(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,r=S.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):tt.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this});var it=/[\t\r\n\f]/g;function rt(e){return e.getAttribute&&e.getAttribute("class")||""}S.fn.extend({addClass:function(t){var e,n,i,r,o,a,s,c=0;if(S.isFunction(t))return this.each(function(e){S(this).addClass(t.call(this,e,rt(this)))});if("string"==typeof t&&t)for(e=t.match(M)||[];n=this[c++];)if(r=rt(n),i=1===n.nodeType&&(" "+r+" ").replace(it," ")){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=S.trim(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,o,a,s,c=0;if(S.isFunction(t))return this.each(function(e){S(this).removeClass(t.call(this,e,rt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(M)||[];n=this[c++];)if(r=rt(n),i=1===n.nodeType&&(" "+r+" ").replace(it," ")){for(a=0;o=e[a++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(s=S.trim(i))&&n.setAttribute("class",s)}return this},toggleClass:function(r,t){var o=typeof r;return"boolean"==typeof t&&"string"===o?t?this.addClass(r):this.removeClass(r):S.isFunction(r)?this.each(function(e){S(this).toggleClass(r.call(this,e,rt(this),t),t)}):this.each(function(){var e,t,n,i;if("string"===o)for(t=0,n=S(this),i=r.match(M)||[];e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==r&&"boolean"!==o||((e=rt(this))&&N.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":N.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+rt(n)+" ").replace(it," ").indexOf(t))return!0;return!1}});var ot=/\r/g,at=/[\x20\t\r\n\f]+/g;S.fn.extend({val:function(n){var i,e,r,t=this[0];return arguments.length?(r=S.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":S.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(i=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):t?(i=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(ot,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:S.trim(S.text(e)).replace(at," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||r<0,a=o?null:[],s=o?r+1:i.length,c=r<0?s:o?r:0;c<s;c++)if(((n=i[c]).selected||c===r)&&(v.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!S.nodeName(n.parentNode,"optgroup"))){if(t=S(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=S.makeArray(t),a=r.length;a--;)((i=r[a]).selected=-1<S.inArray(S.valHooks.option.get(i),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(S.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},v.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var st=/^(?:focusinfocus|focusoutblur)$/;S.extend(S.event,{trigger:function(e,t,n,i){var r,o,a,s,c,l,u,p=[n||_],d=f.call(e,"type")?e.type:e,h=f.call(e,"namespace")?e.namespace.split("."):[];if(o=a=n=n||_,3!==n.nodeType&&8!==n.nodeType&&!st.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),c=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),u=S.event.special[d]||{},i||!u.trigger||!1!==u.trigger.apply(n,t))){if(!i&&!u.noBubble&&!S.isWindow(n)){for(s=u.delegateType||d,st.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||_)&&p.push(a.defaultView||a.parentWindow||$)}for(r=0;(o=p[r++])&&!e.isPropagationStopped();)e.type=1<r?s:u.bindType||d,(l=(N.get(o,"events")||{})[e.type]&&N.get(o,"handle"))&&l.apply(o,t),(l=c&&o[c])&&l.apply&&D(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,i||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(p.pop(),t)||!D(n)||c&&S.isFunction(n[d])&&!S.isWindow(n)&&((a=n[c])&&(n[c]=null),n[S.event.triggered=d](),S.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(e,t,n){var i=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(i,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),S.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),S.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.focusin="onfocusin"in $,v.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(e){S.event.simulate(i,e.target,S.event.fix(e))};S.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=N.access(e,i);t||e.addEventListener(n,r,!0),N.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=N.access(e,i)-1;t?N.access(e,i,t):(e.removeEventListener(n,r,!0),N.remove(e,i))}}});var ct=$.location,lt=S.now(),ut=/\?/;S.parseJSON=function(e){return JSON.parse(e+"")},S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new $.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var pt=/#.*$/,dt=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,ft=/^(?:GET|HEAD)$/,mt=/^\/\//,vt={},gt={},yt="*/".concat("*"),bt=_.createElement("a");function xt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,r=e.toLowerCase().match(M)||[];if(S.isFunction(t))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Et(t,r,o,a){var s={},c=t===gt;function l(e){var i;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(r,o,a);return"string"!=typeof n||c||s[n]?c?!(i=n):void 0:(r.dataTypes.unshift(n),l(n),!1)}),i}return l(r.dataTypes[0])||!s["*"]&&l("*")}function wt(e,t){var n,i,r=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&S.extend(!0,e,i),e}bt.href=ct.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":S.parseJSON,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?wt(wt(e,S.ajaxSettings),t):wt(S.ajaxSettings,e)},ajaxPrefilter:xt(vt),ajaxTransport:xt(gt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var u,p,d,n,h,i,f,r,m=S.ajaxSetup({},t),v=m.context||m,g=m.context&&(v.nodeType||v.jquery)?S(v):S.event,y=S.Deferred(),b=S.Callbacks("once memory"),x=m.statusCode||{},o={},a={},E=0,s="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===E){if(!n)for(n={};t=ht.exec(d);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===E?d:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return E||(e=a[n]=a[n]||e,o[e]=t),this},overrideMimeType:function(e){return E||(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(E<2)for(t in e)x[t]=[x[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||s;return u&&u.abort(t),c(0,t),this}};if(y.promise(w).complete=b.add,w.success=w.done,w.error=w.fail,m.url=((e||m.url||ct.href)+"").replace(pt,"").replace(mt,ct.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=S.trim(m.dataType||"*").toLowerCase().match(M)||[""],null==m.crossDomain){i=_.createElement("a");try{i.href=m.url,i.href=i.href,m.crossDomain=bt.protocol+"//"+bt.host!=i.protocol+"//"+i.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=S.param(m.data,m.traditional)),Et(vt,m,t,w),2===E)return w;for(r in(f=S.event&&m.global)&&0==S.active++&&S.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!ft.test(m.type),p=m.url,m.hasContent||(m.data&&(p=m.url+=(ut.test(p)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=dt.test(p)?p.replace(dt,"$1_="+lt++):p+(ut.test(p)?"&":"?")+"_="+lt++)),m.ifModified&&(S.lastModified[p]&&w.setRequestHeader("If-Modified-Since",S.lastModified[p]),S.etag[p]&&w.setRequestHeader("If-None-Match",S.etag[p])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+yt+"; q=0.01":""):m.accepts["*"]),m.headers)w.setRequestHeader(r,m.headers[r]);if(m.beforeSend&&(!1===m.beforeSend.call(v,w,m)||2===E))return w.abort();for(r in s="abort",{success:1,error:1,complete:1})w[r](m[r]);if(u=Et(gt,m,t,w)){if(w.readyState=1,f&&g.trigger("ajaxSend",[w,m]),2===E)return w;m.async&&0<m.timeout&&(h=$.setTimeout(function(){w.abort("timeout")},m.timeout));try{E=1,u.send(o,c)}catch(e){if(!(E<2))throw e;c(-1,e)}}else c(-1,"No Transport");function c(e,t,n,i){var r,o,a,s,c,l=t;2!==E&&(E=2,h&&$.clearTimeout(h),u=void 0,d=i||"",w.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var i,r,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){c.unshift(r);break}if(c[0]in n)o=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==c[0]&&c.unshift(o),n[o]}(m,w,n)),s=function(e,t,n,i){var r,o,a,s,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(a=l[c+" "+o]||l["* "+o]))for(r in l)if((s=r.split(" "))[1]===o&&(a=l[c+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[r]:!0!==l[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(m,s,w,r),r?(m.ifModified&&((c=w.getResponseHeader("Last-Modified"))&&(S.lastModified[p]=c),(c=w.getResponseHeader("etag"))&&(S.etag[p]=c)),204===e||"HEAD"===m.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,r=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),w.status=e,w.statusText=(t||l)+"",r?y.resolveWith(v,[o,l,w]):y.rejectWith(v,[w,l,a]),w.statusCode(x),x=void 0,f&&g.trigger(r?"ajaxSuccess":"ajaxError",[w,m,r?o:a]),b.fireWith(v,[w,l]),f&&(g.trigger("ajaxComplete",[w,m]),--S.active||S.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,r){S[r]=function(e,t,n,i){return S.isFunction(t)&&(i=i||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:r,dataType:i,data:t,success:n},S.isPlainObject(e)&&e))}}),S._evalUrl=function(e){return S.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},S.fn.extend({wrapAll:function(t){var e;return S.isFunction(t)?this.each(function(e){S(this).wrapAll(t.call(this,e))}):(this[0]&&(e=S(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(n){return S.isFunction(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=S.isFunction(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){S.nodeName(this,"body")||S(this).replaceWith(this.childNodes)}).end()}}),S.expr.filters.hidden=function(e){return!S.expr.filters.visible(e)},S.expr.filters.visible=function(e){return 0<e.offsetWidth||0<e.offsetHeight||0<e.getClientRects().length};var $t=/%20/g,_t=/\[\]$/,St=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Tt(n,e,i,r){var t;if(S.isArray(e))S.each(e,function(e,t){i||_t.test(n)?r(n,t):Tt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,r)});else if(i||"object"!==S.type(e))r(n,e);else for(t in e)Tt(n+"["+t+"]",e[t],i,r)}S.param=function(e,t){var n,i=[],r=function(e,t){t=S.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=S.ajaxSettings&&S.ajaxSettings.traditional),S.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){r(this.name,this.value)});else for(n in e)Tt(n,e[n],t,r);return i.join("&").replace($t,"+")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&At.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!W.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:S.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:n.replace(St,"\r\n")}}).get()}}),S.ajaxSettings.xhr=function(){try{return new $.XMLHttpRequest}catch(e){}};var jt={0:200,1223:204},kt=S.ajaxSettings.xhr();v.cors=!!kt&&"withCredentials"in kt,v.ajax=kt=!!kt,S.ajaxTransport(function(r){var o,a;if(v.cors||kt&&!r.crossDomain)return{send:function(e,t){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=i.onload=i.onerror=i.onabort=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(jt[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),a=i.onerror=o("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&$.setTimeout(function(){o&&a()})},o=o("abort");try{i.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(e,t){i=S("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(e){i.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),_.head.appendChild(i[0])},abort:function(){r&&r()}}});var Mt=[],Pt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mt.pop()||S.expando+"_"+lt++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var i,r,o,a=!1!==e.jsonp&&(Pt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=S.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Pt,"$1"+i):!1!==e.jsonp&&(e.url+=(ut.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||S.error(i+" was not called"),o[0]},e.dataTypes[0]="json",r=$[i],$[i]=function(){o=arguments},n.always(function(){void 0===r?S($).removeProp(i):$[i]=r,e[i]&&(e.jsonpCallback=t.jsonpCallback,Mt.push(i)),o&&S.isFunction(r)&&r(o[0]),o=r=void 0}),"script"}),S.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||_;var i=b.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=te([e],t,r),r&&r.length&&S(r).remove(),S.merge([],i.childNodes))};var Rt=S.fn.load;function Dt(e){return S.isWindow(e)?e:9===e.nodeType&&e.defaultView}S.fn.load=function(e,t,n){if("string"!=typeof e&&Rt)return Rt.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return-1<s&&(i=S.trim(e.slice(s)),e=e.slice(0,s)),S.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<a.length&&S.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?S("<div>").append(S.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.expr.filters.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var i,r,o,a,s,c,l=S.css(e,"position"),u=S(e),p={};"static"===l&&(e.style.position="relative"),s=u.offset(),o=S.css(e,"top"),c=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+c).indexOf("auto")?(a=(i=u.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(c)||0),S.isFunction(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+r),"using"in t?t.using.call(e,p):u.css(p)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(e=o.documentElement,S.contains(e,i)?(r=i.getBoundingClientRect(),n=Dt(o),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===S.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),S.nodeName(e[0],"html")||(i=e.offset()),i.top+=S.css(e[0],"borderTopWidth",!0),i.left+=S.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-S.css(n,"marginTop",!0),left:t.left-i.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||Te})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;S.fn[t]=function(e){return R(this,function(e,t,n){var i=Dt(e);if(void 0===n)return i?i[r]:e[t];i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=ke(v.pixelPosition,function(e,t){if(t)return t=je(e,n),Se.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(o,a){S.each({padding:"inner"+o,content:a,"":"outer"+o},function(i,e){S.fn[e]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),r=i||(!0===e||!0===t?"margin":"border");return R(this,function(e,t,n){var i;return S.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+o],i["scroll"+o],e.body["offset"+o],i["offset"+o],i["client"+o])):void 0===n?S.css(e,t,r):S.style(e,t,n,r)},a,n?e:void 0,n,null)}})}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),S.fn.andSelf=S.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Ot=$.jQuery,Nt=$.$;return S.noConflict=function(e){return $.$===S&&($.$=Nt),e&&$.jQuery===S&&($.jQuery=Ot),S},e||($.jQuery=$.$=S),S},"object"==typeof t&&"object"==typeof t.exports?t.exports=i.document?r(i,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(i)},{}],345:[function(e,t,n){var i=e("../internal/createFindIndex")();t.exports=i},{"../internal/createFindIndex":439}],346:[function(e,t,n){var r=e("../internal/baseFlatten"),o=e("../internal/isIterateeCall");t.exports=function(e,t,n){var i=e?e.length:0;return n&&o(e,t,n)&&(t=!1),i?r(e,t):[]}},{"../internal/baseFlatten":399,"../internal/isIterateeCall":459}],347:[function(e,t,n){var i=e("../internal/baseFlatten");t.exports=function(e){return e&&e.length?i(e,!0):[]}},{"../internal/baseFlatten":399}],348:[function(e,t,n){var d=e("../internal/baseIndexOf"),h=e("../internal/cacheIndexOf"),f=e("../internal/createCache"),m=e("../internal/isArrayLike"),i=e("../function/restParam")(function(e){for(var t=e.length,n=t,i=Array(l),r=d,o=[];n--;){var a=e[n]=m(a=e[n])?a:[];i[n]=120<=a.length?f(n&&a):null}var s=e[0],c=-1,l=s?s.length:0,u=i[0];e:for(;++c<l;)if(a=s[c],(u?h(u,a):r(o,a,0))<0){for(n=t;--n;){var p=i[n];if((p?h(p,a):r(e[n],a,0))<0)continue e}u&&u.push(a),o.push(a)}return o});t.exports=i},{"../function/restParam":373,"../internal/baseIndexOf":404,"../internal/cacheIndexOf":426,"../internal/createCache":436,"../internal/isArrayLike":457}],349:[function(e,t,n){t.exports=function(e){var t=e?e.length:0;return t?e[t-1]:void 0}},{}],350:[function(e,t,n){var i=e("../internal/baseFlatten"),r=e("../internal/baseUniq"),o=e("../function/restParam")(function(e){return r(i(e,!1,!0))});t.exports=o},{"../function/restParam":373,"../internal/baseFlatten":399,"../internal/baseUniq":422}],351:[function(e,t,n){var r=e("../internal/baseCallback"),o=e("../internal/baseUniq"),a=e("../internal/isIterateeCall"),s=e("../internal/sortedUniq");t.exports=function(e,t,n,i){return e&&e.length?(null!=t&&"boolean"!=typeof t&&(n=a(e,t,i=n)?void 0:t,t=!1),n=null==n?n:r(n,i,3),t?s(e,n):o(e,n)):[]}},{"../internal/baseCallback":387,"../internal/baseUniq":422,"../internal/isIterateeCall":459,"../internal/sortedUniq":474}],352:[function(e,t,n){t.exports=e("./uniq")},{"./uniq":351}],353:[function(e,t,n){var i=e("../internal/baseDifference"),r=e("../internal/isArrayLike"),o=e("../function/restParam")(function(e,t){return r(e)?i(e,t):[]});t.exports=o},{"../function/restParam":373,"../internal/baseDifference":393,"../internal/isArrayLike":457}],354:[function(e,t,n){var r=e("../internal/arrayPush"),o=e("../internal/baseDifference"),a=e("../internal/baseUniq"),s=e("../internal/isArrayLike");t.exports=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(s(n))var i=i?r(o(i,n),o(n,i)):n}return i?a(i):[]}},{"../internal/arrayPush":382,"../internal/baseDifference":393,"../internal/baseUniq":422,"../internal/isArrayLike":457}],355:[function(e,t,n){var i=e("../internal/LazyWrapper"),r=e("../internal/LodashWrapper"),o=e("../internal/baseLodash"),a=e("../lang/isArray"),s=e("../internal/isObjectLike"),c=e("../internal/wrapperClone"),l=Object.prototype.hasOwnProperty;function u(e){if(s(e)&&!a(e)&&!(e instanceof i)){if(e instanceof r)return e;if(l.call(e,"__chain__")&&l.call(e,"__wrapped__"))return c(e)}return new r(e)}u.prototype=o.prototype,t.exports=u},{"../internal/LazyWrapper":374,"../internal/LodashWrapper":375,"../internal/baseLodash":408,"../internal/isObjectLike":463,"../internal/wrapperClone":477,"../lang/isArray":480}],356:[function(e,t,n){t.exports=e("./some")},{"./some":367}],357:[function(e,t,n){var r=e("../internal/arrayEvery"),o=e("../internal/baseCallback"),a=e("../internal/baseEvery"),s=e("../lang/isArray"),c=e("../internal/isIterateeCall");t.exports=function(e,t,n){var i=s(e)?r:a;return n&&c(e,t,n)&&(t=void 0),"function"==typeof t&&void 0===n||(t=o(t,n,3)),i(e,t)}},{"../internal/arrayEvery":379,"../internal/baseCallback":387,"../internal/baseEvery":395,"../internal/isIterateeCall":459,"../lang/isArray":480}],358:[function(e,t,n){var i=e("../internal/arrayFilter"),r=e("../internal/baseCallback"),o=e("../internal/baseFilter"),a=e("../lang/isArray");t.exports=function(e,t,n){return(a(e)?i:o)(e,t=r(t,n,3))}},{"../internal/arrayFilter":380,"../internal/baseCallback":387,"../internal/baseFilter":396,"../lang/isArray":480}],359:[function(e,t,n){var i=e("../internal/baseEach"),r=e("../internal/createFind")(i);t.exports=r},{"../internal/baseEach":394,"../internal/createFind":438}],360:[function(e,t,n){var i=e("../internal/arrayEach"),r=e("../internal/baseEach"),o=e("../internal/createForEach")(i,r);t.exports=o},{"../internal/arrayEach":378,"../internal/baseEach":394,"../internal/createForEach":440}],361:[function(e,t,n){var i=e("../internal/createAggregator"),r=Object.prototype.hasOwnProperty,o=i(function(e,t,n){r.call(e,n)?e[n].push(t):e[n]=[t]});t.exports=o},{"../internal/createAggregator":431}],362:[function(e,t,n){var i=e("../internal/createAggregator")(function(e,t,n){e[n]=t});t.exports=i},{"../internal/createAggregator":431}],363:[function(e,t,n){var i=e("../internal/arrayMap"),r=e("../internal/baseCallback"),o=e("../internal/baseMap"),a=e("../lang/isArray");t.exports=function(e,t,n){return(a(e)?i:o)(e,t=r(t,n,3))}},{"../internal/arrayMap":381,"../internal/baseCallback":387,"../internal/baseMap":409,"../lang/isArray":480}],364:[function(e,t,n){var i=e("../internal/arrayReduce"),r=e("../internal/baseEach"),o=e("../internal/createReduce")(i,r);t.exports=o},{"../internal/arrayReduce":383,"../internal/baseEach":394,"../internal/createReduce":443}],365:[function(e,t,n){var r=e("../internal/arrayFilter"),o=e("../internal/baseCallback"),a=e("../internal/baseFilter"),s=e("../lang/isArray");t.exports=function(e,i,t){var n=s(e)?r:a;return i=o(i,t,3),n(e,function(e,t,n){return!i(e,t,n)})}},{"../internal/arrayFilter":380,"../internal/baseCallback":387,"../internal/baseFilter":396,"../lang/isArray":480}],366:[function(e,t,n){var i=e("../internal/getLength"),r=e("../internal/isLength"),o=e("../object/keys");t.exports=function(e){var t=e?i(e):0;return r(t)?t:o(e).length}},{"../internal/getLength":450,"../internal/isLength":462,"../object/keys":493}],367:[function(e,t,n){var r=e("../internal/arraySome"),o=e("../internal/baseCallback"),a=e("../internal/baseSome"),s=e("../lang/isArray"),c=e("../internal/isIterateeCall");t.exports=function(e,t,n){var i=s(e)?r:a;return n&&c(e,t,n)&&(t=void 0),"function"==typeof t&&void 0===n||(t=o(t,n,3)),i(e,t)}},{"../internal/arraySome":384,"../internal/baseCallback":387,"../internal/baseSome":419,"../internal/isIterateeCall":459,"../lang/isArray":480}],368:[function(e,t,n){var o=e("../internal/baseCallback"),a=e("../internal/baseMap"),s=e("../internal/baseSortBy"),c=e("../internal/compareAscending"),l=e("../internal/isIterateeCall");t.exports=function(e,i,t){if(null==e)return[];t&&l(e,i,t)&&(i=void 0);var r=-1;i=o(i,t,3);var n=a(e,function(e,t,n){return{criteria:i(e,t,n),index:++r,value:e}});return s(n,c)}},{"../internal/baseCallback":387,"../internal/baseMap":409,"../internal/baseSortBy":420,"../internal/compareAscending":428,"../internal/isIterateeCall":459}],369:[function(e,t,n){var i=e("../internal/getNative")(Date,"now")||function(){return(new Date).getTime()};t.exports=i},{"../internal/getNative":452}],370:[function(e,t,n){var o=e("../internal/createWrapper"),a=e("../internal/replaceHolders"),i=e("./restParam"),s=i(function(e,t,n){var i=1;if(n.length){var r=a(n,s.placeholder);i|=32}return o(e,i,t,n,r)});s.placeholder={},t.exports=s},{"../internal/createWrapper":444,"../internal/replaceHolders":471,"./restParam":373}],371:[function(e,t,n){var y=e("../lang/isObject"),b=e("../date/now"),x="Expected a function",E=Math.max;t.exports=function(i,r,e){var o,a,s,c,l,u,p,d=0,h=!1,f=!0;if("function"!=typeof i)throw new TypeError(x);if(r=r<0?0:+r||0,!0===e){var m=!0;f=!1}else y(e)&&(m=!!e.leading,h="maxWait"in e&&E(+e.maxWait||0,r),f="trailing"in e?!!e.trailing:f);function t(e,t){t&&clearTimeout(t),a=u=p=void 0,e&&(d=b(),s=i.apply(l,o),u||a||(o=l=void 0))}function v(){var e=r-(b()-c);e<=0||r<e?t(p,a):u=setTimeout(v,e)}function g(){t(f,u)}function n(){if(o=arguments,c=b(),l=this,p=f&&(u||!m),!1===h)var e=m&&!u;else{a||m||(d=c);var t=h-(c-d),n=t<=0||h<t;n?(a&&(a=clearTimeout(a)),d=c,s=i.apply(l,o)):a||(a=setTimeout(g,t))}return n&&u?u=clearTimeout(u):u||r===h||(u=setTimeout(v,r)),e&&(n=!0,s=i.apply(l,o)),!n||u||a||(o=l=void 0),s}return n.cancel=function(){u&&clearTimeout(u),a&&clearTimeout(a),a=u=p=void(d=0)},n}},{"../date/now":369,"../lang/isObject":485}],372:[function(e,t,n){var i=e("../internal/baseDelay"),r=e("./restParam")(function(e,t){return i(e,1,t)});t.exports=r},{"../internal/baseDelay":392,"./restParam":373}],373:[function(e,t,n){var i="Expected a function",s=Math.max;t.exports=function(o,a){if("function"!=typeof o)throw new TypeError(i);return a=s(void 0===a?o.length-1:+a||0,0),function(){for(var e=arguments,t=-1,n=s(e.length-a,0),i=Array(n);++t<n;)i[t]=e[a+t];switch(a){case 0:return o.call(this,i);case 1:return o.call(this,e[0],i);case 2:return o.call(this,e[0],e[1],i)}var r=Array(a+1);for(t=-1;++t<a;)r[t]=e[t];return r[a]=i,o.apply(this,r)}}},{}],374:[function(e,t,n){var i=e("./baseCreate"),r=e("./baseLodash"),o=Number.POSITIVE_INFINITY;function a(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}(a.prototype=i(r.prototype)).constructor=a,t.exports=a},{"./baseCreate":391,"./baseLodash":408}],375:[function(e,t,n){var i=e("./baseCreate"),r=e("./baseLodash");function o(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}(o.prototype=i(r.prototype)).constructor=o,t.exports=o},{"./baseCreate":391,"./baseLodash":408}],376:[function(a,s,e){(function(e){var t=a("./cachePush"),n=a("./getNative"),i=n(e,"Set"),r=n(Object,"create");function o(e){var t=e?e.length:0;for(this.data={hash:r(null),set:new i};t--;)this.push(e[t])}o.prototype.push=t,s.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cachePush":427,"./getNative":452}],377:[function(e,t,n){t.exports=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}},{}],378:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););return e}},{}],379:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}},{}],380:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[++r]=a)}return o}},{}],381:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}},{}],382:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}},{}],383:[function(e,t,n){t.exports=function(e,t,n,i){var r=-1,o=e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}},{}],384:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}},{}],385:[function(e,t,n){var l=e("../object/keys");t.exports=function(e,t,n){for(var i=-1,r=l(t),o=r.length;++i<o;){var a=r[i],s=e[a],c=n(s,t[a],a,e,t);(c==c?c===s:s!=s)&&(void 0!==s||a in e)||(e[a]=c)}return e}},{"../object/keys":493}],386:[function(e,t,n){var i=e("./baseCopy"),r=e("../object/keys");t.exports=function(e,t){return null==t?e:i(t,r(t),e)}},{"../object/keys":493,"./baseCopy":390}],387:[function(e,t,n){var r=e("./baseMatches"),o=e("./baseMatchesProperty"),a=e("./bindCallback"),s=e("../utility/identity"),c=e("../utility/property");t.exports=function(e,t,n){var i=typeof e;return"function"==i?void 0===t?e:a(e,t,n):null==e?s:"object"==i?r(e):void 0===t?c(e):o(e,t)}},{"../utility/identity":501,"../utility/property":503,"./baseMatches":410,"./baseMatchesProperty":411,"./bindCallback":424}],388:[function(e,t,n){var h=e("./arrayCopy"),f=e("./arrayEach"),m=e("./baseAssign"),v=e("./baseForOwn"),g=e("./initCloneArray"),y=e("./initCloneByTag"),b=e("./initCloneObject"),x=e("../lang/isArray"),E=e("../lang/isObject"),w="[object Arguments]",$="[object Function]",_="[object Object]",S={};S[w]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Number]"]=S[_]=S["[object RegExp]"]=S["[object String]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S[$]=S["[object Map]"]=S["[object Set]"]=S["[object WeakMap]"]=!1;var C=Object.prototype.toString;t.exports=function n(i,r,o,e,t,a,s){var c;if(o&&(c=t?o(i,e,t):o(i)),void 0!==c)return c;if(!E(i))return i;var l=x(i);if(l){if(c=g(i),!r)return h(i,c)}else{var u=C.call(i),p=u==$;if(u!=_&&u!=w&&(!p||t))return S[u]?y(i,u,r):t?i:{};if(c=b(p?{}:i),!r)return m(c,i)}a||(a=[]),s||(s=[]);for(var d=a.length;d--;)if(a[d]==i)return s[d];return a.push(i),s.push(c),(l?f:v)(i,function(e,t){c[t]=n(e,r,o,t,i,a,s)}),c}},{"../lang/isArray":480,"../lang/isObject":485,"./arrayCopy":377,"./arrayEach":378,"./baseAssign":386,"./baseForOwn":402,"./initCloneArray":454,"./initCloneByTag":455,"./initCloneObject":456}],389:[function(e,t,n){t.exports=function(e,t){if(e!==t){var n=null===e,i=void 0===e,r=e==e,o=null===t,a=void 0===t,s=t==t;if(t<e&&!o||!r||n&&!a&&s||i&&s)return 1;if(e<t&&!n||!s||o&&!i&&r||a&&r)return-1}return 0}},{}],390:[function(e,t,n){t.exports=function(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}},{}],391:[function(e,t,n){var i=e("../lang/isObject"),r=function(){function n(){}return function(e){if(i(e)){n.prototype=e;var t=new n;n.prototype=void 0}return t||{}}}();t.exports=r},{"../lang/isObject":485}],392:[function(e,t,n){var i="Expected a function";t.exports=function(e,t,n){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(void 0,n)},t)}},{}],393:[function(e,t,n){var p=e("./baseIndexOf"),d=e("./cacheIndexOf"),h=e("./createCache"),f=200;t.exports=function(e,t){var n=e?e.length:0,i=[];if(!n)return i;var r=-1,o=p,a=!0,s=a&&t.length>=f?h(t):null,c=t.length;s&&(o=d,a=!1,t=s);e:for(;++r<n;){var l=e[r];if(a&&l==l){for(var u=c;u--;)if(t[u]===l)continue e;i.push(l)}else o(t,l,0)<0&&i.push(l)}return i}},{"./baseIndexOf":404,"./cacheIndexOf":426,"./createCache":436}],394:[function(e,t,n){var i=e("./baseForOwn"),r=e("./createBaseEach")(i);t.exports=r},{"./baseForOwn":402,"./createBaseEach":433}],395:[function(e,t,n){var o=e("./baseEach");t.exports=function(e,i){var r=!0;return o(e,function(e,t,n){return r=!!i(e,t,n)}),r}},{"./baseEach":394}],396:[function(e,t,n){var o=e("./baseEach");t.exports=function(e,i){var r=[];return o(e,function(e,t,n){i(e,t,n)&&r.push(e)}),r}},{"./baseEach":394}],397:[function(e,t,n){t.exports=function(e,i,t,r){var o;return t(e,function(e,t,n){if(i(e,t,n))return o=r?t:e,!1}),o}},{}],398:[function(e,t,n){t.exports=function(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}},{}],399:[function(e,t,n){var c=e("./arrayPush"),l=e("../lang/isArguments"),u=e("../lang/isArray"),p=e("./isArrayLike"),d=e("./isObjectLike");t.exports=function e(t,n,i,r){r||(r=[]);for(var o=-1,a=t.length;++o<a;){var s=t[o];d(s)&&p(s)&&(i||u(s)||l(s))?n?e(s,n,i,r):c(r,s):i||(r[r.length]=s)}return r}},{"../lang/isArguments":479,"../lang/isArray":480,"./arrayPush":382,"./isArrayLike":457,"./isObjectLike":463}],400:[function(e,t,n){var i=e("./createBaseFor")();t.exports=i},{"./createBaseFor":434}],401:[function(e,t,n){var i=e("./baseFor"),r=e("../object/keysIn");t.exports=function(e,t){return i(e,t,r)}},{"../object/keysIn":494,"./baseFor":400}],402:[function(e,t,n){var i=e("./baseFor"),r=e("../object/keys");t.exports=function(e,t){return i(e,t,r)}},{"../object/keys":493,"./baseFor":400}],403:[function(e,t,n){var o=e("./toObject");t.exports=function(e,t,n){if(null!=e){void 0!==n&&n in o(e)&&(t=[n]);for(var i=0,r=t.length;null!=e&&i<r;)e=e[t[i++]];return i&&i==r?e:void 0}}},{"./toObject":475}],404:[function(e,t,n){var o=e("./indexOfNaN");t.exports=function(e,t,n){if(t!=t)return o(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}},{"./indexOfNaN":453}],405:[function(e,t,n){var s=e("./baseIsEqualDeep"),c=e("../lang/isObject"),l=e("./isObjectLike");t.exports=function e(t,n,i,r,o,a){return t===n||(null==t||null==n||!c(t)&&!l(n)?t!=t&&n!=n:s(t,n,e,i,r,o,a))}},{"../lang/isObject":485,"./baseIsEqualDeep":406,"./isObjectLike":463}],406:[function(e,t,n){var y=e("./equalArrays"),b=e("./equalByTag"),x=e("./equalObjects"),E=e("../lang/isArray"),w=e("../lang/isTypedArray"),$="[object Arguments]",_="[object Array]",S="[object Object]",i=Object.prototype,C=i.hasOwnProperty,A=i.toString;t.exports=function(e,t,n,i,r,o,a){var s=E(e),c=E(t),l=_,u=_;s||((l=A.call(e))==$?l=S:l!=S&&(s=w(e))),c||((u=A.call(t))==$?u=S:u!=S&&(c=w(t)));var p=l==S,d=u==S,h=l==u;if(h&&!s&&!p)return b(e,t,l);if(!r){var f=p&&C.call(e,"__wrapped__"),m=d&&C.call(t,"__wrapped__");if(f||m)return n(f?e.value():e,m?t.value():t,i,r,o,a)}if(!h)return!1;o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==e)return a[v]==t;o.push(e),a.push(t);var g=(s?y:x)(e,t,n,i,r,o,a);return o.pop(),a.pop(),g}},{"../lang/isArray":480,"../lang/isTypedArray":488,"./equalArrays":445,"./equalByTag":446,"./equalObjects":447}],407:[function(e,t,n){var p=e("./baseIsEqual"),d=e("./toObject");t.exports=function(e,t,n){var i=t.length,r=i,o=!n;if(null==e)return!r;for(e=d(e);i--;){var a=t[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<r;){var s=(a=t[i])[0],c=e[s],l=a[1];if(o&&a[2]){if(void 0===c&&!(s in e))return!1}else{var u=n?n(c,l,s):void 0;if(!(void 0===u?p(l,c,n,!0):u))return!1}}return!0}},{"./baseIsEqual":405,"./toObject":475}],408:[function(e,t,n){t.exports=function(){}},{}],409:[function(e,t,n){var a=e("./baseEach"),s=e("./isArrayLike");t.exports=function(e,i){var r=-1,o=s(e)?Array(e.length):[];return a(e,function(e,t,n){o[++r]=i(e,t,n)}),o}},{"./baseEach":394,"./isArrayLike":457}],410:[function(e,t,n){var r=e("./baseIsMatch"),o=e("./getMatchData"),a=e("./toObject");t.exports=function(e){var t=o(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null!=e&&e[n]===i&&(void 0!==i||n in a(e))}}return function(e){return r(e,t)}}},{"./baseIsMatch":407,"./getMatchData":451,"./toObject":475}],411:[function(e,t,n){var s=e("./baseGet"),c=e("./baseIsEqual"),l=e("./baseSlice"),u=e("../lang/isArray"),p=e("./isKey"),d=e("./isStrictComparable"),h=e("../array/last"),f=e("./toObject"),m=e("./toPath");t.exports=function(n,i){var r=u(n),o=p(n)&&d(i),a=n+"";return n=m(n),function(e){if(null==e)return!1;var t=a;if(e=f(e),(r||!o)&&!(t in e)){if(null==(e=1==n.length?e:s(e,l(n,0,-1))))return!1;t=h(n),e=f(e)}return e[t]===i?void 0!==i||t in e:c(i,e[t],void 0,!0)}}},{"../array/last":349,"../lang/isArray":480,"./baseGet":403,"./baseIsEqual":405,"./baseSlice":418,"./isKey":460,"./isStrictComparable":464,"./toObject":475,"./toPath":476}],412:[function(e,t,n){var i=e("./arrayEach"),h=e("./baseMergeDeep"),r=e("../lang/isArray"),f=e("./isArrayLike"),m=e("../lang/isObject"),v=e("./isObjectLike"),g=e("../lang/isTypedArray"),y=e("../object/keys");t.exports=function o(a,s,c,l,u){if(!m(a))return a;var p=f(s)&&(r(s)||g(s)),d=p?void 0:y(s);return i(d||s,function(e,t){if(d&&(e=s[t=e]),v(e))l||(l=[]),u||(u=[]),h(a,s,t,o,c,l,u);else{var n=a[t],i=c?c(n,e,t,a,s):void 0,r=void 0===i;r&&(i=e),void 0===i&&(!p||t in a)||!r&&(i==i?i===n:n!=n)||(a[t]=i)}}),a}},{"../lang/isArray":480,"../lang/isObject":485,"../lang/isTypedArray":488,"../object/keys":493,"./arrayEach":378,"./baseMergeDeep":413,"./isArrayLike":457,"./isObjectLike":463}],413:[function(e,t,n){var d=e("./arrayCopy"),h=e("../lang/isArguments"),f=e("../lang/isArray"),m=e("./isArrayLike"),v=e("../lang/isPlainObject"),g=e("../lang/isTypedArray"),y=e("../lang/toPlainObject");t.exports=function(e,t,n,i,r,o,a){for(var s=o.length,c=t[n];s--;)if(o[s]==c)return void(e[n]=a[s]);var l=e[n],u=r?r(l,c,n,e,t):void 0,p=void 0===u;p&&(m(u=c)&&(f(c)||g(c))?u=f(l)?l:m(l)?d(l):[]:v(c)||h(c)?u=h(l)?y(l):v(l)?l:{}:p=!1),o.push(c),a.push(u),p?e[n]=i(u,c,r,o,a):(u==u?u!==l:l==l)&&(e[n]=u)}},{"../lang/isArguments":479,"../lang/isArray":480,"../lang/isPlainObject":486,"../lang/isTypedArray":488,"../lang/toPlainObject":489,"./arrayCopy":377,"./isArrayLike":457}],414:[function(e,t,n){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},{}],415:[function(e,t,n){var i=e("./baseGet"),r=e("./toPath");t.exports=function(t){var n=t+"";return t=r(t),function(e){return i(e,t,n)}}},{"./baseGet":403,"./toPath":476}],416:[function(e,t,n){t.exports=function(e,i,r,o,t){return t(e,function(e,t,n){r=o?(o=!1,e):i(r,e,t,n)}),r}},{}],417:[function(e,t,n){var i=e("../utility/identity"),r=e("./metaMap"),o=r?function(e,t){return r.set(e,t),e}:i;t.exports=o},{"../utility/identity":501,"./metaMap":466}],418:[function(e,t,n){t.exports=function(e,t,n){var i=-1,r=e.length;(t=null==t?0:+t||0)<0&&(t=r<-t?0:r+t),(n=void 0===n||r<n?r:+n||0)<0&&(n+=r),r=n<t?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}},{}],419:[function(e,t,n){var o=e("./baseEach");t.exports=function(e,i){var r;return o(e,function(e,t,n){return!(r=i(e,t,n))}),!!r}},{"./baseEach":394}],420:[function(e,t,n){t.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},{}],421:[function(e,t,n){t.exports=function(e){return null==e?"":e+""}},{}],422:[function(e,t,n){var d=e("./baseIndexOf"),h=e("./cacheIndexOf"),f=e("./createCache"),m=200;t.exports=function(e,t){var n=-1,i=d,r=e.length,o=!0,a=o&&m<=r,s=a?f():null,c=[];s?(i=h,o=!1):(a=!1,s=t?[]:c);e:for(;++n<r;){var l=e[n],u=t?t(l,n,e):l;if(o&&l==l){for(var p=s.length;p--;)if(s[p]===u)continue e;t&&s.push(u),c.push(l)}else i(s,u,0)<0&&((t||a)&&s.push(u),c.push(l))}return c}},{"./baseIndexOf":404,"./cacheIndexOf":426,"./createCache":436}],423:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e[t[n]];return r}},{}],424:[function(e,t,n){var i=e("../utility/identity");t.exports=function(o,a,e){if("function"!=typeof o)return i;if(void 0===a)return o;switch(e){case 1:return function(e){return o.call(a,e)};case 3:return function(e,t,n){return o.call(a,e,t,n)};case 4:return function(e,t,n,i){return o.call(a,e,t,n,i)};case 5:return function(e,t,n,i,r){return o.call(a,e,t,n,i,r)}}return function(){return o.apply(a,arguments)}}},{"../utility/identity":501}],425:[function(e,t,n){(function(e){var n=e.ArrayBuffer,i=e.Uint8Array;t.exports=function(e){var t=new n(e.byteLength);return new i(t).set(new i(e)),t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],426:[function(e,t,n){var i=e("../lang/isObject");t.exports=function(e,t){var n=e.data;return("string"==typeof t||i(t)?n.set.has(t):n.hash[t])?0:-1}},{"../lang/isObject":485}],427:[function(e,t,n){var i=e("../lang/isObject");t.exports=function(e){var t=this.data;"string"==typeof e||i(e)?t.set.add(e):t.hash[e]=!0}},{"../lang/isObject":485}],428:[function(e,t,n){var i=e("./baseCompareAscending");t.exports=function(e,t){return i(e.criteria,t.criteria)||e.index-t.index}},{"./baseCompareAscending":389}],429:[function(e,t,n){var l=Math.max;t.exports=function(e,t,n){for(var i=n.length,r=-1,o=l(e.length-i,0),a=-1,s=t.length,c=Array(s+o);++a<s;)c[a]=t[a];for(;++r<i;)c[n[r]]=e[r];for(;o--;)c[a++]=e[r++];return c}},{}],430:[function(e,t,n){var p=Math.max;t.exports=function(e,t,n){for(var i=-1,r=n.length,o=-1,a=p(e.length-r,0),s=-1,c=t.length,l=Array(a+c);++o<a;)l[o]=e[o];for(var u=o;++s<c;)l[u+s]=t[s];for(;++i<r;)l[u+n[i]]=e[o++];return l}},{}],431:[function(e,t,n){var l=e("./baseCallback"),u=e("./baseEach"),p=e("../lang/isArray");t.exports=function(s,c){return function(e,i,t){var r=c?c():{};if(i=l(i,t,3),p(e))for(var n=-1,o=e.length;++n<o;){var a=e[n];s(r,a,i(a,n,e),e)}else u(e,function(e,t,n){s(r,e,i(e,t,n),n)});return r}}},{"../lang/isArray":480,"./baseCallback":387,"./baseEach":394}],432:[function(e,t,n){var l=e("./bindCallback"),u=e("./isIterateeCall"),i=e("../function/restParam");t.exports=function(c){return i(function(e,t){var n=-1,i=null==e?0:t.length,r=2<i?t[i-2]:void 0,o=2<i?t[2]:void 0,a=1<i?t[i-1]:void 0;for("function"==typeof r?(r=l(r,a,5),i-=2):i-=(r="function"==typeof a?a:void 0)?1:0,o&&u(t[0],t[1],o)&&(r=i<3?void 0:r,i=1);++n<i;){var s=t[n];s&&c(e,s,r)}return e})}},{"../function/restParam":373,"./bindCallback":424,"./isIterateeCall":459}],433:[function(e,t,n){var s=e("./getLength"),c=e("./isLength"),l=e("./toObject");t.exports=function(o,a){return function(e,t){var n=e?s(e):0;if(!c(n))return o(e,t);for(var i=a?n:-1,r=l(e);(a?i--:++i<n)&&!1!==t(r[i],i,r););return e}}},{"./getLength":450,"./isLength":462,"./toObject":475}],434:[function(e,t,n){var l=e("./toObject");t.exports=function(c){return function(e,t,n){for(var i=l(e),r=n(e),o=r.length,a=c?o:-1;c?a--:++a<o;){var s=r[a];if(!1===t(i[s],s,i))break}return e}}},{"./toObject":475}],435:[function(t,n,e){(function(r){var e=t("./createCtorWrapper");n.exports=function(t,n){var i=e(t);return function e(){return(this&&this!==r&&this instanceof e?i:t).apply(n,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./createCtorWrapper":437}],436:[function(o,a,e){(function(e){var t=o("./SetCache"),n=o("./getNative"),i=n(e,"Set"),r=n(Object,"create");a.exports=function(e){return r&&i?new t(e):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./SetCache":376,"./getNative":452}],437:[function(e,t,n){var r=e("./baseCreate"),o=e("../lang/isObject");t.exports=function(i){return function(){var e=arguments;switch(e.length){case 0:return new i;case 1:return new i(e[0]);case 2:return new i(e[0],e[1]);case 3:return new i(e[0],e[1],e[2]);case 4:return new i(e[0],e[1],e[2],e[3]);case 5:return new i(e[0],e[1],e[2],e[3],e[4]);case 6:return new i(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new i(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=r(i.prototype),n=i.apply(t,e);return o(n)?n:t}}},{"../lang/isObject":485,"./baseCreate":391}],438:[function(e,t,n){var a=e("./baseCallback"),s=e("./baseFind"),c=e("./baseFindIndex"),l=e("../lang/isArray");t.exports=function(r,o){return function(e,t,n){if(t=a(t,n,3),l(e)){var i=c(e,t,o);return-1<i?e[i]:void 0}return s(e,t,r)}}},{"../lang/isArray":480,"./baseCallback":387,"./baseFind":397,"./baseFindIndex":398}],439:[function(e,t,n){var r=e("./baseCallback"),o=e("./baseFindIndex");t.exports=function(i){return function(e,t,n){return e&&e.length?(t=r(t,n,3),o(e,t,i)):-1}}},{"./baseCallback":387,"./baseFindIndex":398}],440:[function(e,t,n){var o=e("./bindCallback"),a=e("../lang/isArray");t.exports=function(i,r){return function(e,t,n){return"function"==typeof t&&void 0===n&&a(e)?i(e,t):r(e,o(t,n,3))}}},{"../lang/isArray":480,"./bindCallback":424}],441:[function(r,o,e){(function(k){var M=r("./arrayCopy"),P=r("./composeArgs"),R=r("./composeArgsRight"),D=r("./createCtorWrapper"),O=r("./isLaziable"),N=r("./reorder"),B=r("./replaceHolders"),L=r("./setData"),I=1,F=2,e=4,t=8,n=16,U=32,H=64,i=128,V=Math.max;o.exports=function d(h,f,m,v,g,y,b,x,E,w){var $=f&i,_=f&I,S=f&F,C=f&t,A=f&e,T=f&n,j=S?void 0:D(h);return function e(){for(var t=arguments.length,n=t,i=Array(t);n--;)i[n]=arguments[n];if(v&&(i=P(i,v,g)),y&&(i=R(i,y,b)),C||T){var r=e.placeholder,o=B(i,r);if((t-=o.length)<w){var a=x?M(x):void 0,s=V(w-t,0);f|=C?U:H,f&=~(C?H:U),A||(f&=~(I|F));var c=[h,f,m,C?i:void 0,C?o:void 0,C?void 0:i,C?void 0:o,a,E,s],l=d.apply(void 0,c);return O(h)&&L(l,c),l.placeholder=r,l}}var u=_?m:this,p=S?u[h]:h;return x&&(i=N(i,x)),$&&E<i.length&&(i.length=E),this&&this!==k&&this instanceof e&&(p=j||D(h)),p.apply(u,i)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./arrayCopy":377,"./composeArgs":429,"./composeArgsRight":430,"./createCtorWrapper":437,"./isLaziable":461,"./reorder":470,"./replaceHolders":471,"./setData":472}],442:[function(e,i,t){(function(p){var t=e("./createCtorWrapper"),n=1;i.exports=function(a,e,s,c){var l=e&n,u=t(a);return function e(){for(var t=-1,n=arguments.length,i=-1,r=c.length,o=Array(r+n);++i<r;)o[i]=c[i];for(;n--;)o[i++]=arguments[++t];return(this&&this!==p&&this instanceof e?u:a).apply(l?s:this,o)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./createCtorWrapper":437}],443:[function(e,t,n){var s=e("./baseCallback"),c=e("./baseReduce"),l=e("../lang/isArray");t.exports=function(o,a){return function(e,t,n,i){var r=arguments.length<3;return"function"==typeof t&&void 0===i&&l(e)?o(e,t,n,r):c(e,s(t,i,4),n,r,a)}}},{"../lang/isArray":480,"./baseCallback":387,"./baseReduce":416}],444:[function(e,t,n){var m=e("./baseSetData"),v=e("./createBindWrapper"),g=e("./createHybridWrapper"),y=e("./createPartialWrapper"),b=e("./getData"),x=e("./mergeData"),E=e("./setData"),w=1,$=2,_=32,S=64,C="Expected a function",A=Math.max;t.exports=function(e,t,n,i,r,o,a,s){var c=t&$;if(!c&&"function"!=typeof e)throw new TypeError(C);var l=i?i.length:0;if(l||(t&=~(_|S),i=r=void 0),l-=r?r.length:0,t&S){var u=i,p=r;i=r=void 0}var d=c?void 0:b(e),h=[e,t,n,i,r,u,p,o,a,s];if(d&&(x(h,d),t=h[1],s=h[9]),h[9]=null==s?c?0:e.length:A(s-l,0)||0,t==w)var f=v(h[0],h[2]);else f=t!=_&&t!=(w|_)||h[4].length?g.apply(void 0,h):y.apply(void 0,h);return(d?m:E)(f,h)}},{"./baseSetData":417,"./createBindWrapper":435,"./createHybridWrapper":441,"./createPartialWrapper":442,"./getData":448,"./mergeData":465,"./setData":472}],445:[function(e,t,n){var h=e("./arraySome");t.exports=function(e,t,n,i,r,o,a){var s=-1,c=e.length,l=t.length;if(c!=l&&!(r&&c<l))return!1;for(;++s<c;){var u=e[s],p=t[s],d=i?i(r?p:u,r?u:p,s):void 0;if(void 0!==d){if(d)continue;return!1}if(r){if(!h(t,function(e){return u===e||n(u,e,i,r,o,a)}))return!1}else if(u!==p&&!n(u,p,i,r,o,a))return!1}return!0}},{"./arraySome":384}],446:[function(e,t,n){var i="[object Boolean]",r="[object Date]",o="[object Error]",a="[object Number]",s="[object RegExp]",c="[object String]";t.exports=function(e,t,n){switch(n){case i:case r:return+e==+t;case o:return e.name==t.name&&e.message==t.message;case a:return e!=+e?t!=+t:e==+t;case s:case c:return e==t+""}return!1}},{}],447:[function(e,t,n){var g=e("../object/keys"),y=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,i,r,o,a){var s=g(e),c=s.length;if(c!=g(t).length&&!r)return!1;for(var l=c;l--;){var u=s[l];if(!(r?u in t:y.call(t,u)))return!1}for(var p=r;++l<c;){var d=e[u=s[l]],h=t[u],f=i?i(r?h:d,r?d:h,u):void 0;if(!(void 0===f?n(d,h,i,r,o,a):f))return!1;p||(p="constructor"==u)}if(!p){var m=e.constructor,v=t.constructor;if(m!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v))return!1}return!0}},{"../object/keys":493}],448:[function(e,t,n){var i=e("./metaMap"),r=e("../utility/noop"),o=i?function(e){return i.get(e)}:r;t.exports=o},{"../utility/noop":502,"./metaMap":466}],449:[function(e,t,n){var a=e("./realNames");t.exports=function(e){for(var t=e.name+"",n=a[t],i=n?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}},{"./realNames":469}],450:[function(e,t,n){var i=e("./baseProperty")("length");t.exports=i},{"./baseProperty":414}],451:[function(e,t,n){var i=e("./isStrictComparable"),r=e("../object/pairs");t.exports=function(e){for(var t=r(e),n=t.length;n--;)t[n][2]=i(t[n][1]);return t}},{"../object/pairs":497,"./isStrictComparable":464}],452:[function(e,t,n){var i=e("../lang/isNative");t.exports=function(e,t){var n=null==e?void 0:e[t];return i(n)?n:void 0}},{"../lang/isNative":483}],453:[function(e,t,n){t.exports=function(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var o=e[r];if(o!=o)return r}return-1}},{}],454:[function(e,t,n){var i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},{}],455:[function(e,t,n){var a=e("./bufferClone"),s="[object Boolean]",c="[object Date]",l="[object Number]",u="[object RegExp]",p="[object String]",d="[object ArrayBuffer]",h="[object Float32Array]",f="[object Float64Array]",m="[object Int8Array]",v="[object Int16Array]",g="[object Int32Array]",y="[object Uint8Array]",b="[object Uint8ClampedArray]",x="[object Uint16Array]",E="[object Uint32Array]",w=/\w*$/;t.exports=function(e,t,n){var i=e.constructor;switch(t){case d:return a(e);case s:case c:return new i(+e);case h:case f:case m:case v:case g:case y:case b:case x:case E:var r=e.buffer;return new i(n?a(r):r,e.byteOffset,e.length);case l:case p:return new i(e);case u:var o=new i(e.source,w.exec(e));o.lastIndex=e.lastIndex}return o}},{"./bufferClone":425}],456:[function(e,t,n){t.exports=function(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}},{}],457:[function(e,t,n){var i=e("./getLength"),r=e("./isLength");t.exports=function(e){return null!=e&&r(i(e))}},{"./getLength":450,"./isLength":462}],458:[function(e,t,n){var i=/^\d+$/,r=9007199254740991;t.exports=function(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?r:t,-1<e&&e%1==0&&e<t}},{}],459:[function(e,t,n){var o=e("./isArrayLike"),a=e("./isIndex"),s=e("../lang/isObject");t.exports=function(e,t,n){if(!s(n))return!1;var i=typeof t;if("number"==i?o(n)&&a(t,n.length):"string"==i&&t in n){var r=n[t];return e==e?e===r:r!=r}return!1}},{"../lang/isObject":485,"./isArrayLike":457,"./isIndex":458}],460:[function(e,t,n){var i=e("../lang/isArray"),r=e("./toObject"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(e,t){var n=typeof e;return!!("string"==n&&a.test(e)||"number"==n)||!i(e)&&(!o.test(e)||null!=t&&e in r(t))}},{"../lang/isArray":480,"./toObject":475}],461:[function(e,t,n){var r=e("./LazyWrapper"),o=e("./getData"),a=e("./getFuncName"),s=e("../chain/lodash");t.exports=function(e){var t=a(e),n=s[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var i=o(n);return!!i&&e===i[0]}},{"../chain/lodash":355,"./LazyWrapper":374,"./getData":448,"./getFuncName":449}],462:[function(e,t,n){var i=9007199254740991;t.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=i}},{}],463:[function(e,t,n){t.exports=function(e){return!!e&&"object"==typeof e}},{}],464:[function(e,t,n){var i=e("../lang/isObject");t.exports=function(e){return e==e&&!i(e)}},{"../lang/isObject":485}],465:[function(e,t,n){var l=e("./arrayCopy"),u=e("./composeArgs"),p=e("./composeArgsRight"),d=e("./replaceHolders"),h=1,f=4,m=8,v=128,g=256,y="__lodash_placeholder__",b=Math.min;t.exports=function(e,t){var n=e[1],i=t[1],r=n|i,o=r<v,a=i==v&&n==m||i==v&&n==g&&e[7].length<=t[8]||i==(v|g)&&n==m;if(!o&&!a)return e;i&h&&(e[2]=t[2],r|=n&h?0:f);var s=t[3];if(s){var c=e[3];e[3]=c?u(c,s,t[4]):l(s),e[4]=c?d(e[3],y):l(t[4])}return(s=t[5])&&(c=e[5],e[5]=c?p(c,s,t[6]):l(s),e[6]=c?d(e[5],y):l(t[6])),(s=t[7])&&(e[7]=l(s)),i&v&&(e[8]=null==e[8]?t[8]:b(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}},{"./arrayCopy":377,"./composeArgs":429,"./composeArgsRight":430,"./replaceHolders":471}],466:[function(i,r,e){(function(e){var t=i("./getNative")(e,"WeakMap"),n=t&&new t;r.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getNative":452}],467:[function(e,t,n){var a=e("./toObject");t.exports=function(e,t){e=a(e);for(var n=-1,i=t.length,r={};++n<i;){var o=t[n];o in e&&(r[o]=e[o])}return r}},{"./toObject":475}],468:[function(e,t,n){var o=e("./baseForIn");t.exports=function(e,i){var r={};return o(e,function(e,t,n){i(e,t,n)&&(r[t]=e)}),r}},{"./baseForIn":401}],469:[function(e,t,n){t.exports={}},{}],470:[function(e,t,n){var a=e("./arrayCopy"),s=e("./isIndex"),c=Math.min;t.exports=function(e,t){for(var n=e.length,i=c(t.length,n),r=a(e);i--;){var o=t[i];e[i]=s(o,n)?r[o]:void 0}return e}},{"./arrayCopy":377,"./isIndex":458}],471:[function(e,t,n){var a="__lodash_placeholder__";t.exports=function(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;)e[n]===t&&(e[n]=a,o[++r]=n);return o}},{}],472:[function(e,t,n){var r,o,a=e("./baseSetData"),s=e("../date/now"),i=(o=r=0,function(e,t){var n=s(),i=16-(n-o);if(o=n,0<i){if(150<=++r)return e}else r=0;return a(e,t)});t.exports=i},{"../date/now":369,"./baseSetData":417}],473:[function(e,t,n){var c=e("../lang/isArguments"),l=e("../lang/isArray"),u=e("./isIndex"),p=e("./isLength"),d=e("../object/keysIn"),h=Object.prototype.hasOwnProperty;t.exports=function(e){for(var t=d(e),n=t.length,i=n&&e.length,r=!!i&&p(i)&&(l(e)||c(e)),o=-1,a=[];++o<n;){var s=t[o];(r&&u(s,i)||h.call(e,s))&&a.push(s)}return a}},{"../lang/isArguments":479,"../lang/isArray":480,"../object/keysIn":494,"./isIndex":458,"./isLength":462}],474:[function(e,t,n){t.exports=function(e,t){for(var n,i=-1,r=e.length,o=-1,a=[];++i<r;){var s=e[i],c=t?t(s,i,e):s;i&&n===c||(n=c,a[++o]=s)}return a}},{}],475:[function(e,t,n){var i=e("../lang/isObject");t.exports=function(e){return i(e)?e:Object(e)}},{"../lang/isObject":485}],476:[function(e,t,n){var i=e("./baseToString"),o=e("../lang/isArray"),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;t.exports=function(e){if(o(e))return e;var r=[];return i(e).replace(a,function(e,t,n,i){r.push(n?i.replace(s,"$1"):t||e)}),r}},{"../lang/isArray":480,"./baseToString":421}],477:[function(e,t,n){var i=e("./LazyWrapper"),r=e("./LodashWrapper"),o=e("./arrayCopy");t.exports=function(e){return e instanceof i?e.clone():new r(e.__wrapped__,e.__chain__,o(e.__actions__))}},{"./LazyWrapper":374,"./LodashWrapper":375,"./arrayCopy":377}],478:[function(e,t,n){var r=e("../internal/baseClone"),o=e("../internal/bindCallback"),a=e("../internal/isIterateeCall");t.exports=function(e,t,n,i){return t&&"boolean"!=typeof t&&a(e,t,n)?t=!1:"function"==typeof t&&(i=n,n=t,t=!1),"function"==typeof n?r(e,t,o(n,i,3)):r(e,t)}},{"../internal/baseClone":388,"../internal/bindCallback":424,"../internal/isIterateeCall":459}],479:[function(e,t,n){var i=e("../internal/isArrayLike"),r=e("../internal/isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable;t.exports=function(e){return r(e)&&i(e)&&a.call(e,"callee")&&!s.call(e,"callee")}},{"../internal/isArrayLike":457,"../internal/isObjectLike":463}],480:[function(e,t,n){var i=e("../internal/getNative"),r=e("../internal/isLength"),o=e("../internal/isObjectLike"),a=Object.prototype.toString,s=i(Array,"isArray")||function(e){return o(e)&&r(e.length)&&"[object Array]"==a.call(e)};t.exports=s},{"../internal/getNative":452,"../internal/isLength":462,"../internal/isObjectLike":463}],481:[function(e,t,n){var i=e("./isArguments"),r=e("./isArray"),o=e("../internal/isArrayLike"),a=e("./isFunction"),s=e("../internal/isObjectLike"),c=e("./isString"),l=e("../object/keys");t.exports=function(e){return null==e||(o(e)&&(r(e)||c(e)||i(e)||s(e)&&a(e.splice))?!e.length:!l(e).length)}},{"../internal/isArrayLike":457,"../internal/isObjectLike":463,"../object/keys":493,"./isArguments":479,"./isArray":480,"./isFunction":482,"./isString":487}],482:[function(e,t,n){var i=e("./isObject"),r="[object Function]",o=Object.prototype.toString;t.exports=function(e){return i(e)&&o.call(e)==r}},{"./isObject":485}],483:[function(e,t,n){var i=e("./isFunction"),r=e("../internal/isObjectLike"),o=/^\[object .+?Constructor\]$/,a=Object.prototype,s=Function.prototype.toString,c=a.hasOwnProperty,l=RegExp("^"+s.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return null!=e&&(i(e)?l.test(s.call(e)):r(e)&&o.test(e))}},{"../internal/isObjectLike":463,"./isFunction":482}],484:[function(e,t,n){var i=e("../internal/isObjectLike"),r="[object Number]",o=Object.prototype.toString;t.exports=function(e){return"number"==typeof e||i(e)&&o.call(e)==r}},{"../internal/isObjectLike":463}],485:[function(e,t,n){t.exports=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}},{}],486:[function(e,t,n){var i=e("../internal/baseForIn"),r=e("./isArguments"),o=e("../internal/isObjectLike"),a="[object Object]",s=Object.prototype,c=s.hasOwnProperty,l=s.toString;t.exports=function(e){var t,n;return!(!o(e)||l.call(e)!=a||r(e)||!(c.call(e,"constructor")||"function"!=typeof(t=e.constructor)||t instanceof t))&&(i(e,function(e,t){n=t}),void 0===n||c.call(e,n))}},{"../internal/baseForIn":401,"../internal/isObjectLike":463,"./isArguments":479}],487:[function(e,t,n){var i=e("../internal/isObjectLike"),r="[object String]",o=Object.prototype.toString;t.exports=function(e){return"string"==typeof e||i(e)&&o.call(e)==r}},{"../internal/isObjectLike":463}],488:[function(e,t,n){var i=e("../internal/isLength"),r=e("../internal/isObjectLike"),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var a=Object.prototype.toString;t.exports=function(e){return r(e)&&i(e.length)&&!!o[a.call(e)]}},{"../internal/isLength":462,"../internal/isObjectLike":463}],489:[function(e,t,n){var i=e("../internal/baseCopy"),r=e("../object/keysIn");t.exports=function(e){return i(e,r(e))}},{"../internal/baseCopy":390,"../object/keysIn":494}],490:[function(e,t,n){var i=e("../internal/assignWith"),r=e("../internal/baseAssign"),o=e("../internal/createAssigner")(function(e,t,n){return n?i(e,t,n):r(e,t)});t.exports=o},{"../internal/assignWith":385,"../internal/baseAssign":386,"../internal/createAssigner":432}],491:[function(e,t,n){var r=e("../internal/baseGet"),o=e("../internal/toPath");t.exports=function(e,t,n){var i=null==e?void 0:r(e,o(t),t+"");return void 0===i?n:i}},{"../internal/baseGet":403,"../internal/toPath":476}],492:[function(e,t,n){var i=e("../internal/baseGet"),r=e("../internal/baseSlice"),o=e("../lang/isArguments"),a=e("../lang/isArray"),s=e("../internal/isIndex"),c=e("../internal/isKey"),l=e("../internal/isLength"),u=e("../array/last"),p=e("../internal/toPath"),d=Object.prototype.hasOwnProperty;t.exports=function(e,t){if(null==e)return!1;var n=d.call(e,t);if(!n&&!c(t)){if(null==(e=1==(t=p(t)).length?e:i(e,r(t,0,-1))))return!1;t=u(t),n=d.call(e,t)}return n||l(e.length)&&s(t,e.length)&&(a(e)||o(e))}},{"../array/last":349,"../internal/baseGet":403,"../internal/baseSlice":418,"../internal/isIndex":458,"../internal/isKey":460,"../internal/isLength":462,"../internal/toPath":476,"../lang/isArguments":479,"../lang/isArray":480}],493:[function(e,t,n){var i=e("../internal/getNative"),r=e("../internal/isArrayLike"),o=e("../lang/isObject"),a=e("../internal/shimKeys"),s=i(Object,"keys"),c=s?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):o(e)?s(e):[]}:a;t.exports=c},{"../internal/getNative":452,"../internal/isArrayLike":457,"../internal/shimKeys":473,"../lang/isObject":485}],494:[function(e,t,n){var c=e("../lang/isArguments"),l=e("../lang/isArray"),u=e("../internal/isIndex"),p=e("../internal/isLength"),d=e("../lang/isObject"),h=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return[];d(e)||(e=Object(e));var t=e.length;t=t&&p(t)&&(l(e)||c(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype===e,o=Array(t),a=0<t;++i<t;)o[i]=i+"";for(var s in e)a&&u(s,t)||"constructor"==s&&(r||!h.call(e,s))||o.push(s);return o}},{"../internal/isIndex":458,"../internal/isLength":462,"../lang/isArguments":479,"../lang/isArray":480,"../lang/isObject":485}],495:[function(e,t,n){var i=e("../internal/baseMerge"),r=e("../internal/createAssigner")(i);t.exports=r},{"../internal/baseMerge":412,"../internal/createAssigner":432}],496:[function(e,t,n){var r=e("../internal/arrayMap"),o=e("../internal/baseDifference"),a=e("../internal/baseFlatten"),s=e("../internal/bindCallback"),c=e("./keysIn"),l=e("../internal/pickByArray"),u=e("../internal/pickByCallback"),i=e("../function/restParam")(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){t=r(a(t),String);return l(e,o(c(e),t))}var i=s(t[0],t[1],3);return u(e,function(e,t,n){return!i(e,t,n)})});t.exports=i},{"../function/restParam":373,"../internal/arrayMap":381,"../internal/baseDifference":393,"../internal/baseFlatten":399,"../internal/bindCallback":424,"../internal/pickByArray":467,"../internal/pickByCallback":468,"./keysIn":494}],497:[function(e,t,n){var a=e("./keys"),s=e("../internal/toObject");t.exports=function(e){e=s(e);for(var t=-1,n=a(e),i=n.length,r=Array(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r}},{"../internal/toObject":475,"./keys":493}],498:[function(e,t,n){var i=e("../internal/baseFlatten"),r=e("../internal/bindCallback"),o=e("../internal/pickByArray"),a=e("../internal/pickByCallback"),s=e("../function/restParam")(function(e,t){return null==e?{}:"function"==typeof t[0]?a(e,r(t[0],t[1],3)):o(e,i(t))});t.exports=s},{"../function/restParam":373,"../internal/baseFlatten":399,"../internal/bindCallback":424,"../internal/pickByArray":467,"../internal/pickByCallback":468}],499:[function(e,t,n){var a=e("../internal/arrayEach"),s=e("../internal/baseCallback"),c=e("../internal/baseCreate"),l=e("../internal/baseForOwn"),u=e("../lang/isArray"),p=e("../lang/isFunction"),d=e("../lang/isObject"),h=e("../lang/isTypedArray");t.exports=function(e,i,r,t){var n=u(e)||h(e);if(i=s(i,t,4),null==r)if(n||d(e)){var o=e.constructor;r=n?u(e)?new o:[]:c(p(o)?o.prototype:void 0)}else r={};return(n?a:l)(e,function(e,t,n){return i(r,e,t,n)}),r}},{"../internal/arrayEach":378,"../internal/baseCallback":387,"../internal/baseCreate":391,"../internal/baseForOwn":402,"../lang/isArray":480,"../lang/isFunction":482,"../lang/isObject":485,"../lang/isTypedArray":488}],500:[function(e,t,n){var i=e("../internal/baseValues"),r=e("./keys");t.exports=function(e){return i(e,r(e))}},{"../internal/baseValues":423,"./keys":493}],501:[function(e,t,n){t.exports=function(e){return e}},{}],502:[function(e,t,n){t.exports=function(){}},{}],503:[function(e,t,n){var i=e("../internal/baseProperty"),r=e("../internal/basePropertyDeep"),o=e("../internal/isKey");t.exports=function(e){return o(e)?i(e):r(e)}},{"../internal/baseProperty":414,"../internal/basePropertyDeep":415,"../internal/isKey":460}],504:[function(e,t,n){t.exports=function(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}},{}],505:[function(e,t,n){t.exports=e("component-classes")},{"component-classes":316}],506:[function(e,t,n){t.exports=function(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}},{}],507:[function(e,t,n){t.exports=e("component-closest")},{"component-closest":317}],508:[function(e,t,n){t.exports=e("component-delegate")},{"component-delegate":318}],509:[function(e,t,n){t.exports=e("domify")},{domify:338}],510:[function(e,t,n){t.exports=e("component-event")},{"component-event":319}],511:[function(e,t,n){t.exports=e("component-matches-selector")},{"component-matches-selector":321}],512:[function(e,t,n){t.exports=e("component-query")},{"component-query":322}],513:[function(e,t,n){t.exports=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{}],514:[function(e,t,n){"use strict";t.exports.hasLowerCaseAlias=function(e){return e.xml&&"lowerCase"===e.xml.tagAlias},t.exports.DEFAULT_NS_MAP={xsi:"http://www.w3.org/2001/XMLSchema-instance"};var i=t.exports.XSI_TYPE="xsi:type";function r(e){return e.xml&&e.xml.serialize}t.exports.serializeAsType=function(e){return r(e)===i},t.exports.serializeAsProperty=function(e){return"property"===r(e)}},{}],515:[function(e,t,n){"use strict";var s=e("lodash/collection/forEach"),b=e("lodash/collection/find"),x=e("lodash/object/assign"),h=e("lodash/function/defer"),f=e("tiny-stack"),m=e("saxen"),i=e("moddle"),E=e("moddle/lib/ns").parseName,r=e("moddle/lib/types"),c=r.coerceType,a=r.isSimple,o=e("./common"),w=o.XSI_TYPE,$=o.serializeAsType,l=o.hasLowerCaseAlias;function _(e,t){return l(t)?e.prefix+":"+((n=e.localName).charAt(0).toUpperCase()+n.slice(1)):e.name;var n}function S(e){return new Error(e)}function C(e){return e.$descriptor}function u(){}function v(){}function p(){}function d(e,t){this.property=e,this.context=t}function g(e,t){this.element=t,this.propertyDesc=e}function y(){}function A(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function T(e,t,n){A.call(this,e,t,n)}function j(e,t,n){this.model=e,this.context=n}function k(e){e instanceof i&&(e={model:e}),x(this,{lax:!1},e)}u.prototype.handleEnd=function(){},u.prototype.handleText=function(){},u.prototype.handleNode=function(){},(v.prototype=Object.create(u.prototype)).handleNode=function(){return this},(p.prototype=Object.create(u.prototype)).handleText=function(e){this.body=(this.body||"")+e},(d.prototype=Object.create(p.prototype)).handleNode=function(e){if(this.element)throw S("expected no sub nodes");return this.element=this.createReference(e),this},d.prototype.handleEnd=function(){this.element.id=this.body},d.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},(g.prototype=Object.create(p.prototype)).handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=c(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},(y.prototype=Object.create(p.prototype)).handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},(A.prototype=Object.create(y.prototype)).addReference=function(e){this.context.addReference(e)},A.prototype.handleEnd=function(){var e=this.body,t=this.element,n=C(t).bodyProperty;n&&void 0!==e&&(e=c(n.type,e),t.set(n.name,e))},A.prototype.createElement=function(e){var t=e.attributes,n=this.type,r=C(n),o=this.context,a=new n({});return s(t,function(e,t){var n,i=r.propertiesByName[t];i&&i.isReference?i.isMany?(n=e.split(" "),s(n,function(e){o.addReference({element:a,property:i.ns.name,id:e})})):o.addReference({element:a,property:i.ns.name,id:e}):(i&&(e=c(i.type,e)),a.set(t,e))}),a},A.prototype.getPropertyForNode=function(e){var t,n,i,r,o,a,s,c,l,u,p=e.name,d=E(p),h=this.type,f=this.model,m=C(h),v=d.name,g=m.propertiesByName[v];if(g)return $(g)&&(t=e.attributes[w])?(i=f,l=E(t),u=i.getPackage(l.prefix),o=u,a=(r=l).name,s=r.localName,t=(c=o.xml&&o.xml.typePrefix)&&0===s.indexOf(c)?r.prefix+":"+s.slice(c.length):a,n=f.getType(t),x({},g,{effectiveType:C(n).name})):g;var y=f.getPackage(d.prefix);if(y){if(t=_(d,y),n=f.getType(t),g=b(m.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return x({},g,{effectiveType:C(n).name})}else if(g=b(m.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return g;throw S("unrecognized element <"+d.name+">")},A.prototype.toString=function(){return"ElementDescriptor["+C(this.type).name+"]"},A.prototype.valueHandler=function(e,t){return new g(e,t)},A.prototype.referenceHandler=function(e){return new d(e,this.context)},A.prototype.handler=function(e){return"Element"===e?new j(this.model,e,this.context):new A(this.model,e,this.context)},A.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,a(n))return this.valueHandler(t,i);var o=(r=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==o&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(x(o,{element:i}),this.context.addReference(o)):o.$parent=i),r},(T.prototype=Object.create(A.prototype)).createElement=function(e){var t=e.name,n=E(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&_(n,o)||t;if(!r.hasType(a))throw S("unexpected element <"+e.originalName+">");return A.prototype.createElement.call(this,e)},(j.prototype=Object.create(y.prototype)).createElement=function(e){var t=e.name,n=E(t).prefix,i=e.ns[n+"$uri"],r=e.attributes;return this.model.createAny(t,i,r)},j.prototype.handleChild=function(e){var t=new j(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),t},j.prototype.handleText=function(e){this.body=this.body||""+e},j.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},k.prototype.fromXML=function(n,e,i){var r=e.rootHandler;e instanceof A?(r=e,e={}):"string"==typeof e?(r=this.handler(e),e={}):"string"==typeof r&&(r=this.handler(r));var t=this.model,a=this.lax,l=new function(e){x(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw S("expected element");var t,n=this.elementsById,i=C(e).idProperty;if(i&&(t=e.get(i.name))){if(n[t])throw S("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}(x({},e,{rootHandler:r})),o=new m({proxy:!0}),s=new f;function c(e,t,n){var i=t(),r=i.line,o=i.column,a=i.data;"<"===a.charAt(0)&&-1!==a.indexOf(" ")&&(a=a.slice(0,a.indexOf(" "))+">");var s="unparsable content "+(a?a+" ":"")+"detected\n\tline: "+r+"\n\tcolumn: "+o+"\n\tnested error: "+e.message;if(n)return l.addWarning({message:s,error:e}),console.warn("could not parse node"),console.warn(e),!0;throw console.error("could not parse document"),console.error(e),S(s)}r.context=l,s.push(r);var u=/^<\?xml.* encoding="([^"]+)"(?: .*)?\?>$/i,p=/^utf-8$/i;var d=t.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},{});o.ns(d).on("openTag",function(e,i,t,n){var r=e.attrs||{},o=Object.keys(r).reduce(function(e,t){var n=i(r[t]);return e[t]=n,e},{});!function(e,t){var n=s.peek();try{s.push(n.handleNode(e))}catch(e){c(e,t,a)&&s.push(new v)}}({name:e.name,originalName:e.originalName,attributes:o,ns:e.ns},n)}).on("question",function(e){var t=u.exec(e),n=t&&t[1];n&&!p.test(n)&&l.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}).on("closeTag",function(){s.pop().handleEnd()}).on("cdata",function(e){s.peek().handleText(e)}).on("text",function(e){(e=e.trim())&&s.peek().handleText(e)}).on("error",c).on("warn",function(e,t){return c(e,t,!0)}),h(function(){var t;try{o.parse(n),function(){var e,t,n=l.elementsById,i=l.references;for(e=0;t=i[e];e++){var r=t.element,o=n[t.id],a=C(r).propertiesByName[t.property];if(o||l.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),a.isMany){var s=r.get(a.name),c=s.indexOf(t);-1===c&&(c=s.length),o?s[c]=o:s.splice(c,1)}else r.set(a.name,o)}}()}catch(e){t=e}var e=r.element;t||e||(t=S("failed to parse document as <"+r.type.$descriptor.name+">")),i(t,t?void 0:e,l)})},k.prototype.handler=function(e){return new T(this.model,e)},t.exports=k,t.exports.ElementHandler=A},{"./common":514,"lodash/collection/find":359,"lodash/collection/forEach":360,"lodash/function/defer":372,"lodash/object/assign":490,moddle:517,"moddle/lib/ns":522,"moddle/lib/types":525,saxen:530,"tiny-stack":533}],516:[function(e,t,n){"use strict";var r=e("lodash/collection/map"),u=e("lodash/collection/forEach"),i=e("lodash/lang/isString"),o=e("lodash/collection/filter"),a=e("lodash/object/assign"),p=e("moddle/lib/types"),s=e("moddle/lib/ns").parseName,c=e("./common"),l=c.hasLowerCaseAlias,d=c.serializeAsType,h=c.serializeAsProperty,f='<?xml version="1.0" encoding="UTF-8"?>\n',m=/(<|>|'|"|&|\n\r|\n)/g,v=c.DEFAULT_NS_MAP,g=c.XSI_TYPE;function y(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function b(e){return i(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function x(e,t){return t.isGeneric?a({localName:t.ns.localName},e):a({localName:(n=t.ns.localName,i=t.$pkg,l(i)?(r=n).charAt(0).toLowerCase()+r.slice(1):n)},e);var n,i,r}var E={"\n":"10","\n\r":"10",'"':"34","'":"39","<":"60",">":"62","&":"38"};function w(e){return(e=i(e)?e:""+e).replace(m,function(e){return"&#"+E[e]+";"})}function $(e,t){this.ns=t}function _(){}function S(e){this.ns=e}function C(e,t){this.body=[],this.attrs=[],this.parent=e,this.ns=t}function A(e,t){C.call(this,e,t)}$.prototype.build=function(e){return this.element=e,this},$.prototype.serializeTo=function(e){e.appendIndent().append("<"+b(this.ns)+">"+this.element.id+"</"+b(this.ns)+">").appendNewLine()},_.prototype.serializeValue=_.prototype.serializeTo=function(e){var t=this.escape;t&&e.append("<![CDATA["),e.append(this.value),t&&e.append("]]>")},_.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(m)&&(this.escape=!0),this},y(S,_),S.prototype.serializeTo=function(e){e.appendIndent().append("<"+b(this.ns)+">"),this.serializeValue(e),e.append("</"+b(this.ns)+">").appendNewLine()},C.prototype.build=function(e){this.element=e;var i,t,n=this.parseNsAttributes(e);if(this.ns||(this.ns=this.nsTagName(e.$descriptor)),e.$descriptor.isGeneric)this.parseGeneric(e);else{var r=(t=(i=e).$descriptor,o(t.properties,function(e){var t=e.name;if(e.isVirtual)return!1;if(!i.hasOwnProperty(t))return!1;var n=i[t];return n!==e.default&&null!==n&&(!e.isMany||n.length)}));this.parseAttributes(o(r,function(e){return e.isAttr})),this.parseContainments(o(r,function(e){return!e.isAttr})),this.parseGenericAttributes(e,n)}return this},C.prototype.nsTagName=function(e){return x(this.logNamespaceUsed(e.ns),e)},C.prototype.nsPropertyTagName=function(e){var t,n=this.logNamespaceUsed(e.ns);return t=n,a({localName:e.ns.localName},t)},C.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},C.prototype.nsAttributeName=function(e){var t;if(t=i(e)?s(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.isLocalNs(n)?{localName:t.localName}:a({localName:t.localName},n)},C.prototype.parseGeneric=function(e){var n=this,i=this.body,r=this.attrs;u(e,function(e,t){"$body"===t?i.push((new _).build({type:"String"},e)):"$children"===t?u(e,function(e){i.push(new C(n).build(e))}):0!==t.indexOf("$")&&r.push({name:t,value:w(e)})})},C.prototype.parseNsAttributes=function(e){var r=this,t=e.$attrs,o=e.$model,a=[];return u(t,function(e,t){var n,i=s(t);"xmlns"===i.prefix&&(n={prefix:i.localName,uri:e}),i.prefix||"xmlns"!==i.localName||(n={uri:e}),n?o.getPackage(e)?r.logNamespace(n,!0):r.logNamespaceUsed(n):a.push({name:t,value:e})}),a},C.prototype.parseGenericAttributes=function(n,e){var i=this;u(e,function(t){if(t.name!==g)try{i.addAttribute(i.nsAttributeName(t.name),t.value)}catch(e){console.warn("missing namespace information for ",t.name,"=",t.value,"on",n,e)}})},C.prototype.parseContainments=function(e){var s=this,c=this.body,l=this.element;u(e,function(t){var e=l.get(t.name),n=t.isReference,i=t.isMany,r=s.nsPropertyTagName(t);if(i||(e=[e]),t.isBody)c.push((new _).build(t,e[0]));else if(p.isSimple(t.type))u(e,function(e){c.push(new S(r).build(t,e))});else if(n)u(e,function(e){c.push(new $(s,r).build(e))});else{var o=d(t),a=h(t);u(e,function(e){var t;t=o?new A(s,r):a?new C(s,r):new C(s),c.push(t.build(e))})}})},C.prototype.getNamespaces=function(){var e=this.namespaces,t=this.parent;return e||(e=this.namespaces=t?t.getNamespaces():{prefixMap:{},uriMap:{},used:{},wellknown:[],custom:[]}),e},C.prototype.logNamespace=function(e,t){var n=this.getNamespaces(),i=e.uri;return n.uriMap[i]||(n.uriMap[i]=e,t?n.wellknown.push(e):n.custom.push(e)),n.prefixMap[e.prefix]=i,e},C.prototype.logNamespaceUsed=function(e){var t,n,i,r=this.element.$model,o=this.getNamespaces(),a=e.prefix,s=e.uri;if(!a&&!s)return{localName:e.localName};if(i=v[a]||r&&(r.getPackage(a)||{}).uri,!(s=s||i||o.prefixMap[a]))throw new Error("no namespace uri given for prefix <"+a+">");if(!(e=o.uriMap[s])){for(t=a,n=1;o.prefixMap[t];)t=a+"_"+n++;e=this.logNamespace({prefix:t,uri:s},i===s)}return o.used[e.uri]||(o.used[e.uri]=e),e},C.prototype.parseAttributes=function(e){var i=this,r=this.element;u(e,function(e){var t=r.get(e.name);if(e.isReference)if(e.isMany){var n=[];u(t,function(e){n.push(e.id)}),t=n.join(" ")}else t=t.id;i.addAttribute(i.nsAttributeName(e),t)})},C.prototype.addAttribute=function(e,t){var n=this.attrs;i(t)&&(t=w(t)),n.push({name:e,value:t})},C.prototype.serializeAttributes=function(t){var n,e,i=this.attrs;!this.parent&&(i=(n=this.namespaces,e=[].concat(n.wellknown,n.custom),r(o(e,function(e){return n.used[e.uri]}),function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}})).concat(i)),u(i,function(e){t.append(" ").append(b(e.name)).append('="').append(e.value).append('"')})},C.prototype.serializeTo=function(t){var e=this.body[0],n=e&&e.constructor!==_;t.appendIndent().append("<"+b(this.ns)),this.serializeAttributes(t),t.append(e?">":" />"),e&&(n&&t.appendNewLine().indent(),u(this.body,function(e){e.serializeTo(t)}),n&&t.unindent().appendIndent(),t.append("</"+b(this.ns)+">")),t.appendNewLine()},y(A,C),A.prototype.build=function(e){var t=e.$descriptor;this.element=e,this.typeNs=this.nsTagName(t);var n=this.typeNs,i=e.$model.getPackage(n.uri),r=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(g),(n.prefix?n.prefix+":":"")+r+t.ns.localName),C.prototype.build.call(this,e)},A.prototype.isLocalNs=function(e){return e.uri===this.typeNs.uri},t.exports=function(r){return r=a({format:!1,preamble:!0},r||{}),{toXML:function(e,t){var n=t||new function(){this.value="",this.write=function(e){this.value+=e}},i=new function(t,e){var n=[""];this.append=function(e){return t.write(e),this},this.appendNewLine=function(){return e&&t.write("\n"),this},this.appendIndent=function(){return e&&t.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}(n,r.format);if(r.preamble&&i.append(f),(new C).build(e).serializeTo(i),!t)return n.value}}}},{"./common":514,"lodash/collection/filter":358,"lodash/collection/forEach":360,"lodash/collection/map":363,"lodash/lang/isString":487,"lodash/object/assign":490,"moddle/lib/ns":522,"moddle/lib/types":525}],517:[function(e,t,n){t.exports=e("./lib/moddle")},{"./lib/moddle":521}],518:[function(e,t,n){"use strict";function i(){}i.prototype.get=function(e){return this.$model.properties.get(this,e)},i.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},t.exports=i},{}],519:[function(e,t,n){"use strict";var i=e("lodash/object/pick"),o=e("lodash/object/assign"),a=e("lodash/collection/forEach"),c=e("./ns").parseName;function r(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}(t.exports=r).prototype.build=function(){return i(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},r.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},r.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(-1===s)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(t,n?void 0:s,a),o[i.name]=o[i.localName]=t},r.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=c(r[0],i),a=c(r[1],o.prefix).name,s=this.propertiesByName[a];if(!s)throw new Error("refined property <"+a+"> not found");this.replaceProperty(s,e,n),delete e.redefines},r.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},r.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},r.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},r.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},r.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},r.prototype.hasProperty=function(e){return this.propertiesByName[e]},r.prototype.addTrait=function(i,r){var e=this.allTypesByName,t=this.allTypes,n=i.name;n in e||(a(i.properties,function(e){e=o({},e,{name:e.ns.localName,inherited:r}),Object.defineProperty(e,"definedBy",{value:i});var t=e.replaces,n=e.redefines;t||n?this.redefineProperty(e,t||n,t):(e.isBody&&this.setBodyProperty(e),e.isId&&this.setIdProperty(e),this.addProperty(e))},this),t.push(i),e[n]=i)}},{"./ns":522,"lodash/collection/forEach":360,"lodash/object/assign":490,"lodash/object/pick":498}],520:[function(e,t,n){"use strict";var a=e("lodash/collection/forEach"),s=e("./base");function i(e,t){this.model=e,this.properties=t}(t.exports=i).prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(s.prototype);a(e.properties,function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(e){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),a(e,function(e,t){this.set(t,e)},this)}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o}},{"./base":518,"lodash/collection/forEach":360}],521:[function(e,t,n){"use strict";var r=e("lodash/lang/isString"),a=e("lodash/lang/isObject"),s=e("lodash/collection/forEach"),i=e("./factory"),o=e("./registry"),c=e("./properties"),l=e("./ns").parseName;function u(e){this.properties=new c(this),this.factory=new i(this,this.properties),this.registry=new o(e,this.properties),this.typeCache={}}(t.exports=u).prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},u.prototype.getType=function(e){var t=this.typeCache,n=r(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},u.prototype.createAny=function(e,t,n){var i=l(e),r={$type:e,$instanceOf:function(e){return e===this.$type}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),s(n,function(e,t){a(e)&&void 0!==e.value?r[e.name]=e.value:r[t]=e}),r},u.prototype.getPackage=function(e){return this.registry.getPackage(e)},u.prototype.getPackages=function(){return this.registry.getPackages()},u.prototype.getElementDescriptor=function(e){return e.$descriptor},u.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},u.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},u.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]}},{"./factory":520,"./ns":522,"./properties":523,"./registry":524,"lodash/collection/forEach":360,"lodash/lang/isObject":485,"lodash/lang/isString":487}],522:[function(e,t,n){"use strict";t.exports.parseName=function(e,t){var n,i,r=e.split(/:/);if(1===r.length)n=e,i=t;else{if(2!==r.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=r[1],i=r[0]}return{name:e=(i?i+":":"")+n,prefix:i,localName:n}}},{}],523:[function(e,t,n){"use strict";function i(e){this.model=e}function o(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}(t.exports=i).prototype.set=function(e,t,n){var i=this.model.getPropertyDescriptor(e,t),r=i&&i.name;void 0===n?i?delete e[r]:delete e.$attrs[t]:i?r in e?e[r]=n:o(e,i,n):e.$attrs[t]=n},i.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var i=n.name;return!e[i]&&n.isMany&&o(e,n,[]),e[i]},i.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},i.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},i.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})}},{}],524:[function(e,t,n){"use strict";var o=e("lodash/object/assign"),s=e("lodash/collection/forEach"),i=e("./types"),r=e("./descriptor-builder"),c=e("./ns").parseName,l=i.isBuiltIn;function a(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,s(e,this.registerPackage,this)}function u(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}(t.exports=a).prototype.getPackage=function(e){return this.packageMap[e]},a.prototype.getPackages=function(){return this.packages},a.prototype.registerPackage=function(t){t=o({},t);var e=this.packageMap;u(e,t,"prefix"),u(e,t,"uri"),s(t.types,function(e){this.registerType(e,t)},this),e[t.uri]=e[t.prefix]=t,this.packages.push(t)},a.prototype.registerType=function(e,t){e=o({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:o(e.meta||{})});var i=c(e.name,t.prefix),n=i.name,r={};s(e.properties,function(e){var t=c(e.name,i.prefix),n=t.name;l(e.type)||(e.type=c(e.type,t.prefix).name),o(e,{ns:t,name:n}),r[n]=e}),o(e,{ns:i,name:n,propertiesByName:r}),s(e.extends,function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(n)},this),this.definePackage(e,t),this.typeMap[n]=e},a.prototype.mapTypes=function(i,r,e){var t=l(i.name)?{name:i.name}:this.typeMap[i.name],o=this;function n(e){return a(e,!0)}function a(e,t){var n=c(e,l(e)?"":i.prefix);o.mapTypes(n,r,t)}if(!t)throw new Error("unknown type <"+i.name+">");s(t.superClass,e?n:a),r(t,!e),s(t.traits,n)},a.prototype.getEffectiveDescriptor=function(e){var t=c(e),n=new r(t);this.mapTypes(t,function(e,t){n.addTrait(e,t)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},a.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})}},{"./descriptor-builder":519,"./ns":522,"./types":525,"lodash/collection/forEach":360,"lodash/object/assign":490}],525:[function(e,t,n){"use strict";var i={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},r={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};t.exports.coerceType=function(e,t){var n=r[e];return n?n(t):t},t.exports.isBuiltIn=function(e){return!!i[e]},t.exports.isSimple=function(e){return!!r[e]}},{}],526:[function(e,t,n){t.exports=e("./lib/refs"),t.exports.Collection=e("./lib/collection")},{"./lib/collection":527,"./lib/refs":528}],527:[function(e,t,n){"use strict";t.exports.extend=function(e,n,t,i){var r=t.inverse;return Object.defineProperty(e,"remove",{value:function(e){var t=this.indexOf(e);return-1!==t&&(this.splice(t,1),n.unset(e,r,i)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e){this.contains(e)||(this.push(e),n.set(e,r,i))}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e},t.exports.isExtended=function(e){return!0===e.__refs_collection}},{}],528:[function(e,t,n){"use strict";var i=e("./collection");function s(e,t,n){Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i.extend(n[t.name]||[],e,t,n)})}function r(e,t){if(!(this instanceof r))return new r(e,t);(e.inverse=t).inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}r.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}var n,i,r,o,a;t.collection?s(this,t,e):(n=this,r=e,o=(i=t).inverse,a=r[i.name],Object.defineProperty(r,i.name,{enumerable:i.enumerable,get:function(){return a},set:function(e){if(e!==a){var t=a;a=null,t&&n.unset(t,o,r),a=e,n.set(a,o,r)}}}))},r.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return i.isExtended(n)||s(this,t,e),n},r.prototype.ensureBound=function(e,t){var n,i;n=e,i=t,Object.prototype.hasOwnProperty.call(n,i.name||i)||this.bind(e,t)},r.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},r.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)},t.exports=r},{"./collection":527}],529:[function(e,t,n){"use strict";t.exports=function(e){if(3<e.length&&-1!==e.indexOf("&"))return e.replace(i,s);return e};var r=String.fromCharCode,o=Object.prototype.hasOwnProperty,i=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,a={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function s(e,t,n,i){return i?o.call(a,i)?a[i]:"&"+i+";":r(t||parseInt(n,16))}Object.keys(a).forEach(function(e){a[e.toUpperCase()]=a[e]})},{}],530:[function(e,t,n){"use strict";t.exports=function e(t){if(!this)return new e(t);var w=t&&t.proxy;var $,_,S,C,n,A,T,j,i=l;var k=c;var M=!1;var P=!1;var r=null;var R=!1;var D;function O(e){e instanceof Error||(e=s(e)),i(r=e,k)}function N(e){n&&(e instanceof Error||(e=s(e)),n(e,k))}this.on=function(e,t){if("function"!=typeof t)throw s("required args <name, cb>");switch(e){case"openTag":_=t;break;case"text":$=t;break;case"closeTag":S=t;break;case"error":i=t;break;case"warn":n=t;break;case"cdata":C=t;break;case"attention":j=t;break;case"question":T=t;break;case"comment":A=t;break;default:throw s("unsupported event: "+e)}return this};this.ns=function(e){if(void 0===e&&(e={}),"object"!=typeof e)throw s("required args <nsMap={}>");var t,n={};for(t in e)n[t]=e[t];return n[o]=a,P=!0,D=n,this};this.parse=function(e){if("string"!=typeof e)throw s("required args <xml=string>");return r=null,function(s){var e,t,n,i,r,o,a,c,l,v,u=P?[]:null,g=P?function(e){var t,n,i={};for(t in e)n=e[t],i[n]=n,i[H(n)]=t;return i}(D):null,p=[],y=0,d=!1,h=!1,f=0,m=0,b="",x=0;function E(){if(null!==v)return v;for(var e,t,n,i,r,o,a,s,c,l,u=P&&g.xmlns,p=P&&M?[]:null,d=x,h=b,f=h.length,m={};d<f;d++)if(!(32===(c=h.charCodeAt(d))||c<14&&8<c)){if((c<65||122<c||90<c&&c<97)&&95!==c&&58!==c)return N("illegal first char attribute name"),v=!1;for(l=d+1;l<f;l++)if(!(96<(c=h.charCodeAt(l))&&c<123||64<c&&c<91||47<c&&c<59||45===c||95===c)){if(61!==c)return N("missing attribute value"),v=!1;break}if("xmlns:xmlns"===(s=h.substring(d,l)))return N("illegal declaration of xmlns"),v=!1;if(34===(c=h.charCodeAt(l+1)))l=h.indexOf('"',d=l+2);else{if(39!==c)return N("missing attribute value quotes"),v=!1;l=h.indexOf("'",d=l+2)}if(-1===l)return N("attribute value quote missmatch"),v=!1;if(l+1<f&&(32<(c=h.charCodeAt(l+1))||c<9||c<32&&13<c))return N("illegal character after attribute end"),v=!1;if(o=h.substring(d,l),d=l+1,P)if(M){if(null!==(r="xmlns"===s?"xmlns":120===s.charCodeAt(0)&&"xmlns:"===s.substr(0,6)?s.substr(6):null)){if(e=B(o),t=H(r),!(a=D[e])){if("xmlns"===r||t in g&&g[t]!==e)for(;a="ns"+y++,void 0!==g[a];);else a=r;D[e]=a}g[r]!==a&&(i||(g=U(g),i=!0),g[r]=a,"xmlns"===r&&(g[H(a)]=e,u=a),g[t]=e),m[s]=o;continue}p.push(s,o)}else-1!==(c=s.indexOf(":"))?(n=g[s.substring(0,c)])?((s=u===n?s.substr(c+1):n+s.substr(c))===L&&(-1!==(c=o.indexOf(":"))?(n=o.substring(0,c),n=g[n]||n,o=n+o.substring(c)):o=u+":"+o),m[s]=o):N(I(s.substring(0,c))):m[s]=o;else m[s]=o}if(M)for(d=0,f=p.length;d<f;d++){if(s=p[d++],o=p[d],-1!==(c=s.indexOf(":"))){if(!(n=g[s.substring(0,c)])){N(I(s.substring(0,c)));continue}(s=u===n?s.substr(c+1):n+s.substr(c))===L&&(-1!==(c=o.indexOf(":"))?(n=o.substring(0,c),n=g[n]||n,o=n+o.substring(c)):o=u+":"+o)}m[s]=o}return v=m}k=function(){for(var e,t,n=/(\r\n|\r|\n)/g,i=0,r=0,o=0,a=m;o<=f&&(e=n.exec(s))&&(a=e[0].length+e.index,!(f<a));)i+=1,o=a;return-1==f?(r=a,t=""):(r=f-o,t=-1==m?s.substring(f):s.substring(f,m+1)),{data:t,line:i,column:r}},w&&(l=Object.create({},{name:F(function(){return a}),originalName:F(function(){return c}),attrs:F(E),ns:F(function(){return g})}));for(;-1!==m;){if(-1===(f=60===s.charCodeAt(m)?m:s.indexOf("<",m)))return p.length?O("unexpected end of file"):0===m&&O("missing start tag");if(m!==f&&$&&($(s.substring(m,f),B,k),R))return;if(33!==(r=s.charCodeAt(f+1)))if(63!==r){if(-1==(m=s.indexOf(">",f+1)))return O("unclosed tag");if(v={},47===r){if(d=!1,h=!0,!p.length)return O("missing open tag");if(t=a=p.pop(),i=f+2+t.length,s.substring(f+2,i)!==t)return O("closing tag mismatch");for(;i<m;i++)if(!(32===(r=s.charCodeAt(i))||8<r&&r<14))return O("close tag")}else{if(47===s.charCodeAt(m-1)?(t=a=s.substring(f+1,m-1),h=d=!0):(t=a=s.substring(f+1,m),d=!0,h=!1),!(96<r&&r<123||64<r&&r<91||95===r||58===r))return O("illegal first char nodeName");for(i=1,n=t.length;i<n;i++)if(!(96<(r=t.charCodeAt(i))&&r<123||64<r&&r<91||47<r&&r<59||45===r||95===r)){if(32===r||r<14&&8<r){a=t.substring(0,i),v=null;break}return O("invalid nodeName")}h||p.push(a)}if(P){if(e=g,d&&(h||u.push(e),null===v&&(M=-1!==t.indexOf("xmlns",i))&&(x=i,b=t,E(),M=!1)),-1!==(r=(c=a).indexOf(":"))){if(!(o=g[a.substring(0,r)]))return O("missing namespace on <"+c+">");a=a.substr(r+1)}else o=g.xmlns;o&&(a=o+":"+a)}if(d&&(x=i,b=t,_&&(w?_(l,B,h,k):_(a,E,B,h,k),R)))return;if(h){if(S&&(S(w?l:a,B,d,k),R))return;P&&(g=d?e:u.pop())}m+=1}else{if(-1===(m=s.indexOf("?>",f)))return O("unclosed question");if(T&&(T(s.substring(f,m+2),k),R))return;m+=2}else{if(91===(r=s.charCodeAt(f+2))&&"CDATA["===s.substr(f+3,6)){if(-1===(m=s.indexOf("]]>",f)))return O("unclosed cdata");if(C&&(C(s.substring(f+9,m),k),R))return;m+=3;continue}if(45===r&&45===s.charCodeAt(f+3)){if(-1===(m=s.indexOf("--\x3e",f)))return O("unclosed comment");if(A&&(A(s.substring(f+4,m),B,k),R))return;m+=3;continue}if(-1===(m=s.indexOf(">",f+1)))return O("unclosed tag");if(j&&(j(s.substring(f,m+1),B,k),R))return;m+=1}}}(e),k=c,R=!1,r};this.stop=function(){R=!0}};var B=e("./decode"),o="http://www.w3.org/2001/XMLSchema-instance",a="xsi",L="xsi:type";function s(e){return new Error(e)}function I(e){return"missing namespace for prefix <"+e+">"}function F(e){return{get:e,enumerable:!0}}function U(e){var t,n={};for(t in e)n[t]=e[t];return n}function H(e){return e+"$uri"}function c(){return{line:0,column:0}}function l(e){throw e}},{"./decode":529}],531:[function(e,t,n){"use strict";var o=e("min-dom/lib/domify"),i=e("min-dom/lib/classes"),r=e("min-dom/lib/matches"),a=e("min-dom/lib/delegate"),s=e("min-dom/lib/query"),c=e("min-dom/lib/event"),l=e("min-dom/lib/attr"),u=e("lodash/collection/filter"),p=e("lodash/object/assign"),d=e("inherits"),h=e("events"),f={scrollSymbolLeft:"‹",scrollSymbolRight:"›"};function m(e,t){h.call(this),this.options=t=p({},f,t),this.container=e,this._createScrollButtons(e,t),this._bindEvents(e)}function v(e){return e.__scrollTabs}d(m,h),m.prototype._createButton=function(e,t){var n=t.className,i=t.direction,r=s("."+n,e);return r||(r=o('<span class="scroll-tabs-button '+n+'">'+t.label+"</span>"),e.insertBefore(r,e.childNodes[0])),l(r,"data-direction",i),r},m.prototype._createScrollButtons=function(e,t){this._createButton(e,{className:"scroll-tabs-left",label:t.scrollSymbolLeft,direction:-1}),this._createButton(e,{className:"scroll-tabs-right",label:t.scrollSymbolRight,direction:1})},m.prototype.getActiveTabNode=function(){return s(this.options.selectors.active,this.container)},m.prototype.getTabsContainerNode=function(){return s(this.options.selectors.tabsContainer,this.container)},m.prototype.getAllTabNodes=function(){return s.all(this.options.selectors.tab,this.container)},m.prototype.getVisibleTabs=function(){var e=this.getAllTabNodes(),t=this.options.selectors.ignore;return u(e,function(e){return!r(e,t)})},m.prototype.getAdjacentTab=function(e,t){var n=this.getVisibleTabs();return n[n.indexOf(e)+t]},m.prototype._bindEvents=function(e){this._bindWheelEvent(e),this._bindTabClickEvents(e),this._bindScrollButtonEvents(e)},m.prototype._bindTabClickEvents=function(e){var t=this.options.selectors.tab,n=this;a.bind(e,t,"click",function(e){n.scrollToTabNode(e.delegateTarget)})},m.prototype._bindWheelEvent=function(e){var r=this;c.bind(e,"wheel",function(e){var t=Math.sign(e.deltaY),n=r.getActiveTabNode(),i=r.getAdjacentTab(n,t);i&&(r.scrollToTabNode(i),r.emit("scroll",i,n,t)),e.preventDefault()})},m.prototype._bindScrollButtonEvents=function(e){var o=this;a.bind(e,".scroll-tabs-button","click",function(e){var t=e.delegateTarget,n=parseInt(l(t,"data-direction"),10),i=o.getActiveTabNode(),r=o.getAdjacentTab(i,n);r&&(o.scrollToTabNode(r),o.emit("scroll",r,i,n)),e.preventDefault()})},m.prototype.scrollToTabNode=function(e){if(e){var t=e.parentNode,n=e.offsetWidth,i=e.offsetLeft,r=i+n,o=t.offsetWidth;i<t.scrollLeft?t.scrollLeft=0:o<r&&(t.scrollLeft=r-o)}},m.prototype.update=function(){var e=this.getTabsContainerNode(),t=e.scrollWidth>e.offsetWidth;i(this.container).toggle("scroll-tabs-overflow",t),t&&this.scrollToTabNode(this.getActiveTabNode())},t.exports=function(e,t){var n=v(e);return n||(n=new m(e,t),e.__scrollTabs=n),n},t.exports.get=v},{events:339,inherits:343,"lodash/collection/filter":358,"lodash/object/assign":490,"min-dom/lib/attr":504,"min-dom/lib/classes":505,"min-dom/lib/delegate":508,"min-dom/lib/domify":509,"min-dom/lib/event":510,"min-dom/lib/matches":511,"min-dom/lib/query":512}],532:[function(e,t,n){"use strict";function s(e,t){return{start:e,end:void 0===t?e:t}}t.exports=function(e,t,n){var i=e.start,r=i,o=n.length-t.length,a=(n.length,t.length,t.substring(i));return n.lastIndexOf(a)===n.length-a.length&&(t=t.substring(0,t.length-a.length),n=n.substring(0,n.length-a.length)),(o=function(e,t){var n,i,r,o,a,s=0,c=0;for(t.length>e.length?(i=t,o=e):(i=e,o=t);s<i.length;)r=i.charAt(s),a=o.charAt(c),r!==a?n||(n={l_start:s,s_start:c}):(n&&!n.complete&&(n.l_end=s,n.s_end=c,n.complete=!0),c++),s++;if(n&&!n.complete&&(n.complete=!0,n.s_end=o.length,n.l_end=i.length),n)return t.length>e.length?{newStart:n.l_start,newEnd:n.l_end,type:"add"}:{newStart:n.s_start,newEnd:n.s_end,type:t.length<e.length?"remove":"replace"}}(t,n))&&(r="remove"===o.type?o.newStart:o.newEnd),s(r)},t.exports.range=s},{}],533:[function(e,i,r){!function(e){"use strict";function t(){this.data=[null],this.top=0}function n(){return new t}t.prototype.clear=function(){return this.data=[null],this.top=0,this},t.prototype.length=function(){return this.top},t.prototype.peek=function(){return this.data[this.top]},t.prototype.pop=function(){return 0<this.top?(this.top--,this.data.pop()):void 0},t.prototype.push=function(e){return this.data[++this.top]=e,this},void 0!==r?i.exports=n:"function"==typeof define?define(function(){return n}):e.stack=n}(this)},{}],534:[function(e,t,n){t.exports=function(e,t){return i(t,e),e};var i=e("./appendTo")},{"./appendTo":535}],535:[function(e,t,n){t.exports=function(e,t){return t.appendChild(i(e,t)),e};var i=e("./util/ensureImported")},{"./util/ensureImported":545}],536:[function(e,t,n){t.exports=function(e,t,n){if("string"==typeof t){if(void 0===n)return i=e,a[r=t]?i.style[r]:i.getAttributeNS(null,r);s(e,t,n)}else!function(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)s(e,i,t[i])}(e,t);var i,r;return e};var o=2,a={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":o,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":o,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function s(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=a[i];r?(r===o&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}},{}],537:[function(e,t,n){t.exports=function(e){return new s(e)};var i=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},r=/\s+/,o=Object.prototype.toString;function a(e){return void 0!==e}function s(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}s.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~i(t,e)||t.push(e),a(this.el.className.baseVal)?this.el.className.baseVal=t.join(" "):this.el.className=t.join(" "),this},s.prototype.remove=function(e){if("[object RegExp]"===o.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=i(t,e);return~n&&t.splice(n,1),this.el.className.baseVal=t.join(" "),this},s.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},s.prototype.toggle=function(e,t){return this.list?a(t)?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e):a(t)?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},s.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(r);return""===e[0]&&e.shift(),e},s.prototype.has=s.prototype.contains=function(e){return this.list?this.list.contains(e):!!~i(this.array(),e)}},{}],538:[function(e,t,n){t.exports=function(e){var t;for(;t=e.firstChild;)i(t);return e};var i=e("./remove")},{"./remove":543}],539:[function(e,t,n){t.exports=function(e){return e.cloneNode(!0)}},{}],540:[function(e,t,n){t.exports=function(e,t){var n;"<"===e.charAt(0)?(n=r(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(o.svg,e);t&&i(n,t);return n};var i=e("./attr"),r=e("./util/parse"),o=e("./util/ns")},{"./attr":536,"./util/ns":546,"./util/parse":547}],541:[function(e,t,n){var s=e("./create")("svg");function c(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}t.exports.createTransform=function(e){return e?s.createSVGTransformFromMatrix(e):s.createSVGTransform()},t.exports.createMatrix=function(e,t,n,i,r,o){var a=s.createSVGMatrix();switch(arguments.length){case 0:return a;case 6:e={a:e,b:t,c:n,d:i,e:r,f:o}}return c(a,e)},t.exports.createPoint=function(e,t){var n=s.createSVGPoint();switch(arguments.length){case 0:return n;case 2:e={x:e,y:t}}return c(n,e)}},{"./create":540}],542:[function(e,t,n){t.exports=function(e,t){{if(void 0!==t){try{!function(e,t){var n,i=a(t).documentElement;if(r(e),!t)return;n=i.firstChild;for(;n;)o(n,e),n=n.nextSibling}(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e}return function(e){var t=e.firstChild,n=[];for(;t;)i(t,n),t=t.nextSibling;return n.join("")}(e)}};var r=e("./clear"),o=e("./appendTo"),a=e("./util/parse"),i=e("./util/serialize")},{"./appendTo":535,"./clear":538,"./util/parse":547,"./util/serialize":548}],543:[function(e,t,n){t.exports=function(e){var t=e.parentNode;t&&t.removeChild(e);return e}},{}],544:[function(e,t,n){function r(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}t.exports=function(e,t){var n=e.transform.baseVal;{if(1===arguments.length)return n.consolidate();t.length?function(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(r(e,i));e.consolidate()}(n,t):n.initialize(r(n,t))}}},{}],545:[function(e,t,n){t.exports=function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}},{}],546:[function(e,t,n){t.exports={svg:"http://www.w3.org/2000/svg"}},{}],547:[function(e,t,n){t.exports=function(e){"<svg"===e.substring(0,4)?-1===e.indexOf(i.svg)&&(e=r+e.substring(4)):e=r+">"+e+"</svg>";return t=e,(n=new DOMParser).async=!1,n.parseFromString(t,"text/xml");var t,n};var i=e("./ns"),r='<svg xmlns="'+i.svg+'"'},{"./ns":546}],548:[function(e,t,n){t.exports=function e(t,n){var i,r,o,a,s;switch(t.nodeType){case 3:n.push(u(t.textContent,c));break;case 1:if(n.push("<",t.tagName),t.hasAttributes())for(o=t.attributes,i=0,r=o.length;i<r;++i)a=o.item(i),n.push(" ",a.name,'="',u(a.value,l),'"');if(t.hasChildNodes()){for(n.push(">"),s=t.childNodes,i=0,r=s.length;i<r;++i)e(s.item(i),n);n.push("</",t.tagName,">")}else n.push("/>");break;case 8:n.push("\x3c!--",u(t.nodeValue,c),"--\x3e");break;case 4:n.push("<![CDATA[",t.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+t.nodeType)}return n};var c=/([&<>]{1})/g,l=/([\n\r"]{1})/g,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function u(e,t){return e.replace(t,function(e,t){return i[t]||t})}},{}]},{},[1]);